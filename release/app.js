//>>built
(function(l,n){var a,g=function(){},q=function(b){for(var c in b)return 0;return 1},h={}.toString,m=function(b){return"[object Function]"==h.call(b)},f=function(b){return"[object String]"==h.call(b)},d=function(b){return"[object Array]"==h.call(b)},c=function(b,c){if(b)for(var a=0;a<b.length;)c(b[a++])},e=function(b,c){for(var a in c)b[a]=c[a];return b},b=function(b,c){return e(Error(b),{src:"dojoLoader",info:c})},k=1,s=function(){return"_"+k++},p=function(b,c,a){return aa(b,c,a,0,p)},r=this,t=r.document,
x=t&&t.createElement("DiV"),y=p.has=function(b){return m(u[b])?u[b]=u[b](r,t,x):u[b]},u=y.cache=n.hasCache;y.add=function(b,c,a,e){(void 0===u[b]||e)&&(u[b]=c);return a&&y(b)};y.add("host-webworker","undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);y("host-webworker")&&(e(n.hasCache,{"host-browser":0,dom:0,"dojo-dom-ready-api":0,"dojo-sniff":0,"dojo-inject-api":1,"host-webworker":1}),n.loaderPatch={injectUrl:function(b,c){try{importScripts(b),c()}catch(a){}}});for(var z in l.has)y.add(z,
l.has[z],0,1);p.async=1;var v=new Function("return eval(arguments[0]);");p.eval=function(b,c){return v(b+"\r\n//# sourceURL\x3d"+c)};var w={},A=p.signal=function(b,a){var e=w[b];c(e&&e.slice(0),function(b){b.apply(null,d(a)?a:[a])})},B=p.on=function(b,c){var a=w[b]||(w[b]=[]);a.push(c);return{remove:function(){for(var b=0;b<a.length;b++)if(a[b]===c){a.splice(b,1);break}}}},D=[],E={},C=[],F={},K=p.map={},I=[],G={},J="",H={},N={};z={};var Q=0,L=function(b){var c,a,e,d;for(c in N)a=N[c],(e=c.match(/^url\:(.+)/))?
H["url:"+Ca(e[1],b)]=a:"*now"==c?d=a:"*noref"!=c&&(e=na(c,b,!0),H[e.mid]=H["url:"+e.url]=a);d&&d(ba(b));N={}},Y=function(b){return b.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(b){return"\\"+b})},X=function(b,c){c.splice(0,c.length);for(var a in b)c.push([a,b[a],RegExp("^"+Y(a)+"(/|$)"),a.length]);c.sort(function(b,c){return c[3]-b[3]});return c},W=function(b,a){c(b,function(b){a.push([f(b[0])?RegExp("^"+Y(b[0])+"$"):b[0],b[1]])})},U=function(b){var c=b.name;c||(c=b,b={name:c});b=e({main:"main"},
b);b.location=b.location?b.location:c;b.packageMap&&(K[c]=b.packageMap);b.main.indexOf("./")||(b.main=b.main.substring(2));F[c]=b},P=[],R=function(b,a,d){for(var k in b){"waitSeconds"==k&&(p.waitms=1E3*(b[k]||0));"cacheBust"==k&&(J=b[k]?f(b[k])?b[k]:(new Date).getTime()+"":"");if("baseUrl"==k||"combo"==k)p[k]=b[k];b[k]!==u&&(p.rawConfig[k]=b[k],"has"!=k&&y.add("config-"+k,b[k],0,a))}p.baseUrl||(p.baseUrl="./");/\/$/.test(p.baseUrl)||(p.baseUrl+="/");for(k in b.has)y.add(k,b.has[k],0,a);c(b.packages,
U);for(var r in b.packagePaths)c(b.packagePaths[r],function(b){var c=r+"/"+b;f(b)&&(b={name:b});b.location=c;U(b)});X(e(K,b.map),I);c(I,function(b){b[1]=X(b[1],[]);"*"==b[0]&&(I.star=b)});X(e(E,b.paths),C);W(b.aliases,D);if(a)P.push({config:b.config});else for(k in b.config)a=ia(k,d),a.config=e(a.config||{},b.config[k]);b.cache&&(L(),N=b.cache,b.cache["*noref"]&&L());A("config",[b,p.rawConfig])};y("dojo-cdn");var M=t.getElementsByTagName("script");a=0;for(var O,S,da,V;a<M.length;){O=M[a++];if((da=
O.getAttribute("src"))&&(V=da.match(/(((.*)\/)|^)dojo\.js(\W|$)/i)))S=V[3]||"",n.baseUrl=n.baseUrl||S,Q=O;if(da=O.getAttribute("data-dojo-config")||O.getAttribute("djConfig"))z=p.eval("({ "+da+" })","data-dojo-config"),Q=O}p.rawConfig={};R(n,1);y("dojo-cdn")&&((F.dojo.location=S)&&(S+="/"),F.dijit.location=S+"../dijit/",F.dojox.location=S+"../dojox/");R(l,1);R(z,1);var Z=function(b){sa(function(){c(b.deps,Da)})},aa=function(c,a,k,r,t){var h;if(f(c)){if((h=ia(c,r,!0))&&h.executed)return h.result;throw b("undefinedModule",
c);}d(c)||(R(c,0,r),c=a,a=k);if(d(c))if(c.length){k="require*"+s();for(var m,x=[],q=0;q<c.length;)m=c[q++],x.push(ia(m,r));h=e(ha("",k,0,""),{injected:2,deps:x,def:a||g,require:r?r.require:p,gc:1});G[h.mid]=h;Z(h);var u=ma&&0!="sync";sa(function(){ta(h,u)});h.executed||T.push(h);oa()}else a&&a();return t},ba=function(b){if(!b)return p;var c=b.require;c||(c=function(a,e,d){return aa(a,e,d,b,c)},b.require=e(c,p),c.module=b,c.toUrl=function(c){return Ca(c,b)},c.toAbsMid=function(c){return ua(c,b)});
return c},T=[],$=[],ca={},ea=function(b){b.injected=1;ca[b.mid]=1;b.url&&(ca[b.url]=b.pack||1);Ea()},fa=function(b){b.injected=2;delete ca[b.mid];b.url&&delete ca[b.url];q(ca)&&pa()},ja=p.idle=function(){return!$.length&&q(ca)&&!T.length&&!ma},ga=function(b,c){if(c)for(var a=0;a<c.length;a++)if(c[a][2].test(b))return c[a];return 0},ka=function(b){var c=[],a,e;for(b=b.replace(/\\/g,"/").split("/");b.length;)a=b.shift(),".."==a&&c.length&&".."!=e?(c.pop(),e=c[c.length-1]):"."!=a&&c.push(e=a);return c.join("/")},
ha=function(b,c,a,e){return{pid:b,mid:c,pack:a,url:e,executed:0,def:0}},Fa=function(a,e,d,k,p,r,t,f,s){var h,x,g,q;q=/^\./.test(a);if(/(^\/)|(\:)|(\.js$)/.test(a)||q&&!e)return ha(0,a,0,a);a=ka(q?e.mid+"/../"+a:a);if(/^\./.test(a))throw b("irrationalPath",a);e&&(g=ga(e.mid,r));(g=(g=g||r.star)&&ga(a,g[1]))&&(a=g[1]+a.substring(g[3]));e=(V=a.match(/^([^\/]+)(\/(.+))?$/))?V[1]:"";(h=d[e])?a=e+"/"+(x=V[3]||h.main):e="";var u=0;c(f,function(b){var c=a.match(b[0]);c&&0<c.length&&(u=m(b[1])?a.replace(b[0],
b[1]):b[1])});if(u)return Fa(u,0,d,k,p,r,t,f,s);if(d=k[a])return s?ha(d.pid,d.mid,d.pack,d.url):k[a];k=(g=ga(a,t))?g[1]+a.substring(g[3]):e?h.location+"/"+x:y("config-tlmSiblingOfDojo")?"../"+a:a;/(^\/)|(\:)/.test(k)||(k=p+k);return ha(e,a,h,ka(k+".js"))},na=function(b,c,a){return Fa(b,c,F,G,p.baseUrl,a?[]:I,a?[]:C,a?[]:D)},Ga=function(b,c,a){return b.normalize?b.normalize(c,function(b){return ua(b,a)}):ua(c,a)},Ha=0,ia=function(b,c,a){var e,d;(e=b.match(/^(.+?)\!(.*)$/))?(d=ia(e[1],c,a),5===d.executed&&
!d.load&&va(d),d.load?(e=Ga(d,e[2],c),b=d.mid+"!"+(d.dynamic?++Ha+"!":"")+e):(e=e[2],b=d.mid+"!"+ ++Ha+"!waitingForPlugin"),b={plugin:d,mid:b,req:ba(c),prid:e}):b=na(b,c);return G[b.mid]||!a&&(G[b.mid]=b)},ua=p.toAbsMid=function(b,c){return na(b,c).mid},Ca=p.toUrl=function(b,c){var a=na(b+"/x",c),e=a.url;return Ia(0===a.pid?b:e.substring(0,e.length-5))},Ja={injected:2,executed:5,def:3,result:3};S=function(b){return G[b]=e({mid:b},Ja)};var La=S("require"),Ma=S("exports"),Na=S("module"),qa={},wa=0,
va=function(b){var c=b.result;b.dynamic=c.dynamic;b.normalize=c.normalize;b.load=c.load;return b},Oa=function(b){var a={};c(b.loadQ,function(c){var d=Ga(b,c.prid,c.req.module),k=b.dynamic?c.mid.replace(/waitingForPlugin$/,d):b.mid+"!"+d,d=e(e({},c),{mid:k,prid:d,injected:0});G[k]||Ka(G[k]=d);a[c.mid]=G[k];fa(c);delete G[c.mid]});b.loadQ=0;var d=function(b){for(var c=b.deps||[],e=0;e<c.length;e++)(b=a[c[e].mid])&&(c[e]=b)},k;for(k in G)d(G[k]);c(T,d)},xa=function(b){p.trace("loader-finish-exec",[b.mid]);
b.executed=5;b.defOrder=wa++;b.loadQ&&(va(b),Oa(b));for(a=0;a<T.length;)T[a]===b?T.splice(a,1):a++;/^require\*/.test(b.mid)&&delete G[b.mid]},Pa=[],ta=function(c,a){if(4===c.executed)return p.trace("loader-circular-dependency",[Pa.concat(c.mid).join("-\x3e")]),!c.def||a?qa:c.cjs&&c.cjs.exports;if(!c.executed){if(!c.def)return qa;var e=c.mid,d=c.deps||[],k,r=[],t=0;for(c.executed=4;k=d[t++];){k=k===La?ba(c):k===Ma?c.cjs.exports:k===Na?c.cjs:ta(k,a);if(k===qa)return c.executed=0,p.trace("loader-exec-module",
["abort",e]),qa;r.push(k)}p.trace("loader-run-factory",[c.mid]);var e=c.def,f;if(y("config-dojo-loader-catches"))try{f=m(e)?e.apply(null,r):e}catch(s){A("error",c.result=b("factoryThrew",[c,s]))}else f=m(e)?e.apply(null,r):e;c.result=void 0===f&&c.cjs?c.cjs.exports:f;xa(c)}return c.result},ma=0,sa=function(b){try{ma++,b()}finally{ma--}ja()&&A("idle",[])},oa=function(){ma||sa(function(){for(var b,c,a=0;a<T.length;)b=wa,c=T[a],ta(c),b!=wa?a=0:a++})};void 0===y("dojo-loader-eval-hint-url")&&y.add("dojo-loader-eval-hint-url",
1);var Ia="function"==typeof l.fixupUrl?l.fixupUrl:function(b){b+="";return b+(J?(/\?/.test(b)?"\x26":"?")+J:"")},Ka=function(b){var c=b.plugin;5===c.executed&&!c.load&&va(c);var a=function(c){b.result=c;fa(b);xa(b);oa()};c.load?c.load(b.prid,b.req,a):c.loadQ?c.loadQ.push(b):(c.loadQ=[b],T.unshift(c),Da(c))},la=0,ya=0,za=0,Qa=function(c,a){y("config-stripStrict")&&(c=c.replace(/"use strict"/g,""));za=1;if(y("config-dojo-loader-catches"))try{c===la?la.call(null):p.eval(c,y("dojo-loader-eval-hint-url")?
a.url:a.mid)}catch(e){A("error",b("evalModuleThrew",a))}else c===la?la.call(null):p.eval(c,y("dojo-loader-eval-hint-url")?a.url:a.mid);za=0},Da=function(c){var a=c.mid,d=c.url;if(!c.executed&&!c.injected&&!(ca[a]||c.url&&(c.pack&&ca[c.url]===c.pack||1==ca[c.url])))if(ea(c),c.plugin)Ka(c);else{var k=function(){Ra(c);if(2!==c.injected){if(y("dojo-enforceDefine")){A("error",b("noDefine",c));return}fa(c);e(c,Ja);p.trace("loader-define-nonmodule",[c.url])}oa()};(la=H[a]||H["url:"+c.url])?(p.trace("loader-inject",
["cache",c.mid,d]),Qa(la,c),k()):(p.trace("loader-inject",["script",c.mid,d]),ya=c,p.injectUrl(Ia(d),k,c),ya=0)}},Aa=function(c,a,d){p.trace("loader-define-module",[c.mid,a]);if(2===c.injected)return A("error",b("multipleDefine",c)),c;e(c,{deps:a,def:d,cjs:{id:c.mid,uri:c.url,exports:c.result={},setExports:function(b){c.cjs.exports=b},config:function(){return c.config}}});for(var k=0;a[k];k++)a[k]=ia(a[k],c);fa(c);!m(d)&&!a.length&&(c.result=d,xa(c));return c},Ra=function(b,a){for(var e=[],d,k;$.length;)k=
$.shift(),a&&(k[0]=a.shift()),d=k[0]&&ia(k[0])||b,e.push([d,k[1],k[2]]);L(b);c(e,function(b){Z(Aa.apply(null,b))})},ra=0,pa=g,Ea=g,pa=function(){ra&&clearTimeout(ra);ra=0},Ea=function(){pa();p.waitms&&(ra=r.setTimeout(function(){pa();A("error",b("timeout",ca))},p.waitms))};y.add("ie-event-behavior",t.attachEvent&&"undefined"===typeof Windows&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var Ba=function(b,c,a,e){if(y("ie-event-behavior"))return b.attachEvent(a,e),function(){b.detachEvent(a,
e)};b.addEventListener(c,e,!1);return function(){b.removeEventListener(c,e,!1)}},Sa=Ba(window,"load","onload",function(){p.pageLoaded=1;"complete"!=t.readyState&&(t.readyState="complete");Sa()}),M=t.getElementsByTagName("script");for(a=0;!Q;)if(!/^dojo/.test((O=M[a++])&&O.type))Q=O;p.injectUrl=function(c,a,e){e=e.node=t.createElement("script");var d=Ba(e,"load","onreadystatechange",function(b){b=b||window.event;var c=b.target||b.srcElement;if("load"===b.type||/complete|loaded/.test(c.readyState))d(),
k(),a&&a()}),k=Ba(e,"error","onerror",function(a){d();k();A("error",b("scriptError",[c,a]))});e.type="text/javascript";e.charset="utf-8";e.src=c;Q.parentNode.insertBefore(e,Q);return e};p.log=g;p.trace=g;O=function(c,a,e){var d=arguments.length,k=["require","exports","module"],r=[0,c,a];1==d?r=[0,m(c)?k:[],c]:2==d&&f(c)?r=[c,m(a)?k:[],a]:3==d&&(r=[c,a,e]);p.trace("loader-define",r.slice(0,2));if((d=r[0]&&ia(r[0]))&&!ca[d.mid])Z(Aa(d,r[1],r[2]));else if(!y("ie-event-behavior")||za)$.push(r);else{d=
d||ya;if(!d)for(c in ca)if((k=G[c])&&k.node&&"interactive"===k.node.readyState){d=k;break}d?(L(d),Z(Aa(d,r[1],r[2]))):A("error",b("ieDefineFailed",r[0]));oa()}};O.amd={vendor:"dojotoolkit.org"};e(e(p,n.loaderPatch),l.loaderPatch);B("error",function(b){try{if(b instanceof Error)for(var c in b);}catch(a){}});e(p,{uid:s,cache:H,packs:F});r.define||(r.define=O,r.require=p,c(P,function(b){R(b)}),B=z.deps||l.deps||n.deps,z=z.callback||l.callback||n.callback,p.boot=B||z?[B||[],z]:0)})(this.dojoConfig||this.djConfig||
this.require||{},{async:0,deps:["app/main"],hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},isDebug:!0,map:{"*":{"dojox/dgauges":"dgauges"}},packages:[{location:"../app",name:"app"},{location:"../dijit",name:"dijit"},{location:".",name:"dojo"},{location:"../dojox",name:"dojox"},{location:"../dstore",main:"Store",name:"dstore"},{location:"../dmodel",main:"Model",name:"dmodel"},{location:"../dgrid",main:"OnDemandGrid",name:"dgrid"},
{location:"../xstyle",name:"xstyle"},{location:"../put-selector",main:"put",name:"put-selector"},{location:"../esri",name:"esri"},{location:"../dgauges",name:"dgauges"}],parseOnLoad:!0});
require({cache:{"app/main":function(){define(["exports","module","app/templates/Application","app/router","app/config"],function(l,n,a,g,q){function h(c){return c&&c.__esModule?c:{"default":c}}var m=h(a);l=h(g);q=h(q);var f=document.getElementById("app-container");l=new l["default"];var d,c;q["default"].webmap&&q["default"].webmap.webmapid&&(c=q["default"].webmap.webmapid);l.on("query-params",function(a){a&&a.mapid&&(c=a.mapid);d||(d=new m["default"]({webmapid:c},f))});c?d=new m["default"]({webmapid:c},
f):q["default"].mapOptions&&(d=new m["default"]({mapOptions:q["default"].mapOptions},f));l.start();n.exports=d})},"app/templates/Application":function(){define("exports module dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin app/components/map/MapView app/components/legend/View dojo/text!./Application.html".split(" "),function(l,n,a,g,q,h,m,f){function d(b){return b&&b.__esModule?b:{"default":b}}l=d(a);g=d(g);q=d(q);var c=d(h),e=d(m);h=d(f);n.exports=(0,l["default"])([g["default"],q["default"]],
{templateString:h["default"],postCreate:function(){var b=document.getElementById("map-view"),a=document.getElementById("legend-view"),d=this.get("mapOptions"),b=new c["default"]({mapOptions:d},b),a=new e["default"]({},a);this.set("map",b);this.set("legend",a)},destroy:function(){this.legend.destroy();this.map.destroy()}})})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(l,n,a){function g(b,c){throw Error("declare"+(c?" "+c:"")+": "+b);}function q(b,c,a){var e,d,k,
p,r,t,f,s=this._inherited=this._inherited||{};"string"==typeof b&&(e=b,b=c,c=a);a=0;p=b.callee;(e=e||p.nom)||g("can't deduce a name to call inherited()",this.declaredClass);r=this.constructor._meta;k=r.bases;f=s.p;if(e!=A){if(s.c!==p&&(f=0,t=k[0],r=t._meta,r.hidden[e]!==p)){(d=r.chains)&&"string"==typeof d[e]&&g("calling chained method with inherited: "+e,this.declaredClass);do if(r=t._meta,d=t.prototype,r&&(d[e]===p&&d.hasOwnProperty(e)||r.hidden[e]===p))break;while(t=k[++f]);f=t?f:-1}if(t=k[++f])if(d=
t.prototype,t._meta&&d.hasOwnProperty(e))a=d[e];else{p=u[e];do if(d=t.prototype,(a=d[e])&&(t._meta?d.hasOwnProperty(e):a!==p))break;while(t=k[++f])}a=t&&a||u[e]}else{if(s.c!==p&&(f=0,(r=k[0]._meta)&&r.ctor!==p)){d=r.chains;for((!d||"manual"!==d.constructor)&&g("calling chained constructor with inherited",this.declaredClass);(t=k[++f])&&!((r=t._meta)&&r.ctor===p););f=t?f:-1}for(;(t=k[++f])&&!(a=(r=t._meta)?r.ctor:t););a=t&&a}s.c=a;s.p=f;if(a)return!0===c?a:a.apply(this,c||b)}function h(b,c){return"string"==
typeof b?this.__inherited(b,c,!0):this.__inherited(b,!0)}function m(b,c,a){var e=this.getInherited(b,c);if(e)return e.apply(this,a||c||b)}function f(b){for(var c=this.constructor._meta.bases,a=0,e=c.length;a<e;++a)if(c[a]===b)return!0;return this instanceof b}function d(b,c){for(var e in c)e!=A&&c.hasOwnProperty(e)&&(b[e]=c[e]);if(n("bug-for-in-skips-shadowed"))for(var d=a._extraNames,k=d.length;k;)e=d[--k],e!=A&&c.hasOwnProperty(e)&&(b[e]=c[e])}function c(b){x.safeMixin(this.prototype,b);return this}
function e(b,c){b instanceof Array||"function"==typeof b||(c=b,b=void 0);c=c||{};b=b||[];return x([this].concat(b),c)}function b(b,c){return function(){var a=arguments,e=a,d=a[0],k,p;p=b.length;var r;if(!(this instanceof a.callee))return t(a);if(c&&(d&&d.preamble||this.preamble)){r=Array(b.length);r[0]=a;for(k=0;;){if(d=a[0])(d=d.preamble)&&(a=d.apply(this,a)||a);d=b[k].prototype;(d=d.hasOwnProperty("preamble")&&d.preamble)&&(a=d.apply(this,a)||a);if(++k==p)break;r[k]=a}}for(k=p-1;0<=k;--k)d=b[k],
(d=(p=d._meta)?p.ctor:d)&&d.apply(this,r?r[k]:a);(d=this.postscript)&&d.apply(this,e)}}function k(b,c){return function(){var a=arguments,e=a,d=a[0];if(!(this instanceof a.callee))return t(a);c&&(d&&(d=d.preamble)&&(e=d.apply(this,e)||e),(d=this.preamble)&&d.apply(this,e));b&&b.apply(this,a);(d=this.postscript)&&d.apply(this,a)}}function s(b){return function(){var c=arguments,a=0,e,d;if(!(this instanceof c.callee))return t(c);for(;e=b[a];++a)if(e=(d=e._meta)?d.ctor:e){e.apply(this,c);break}(e=this.postscript)&&
e.apply(this,c)}}function p(b,c,a){return function(){var e,d,k=0,p=1;a&&(k=c.length-1,p=-1);for(;e=c[k];k+=p)d=e._meta,(e=(d?d.hidden:e.prototype)[b])&&e.apply(this,arguments)}}function r(b){v.prototype=b.prototype;b=new v;v.prototype=null;return b}function t(b){var c=b.callee,a=r(c);c.apply(a,b);return a}function x(t,m,l){"string"!=typeof t&&(l=m,m=t,t="");l=l||{};var F,v,n,G,J,H,N,Q=1,L=m;if("[object Array]"==z.call(m)){Q=t;n=[];G=[{cls:0,refs:[]}];H={};for(var Y=1,X=m.length,W=0,U,P,R,M;W<X;++W){(U=
m[W])?"[object Function]"!=z.call(U)&&g("mixin #"+W+" is not a callable constructor.",Q):g("mixin #"+W+" is unknown. Did you use dojo.require to pull it in?",Q);P=U._meta?U._meta.bases:[U];R=0;for(U=P.length-1;0<=U;--U)M=P[U].prototype,M.hasOwnProperty("declaredClass")||(M.declaredClass="uniqName_"+w++),M=M.declaredClass,H.hasOwnProperty(M)||(H[M]={count:0,refs:[],cls:P[U]},++Y),M=H[M],R&&R!==M&&(M.refs.push(R),++R.count),R=M;++R.count;G[0].refs.push(R)}for(;G.length;){R=G.pop();n.push(R.cls);for(--Y;v=
R.refs,1==v.length;){R=v[0];if(!R||--R.count){R=0;break}n.push(R.cls);--Y}if(R){W=0;for(X=v.length;W<X;++W)R=v[W],--R.count||G.push(R)}}Y&&g("can't build consistent linearization",Q);U=m[0];n[0]=U?U._meta&&U===n[n.length-U._meta.bases.length]?U._meta.bases.length:1:0;H=n;n=H[0];Q=H.length-n;m=H[Q]}else H=[0],m?"[object Function]"==z.call(m)?(n=m._meta,H=H.concat(n?n.bases:m)):g("base class is not a callable constructor.",t):null!==m&&g("unknown base class. Did you use dojo.require to pull it in?",
t);if(m)for(v=Q-1;;--v){F=r(m);if(!v)break;n=H[v];(n._meta?d:y)(F,n.prototype);G=new Function;G.superclass=m;G.prototype=F;m=F.constructor=G}else F={};x.safeMixin(F,l);n=l.constructor;n!==u.constructor&&(n.nom=A,F.constructor=n);for(v=Q-1;v;--v)(n=H[v]._meta)&&n.chains&&(N=y(N||{},n.chains));F["-chains-"]&&(N=y(N||{},F["-chains-"]));n=!N||!N.hasOwnProperty(A);H[0]=G=N&&"manual"===N.constructor?s(H):1==H.length?k(l.constructor,n):b(H,n);G._meta={bases:H,hidden:l,chains:N,parents:L,ctor:l.constructor};
G.superclass=m&&m.prototype;G.extend=c;G.createSubclass=e;G.prototype=F;F.constructor=G;F.getInherited=h;F.isInstanceOf=f;F.inherited=B;F.__inherited=q;t&&(F.declaredClass=t,a.setObject(t,G));if(N)for(J in N)F[J]&&("string"==typeof N[J]&&J!=A)&&(n=F[J]=p(J,H,"after"===N[J]),n.nom=J);return G}var y=a.mixin,u=Object.prototype,z=u.toString,v=new Function,w=0,A="constructor",B=l.config.isDebug?m:q;l.safeMixin=x.safeMixin=function(b,c){var e,d;for(e in c)if(d=c[e],(d!==u[e]||!(e in u))&&e!=A)"[object Function]"==
z.call(d)&&(d.nom=e),b[e]=d;if(n("bug-for-in-skips-shadowed"))for(var k=a._extraNames,p=k.length;p;)if(e=k[--p],d=c[e],(d!==u[e]||!(e in u))&&e!=A)"[object Function]"==z.call(d)&&(d.nom=e),b[e]=d;return b};return l.declare=x})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(l,n,a,g){var q,h;q=function(){return this}();var m={},f={},d={config:n,global:q,dijit:m,dojox:f},m={dojo:["dojo",d],dijit:["dijit",m],dojox:["dojox",f]};g=a.map&&a.map[g.id.match(/[^\/]+/)[0]];
for(h in g)m[h]?m[h][0]=g[h]:m[h]=[g[h],{}];for(h in m)g=m[h],g[1]._scopeName=g[0],n.noGlobals||(q[g[0]]=g[1]);d.scopeMap=m;d.baseUrl=d.config.baseUrl=a.baseUrl;d.isAsync=a.async;d.locale=n.locale;q="$Rev: f4fef70 $".match(/[0-9a-f]{7,}/);d.version={major:1,minor:10,patch:4,flag:"",revision:q?q[0]:NaN,toString:function(){var c=d.version;return c.major+"."+c.minor+"."+c.patch+c.flag+" ("+c.revision+")"}};Function("d","d.eval \x3d function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(d);
d.exit=function(){};"undefined"!=typeof console||(console={});g="assert count debug dir dirxml error group groupEnd info profile profileEnd time timeEnd trace warn log".split(" ");var c;for(q=0;c=g[q++];)console[c]||function(){var a=c+"";console[a]="log"in console?function(){var b=Array.prototype.slice.call(arguments);b.unshift(a+":");console.log(b.join(" "))}:function(){};console[a]._fake=!0}();l.add("dojo-debug-messages",!!n.isDebug);d.deprecated=d.experimental=function(){};l("dojo-debug-messages")&&
(d.deprecated=function(c,b,a){},d.experimental=function(c,b){});if(n.modulePaths){d.deprecated("dojo.modulePaths","use paths configuration");l={};for(h in n.modulePaths)l[h.replace(/\./g,"/")]=n.modulePaths[h];a({paths:l})}d.moduleUrl=function(c,b){d.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var k=null;c&&(k=a.toUrl(c.replace(/\./g,"/")+(b?"/"+b:"")+"/*.*").replace(/\/\*\.\*/,"")+(b?"":"/"));return k};d._hasResource={};return d})},"dojo/has":function(){define(["require","module"],function(l,
n){var a=l.has||function(){};a.add("dom-addeventlistener",!!document.addEventListener);a.add("touch","ontouchstart"in document||"onpointerdown"in document&&0<navigator.maxTouchPoints||window.navigator.msMaxTouchPoints);a.add("touch-events","ontouchstart"in document);a.add("pointer-events","onpointerdown"in document);a.add("MSPointer","msMaxTouchPoints"in navigator);a.add("device-width",screen.availWidth||innerWidth);var g=document.createElement("form");a.add("dom-attributes-explicit",0==g.attributes.length);
a.add("dom-attributes-specified-flag",0<g.attributes.length&&40>g.attributes.length);a.clearElement=function(a){a.innerHTML="";return a};a.normalize=function(g,h){var m=g.match(/[\?:]|[^:\?]*/g),f=0,d=function(c){var e=m[f++];if(":"==e)return 0;if("?"==m[f++]){if(!c&&a(e))return d();d(!0);return d(c)}return e||0};return(g=d())&&h(g)};a.load=function(a,h,m){a?h([a],m):m()};return a})},"dojo/_base/config":function(){define(["../has","require"],function(l,n){var a={},g=n.rawConfig,q;for(q in g)a[q]=
g[q];if(!a.locale&&"undefined"!=typeof navigator&&(g=navigator.language||navigator.userLanguage))a.locale=g.toLowerCase();return a})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(l,n){n.add("bug-for-in-skips-shadowed",function(){for(var c in{toString:1})return 0;return 1});var a=n("bug-for-in-skips-shadowed")?"hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" "):[],g=a.length,q=function(c,a,b){b||(b=c[0]&&l.scopeMap[c[0]]?
l.scopeMap[c.shift()][1]:l.global);try{for(var d=0;d<c.length;d++){var f=c[d];if(!(f in b))if(a)b[f]={};else return;b=b[f]}return b}catch(p){}},h=Object.prototype.toString,m=function(c,a,b){return(b||[]).concat(Array.prototype.slice.call(c,a||0))},f=/\{([^\}]+)\}/g,d={_extraNames:a,_mixin:function(c,e,b){var d,f,p,r={};for(d in e)if(f=e[d],!(d in c)||c[d]!==f&&(!(d in r)||r[d]!==f))c[d]=b?b(f):f;if(n("bug-for-in-skips-shadowed")&&e)for(p=0;p<g;++p)if(d=a[p],f=e[d],!(d in c)||c[d]!==f&&(!(d in r)||
r[d]!==f))c[d]=b?b(f):f;return c},mixin:function(c,a){c||(c={});for(var b=1,k=arguments.length;b<k;b++)d._mixin(c,arguments[b]);return c},setObject:function(c,a,b){var d=c.split(".");c=d.pop();return(b=q(d,!0,b))&&c?b[c]=a:void 0},getObject:function(c,a,b){return q(c?c.split("."):[],a,b)},exists:function(c,a){return void 0!==d.getObject(c,!1,a)},isString:function(c){return"string"==typeof c||c instanceof String},isArray:function(c){return c&&(c instanceof Array||"array"==typeof c)},isFunction:function(c){return"[object Function]"===
h.call(c)},isObject:function(c){return void 0!==c&&(null===c||"object"==typeof c||d.isArray(c)||d.isFunction(c))},isArrayLike:function(c){return c&&void 0!==c&&!d.isString(c)&&!d.isFunction(c)&&!(c.tagName&&"form"==c.tagName.toLowerCase())&&(d.isArray(c)||isFinite(c.length))},isAlien:function(c){return c&&!d.isFunction(c)&&/\{\s*\[native code\]\s*\}/.test(String(c))},extend:function(c,a){for(var b=1,k=arguments.length;b<k;b++)d._mixin(c.prototype,arguments[b]);return c},_hitchArgs:function(c,a){var b=
d._toArray(arguments,2),k=d.isString(a);return function(){var f=d._toArray(arguments),p=k?(c||l.global)[a]:a;return p&&p.apply(c||this,b.concat(f))}},hitch:function(c,a){if(2<arguments.length)return d._hitchArgs.apply(l,arguments);a||(a=c,c=null);if(d.isString(a)){c=c||l.global;if(!c[a])throw['lang.hitch: scope["',a,'"] is null (scope\x3d"',c,'")'].join("");return function(){return c[a].apply(c,arguments||[])}}return!c?a:function(){return a.apply(c,arguments||[])}},delegate:function(){function c(){}
return function(a,b){c.prototype=a;var k=new c;c.prototype=null;b&&d._mixin(k,b);return k}}(),_toArray:n("ie")?function(){function c(c,b,a){a=a||[];for(b=b||0;b<c.length;b++)a.push(c[b]);return a}return function(a){return(a.item?c:m).apply(this,arguments)}}():m,partial:function(c){return d.hitch.apply(l,[null].concat(d._toArray(arguments)))},clone:function(c){if(!c||"object"!=typeof c||d.isFunction(c))return c;if(c.nodeType&&"cloneNode"in c)return c.cloneNode(!0);if(c instanceof Date)return new Date(c.getTime());
if(c instanceof RegExp)return RegExp(c);var a,b,k;if(d.isArray(c)){a=[];b=0;for(k=c.length;b<k;++b)b in c&&a.push(d.clone(c[b]))}else a=c.constructor?new c.constructor:{};return d._mixin(a,c,d.clone)},trim:String.prototype.trim?function(c){return c.trim()}:function(c){return c.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(c,a,b){return c.replace(b||f,d.isFunction(a)?a:function(b,c){return d.getObject(c,!1,a)})}};d.mixin(l,d);return d})},"dojo/sniff":function(){define(["./has"],function(l){var n=
navigator,a=n.userAgent,n=n.appVersion,g=parseFloat(n);l.add("air",0<=a.indexOf("AdobeAIR"));l.add("msapp",parseFloat(a.split("MSAppHost/")[1])||void 0);l.add("khtml",0<=n.indexOf("Konqueror")?g:void 0);l.add("webkit",parseFloat(a.split("WebKit/")[1])||void 0);l.add("chrome",parseFloat(a.split("Chrome/")[1])||void 0);l.add("safari",0<=n.indexOf("Safari")&&!l("chrome")?parseFloat(n.split("Version/")[1]):void 0);l.add("mac",0<=n.indexOf("Macintosh"));l.add("quirks","BackCompat"==document.compatMode);
if(a.match(/(iPhone|iPod|iPad)/)){var q=RegExp.$1.replace(/P/,"p"),h=a.match(/OS ([\d_]+)/)?RegExp.$1:"1",h=parseFloat(h.replace(/_/,".").replace(/_/g,""));l.add(q,h);l.add("ios",h)}l.add("android",parseFloat(a.split("Android ")[1])||void 0);l.add("bb",(0<=a.indexOf("BlackBerry")||0<=a.indexOf("BB10"))&&parseFloat(a.split("Version/")[1])||void 0);l.add("trident",parseFloat(n.split("Trident/")[1])||void 0);l.add("svg","undefined"!==typeof SVGAngle);l("webkit")||(0<=a.indexOf("Opera")&&l.add("opera",
9.8<=g?parseFloat(a.split("Version/")[1])||g:g),0<=a.indexOf("Gecko")&&(!l("khtml")&&!l("webkit")&&!l("trident"))&&l.add("mozilla",g),l("mozilla")&&l.add("ff",parseFloat(a.split("Firefox/")[1]||a.split("Minefield/")[1])||void 0),document.all&&!l("opera")&&(a=parseFloat(n.split("MSIE ")[1])||void 0,(n=document.documentMode)&&(5!=n&&Math.floor(a)!=n)&&(a=n),l.add("ie",a)),l.add("wii","undefined"!=typeof opera&&opera.wiiremote));return l})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),
function(l,n,a,g,q,h,m,f,d,c,e,b,k,s,p,r,t,x,y,u,z,v,w){function A(b){return function(c){f[c?"set":"remove"](this.domNode,b,c);this._set(b,c)}}k.add("dijit-legacy-requires",!s.isAsync);k.add("dojo-bidi",!1);k("dijit-legacy-requires")&&t(0,function(){l(["dijit/_base/manager"])});var B={};g=h("dijit._WidgetBase",[x,z],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:A("lang"),dir:"",_setDirAttr:A("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",
baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(b){this._set("ownerDocument",b)},attributeMap:{},_blankGif:g.blankGif||l.toUrl("dojo/resources/blank.gif"),_introspect:function(){var b=this.constructor;if(!b._setterAttrs){var c=b.prototype,a=b._setterAttrs=[],b=b._onMap={},e;for(e in c.attributeMap)a.push(e);for(e in c)/^on/.test(e)&&(b[e.substring(2).toLowerCase()]=e),/^_set[A-Z](.*)Attr$/.test(e)&&(e=e.charAt(4).toLowerCase()+e.substr(5,
e.length-9),(!c.attributeMap||!(e in c.attributeMap))&&a.push(e))}},postscript:function(b,c){this.create(b,c)},create:function(b,c){this._introspect();this.srcNodeRef=m.byId(c);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);b&&(this.params=b,p.mixin(this,b));this.postMixInProperties();this.id||(this.id=w.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=this.ownerDocument||
(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=u.body(this.ownerDocument);w.add(this);this.buildRendering();var a;if(this.domNode){this._applyAttributes();var e=this.srcNodeRef;e&&(e.parentNode&&this.domNode!==e)&&(e.parentNode.replaceChild(this.domNode,e),a=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();a&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var b={},c;for(c in this.params||{})b[c]=this._get(c);n.forEach(this.constructor._setterAttrs,
function(c){if(!(c in b)){var a=this._get(c);a&&this.set(c,a)}},this);for(c in b)this.set(c,b[c])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var b=this.baseClass.split(" ");this.isLeftToRight()||(b=b.concat(n.map(b,function(b){return b+"Rtl"})));d.add(this.domNode,b)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,n.forEach(this.getChildren(),function(b){!b._started&&
(!b._destroyed&&p.isFunction(b.startup))&&(b.startup(),b._started=!0)}))},destroyRecursive:function(b){this._beingDestroyed=!0;this.destroyDescendants(b);this.destroy(b)},destroy:function(b){function c(a){a.destroyRecursive?a.destroyRecursive(b):a.destroy&&a.destroy(b)}this._beingDestroyed=!0;this.uninitialize();n.forEach(this._connects,p.hitch(this,"disconnect"));n.forEach(this._supportingWidgets,c);this.domNode&&n.forEach(w.findWidgets(this.domNode,this.containerNode),c);this.destroyRendering(b);
w.remove(this.id);this._destroyed=!0},destroyRendering:function(b){this.bgIframe&&(this.bgIframe.destroy(b),delete this.bgIframe);this.domNode&&(b?f.remove(this.domNode,"widgetId"):c.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(b||c.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(b){n.forEach(this.getChildren(),function(c){c.destroyRecursive&&c.destroyRecursive(b)})},uninitialize:function(){return!1},_setStyleAttr:function(c){var a=this.domNode;p.isObject(c)?
b.set(a,c):a.style.cssText=a.style.cssText?a.style.cssText+("; "+c):c;this._set("style",c)},_attrToDom:function(b,c,a){a=3<=arguments.length?a:this.attributeMap[b];n.forEach(p.isArray(a)?a:[a],function(a){var e=this[a.node||a||"domNode"];switch(a.type||"attribute"){case "attribute":p.isFunction(c)&&(c=p.hitch(this,c));a=a.attribute?a.attribute:/^on[A-Z][a-zA-Z]*$/.test(b)?b.toLowerCase():b;e.tagName?f.set(e,a,c):e.set(a,c);break;case "innerText":e.innerHTML="";e.appendChild(this.ownerDocument.createTextNode(c));
break;case "innerHTML":e.innerHTML=c;break;case "class":d.replace(e,c,this[b])}},this)},get:function(b){var c=this._getAttrNames(b);return this[c.g]?this[c.g]():this._get(b)},set:function(b,c){if("object"===typeof b){for(var a in b)this.set(a,b[a]);return this}a=this._getAttrNames(b);var e=this[a.s];if(p.isFunction(e))var d=e.apply(this,Array.prototype.slice.call(arguments,1));else{var e=this.focusNode&&!p.isFunction(this.focusNode)?"focusNode":"domNode",k=this[e]&&this[e].tagName,r;if(r=k)if(!(r=
B[k])){r=this[e];var t={},f;for(f in r)t[f.toLowerCase()]=!0;r=B[k]=t}f=r;a=b in this.attributeMap?this.attributeMap[b]:a.s in this?this[a.s]:f&&a.l in f&&"function"!=typeof c||/^aria-|^data-|^role$/.test(b)?e:null;null!=a&&this._attrToDom(b,c,a);this._set(b,c)}return d||this},_attrPairNames:{},_getAttrNames:function(b){var c=this._attrPairNames;if(c[b])return c[b];var a=b.replace(/^[a-z]|-[a-zA-Z]/g,function(b){return b.charAt(b.length-1).toUpperCase()});return c[b]={n:b+"Node",s:"_set"+a+"Attr",
g:"_get"+a+"Attr",l:a.toLowerCase()}},_set:function(b,c){var a=this[b];this[b]=c;if(this._created&&!(a===c||a!==a&&c!==c))this._watchCallbacks&&this._watchCallbacks(b,a,c),this.emit("attrmodified-"+b,{detail:{prevValue:a,newValue:c}})},_get:function(b){return this[b]},emit:function(b,c,a){c=c||{};void 0===c.bubbles&&(c.bubbles=!0);void 0===c.cancelable&&(c.cancelable=!0);c.detail||(c.detail={});c.detail.widget=this;var e,d=this["on"+b];d&&(e=d.apply(this,a?a:[c]));this._started&&!this._beingDestroyed&&
r.emit(this.domNode,b.toLowerCase(),c);return e},on:function(b,c){var e=this._onMap(b);return e?a.after(this,e,c,!0):this.own(r(this.domNode,b,c))[0]},_onMap:function(b){var c=this.constructor,a=c._onMap;if(!a){var a=c._onMap={},e;for(e in c.prototype)/^on/.test(e)&&(a[e.replace(/^on/,"").toLowerCase()]=e)}return a["string"==typeof b&&b.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?w.findWidgets(this.containerNode):
[]},getParent:function(){return w.getEnclosingWidget(this.domNode.parentNode)},connect:function(b,c,a){return this.own(q.connect(b,c,this,a))[0]},disconnect:function(b){b.remove()},subscribe:function(b,c){return this.own(y.subscribe(b,p.hitch(this,c)))[0]},unsubscribe:function(b){b.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():e.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=b.get(this.domNode,"display")},placeAt:function(b,a){var e=
!b.tagName&&w.byId(b);e&&e.addChild&&(!a||"number"===typeof a)?e.addChild(this,a):(e=e&&"domNode"in e?e.containerNode&&!/after|before|replace/.test(a||"")?e.containerNode:e.domNode:m.byId(b,this.ownerDocument),c.place(this.domNode,e,a),!this._started&&(this.getParent()||{})._started&&this.startup());return this},defer:function(b,c){var a=setTimeout(p.hitch(this,function(){a&&(a=null,this._destroyed||p.hitch(this,b)())}),c||0);return{remove:function(){a&&(clearTimeout(a),a=null);return null}}}});k("dojo-bidi")&&
g.extend(v);return g})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(l,n,a){function g(c){return m[c]=new Function("item","index","array",c)}function q(c){var a=!c;return function(b,d,f){var p=0,r=b&&b.length||0,t;r&&"string"==typeof b&&(b=b.split(""));"string"==typeof d&&(d=m[d]||g(d));if(f)for(;p<r;++p){if(t=!d.call(f,b[p],p,b),c^t)return!t}else for(;p<r;++p)if(t=!d(b[p],p,b),c^t)return!t;return a}}function h(c){var a=1,b=0,k=0;c||(a=b=k=-1);return function(s,p,r,
t){if(t&&0<a)return d.lastIndexOf(s,p,r);t=s&&s.length||0;var h=c?t+k:b;r===f?r=c?b:t+k:0>r?(r=t+r,0>r&&(r=b)):r=r>=t?t+k:r;for(t&&"string"==typeof s&&(s=s.split(""));r!=h;r+=a)if(s[r]==p)return r;return-1}}var m={},f,d={every:q(!1),some:q(!0),indexOf:h(!0),lastIndexOf:h(!1),forEach:function(c,a,b){var d=0,f=c&&c.length||0;f&&"string"==typeof c&&(c=c.split(""));"string"==typeof a&&(a=m[a]||g(a));if(b)for(;d<f;++d)a.call(b,c[d],d,c);else for(;d<f;++d)a(c[d],d,c)},map:function(c,a,b,d){var f=0,p=c&&
c.length||0;d=new (d||Array)(p);p&&"string"==typeof c&&(c=c.split(""));"string"==typeof a&&(a=m[a]||g(a));if(b)for(;f<p;++f)d[f]=a.call(b,c[f],f,c);else for(;f<p;++f)d[f]=a(c[f],f,c);return d},filter:function(c,a,b){var d=0,f=c&&c.length||0,p=[],r;f&&"string"==typeof c&&(c=c.split(""));"string"==typeof a&&(a=m[a]||g(a));if(b)for(;d<f;++d)r=c[d],a.call(b,r,d,c)&&p.push(r);else for(;d<f;++d)r=c[d],a(r,d,c)&&p.push(r);return p},clearCache:function(){m={}}};a.mixin(l,d);return d})},"dojo/aspect":function(){define([],
function(){function l(a,d,c,e){var b=a[d],k="around"==d,h;if(k){var p=c(function(){return b.advice(this,arguments)});h={remove:function(){p&&(p=a=c=null)},advice:function(c,a){return p?p.apply(c,a):b.advice(c,a)}}}else h={remove:function(){if(h.advice){var b=h.previous,e=h.next;!e&&!b?delete a[d]:(b?b.next=e:a[d]=e,e&&(e.previous=b));a=c=h.advice=null}},id:g++,advice:c,receiveArguments:e};if(b&&!k)if("after"==d){for(;b.next&&(b=b.next););b.next=h;h.previous=b}else"before"==d&&(a[d]=h,h.next=b,b.previous=
h);else a[d]=h;return h}function n(f){return function(d,c,e,b){var k=d[c],h;if(!k||k.target!=d)d[c]=h=function(){for(var b=g,c=arguments,e=h.before;e;)c=e.advice.apply(this,c)||c,e=e.next;if(h.around)var d=h.around.advice(this,c);for(e=h.after;e&&e.id<b;){if(e.receiveArguments)var k=e.advice.apply(this,c),d=k===a?d:k;else d=e.advice.call(this,d,c);e=e.next}return d},k&&(h.around={advice:function(b,c){return k.apply(b,c)}}),h.target=d;d=l(h||k,f,e,b);e=null;return d}}var a,g=0,q=n("after"),h=n("before"),
m=n("around");return{before:h,around:m,after:q}})},"dojo/_base/connect":function(){define("./kernel ../on ../topic ../aspect ./event ../mouse ./sniff ./lang ../keys".split(" "),function(l,n,a,g,q,h,m,f){function d(b,c,a,e,d){e=f.hitch(a,e);if(!b||!b.addEventListener&&!b.attachEvent)return g.after(b||l.global,c,e,!0);"string"==typeof c&&"on"==c.substring(0,2)&&(c=c.substring(2));b||(b=l.global);if(!d)switch(c){case "keypress":c=s;break;case "mouseenter":c=h.enter;break;case "mouseleave":c=h.leave}return n(b,
c,e,d)}function c(b){b.keyChar=b.charCode?String.fromCharCode(b.charCode):"";b.charOrCode=b.keyChar||b.keyCode}m.add("events-keypress-typed",function(){var b={charCode:0};try{b=document.createEvent("KeyboardEvent"),(b.initKeyboardEvent||b.initKeyEvent).call(b,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(c){}return 0==b.charCode&&!m("opera")});var e={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},b=m("mac")?"metaKey":"ctrlKey",k=function(b,a){var e=
f.mixin({},b,a);c(e);e.preventDefault=function(){b.preventDefault()};e.stopPropagation=function(){b.stopPropagation()};return e},s;s=m("events-keypress-typed")?function(b,c){var a=n(b,"keydown",function(b){var a=b.keyCode,d=13!=a&&32!=a&&(27!=a||!m("ie"))&&(48>a||90<a)&&(96>a||111<a)&&(186>a||192<a)&&(219>a||222<a)&&229!=a;if(d||b.ctrlKey){d=d?0:a;if(b.ctrlKey){if(3==a||13==a)return c.call(b.currentTarget,b);d=95<d&&106>d?d-48:!b.shiftKey&&65<=d&&90>=d?d+32:e[d]||d}a=k(b,{type:"keypress",faux:!0,
charCode:d});c.call(b.currentTarget,a);if(m("ie"))try{b.keyCode=a.keyCode}catch(p){}}}),d=n(b,"keypress",function(b){var a=b.charCode;b=k(b,{charCode:32<=a?a:0,faux:!0});return c.call(this,b)});return{remove:function(){a.remove();d.remove()}}}:m("opera")?function(b,c){return n(b,"keypress",function(b){var a=b.which;3==a&&(a=99);a=32>a&&!b.shiftKey?0:a;b.ctrlKey&&(!b.shiftKey&&65<=a&&90>=a)&&(a+=32);return c.call(this,k(b,{charCode:a}))})}:function(b,a){return n(b,"keypress",function(b){c(b);return a.call(this,
b)})};var p={_keypress:s,connect:function(b,c,a,e,k){var p=arguments,f=[],h=0;f.push("string"==typeof p[0]?null:p[h++],p[h++]);var s=p[h+1];f.push("string"==typeof s||"function"==typeof s?p[h++]:null,p[h++]);for(s=p.length;h<s;h++)f.push(p[h]);return d.apply(this,f)},disconnect:function(b){b&&b.remove()},subscribe:function(b,c,e){return a.subscribe(b,f.hitch(c,e))},publish:function(b,c){return a.publish.apply(a,[b].concat(c))},connectPublisher:function(b,c,a){var e=function(){p.publish(b,arguments)};
return a?p.connect(c,a,e):p.connect(c,e)},isCopyKey:function(c){return c[b]}};p.unsubscribe=p.disconnect;f.mixin(l,p);return p})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(l,n,a){function g(c,e,k,p,r){if(p=e.match(/(.*):(.*)/))return e=p[2],p=p[1],f.selector(p,e).call(r,c,k);a("touch")&&(d.test(e)&&(k=w(k)),!a("event-orientationchange")&&"orientationchange"==e&&(e="resize",c=window,k=w(k)));s&&(k=s(k));if(c.addEventListener){var t=e in
b,h=t?b[e]:e;c.addEventListener(h,k,t);return{remove:function(){c.removeEventListener(h,k,t)}}}if(x&&c.attachEvent)return x(c,"on"+e,k);throw Error("Target must be an event emitter");}function q(){this.cancelable=!1;this.defaultPrevented=!0}function h(){this.bubbles=!1}var m=window.ScriptEngineMajorVersion;a.add("jscript",m&&m()+ScriptEngineMinorVersion()/10);a.add("event-orientationchange",a("touch")&&!a("android"));a.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);
a.add("event-focusin",function(b,c,a){return"onfocusin"in a});a("touch")&&a.add("touch-can-modify-event-delegate",function(){var b=function(){};b.prototype=document.createEvent("MouseEvents");try{var c=new b;c.target=null;return null===c.target}catch(a){return!1}});var f=function(b,c,a,e){return"function"==typeof b.on&&"function"!=typeof c&&!b.nodeType?b.on(c,a):f.parse(b,c,a,g,e,this)};f.pausable=function(b,c,a,e){var d;b=f(b,c,function(){if(!d)return a.apply(this,arguments)},e);b.pause=function(){d=
!0};b.resume=function(){d=!1};return b};f.once=function(b,c,a,e){var d=f(b,c,function(){d.remove();return a.apply(this,arguments)});return d};f.parse=function(b,c,a,e,d,k){if(c.call)return c.call(k,b,a);if(c instanceof Array)p=c;else if(-1<c.indexOf(","))var p=c.split(/\s*,\s*/);if(p){var r=[];c=0;for(var t;t=p[c++];)r.push(f.parse(b,t,a,e,d,k));r.remove=function(){for(var b=0;b<r.length;b++)r[b].remove()};return r}return e(b,c,a,d,k)};var d=/^touch/;f.matches=function(b,c,a,e,d){d=d&&d.matches?d:
n.query;e=!1!==e;1!=b.nodeType&&(b=b.parentNode);for(;!d.matches(b,c,a);)if(b==a||!1===e||!(b=b.parentNode)||1!=b.nodeType)return!1;return b};f.selector=function(b,c,a){return function(e,d){function k(c){return f.matches(c,b,e,a,p)}var p="function"==typeof b?{matches:b}:this,r=c.bubble;return r?f(e,r(k),d):f(e,c,function(b){var c=k(b.target);if(c)return d.call(c,b)})}};var c=[].slice,e=f.emit=function(b,a,e){var d=c.call(arguments,2),k="on"+a;if("parentNode"in b){var p=d[0]={},r;for(r in e)p[r]=e[r];
p.preventDefault=q;p.stopPropagation=h;p.target=b;p.type=a;e=p}do b[k]&&b[k].apply(b,d);while(e&&e.bubbles&&(b=b.parentNode));return e&&e.cancelable&&e},b=a("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!a("event-stopimmediatepropagation"))var k=function(){this.modified=this.immediatelyStopped=!0},s=function(b){return function(c){if(!c.immediatelyStopped)return c.stopImmediatePropagation=k,b.apply(this,arguments)}};if(a("dom-addeventlistener"))f.emit=function(b,c,a){if(b.dispatchEvent&&
document.createEvent){var d=(b.ownerDocument||document).createEvent("HTMLEvents");d.initEvent(c,!!a.bubbles,!!a.cancelable);for(var k in a)k in d||(d[k]=a[k]);return b.dispatchEvent(d)&&d}return e.apply(f,arguments)};else{f._fixEvent=function(b,c){b||(b=(c&&(c.ownerDocument||c.document||c).parentWindow||window).event);if(!b)return b;try{p&&(b.type==p.type&&b.srcElement==p.target)&&(b=p)}catch(a){}if(!b.target)switch(b.target=b.srcElement,b.currentTarget=c||b.srcElement,"mouseover"==b.type&&(b.relatedTarget=
b.fromElement),"mouseout"==b.type&&(b.relatedTarget=b.toElement),b.stopPropagation||(b.stopPropagation=y,b.preventDefault=u),b.type){case "keypress":var e="charCode"in b?b.charCode:b.keyCode;10==e?(e=0,b.keyCode=13):13==e||27==e?e=0:3==e&&(e=99);b.charCode=e;e=b;e.keyChar=e.charCode?String.fromCharCode(e.charCode):"";e.charOrCode=e.keyChar||e.keyCode}return b};var p,r=function(b){this.handle=b};r.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var t=function(b){return function(c){c=
f._fixEvent(c,this);var a=b.call(this,c);c.modified&&(p||setTimeout(function(){p=null}),p=c);return a}},x=function(b,c,e){e=t(e);if(((b.ownerDocument?b.ownerDocument.parentWindow:b.parentWindow||b.window||window)!=top||5.8>a("jscript"))&&!a("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var d=b[c];if(!d||!d.listeners){var k=d,d=Function("event","var callee \x3d arguments.callee; for(var i \x3d 0; i\x3ccallee.listeners.length; i++){var listener \x3d _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");
d.listeners=[];b[c]=d;d.global=this;k&&d.listeners.push(_dojoIEListeners_.push(k)-1)}d.listeners.push(b=d.global._dojoIEListeners_.push(e)-1);return new r(b)}return l.after(b,c,e,!0)},y=function(){this.cancelBubble=!0},u=f._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(b){}this.defaultPrevented=!0;this.returnValue=!1;this.modified=!0}}if(a("touch"))var z=function(){},v=window.orientation,w=function(b){return function(c){var e=c.corrected;if(!e){var d=
c.type;try{delete c.type}catch(k){}if(c.type){if(a("touch-can-modify-event-delegate"))z.prototype=c,e=new z;else{var e={},p;for(p in c)e[p]=c[p]}e.preventDefault=function(){c.preventDefault()};e.stopPropagation=function(){c.stopPropagation()}}else e=c,e.type=d;c.corrected=e;if("resize"==d){if(v==window.orientation)return null;v=window.orientation;e.type="orientationchange";return b.call(this,e)}"rotation"in e||(e.rotation=0,e.scale=1);var d=e.changedTouches[0],r;for(r in d)delete e[r],e[r]=d[r]}return b.call(this,
e)}};return f})},"dojo/topic":function(){define(["./Evented"],function(l){var n=new l;return{publish:function(a,g){return n.emit.apply(n,arguments)},subscribe:function(a,g){return n.on.apply(n,arguments)}}})},"dojo/Evented":function(){define(["./aspect","./on"],function(l,n){function a(){}var g=l.after;a.prototype={on:function(a,h){return n.parse(this,a,h,function(a,f){return g(a,"on"+f,h,!0)})},emit:function(a,h){var m=[this];m.push.apply(m,arguments);return n.emit.apply(n,m)}};return a})},"dojo/_base/event":function(){define(["./kernel",
"../on","../has","../dom-geometry"],function(l,n,a,g){if(n._fixEvent){var q=n._fixEvent;n._fixEvent=function(a,f){(a=q(a,f))&&g.normalizeEvent(a);return a}}var h={fix:function(a,f){return n._fixEvent?n._fixEvent(a,f):a},stop:function(h){a("dom-addeventlistener")||h&&h.preventDefault?(h.preventDefault(),h.stopPropagation()):(h=h||window.event,h.cancelBubble=!0,n._preventDefault.call(h))}};l.fixEvent=h.fix;l.stopEvent=h.stop;return h})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window",
"./dom","./dom-style"],function(l,n,a,g){function q(c,a,b,d,f,p){p=p||"px";c=c.style;isNaN(a)||(c.left=a+p);isNaN(b)||(c.top=b+p);0<=d&&(c.width=d+p);0<=f&&(c.height=f+p)}function h(c){return"button"==c.tagName.toLowerCase()||"input"==c.tagName.toLowerCase()&&"button"==(c.getAttribute("type")||"").toLowerCase()}function m(c){return"border-box"==f.boxModel||"table"==c.tagName.toLowerCase()||h(c)}var f={boxModel:"content-box"};l("ie")&&(f.boxModel="BackCompat"==document.compatMode?"border-box":"content-box");
f.getPadExtents=function(c,e){c=a.byId(c);var b=e||g.getComputedStyle(c),d=g.toPixelValue,f=d(c,b.paddingLeft),p=d(c,b.paddingTop),r=d(c,b.paddingRight),b=d(c,b.paddingBottom);return{l:f,t:p,r:r,b:b,w:f+r,h:p+b}};f.getBorderExtents=function(c,e){c=a.byId(c);var b=g.toPixelValue,d=e||g.getComputedStyle(c),f="none"!=d.borderLeftStyle?b(c,d.borderLeftWidth):0,p="none"!=d.borderTopStyle?b(c,d.borderTopWidth):0,r="none"!=d.borderRightStyle?b(c,d.borderRightWidth):0,b="none"!=d.borderBottomStyle?b(c,d.borderBottomWidth):
0;return{l:f,t:p,r:r,b:b,w:f+r,h:p+b}};f.getPadBorderExtents=function(c,e){c=a.byId(c);var b=e||g.getComputedStyle(c),d=f.getPadExtents(c,b),b=f.getBorderExtents(c,b);return{l:d.l+b.l,t:d.t+b.t,r:d.r+b.r,b:d.b+b.b,w:d.w+b.w,h:d.h+b.h}};f.getMarginExtents=function(c,e){c=a.byId(c);var b=e||g.getComputedStyle(c),d=g.toPixelValue,f=d(c,b.marginLeft),p=d(c,b.marginTop),r=d(c,b.marginRight),b=d(c,b.marginBottom);return{l:f,t:p,r:r,b:b,w:f+r,h:p+b}};f.getMarginBox=function(c,e){c=a.byId(c);var b=e||g.getComputedStyle(c),
d=f.getMarginExtents(c,b),h=c.offsetLeft-d.l,p=c.offsetTop-d.t,r=c.parentNode,t=g.toPixelValue;if(l("mozilla")){var m=parseFloat(b.left),b=parseFloat(b.top);!isNaN(m)&&!isNaN(b)?(h=m,p=b):r&&r.style&&(r=g.getComputedStyle(r),"visible"!=r.overflow&&(h+="none"!=r.borderLeftStyle?t(c,r.borderLeftWidth):0,p+="none"!=r.borderTopStyle?t(c,r.borderTopWidth):0))}else if((l("opera")||8==l("ie")&&!l("quirks"))&&r)r=g.getComputedStyle(r),h-="none"!=r.borderLeftStyle?t(c,r.borderLeftWidth):0,p-="none"!=r.borderTopStyle?
t(c,r.borderTopWidth):0;return{l:h,t:p,w:c.offsetWidth+d.w,h:c.offsetHeight+d.h}};f.getContentBox=function(c,e){c=a.byId(c);var b=e||g.getComputedStyle(c),d=c.clientWidth,h=f.getPadExtents(c,b),p=f.getBorderExtents(c,b);d?(b=c.clientHeight,p.w=p.h=0):(d=c.offsetWidth,b=c.offsetHeight);l("opera")&&(h.l+=p.l,h.t+=p.t);return{l:h.l,t:h.t,w:d-h.w-p.w,h:b-h.h-p.h}};f.setContentSize=function(c,e,b){c=a.byId(c);var d=e.w;e=e.h;m(c)&&(b=f.getPadBorderExtents(c,b),0<=d&&(d+=b.w),0<=e&&(e+=b.h));q(c,NaN,NaN,
d,e)};var d={l:0,t:0,w:0,h:0};f.setMarginBox=function(c,e,b){c=a.byId(c);var k=b||g.getComputedStyle(c);b=e.w;var s=e.h,p=m(c)?d:f.getPadBorderExtents(c,k),k=f.getMarginExtents(c,k);if(l("webkit")&&h(c)){var r=c.style;0<=b&&!r.width&&(r.width="4px");0<=s&&!r.height&&(r.height="4px")}0<=b&&(b=Math.max(b-p.w-k.w,0));0<=s&&(s=Math.max(s-p.h-k.h,0));q(c,e.l,e.t,b,s)};f.isBodyLtr=function(c){c=c||n.doc;return"ltr"==(n.body(c).dir||c.documentElement.dir||"ltr").toLowerCase()};f.docScroll=function(c){c=
c||n.doc;var a=n.doc.parentWindow||n.doc.defaultView;return"pageXOffset"in a?{x:a.pageXOffset,y:a.pageYOffset}:(a=l("quirks")?n.body(c):c.documentElement)&&{x:f.fixIeBiDiScrollLeft(a.scrollLeft||0,c),y:a.scrollTop||0}};l("ie")&&(f.getIeDocumentElementOffset=function(c){c=c||n.doc;c=c.documentElement;if(8>l("ie")){var a=c.getBoundingClientRect(),b=a.left,a=a.top;7>l("ie")&&(b+=c.clientLeft,a+=c.clientTop);return{x:0>b?0:b,y:0>a?0:a}}return{x:0,y:0}});f.fixIeBiDiScrollLeft=function(c,a){a=a||n.doc;
var b=l("ie");if(b&&!f.isBodyLtr(a)){var d=l("quirks"),h=d?n.body(a):a.documentElement,p=n.global;6==b&&(!d&&p.frameElement&&h.scrollHeight>h.clientHeight)&&(c+=h.clientLeft);return 8>b||d?c+h.clientWidth-h.scrollWidth:-c}return c};f.position=function(c,d){c=a.byId(c);var b=n.body(c.ownerDocument),k=c.getBoundingClientRect(),k={x:k.left,y:k.top,w:k.right-k.left,h:k.bottom-k.top};if(9>l("ie")){var h=f.getIeDocumentElementOffset(c.ownerDocument);k.x-=h.x+(l("quirks")?b.clientLeft+b.offsetLeft:0);k.y-=
h.y+(l("quirks")?b.clientTop+b.offsetTop:0)}d&&(b=f.docScroll(c.ownerDocument),k.x+=b.x,k.y+=b.y);return k};f.getMarginSize=function(c,d){c=a.byId(c);var b=f.getMarginExtents(c,d||g.getComputedStyle(c)),k=c.getBoundingClientRect();return{w:k.right-k.left+b.w,h:k.bottom-k.top+b.h}};f.normalizeEvent=function(c){"layerX"in c||(c.layerX=c.offsetX,c.layerY=c.offsetY);if(!l("dom-addeventlistener")){var a=c.target,a=a&&a.ownerDocument||document,b=l("quirks")?a.body:a.documentElement,d=f.getIeDocumentElementOffset(a);
c.pageX=c.clientX+f.fixIeBiDiScrollLeft(b.scrollLeft||0,a)-d.x;c.pageY=c.clientY+(b.scrollTop||0)-d.y}};return f})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(l,n,a){var g={global:l.global,doc:l.global.document||null,body:function(a){a=a||l.doc;return a.body||a.getElementsByTagName("body")[0]},setContext:function(a,h){l.global=g.global=a;l.doc=g.doc=h},withGlobal:function(a,h,m,f){var d=l.global;try{return l.global=g.global=a,g.withDoc.call(null,a.document,h,m,
f)}finally{l.global=g.global=d}},withDoc:function(q,h,m,f){var d=g.doc,c=a("quirks"),e=a("ie"),b,k,s;try{l.doc=g.doc=q;l.isQuirks=a.add("quirks","BackCompat"==l.doc.compatMode,!0,!0);if(a("ie")&&(s=q.parentWindow)&&s.navigator)b=parseFloat(s.navigator.appVersion.split("MSIE ")[1])||void 0,(k=q.documentMode)&&(5!=k&&Math.floor(b)!=k)&&(b=k),l.isIE=a.add("ie",b,!0,!0);m&&"string"==typeof h&&(h=m[h]);return h.apply(m,f||[])}finally{l.doc=g.doc=d,l.isQuirks=a.add("quirks",c,!0,!0),l.isIE=a.add("ie",e,
!0,!0)}}};n.mixin(l,g);return g})},"dojo/dom":function(){define(["./sniff","./_base/window"],function(l,n){if(7>=l("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(a){}var g={};l("ie")?g.byId=function(a,m){if("string"!=typeof a)return a;var f=m||n.doc,d=a&&f.getElementById(a);if(d&&(d.attributes.id.value==a||d.id==a))return d;f=f.all[a];if(!f||f.nodeName)f=[f];for(var c=0;d=f[c++];)if(d.attributes&&d.attributes.id&&d.attributes.id.value==a||d.id==a)return d}:g.byId=function(a,m){return("string"==
typeof a?(m||n.doc).getElementById(a):a)||null};g.isDescendant=function(a,m){try{a=g.byId(a);for(m=g.byId(m);a;){if(a==m)return!0;a=a.parentNode}}catch(f){}return!1};l.add("css-user-select",function(a,m,f){if(!f)return!1;a=f.style;m=["Khtml","O","Moz","Webkit"];f=m.length;var d="userSelect";do if("undefined"!==typeof a[d])return d;while(f--&&(d=m[f]+"UserSelect"));return!1});var q=l("css-user-select");g.setSelectable=q?function(a,m){g.byId(a).style[q]=m?"":"none"}:function(a,m){a=g.byId(a);var f=
a.getElementsByTagName("*"),d=f.length;if(m)for(a.removeAttribute("unselectable");d--;)f[d].removeAttribute("unselectable");else for(a.setAttribute("unselectable","on");d--;)f[d].setAttribute("unselectable","on")};return g})},"dojo/dom-style":function(){define(["./sniff","./dom"],function(l,n){function a(b,a,d){a=a.toLowerCase();if(l("ie")||l("trident")){if("auto"==d){if("height"==a)return b.offsetHeight;if("width"==a)return b.offsetWidth}if("fontweight"==a)switch(d){case 700:return"bold";default:return"normal"}}a in
c||(c[a]=e.test(a));return c[a]?h(b,d):d}var g,q={};g=l("webkit")?function(b){var a;if(1==b.nodeType){var c=b.ownerDocument.defaultView;a=c.getComputedStyle(b,null);!a&&b.style&&(b.style.display="",a=c.getComputedStyle(b,null))}return a||{}}:l("ie")&&(9>l("ie")||l("quirks"))?function(b){return 1==b.nodeType&&b.currentStyle?b.currentStyle:{}}:function(b){return 1==b.nodeType?b.ownerDocument.defaultView.getComputedStyle(b,null):{}};q.getComputedStyle=g;var h;h=l("ie")?function(b,a){if(!a)return 0;if("medium"==
a)return 4;if(a.slice&&"px"==a.slice(-2))return parseFloat(a);var c=b.style,d=b.runtimeStyle,e=c.left,f=d.left;d.left=b.currentStyle.left;try{c.left=a,a=c.pixelLeft}catch(h){a=0}c.left=e;d.left=f;return a}:function(b,a){return parseFloat(a)||0};q.toPixelValue=h;var m=function(b,a){try{return b.filters.item("DXImageTransform.Microsoft.Alpha")}catch(c){return a?{}:null}},f=9>l("ie")||10>l("ie")&&l("quirks")?function(b){try{return m(b).Opacity/100}catch(a){return 1}}:function(b){return g(b).opacity},
d=9>l("ie")||10>l("ie")&&l("quirks")?function(b,a){""===a&&(a=1);var c=100*a;1===a?(b.style.zoom="",m(b)&&(b.style.filter=b.style.filter.replace(/\s*progid:DXImageTransform.Microsoft.Alpha\([^\)]+?\)/i,""))):(b.style.zoom=1,m(b)?m(b,1).Opacity=c:b.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity\x3d"+c+")",m(b,1).Enabled=!0);if("tr"==b.tagName.toLowerCase())for(c=b.firstChild;c;c=c.nextSibling)"td"==c.tagName.toLowerCase()&&d(c,a);return a}:function(b,a){return b.style.opacity=a},c=
{left:!0,top:!0},e=/margin|padding|width|height|max|min|offset/,b={cssFloat:1,styleFloat:1,"float":1};q.get=function(c,d){var e=n.byId(c),r=arguments.length;if(2==r&&"opacity"==d)return f(e);d=b[d]?"cssFloat"in e.style?"cssFloat":"styleFloat":d;var t=q.getComputedStyle(e);return 1==r?t:a(e,d,t[d]||e.style[d])};q.set=function(a,c,e){var r=n.byId(a),f=arguments.length,h="opacity"==c;c=b[c]?"cssFloat"in r.style?"cssFloat":"styleFloat":c;if(3==f)return h?d(r,e):r.style[c]=e;for(var m in c)q.set(a,m,c[m]);
return q.getComputedStyle(r)};return q})},"dojo/mouse":function(){define(["./_base/kernel","./on","./has","./dom","./_base/window"],function(l,n,a,g,q){function h(a,f){var d=function(c,d){return n(c,a,function(b){if(f)return f(b,d);if(!g.isDescendant(b.relatedTarget,c))return d.call(this,b)})};d.bubble=function(c){return h(a,function(a,b){var d=c(a.target),f=a.relatedTarget;if(d&&d!=(f&&1==f.nodeType&&c(f)))return b.call(d,a)})};return d}a.add("dom-quirks",q.doc&&"BackCompat"==q.doc.compatMode);a.add("events-mouseenter",
q.doc&&"onmouseenter"in q.doc.createElement("div"));a.add("events-mousewheel",q.doc&&"onmousewheel"in q.doc);q=a("dom-quirks")&&a("ie")||!a("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(a,f){return a.button&f},isLeft:function(a){return a.button&1},isMiddle:function(a){return a.button&4},isRight:function(a){return a.button&2}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(a,f){return a.button==f},isLeft:function(a){return 0==a.button},isMiddle:function(a){return 1==a.button},isRight:function(a){return 2==
a.button}};l.mouseButtons=q;l=a("events-mousewheel")?"mousewheel":function(a,f){return n(a,"DOMMouseScroll",function(a){a.wheelDelta=-a.detail;f.call(this,a)})};return{_eventHandler:h,enter:h("mouseover"),leave:h("mouseout"),wheel:l,isLeft:q.isLeft,isMiddle:q.isMiddle,isRight:q.isRight}})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(l,n,a){l._name="browser";n.mixin(l,{isBrowser:!0,isFF:a("ff"),isIE:a("ie"),isKhtml:a("khtml"),isWebKit:a("webkit"),isMozilla:a("mozilla"),
isMoz:a("mozilla"),isOpera:a("opera"),isSafari:a("safari"),isChrome:a("chrome"),isMac:a("mac"),isIos:a("ios"),isAndroid:a("android"),isWii:a("wii"),isQuirks:a("quirks"),isAir:a("air")});return a})},"dojo/keys":function(){define(["./_base/kernel","./sniff"],function(l,n){return l.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:n("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,
INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:n("mac")&&
!n("air")?n("safari")?91:224:17}})},"dojo/dom-attr":function(){define("exports ./sniff ./_base/lang ./dom ./dom-style ./dom-prop".split(" "),function(l,n,a,g,q,h){function m(a,d){var b=a.getAttributeNode&&a.getAttributeNode(d);return!!b&&b.specified}var f={innerHTML:1,textContent:1,className:1,htmlFor:n("ie"),value:1},d={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};l.has=function(a,e){var b=e.toLowerCase();return f[h.names[b]||e]||m(g.byId(a),d[b]||e)};l.get=function(c,
e){c=g.byId(c);var b=e.toLowerCase(),k=h.names[b]||e,s=c[k];if(f[k]&&"undefined"!=typeof s)return s;if("textContent"==k)return h.get(c,k);if("href"!=k&&("boolean"==typeof s||a.isFunction(s)))return s;b=d[b]||e;return m(c,b)?c.getAttribute(b):null};l.set=function(c,e,b){c=g.byId(c);if(2==arguments.length){for(var k in e)l.set(c,k,e[k]);return c}k=e.toLowerCase();var m=h.names[k]||e,p=f[m];if("style"==m&&"string"!=typeof b)return q.set(c,b),c;if(p||"boolean"==typeof b||a.isFunction(b))return h.set(c,
e,b);c.setAttribute(d[k]||e,b);return c};l.remove=function(a,e){g.byId(a).removeAttribute(d[e.toLowerCase()]||e)};l.getNodeProp=function(a,e){a=g.byId(a);var b=e.toLowerCase(),k=h.names[b]||e;if(k in a&&"href"!=k)return a[k];b=d[b]||e;return m(a,b)?a.getAttribute(b):null}})},"dojo/dom-prop":function(){define("exports ./_base/kernel ./sniff ./_base/lang ./dom ./dom-style ./dom-construct ./_base/connect".split(" "),function(l,n,a,g,q,h,m,f){function d(b){var a="";b=b.childNodes;for(var c=0,e;e=b[c];c++)8!=
e.nodeType&&(a=1==e.nodeType?a+d(e):a+e.nodeValue);return a}var c={},e=0,b=n._scopeName+"attrid";a.add("dom-textContent",function(b,a,c){return"textContent"in c});l.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",textcontent:"textContent",valuetype:"valueType"};l.get=function(b,c){b=q.byId(b);var e=c.toLowerCase(),e=l.names[e]||c;return"textContent"==e&&!a("dom-textContent")?d(b):b[e]};l.set=function(d,
s,p){d=q.byId(d);if(2==arguments.length&&"string"!=typeof s){for(var r in s)l.set(d,r,s[r]);return d}r=s.toLowerCase();r=l.names[r]||s;if("style"==r&&"string"!=typeof p)return h.set(d,p),d;if("innerHTML"==r)return a("ie")&&d.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(m.empty(d),d.appendChild(m.toDom(p,d.ownerDocument))):d[r]=p,d;if("textContent"==r&&!a("dom-textContent"))return m.empty(d),d.appendChild(d.ownerDocument.createTextNode(p)),d;if(g.isFunction(p)){var t=
d[b];t||(t=e++,d[b]=t);c[t]||(c[t]={});var x=c[t][r];if(x)f.disconnect(x);else try{delete d[r]}catch(y){}p?c[t][r]=f.connect(d,r,p):d[r]=null;return d}d[r]=p;return d}})},"dojo/dom-construct":function(){define("exports ./_base/kernel ./sniff ./_base/window ./dom ./dom-attr".split(" "),function(l,n,a,g,q,h){function m(b,a){var c=a.parentNode;c&&c.insertBefore(b,a)}function f(b){if("innerHTML"in b)try{b.innerHTML="";return}catch(a){}for(var c;c=b.lastChild;)b.removeChild(c)}var d={option:["select"],
tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},c=/<\s*([\w\:]+)/,e={},b=0,k="__"+n._scopeName+"ToDomId",s;for(s in d)d.hasOwnProperty(s)&&(n=d[s],n.pre="option"==s?'\x3cselect multiple\x3d"multiple"\x3e':"\x3c"+n.join("\x3e\x3c")+"\x3e",n.post="\x3c/"+n.reverse().join("\x3e\x3c/")+"\x3e");var p;8>=a("ie")&&(p=function(b){b.__dojo_html5_tested=
"yes";var a=r("div",{innerHTML:"\x3cnav\x3ea\x3c/nav\x3e",style:{visibility:"hidden"}},b.body);1!==a.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,function(a){b.createElement(a)});t(a)});l.toDom=function(r,f){f=f||g.doc;var t=f[k];t||(f[k]=t=++b+"",e[t]=f.createElement("div"));8>=a("ie")&&!f.__dojo_html5_tested&&f.body&&p(f);r+="";var h=r.match(c),m=h?h[1].toLowerCase():
"",t=e[t];if(h&&d[m]){h=d[m];t.innerHTML=h.pre+r+h.post;for(h=h.length;h;--h)t=t.firstChild}else t.innerHTML=r;if(1==t.childNodes.length)return t.removeChild(t.firstChild);for(m=f.createDocumentFragment();h=t.firstChild;)m.appendChild(h);return m};l.place=function(b,a,c){a=q.byId(a);"string"==typeof b&&(b=/^\s*</.test(b)?l.toDom(b,a.ownerDocument):q.byId(b));if("number"==typeof c){var d=a.childNodes;!d.length||d.length<=c?a.appendChild(b):m(b,d[0>c?0:c])}else switch(c){case "before":m(b,a);break;
case "after":c=b;(d=a.parentNode)&&(d.lastChild==a?d.appendChild(c):d.insertBefore(c,a.nextSibling));break;case "replace":a.parentNode.replaceChild(b,a);break;case "only":l.empty(a);a.appendChild(b);break;case "first":if(a.firstChild){m(b,a.firstChild);break}default:a.appendChild(b)}return b};var r=l.create=function(b,a,c,d){var e=g.doc;c&&(c=q.byId(c),e=c.ownerDocument);"string"==typeof b&&(b=e.createElement(b));a&&h.set(b,a);c&&l.place(b,c,d);return b};l.empty=function(b){f(q.byId(b))};var t=l.destroy=
function(b){if(b=q.byId(b)){var c=b;b=b.parentNode;c.firstChild&&f(c);b&&(a("ie")&&b.canHaveChildren&&"removeNode"in c?c.removeNode(!1):b.removeChild(c))}}})},"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(l,n,a){function g(a){if("string"==typeof a||a instanceof String){if(a&&!h.test(a))return m[0]=a,m;a=a.split(h);a.length&&!a[0]&&a.shift();a.length&&!a[a.length-1]&&a.pop();return a}return!a?[]:n.filter(a,function(a){return a})}var q,h=/\s+/,m=[""],f={};return q=
{contains:function(d,c){return 0<=(" "+a.byId(d).className+" ").indexOf(" "+c+" ")},add:function(d,c){d=a.byId(d);c=g(c);var e=d.className,b,e=e?" "+e+" ":" ";b=e.length;for(var k=0,f=c.length,p;k<f;++k)(p=c[k])&&0>e.indexOf(" "+p+" ")&&(e+=p+" ");b<e.length&&(d.className=e.substr(1,e.length-2))},remove:function(d,c){d=a.byId(d);var e;if(void 0!==c){c=g(c);e=" "+d.className+" ";for(var b=0,k=c.length;b<k;++b)e=e.replace(" "+c[b]+" "," ");e=l.trim(e)}else e="";d.className!=e&&(d.className=e)},replace:function(d,
c,e){d=a.byId(d);f.className=d.className;q.remove(f,e);q.add(f,c);d.className!==f.className&&(d.className=f.className)},toggle:function(d,c,e){d=a.byId(d);if(void 0===e){c=g(c);for(var b=0,k=c.length,f;b<k;++b)f=c[b],q[q.contains(d,f)?"remove":"add"](d,f)}else q[e?"add":"remove"](d,c);return e}}})},"dojo/ready":function(){define(["./_base/kernel","./has","require","./domReady","./_base/lang"],function(l,n,a,g,q){var h=0,m=[],f=0;n=function(){h=1;l._postLoad=l.config.afterOnLoad=!0;d()};var d=function(){if(!f){for(f=
1;h&&(!g||0==g._Q.length)&&(a.idle?a.idle():1)&&m.length;){var b=m.shift();try{b()}catch(c){if(c.info=c.message,a.signal)a.signal("error",c);else throw c;}}f=0}};a.on&&a.on("idle",d);g&&(g._onQEmpty=d);var c=l.ready=l.addOnLoad=function(b,a,c){var e=q._toArray(arguments);"number"!=typeof b?(c=a,a=b,b=1E3):e.shift();c=c?q.hitch.apply(l,e):function(){a()};c.priority=b;for(e=0;e<m.length&&b>=m[e].priority;e++);m.splice(e,0,c);d()},e=l.config.addOnLoad;if(e)c[q.isArray(e)?"apply":"call"](l,e);g?g(n):
n();return c})},"dojo/domReady":function(){define(["./has"],function(l){function n(b){d.push(b);f&&a()}function a(){if(!c){for(c=!0;d.length;)try{d.shift()(q)}catch(b){}c=!1;n._onQEmpty()}}var g=function(){return this}(),q=document,h={loaded:1,complete:1},m="string"!=typeof q.readyState,f=!!h[q.readyState],d=[],c;n.load=function(b,a,c){n(c)};n._Q=d;n._onQEmpty=function(){};m&&(q.readyState="loading");if(!f){var e=[],b=function(b){b=b||g.event;f||"readystatechange"==b.type&&!h[q.readyState]||(m&&(q.readyState=
"complete"),f=1,a())},k=function(a,c){a.addEventListener(c,b,!1);d.push(function(){a.removeEventListener(c,b,!1)})};if(!l("dom-addeventlistener")){var k=function(a,c){c="on"+c;a.attachEvent(c,b);d.push(function(){a.detachEvent(c,b)})},s=q.createElement("div");try{s.doScroll&&null===g.frameElement&&e.push(function(){try{return s.doScroll("left"),1}catch(b){}})}catch(p){}}k(q,"DOMContentLoaded");k(g,"load");"onreadystatechange"in q?k(q,"readystatechange"):m||e.push(function(){return h[q.readyState]});
if(e.length){var r=function(){if(!f){for(var a=e.length;a--;)if(e[a]()){b("poller");return}setTimeout(r,30)}};r()}}return n})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(l,n,a,g){return l("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(a){var h=this._attrPairNames;return h[a]?h[a]:h[a]={s:"_"+a+"Setter",g:"_"+a+"Getter"}},postscript:function(a){a&&this.set(a)},_get:function(a,h){return"function"===typeof this[h.g]?this[h.g]():
this[a]},get:function(a){return this._get(a,this._getAttrNames(a))},set:function(a,h){if("object"===typeof a){for(var m in a)a.hasOwnProperty(m)&&"_watchCallbacks"!=m&&this.set(m,a[m]);return this}m=this._getAttrNames(a);var f=this._get(a,m);m=this[m.s];var d;"function"===typeof m?d=m.apply(this,Array.prototype.slice.call(arguments,1)):this[a]=h;if(this._watchCallbacks){var c=this;g(d,function(){c._watchCallbacks(a,f,h)})}return this},_changeAttrValue:function(a,h){var m=this.get(a);this[a]=h;this._watchCallbacks&&
this._watchCallbacks(a,m,h);return this},watch:function(g,h){var m=this._watchCallbacks;if(!m)var f=this,m=this._watchCallbacks=function(a,b,c,d){var p=function(d){if(d){d=d.slice();for(var p=0,h=d.length;p<h;p++)d[p].call(f,a,b,c)}};p(m["_"+a]);d||p(m["*"])};!h&&"function"===typeof g?(h=g,g="*"):g="_"+g;var d=m[g];"object"!==typeof d&&(d=m[g]=[]);d.push(h);var c={};c.unwatch=c.remove=function(){var c=a.indexOf(d,h);-1<c&&d.splice(c,1)};return c}})})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],
function(l,n){return function(a,g,q,h){var m=a&&"function"===typeof a.then,f=m&&a instanceof n;if(m)f||(m=new l(a.cancel),a.then(m.resolve,m.reject,m.progress),a=m.promise);else return 1<arguments.length?g?g(a):a:(new l).resolve(a);return g||q||h?a.then(g,q,h):a}})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","./promise/instrumentation"],function(l,n,a,g,q){var h=Object.freeze||function(){},m=function(b,a,c,d,r){2===a&&(e.instrumentRejected&&
0===b.length)&&e.instrumentRejected(c,!1,d,r);for(r=0;r<b.length;r++)f(b[r],a,c,d)},f=function(b,a,f,p){var r=b[a],t=b.deferred;if(r)try{var h=r(f);if(0===a)"undefined"!==typeof h&&c(t,a,h);else{if(h&&"function"===typeof h.then){b.cancel=h.cancel;h.then(d(t,1),d(t,2),d(t,0));return}c(t,1,h)}}catch(m){c(t,2,m)}else c(t,a,f);2===a&&e.instrumentRejected&&e.instrumentRejected(f,!!r,p,t.promise)},d=function(b,a){return function(d){c(b,a,d)}},c=function(b,a,c){if(!b.isCanceled())switch(a){case 0:b.progress(c);
break;case 1:b.resolve(c);break;case 2:b.reject(c)}},e=function(b){var c=this.promise=new g,d=this,p,r,t,x=!1,q=[];Error.captureStackTrace&&(Error.captureStackTrace(d,e),Error.captureStackTrace(c,e));this.isResolved=c.isResolved=function(){return 1===p};this.isRejected=c.isRejected=function(){return 2===p};this.isFulfilled=c.isFulfilled=function(){return!!p};this.isCanceled=c.isCanceled=function(){return x};this.progress=function(b,a){if(p){if(!0===a)throw Error("This deferred has already been fulfilled.");
return c}m(q,0,b,null,d);return c};this.resolve=function(b,a){if(p){if(!0===a)throw Error("This deferred has already been fulfilled.");return c}m(q,p=1,r=b,null,d);q=null;return c};var u=this.reject=function(b,a){if(p){if(!0===a)throw Error("This deferred has already been fulfilled.");return c}Error.captureStackTrace&&Error.captureStackTrace(t={},u);m(q,p=2,r=b,t,d);q=null;return c};this.then=c.then=function(b,a,d){var h=[d,b,a];h.cancel=c.cancel;h.deferred=new e(function(b){return h.cancel&&h.cancel(b)});
p&&!q?f(h,p,r,t):q.push(h);return h.deferred.promise};this.cancel=c.cancel=function(c,d){if(p){if(!0===d)throw Error("This deferred has already been fulfilled.");}else{if(b){var e=b(c);c="undefined"===typeof e?c:e}x=!0;if(p){if(2===p&&r===c)return c}else return"undefined"===typeof c&&(c=new a),u(c),c}};h(c)};e.prototype.toString=function(){return"[object Deferred]"};q&&q(e);return e})},"dojo/errors/CancelError":function(){define(["./create"],function(l){return l("CancelError",null,null,{dojoType:"cancel"})})},
"dojo/errors/create":function(){define(["../_base/lang"],function(l){return function(n,a,g,q){g=g||Error;var h=function(m){if(g===Error){Error.captureStackTrace&&Error.captureStackTrace(this,h);var f=Error.call(this,m),d;for(d in f)f.hasOwnProperty(d)&&(this[d]=f[d]);this.message=m;this.stack=f.stack}else g.apply(this,arguments);a&&a.apply(this,arguments)};h.prototype=l.delegate(g.prototype,q);h.prototype.name=n;return h.prototype.constructor=h}})},"dojo/promise/Promise":function(){define(["../_base/lang"],
function(l){function n(){throw new TypeError("abstract");}return l.extend(function(){},{then:function(a,g,q){n()},cancel:function(a,g){n()},isResolved:function(){n()},isRejected:function(){n()},isFulfilled:function(){n()},isCanceled:function(){n()},always:function(a){return this.then(a,a)},otherwise:function(a){return this.then(null,a)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/promise/instrumentation":function(){define(["./tracer",
"../has","../_base/lang","../_base/array"],function(l,n,a,g){function q(b,a,c){a&&a.stack&&a.stack.split("\n").slice(1).join("\n").replace(/^\s+/," ")}function h(b,a,c,d){a||q(b,c,d)}function m(b,a,h,p){g.some(d,function(c){if(c.error===b)return a&&(c.handled=!0),!0})||d.push({error:b,rejection:h,handled:a,deferred:p,timestamp:(new Date).getTime()});c||(c=setTimeout(f,e))}function f(){var b=(new Date).getTime(),a=b-e;d=g.filter(d,function(b){return b.timestamp<a?(b.handled||q(b.error,b.rejection,
b.deferred),!1):!0});c=d.length?setTimeout(f,d[0].timestamp+e-b):!1}n.add("config-useDeferredInstrumentation","report-unhandled-rejections");var d=[],c=!1,e=1E3;return function(b){var c=n("config-useDeferredInstrumentation");if(c){l.on("resolved",a.hitch(console,"log","resolved"));l.on("rejected",a.hitch(console,"log","rejected"));l.on("progress",a.hitch(console,"log","progress"));var d=[];"string"===typeof c&&(d=c.split(","),c=d.shift());if("report-rejections"===c)b.instrumentRejected=h;else if("report-unhandled-rejections"===
c||!0===c||1===c)b.instrumentRejected=m,e=parseInt(d[0],10)||e;else throw Error("Unsupported instrumentation usage \x3c"+c+"\x3e");}}})},"dojo/promise/tracer":function(){define(["../_base/lang","./Promise","../Evented"],function(l,n,a){function g(a){setTimeout(function(){h.apply(q,a)},0)}var q=new a,h=q.emit;q.emit=null;n.prototype.trace=function(){var a=l._toArray(arguments);this.then(function(f){g(["resolved",f].concat(a))},function(f){g(["rejected",f].concat(a))},function(f){g(["progress",f].concat(a))});
return this};n.prototype.traceRejected=function(){var a=l._toArray(arguments);this.otherwise(function(f){g(["rejected",f].concat(a))});return this};return q})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(l,n,a){return a("dijit.Destroyable",null,{destroy:function(a){this._destroyed=!0},own:function(){var a=["destroyRecursive","destroy","remove"];l.forEach(arguments,function(q){function h(){f.remove();l.forEach(d,function(a){a.remove()})}var m,
f=n.before(this,"destroy",function(a){q[m](a)}),d=[];q.then?(m="cancel",q.then(h,h)):l.forEach(a,function(a){"function"===typeof q[a]&&(m||(m=a),d.push(n.after(q,a,h,!0)))})},this);return arguments}})})},"dijit/registry":function(){define(["dojo/_base/array","dojo/_base/window","./main"],function(l,n,a){var g={},q={},h={length:0,add:function(a){if(q[a.id])throw Error("Tried to register widget with id\x3d\x3d"+a.id+" but that id is already registered");q[a.id]=a;this.length++},remove:function(a){q[a]&&
(delete q[a],this.length--)},byId:function(a){return"string"==typeof a?q[a]:a},byNode:function(a){return q[a.getAttribute("widgetId")]},toArray:function(){var a=[],f;for(f in q)a.push(q[f]);return a},getUniqueId:function(h){var f;do f=h+"_"+(h in g?++g[h]:g[h]=0);while(q[f]);return"dijit"==a._scopeName?f:a._scopeName+"_"+f},findWidgets:function(a,f){function d(a){for(a=a.firstChild;a;a=a.nextSibling)if(1==a.nodeType){var b=a.getAttribute("widgetId");b?(b=q[b])&&c.push(b):a!==f&&d(a)}}var c=[];d(a);
return c},_destroyAll:function(){a._curFocus=null;a._prevFocus=null;a._activeStack=[];l.forEach(h.findWidgets(n.body()),function(a){a._destroyed||(a.destroyRecursive?a.destroyRecursive():a.destroy&&a.destroy())})},getEnclosingWidget:function(a){for(;a;){var f=1==a.nodeType&&a.getAttribute("widgetId");if(f)return q[f];a=a.parentNode}return null},_hash:q};return a.registry=h})},"dijit/main":function(){define(["dojo/_base/kernel"],function(l){return l.dijit})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),
function(l,n,a,g,q,h,m,f){var d=n("dijit._TemplatedMixin",f,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(a){var d=this.declaredClass,b=this;return m.substitute(a,this,function(a,c){"!"==c.charAt(0)&&(a=g.getObject(c.substr(1),!1,b));if("undefined"==typeof a)throw Error(d+" template:"+c);return null==a?"":"!"==c.charAt(0)?a:this._escapeValue(""+a)},this)},_escapeValue:function(a){return a.replace(/["'<>&]/g,function(a){return{"\x26":"\x26amp;",
"\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[a]})},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=l(this.templatePath,{sanitize:!0}));var c=d.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),e;if(g.isString(c)){if(e=a.toDom(this._stringRepl(c),this.ownerDocument),1!=e.nodeType)throw Error("Invalid template: "+c);}else e=c.cloneNode(!0);this.domNode=e}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);
this._rendered=!0},_fillContent:function(a){var d=this.containerNode;if(a&&d)for(;a.hasChildNodes();)d.appendChild(a.firstChild)}});d._templateCache={};d.getCachedTemplate=function(c,e,b){var k=d._templateCache,f=c,p=k[f];if(p){try{if(!p.ownerDocument||p.ownerDocument==(b||document))return p}catch(r){}a.destroy(p)}c=m.trim(c);if(e||c.match(/\$\{([^\}]+)\}/g))return k[f]=c;e=a.toDom(c,b);if(1!=e.nodeType)throw Error("Invalid template: "+c);return k[f]=e};h("ie")&&q(window,"unload",function(){var c=
d._templateCache,e;for(e in c){var b=c[e];"object"==typeof b&&a.destroy(b);delete c[e]}});return d})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(l){return l.cache})},"dojo/text":function(){define(["./_base/kernel","require","./has","./request"],function(l,n,a,g){var q;q=function(a,d,b){g(a,{sync:!!d,headers:{"X-Requested-With":null}}).then(b)};var h={},m=function(a){if(a){a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var d=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);
d&&(a=d[1])}else a="";return a},f={},d={};l.cache=function(a,d,b){var k;"string"==typeof a?/\//.test(a)?(k=a,b=d):k=n.toUrl(a.replace(/\./g,"/")+(d?"/"+d:"")):(k=a+"",b=d);a=void 0!=b&&"string"!=typeof b?b.value:b;b=b&&b.sanitize;if("string"==typeof a)return h[k]=a,b?m(a):a;if(null===a)return delete h[k],null;k in h||q(k,!0,function(a){h[k]=a});return b?m(h[k]):h[k]};return{dynamic:!0,normalize:function(a,d){var b=a.split("!"),k=b[0];return(/^\./.test(k)?d(k):k)+(b[1]?"!"+b[1]:"")},load:function(a,
e,b){a=a.split("!");var k=1<a.length,g=a[0],p=e.toUrl(a[0]);a="url:"+p;var r=f,t=function(a){b(k?m(a):a)};g in h?r=h[g]:e.cache&&a in e.cache?r=e.cache[a]:p in h&&(r=h[p]);if(r===f)if(d[p])d[p].push(t);else{var x=d[p]=[t];q(p,!e.async,function(a){h[g]=h[p]=a;for(var b=0;b<x.length;)x[b++](a);delete d[p]})}else t(r)}}})},"dojo/request":function(){define(["./request/default!"],function(l){return l})},"dojo/request/default":function(){define(["exports","require","../has"],function(l,n,a){var g=a("config-requestProvider");
g||(g="./xhr");l.getPlatformDefaultId=function(){return"./xhr"};l.load=function(a,h,m,f){n(["platform"==a?"./xhr":g],function(a){m(a)})}})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(l,n){var a=/[&<>'"\/]/g,g={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},q={};n.setObject("dojo.string",q);q.escape=function(h){return!h?"":h.replace(a,function(a){return g[a]})};q.rep=function(a,m){if(0>=m||!a)return"";for(var f=[];;){m&
1&&f.push(a);if(!(m>>=1))break;a+=a}return f.join("")};q.pad=function(a,m,f,d){f||(f="0");a=String(a);m=q.rep(f,Math.ceil((m-a.length)/f.length));return d?a+m:m+a};q.substitute=function(a,m,f,d){d=d||l.global;f=f?n.hitch(d,f):function(a){return a};return a.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(a,e,b){a=n.getObject(e,!1,m);b&&(a=n.getObject(b,!1,d).call(d,a,e));return f(a,e).toString()})};q.trim=String.prototype.trim?n.trim:function(a){a=a.replace(/^\s+/,"");for(var m=a.length-
1;0<=m;m--)if(/\S/.test(a.charAt(m))){a=a.substring(0,m+1);break}return a};return q})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(l,n,a,g,q,h,m,f,d){var c=q.delegate(f,{mouseenter:h.enter,mouseleave:h.leave,keypress:a._keypress}),e;a=g("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);
this._attachTemplateNodes(this.domNode);this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(a){for(var c=a;;)if(1==c.nodeType&&(this._processTemplateNode(c,function(a,b){return a.getAttribute(b)},this._attach)||this.searchContainerNode)&&c.firstChild)c=c.firstChild;else{if(c==a)break;for(;!c.nextSibling;)if(c=c.parentNode,c==a)return;c=c.nextSibling}},_processTemplateNode:function(a,c,d){var e=!0,r=this.attachScope||this,f=c(a,"dojoAttachPoint")||c(a,"data-dojo-attach-point");
if(f)for(var h=f.split(/\s*,\s*/);f=h.shift();)q.isArray(r[f])?r[f].push(a):r[f]=a,e="containerNode"!=f,this._attachPoints.push(f);if(c=c(a,"dojoAttachEvent")||c(a,"data-dojo-attach-event")){f=c.split(/\s*,\s*/);for(h=q.trim;c=f.shift();)if(c){var m=null;-1!=c.indexOf(":")?(m=c.split(":"),c=h(m[0]),m=h(m[1])):c=h(c);m||(m=c);this._attachEvents.push(d(a,c,q.hitch(r,m)))}}return e},_attach:function(a,d,f){d=d.replace(/^on/,"").toLowerCase();d="dijitclick"==d?e||(e=l("./a11yclick")):c[d]||d;return m(a,
d,f)},_detachTemplateNodes:function(){var a=this.attachScope||this;n.forEach(this._attachPoints,function(c){delete a[c]});this._attachPoints=[];n.forEach(this._attachEvents,function(a){a.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments)}});q.extend(d,{dojoAttachEvent:"",dojoAttachPoint:""});return a})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),
function(l,n,a,g,q,h,m,f,d,c){function e(a,b,c){return p&&c?function(a,b){return h(a,c,b)}:t?function(c,d){var e=h(c,b,function(a){d.call(this,a);E=(new Date).getTime()}),p=h(c,a,function(a){(!E||(new Date).getTime()>E+1E3)&&d.call(this,a)});return{remove:function(){e.remove();p.remove()}}}:function(b,c){return h(b,a,c)}}function b(a){do if(void 0!==a.dojoClick)return a;while(a=a.parentNode)}function k(d,e,p){var r=b(d.target);if(y=!d.target.disabled&&r&&r.dojoClick)if(z=(u="useTarget"==y)?r:d.target,
u&&d.preventDefault(),v=d.changedTouches?d.changedTouches[0].pageX-c.global.pageXOffset:d.clientX,w=d.changedTouches?d.changedTouches[0].pageY-c.global.pageYOffset:d.clientY,A=("object"==typeof y?y.x:"number"==typeof y?y:0)||4,B=("object"==typeof y?y.y:"number"==typeof y?y:0)||4,!x){x=!0;var k=function(b){y=u?a.isDescendant(c.doc.elementFromPoint(b.changedTouches?b.changedTouches[0].pageX-c.global.pageXOffset:b.clientX,b.changedTouches?b.changedTouches[0].pageY-c.global.pageYOffset:b.clientY),z):
y&&(b.changedTouches?b.changedTouches[0].target:b.target)==z&&Math.abs((b.changedTouches?b.changedTouches[0].pageX-c.global.pageXOffset:b.clientX)-v)<=A&&Math.abs((b.changedTouches?b.changedTouches[0].pageY-c.global.pageYOffset:b.clientY)-w)<=B};c.doc.addEventListener(e,function(a){k(a);u&&a.preventDefault()},!0);c.doc.addEventListener(p,function(b){k(b);if(y){D=(new Date).getTime();var c=u?z:b.target;"LABEL"===c.tagName&&(c=a.byId(c.getAttribute("for"))||c);var d=b.changedTouches?b.changedTouches[0]:
b,e=document.createEvent("MouseEvents");e._dojo_click=!0;e.initMouseEvent("click",!0,!0,b.view,b.detail,d.screenX,d.screenY,d.clientX,d.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,0,null);setTimeout(function(){h.emit(c,"click",e);D=(new Date).getTime()},0)}},!0);d=function(a){c.doc.addEventListener(a,function(b){!b._dojo_click&&((new Date).getTime()<=D+1E3&&!("INPUT"==b.target.tagName&&g.contains(b.target,"dijitOffScreen")))&&(b.stopPropagation(),b.stopImmediatePropagation&&b.stopImmediatePropagation(),
"click"==a&&(("INPUT"!=b.target.tagName||"radio"==b.target.type||"checkbox"==b.target.type)&&"TEXTAREA"!=b.target.tagName&&"AUDIO"!=b.target.tagName&&"VIDEO"!=b.target.tagName)&&b.preventDefault())},!0)};d("click");d("mousedown");d("mouseup")}}var s=5>m("ios"),p=m("pointer-events")||m("MSPointer"),r=function(){var a={},b;for(b in{down:1,move:1,up:1,cancel:1,over:1,out:1})a[b]=m("MSPointer")?"MSPointer"+b.charAt(0).toUpperCase()+b.slice(1):"pointer"+b;return a}(),t=m("touch-events"),x,y,u=!1,z,v,w,
A,B,D,E,C;p?d(function(){c.doc.addEventListener(r.down,function(a){k(a,r.move,r.up)},!0)}):t&&d(function(){function a(b){var c=q.delegate(b,{bubbles:!0});6<=m("ios")&&(c.touches=b.touches,c.altKey=b.altKey,c.changedTouches=b.changedTouches,c.ctrlKey=b.ctrlKey,c.metaKey=b.metaKey,c.shiftKey=b.shiftKey,c.targetTouches=b.targetTouches);return c}C=c.body();c.doc.addEventListener("touchstart",function(a){E=(new Date).getTime();var b=C;C=a.target;h.emit(b,"dojotouchout",{relatedTarget:C,bubbles:!0});h.emit(C,
"dojotouchover",{relatedTarget:b,bubbles:!0});k(a,"touchmove","touchend")},!0);h(c.doc,"touchmove",function(b){E=(new Date).getTime();var d=c.doc.elementFromPoint(b.pageX-(s?0:c.global.pageXOffset),b.pageY-(s?0:c.global.pageYOffset));d&&(C!==d&&(h.emit(C,"dojotouchout",{relatedTarget:d,bubbles:!0}),h.emit(d,"dojotouchover",{relatedTarget:C,bubbles:!0}),C=d),h.emit(d,"dojotouchmove",a(b))||b.preventDefault())});h(c.doc,"touchend",function(b){E=(new Date).getTime();var d=c.doc.elementFromPoint(b.pageX-
(s?0:c.global.pageXOffset),b.pageY-(s?0:c.global.pageYOffset))||c.body();h.emit(d,"dojotouchend",a(b))})});n={press:e("mousedown","touchstart",r.down),move:e("mousemove","dojotouchmove",r.move),release:e("mouseup","dojotouchend",r.up),cancel:e(f.leave,"touchcancel",p?r.cancel:null),over:e("mouseover","dojotouchover",r.over),out:e("mouseout","dojotouchout",r.out),enter:f._eventHandler(e("mouseover","dojotouchover",r.over)),leave:f._eventHandler(e("mouseout","dojotouchout",r.out))};return l.touch=n})},
"app/components/map/MapView":function(){define("exports module dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/topic esri/map".split(" "),function(l,n,a,g,q,h,m){function f(a){return a&&a.__esModule?a:{"default":a}}l=f(a);g=f(g);q=f(q);var d=f(h),c=f(m);n.exports=(0,l["default"])([g["default"],q["default"]],{templateString:'\x3cdiv class\x3d"map-node"\x3e\x3c/div\x3e',postCreate:function(){var a=this.domNode,b=this.get("mapOptions"),k=new c["default"](a,b);k.on("load",function(){return d["default"].publish("map-ready",
{map:k})});this.set("map",k)}})})},"esri/map":function(){define("require dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/event dojo/on dojo/aspect dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/registry ./kernel ./config ./sniff ./lang ./_coremap ./MapNavigationManager dojo/i18n!./nls/jsapi".split(" "),function(l,n,a,g,q,h,m,f,d,c,e,b,k,s,p,r,t,x,y,u,z,v,w){var A={up:"panUp",right:"panRight",down:"panDown",
left:"panLeft"},B={upperRight:"panUpperRight",lowerRight:"panLowerRight",lowerLeft:"panLowerLeft",upperLeft:"panUpperLeft"},D=g.connect,E=g.disconnect,C=k.create,F=p.set,K=q.hitch,I=s.getMarginBox,G=n.deprecated,J=q.mixin,H=0;return a(z,{declaredClass:"esri.Map",constructor:function(a,b){J(this,{_slider:null,_navDiv:null,_mapParams:J({attributionWidth:0.45,slider:!0,nav:!1,logo:!0,sliderStyle:"small",sliderPosition:"top-left",sliderOrientation:"vertical",autoResize:!0},b||{})});J(this,{isDoubleClickZoom:!1,
isShiftDoubleClickZoom:!1,isClickRecenter:!1,isScrollWheelZoom:!1,isPan:!1,isRubberBandZoom:!1,isKeyboardNavigation:!1,isPanArrows:!1,isZoomSlider:!1});q.isFunction(t._css)&&(t._css=t._css(this._mapParams.force3DTransforms),this.force3DTransforms=this._mapParams.force3DTransforms);var c=y("esri-transforms")&&y("esri-transitions");this.navigationMode=this._mapParams.navigationMode||c&&"css-transforms"||"classic";"css-transforms"===this.navigationMode&&!c&&(this.navigationMode="classic");this.fadeOnZoom=
u.isDefined(this._mapParams.fadeOnZoom)?this._mapParams.fadeOnZoom:"css-transforms"===this.navigationMode;"css-transforms"!==this.navigationMode&&(this.fadeOnZoom=!1);this.setMapCursor("default");this.smartNavigation=b&&b.smartNavigation;if(!u.isDefined(this.smartNavigation)&&y("mac")&&!y("esri-touch")&&!y("esri-pointer")&&!(3.5>=y("ff"))){var e=navigator.userAgent.match(/Mac\s+OS\s+X\s+([\d]+)(\.|\_)([\d]+)\D/i);e&&u.isDefined(e[1])&&u.isDefined(e[3])&&(c=parseInt(e[1],10),e=parseInt(e[3],10),this.smartNavigation=
10<c||10===c&&6<=e)}this.showAttribution=u.isDefined(this._mapParams.showAttribution)?this._mapParams.showAttribution:!0;this._onLoadHandler_connect=D(this,"onLoad",this,"_onLoadInitNavsHandler");var p=C("div",{"class":"esriControlsBR"+(this._mapParams.nav?" withPanArrows":"")},this.root);if(this.showAttribution)if(c=q.getObject("esri.dijit.Attribution",!1))this._initAttribution(c,p);else{var r=H++,k=this;this._rids&&this._rids.push(r);l(["./dijit/Attribution"],function(a){var b=k._rids?h.indexOf(k._rids,
r):-1;-1!==b&&(k._rids.splice(b,1),k._initAttribution(a,p))})}this._mapParams.logo&&(c={},6===y("ie")&&(c.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+l.toUrl("./images/map/logo-med.png")+"')"),this._ogol=C("div",{style:c},p),this._setLogoSize(),this._onMapResizeLogo_connect=D(this,"onResize",this,"_setLogoSize"),y("esri-touch")||(this._ogol_connect=D(this._ogol,"onclick",this,"_openLogoLink")));this.navigationManager=new v(this);
b&&b.basemap&&(this._onLoadFix=!0,this.setBasemap(b.basemap),this._onLoadFix=!1);if(this.autoResize=this._mapParams.autoResize)c=this._getEnclosingResizableWidget(this.container)||window,e=this.resize,this._rszSignal=f.pausable(c,"resize",e),this._oriSignal=f.pausable(window,"orientationchange",e),d.after(c,"resize",e,!0),this._startResizeTimer()},_startResizeTimer:function(){clearTimeout(this._persistentTimer);this._persistentTimer=setTimeout(this._timedResize,2*this.resizeDelay)},_getEnclosingResizableWidget:function(a){var b=
r.getEnclosingWidget(a);return!b?b:b.resize?b:this._getEnclosingResizableWidget(a.parentNode)},_setLogoSize:function(){this._ogol&&(25E4>this.root.clientWidth*this.root.clientHeight?(b.remove(this._ogol,"logo-med"),b.add(this._ogol,"logo-sm")):(b.remove(this._ogol,"logo-sm"),b.add(this._ogol,"logo-med")))},_initAttribution:function(a,c){var d=C("span",{"class":"esriAttribution"},c,"first");F(d,"maxWidth",Math.floor(this.width*this._mapParams.attributionWidth)+"px");this._connects.push(D(d,"onclick",
function(){b.contains(this,"esriAttributionOpen")?b.remove(this,"esriAttributionOpen"):this.scrollWidth>this.clientWidth&&b.add(this,"esriAttributionOpen")}));this.attribution=new a({map:this},d)},_cleanUp:function(){this.disableMapNavigation();this.navigationManager.destroy();var a=this._slider;a&&a.destroy&&!a._destroyed&&a.destroy();var a=this._navDiv,b=this.attribution;a&&k.destroy(a);b&&b.destroy();this._connects.push(this._slider_connect,this._ogol_connect,this._rszSignal,this._oriSignal);h.forEach(this._connects,
E);clearInterval(this._persistentTimer);this.attribution=this.navigationManager=this._rids=this._connects=this._slider_connect=this._ogol_connect=this._rszSignal=this._oriSignal=this._persistentTimer=null;this.inherited("_cleanUp",arguments)},_isPanningOrZooming:function(){return this.__panning||this.__zooming},_canZoom:function(a){var b=this.getLevel();return!this.__tileInfo||!(b===this.getMinZoom()&&0>a||b===this.getMaxZoom()&&0<a)},_onLoadInitNavsHandler:function(){this.enableMapNavigation();this._createNav();
if("small"===this._mapParams.sliderStyle||!this._createSlider)this._createSimpleSlider();else if(this._mapParams.slider){var a=-1!==this._getSliderClass(!0).indexOf("Horizontal"),a=[a?"dijit.form.HorizontalSlider":"dijit.form.VerticalSlider",a?"dijit.form.HorizontalRule":"dijit.form.VerticalRule",a?"dijit.form.HorizontalRuleLabels":"dijit.form.VerticalRuleLabels"];if(h.some(a,function(a){return!q.getObject(a,!1)})){var a=h.map(a,function(a){return a.replace(/\./g,"/")}),b=H++,c=this;this._rids&&this._rids.push(b);
l(a,function(){var a=c._rids?h.indexOf(c._rids,b):-1;-1!==a&&(c._rids.splice(a,1),c._createSlider.apply(c,arguments))})}else a=h.map(a,function(a){return q.getObject(a,!1)}),this._createSlider.apply(this,a)}E(this._onLoadHandler_connect)},_createNav:function(){if(this._mapParams.nav){var a,c,d,e=b.add,p=this.id;this._navDiv=C("div",{id:p+"_navdiv"},this.root);e(this._navDiv,"navDiv");var r=this.width/2,k=this.height/2,f;for(d in A)c=A[d],a=C("div",{id:p+"_pan_"+d},this._navDiv),e(a,"fixedPan "+c),
"up"===d||"down"===d?(f=parseInt(I(a).w,10)/2,F(a,{left:r-f+"px",zIndex:30})):(f=parseInt(I(a).h,10)/2,F(a,{top:k-f+"px",zIndex:30})),this._connects.push(D(a,"onclick",K(this,this[c])));this._onMapResizeNavHandler_connect=D(this,"onResize",this,"_onMapResizeNavHandler");for(d in B)c=B[d],a=C("div",{id:p+"_pan_"+d,style:{zIndex:30}},this._navDiv),e(a,"fixedPan "+c),this._connects.push(D(a,"onclick",K(this,this[c])));this.isPanArrows=!0}},_onMapResizeNavHandler:function(a,b,d){a=this.id;b/=2;d/=2;var e=
c.byId,p,r,k;for(p in A)r=e(a+"_pan_"+p),"up"===p||"down"===p?(k=parseInt(I(r).w,10)/2,F(r,"left",b-k+"px")):(k=parseInt(I(r).h,10)/2,F(r,"top",d-k+"px"))},_createSimpleSlider:function(){if(this._mapParams.slider){var a=this._slider=C("div",{id:this.id+"_zoom_slider","class":this._getSliderClass(),style:{zIndex:30}}),d=y("esri-touch")&&!y("ff")?"touchstart":y("esri-pointer")?navigator.msPointerEnabled?"MSPointerDown":"pointerdown":"onclick",e=C("div",{"class":"esriSimpleSliderIncrementButton"},a),
p=C("div",{"class":"esriSimpleSliderDecrementButton"},a);this._addZoomButtonTooltips(e,p);this._incButton=e;this._decButton=p;this._simpleSliderZoomHandler(null,null,null,this.getLevel());e.innerHTML="\x3cspan\x3e+\x3c/span\x3e";p.innerHTML="\x3cspan\x3e\x26ndash;\x3c/span\x3e";8>y("ie")&&b.add(p,"dj_ie67Fix");this._connects.push(D(e,d,this,this._simpleSliderChangeHandler));this._connects.push(D(p,d,this,this._simpleSliderChangeHandler));"touchstart"==d&&(this._connects.push(D(e,"onclick",this,this._simpleSliderChangeHandler)),
this._connects.push(D(p,"onclick",this,this._simpleSliderChangeHandler)));(-1<this.getMaxZoom()||-1<this.getMinZoom())&&this._connects.push(D(this,"onZoomEnd",this,this._simpleSliderZoomHandler));10>y("ie")&&c.setSelectable(a,!1);this.root.appendChild(a);this.isZoomSlider=!0}},_simpleSliderChangeHandler:function(a){m.stop(a);a=-1!==a.currentTarget.className.indexOf("IncrementButton")?!0:!1;this._extentUtil({numLevels:a?1:-1})},_simpleSliderZoomHandler:function(a,c,d,e){var p;a=this._incButton;c=this._decButton;
-1<e&&e===this.getMaxZoom()?p=a:-1<e&&e===this.getMinZoom()&&(p=c);p?(b.add(p,"esriSimpleSliderDisabledButton"),b.remove(p===a?c:a,"esriSimpleSliderDisabledButton")):(b.remove(a,"esriSimpleSliderDisabledButton"),b.remove(c,"esriSimpleSliderDisabledButton"))},_getSliderClass:function(a){a=a?"Large":"Simple";var b=this._mapParams.sliderOrientation,c=this._mapParams.sliderPosition||"",b=b&&"horizontal"===b.toLowerCase()?"esri"+a+"SliderHorizontal":"esri"+a+"SliderVertical";if(c)switch(c.toLowerCase()){case "top-left":c=
"esri"+a+"SliderTL";break;case "top-right":c="esri"+a+"SliderTR";break;case "bottom-left":c="esri"+a+"SliderBL";break;case "bottom-right":c="esri"+a+"SliderBR"}return"esri"+a+"Slider "+b+" "+c},_addZoomButtonTooltips:function(a,b){var c=w.widgets.zoomSlider;e.set(a,"title",c.zoomIn);e.set(b,"title",c.zoomOut)},_createSlider:function(a,b,c){if(this._mapParams.slider){var d=C("div",{id:this.id+"_zoom_slider"},this.root),e=x.defaults.map,p=this._getSliderClass(!0),r=-1!==p.indexOf("Horizontal"),k=this.getNumLevels();
if(0<k){var f,t,m=this._mapParams.sliderLabels,g=!!m,s=!1!==m;if(s){var q=r?"bottomDecoration":"rightDecoration";if(!m){m=[];for(e=0;e<k;e++)m[e]=""}h.forEach([{"class":"esriLargeSliderTicks",container:q,count:k,dijitClass:b},{"class":g&&"esriLargeSliderLabels",container:q,count:k,labels:m,dijitClass:c}],function(a){var c=C("div"),e=a.dijitClass;delete a.dijitClass;d.appendChild(c);e===b?f=new e(a,c):t=new e(a,c)})}a=this._slider=new a({id:d.id,"class":p,minimum:this.getMinZoom(),maximum:this.getMaxZoom(),
discreteValues:k,value:this.getLevel(),clickSelect:!0,intermediateChanges:!0,style:"z-index:30;"},d);a.startup();s&&(f.startup(),t.startup());this._slider_connect=D(a,"onChange",this,"_onSliderChangeHandler");this._connects.push(D(this,"onExtentChange",this,"_onExtentChangeSliderHandler"));this._connects.push(D(a._movable,"onFirstMove",this,"_onSliderMoveStartHandler"))}else{a=this._slider=new a({id:d.id,"class":p,minimum:0,maximum:2,discreteValues:3,value:1,clickSelect:!0,intermediateChanges:e.sliderChangeImmediate,
style:"height:50px; z-index:30;"},d);c=a.domNode.firstChild.childNodes;for(e=1;3>=e;e++)F(c[e],"visibility","hidden");a.startup();this._slider_connect=D(a,"onChange",this,"_onDynSliderChangeHandler");this._connects.push(D(this,"onExtentChange",this,"_onExtentChangeDynSliderHandler"))}e=a.incrementButton;c=a.decrementButton;r?this._addZoomButtonTooltips(e,c):this._addZoomButtonTooltips(c,e);e.style.outline="none";c.style.outline="none";a.sliderHandle.style.outline="none";a._onKeyPress=function(){};
if(r=a._movable){var u=r.onMouseDown;r.onMouseDown=function(a){9>y("ie")&&1!==a.button||u.apply(this,arguments)}}this.isZoomSlider=!0}},_onSliderMoveStartHandler:function(){E(this._slider_connect);E(this._slidermovestop_connect);this._slider_connect=D(this._slider,"onChange",this,"_onSliderChangeDragHandler");this._slidermovestop_connect=D(this._slider._movable,"onMoveStop",this,"_onSliderMoveEndHandler")},_onSliderChangeDragHandler:function(a){this._extentUtil({targetLevel:a})},_onSliderMoveEndHandler:function(){E(this._slider_connect);
E(this._slidermovestop_connect)},_onSliderChangeHandler:function(a){this.setLevel(a)},_updateSliderValue:function(a,b){E(this._slider_connect);var c=this._slider,d=c._onChangeActive;c._onChangeActive=!1;c.set("value",a);c._onChangeActive=d;this._slider_connect=D(c,"onChange",this,b)},_onExtentChangeSliderHandler:function(a,b,c,d){E(this._slidermovestop_connect);this._updateSliderValue(d.level,"_onSliderChangeHandler")},_onDynSliderChangeHandler:function(a){this._extentUtil({numLevels:0<a?1:-1})},
_onExtentChangeDynSliderHandler:function(){this._updateSliderValue(1,"_onDynSliderChangeHandler")},_openLogoLink:function(a){window.open(x.defaults.map.logoLink,"_blank");m.stop(a)},enableMapNavigation:function(){this.navigationManager.enableNavigation()},disableMapNavigation:function(){this.navigationManager.disableNavigation()},enableDoubleClickZoom:function(){this.isDoubleClickZoom||(this.navigationManager.enableDoubleClickZoom(),this.isDoubleClickZoom=!0)},disableDoubleClickZoom:function(){this.isDoubleClickZoom&&
(this.navigationManager.disableDoubleClickZoom(),this.isDoubleClickZoom=!1)},enableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom||(G(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",null,"v2.0"),this.navigationManager.enableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!0)},disableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom&&(G(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",
null,"v2.0"),this.navigationManager.disableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!1)},enableClickRecenter:function(){this.isClickRecenter||(this.navigationManager.enableClickRecenter(),this.isClickRecenter=!0)},disableClickRecenter:function(){this.isClickRecenter&&(this.navigationManager.disableClickRecenter(),this.isClickRecenter=!1)},enablePan:function(){this.isPan||(this.navigationManager.enablePan(),this.isPan=!0)},disablePan:function(){this.isPan&&(this.navigationManager.disablePan(),
this.isPan=!1)},enableRubberBandZoom:function(){this.isRubberBandZoom||(this.navigationManager.enableRubberBandZoom(),this.isRubberBandZoom=!0)},disableRubberBandZoom:function(){this.isRubberBandZoom&&(this.navigationManager.disableRubberBandZoom(),this.isRubberBandZoom=!1)},enableKeyboardNavigation:function(){this.isKeyboardNavigation||(this.navigationManager.enableKeyboardNavigation(),this.isKeyboardNavigation=!0)},disableKeyboardNavigation:function(){this.isKeyboardNavigation&&(this.navigationManager.disableKeyboardNavigation(),
this.isKeyboardNavigation=!1)},enableScrollWheelZoom:function(){this.isScrollWheelZoom||(this.navigationManager.enableScrollWheelZoom(),this.isScrollWheelZoom=!0)},disableScrollWheelZoom:function(){this.isScrollWheelZoom&&(this.navigationManager.disableScrollWheelZoom(),this.isScrollWheelZoom=!1)},showPanArrows:function(){this._navDiv&&(this._navDiv.style.display="block",this.isPanArrows=!0)},hidePanArrows:function(){this._navDiv&&(this._navDiv.style.display="none",this.isPanArrows=!1)},showZoomSlider:function(){this._slider&&
(F(this._slider.domNode||this._slider,"visibility","visible"),this.isZoomSlider=!0)},hideZoomSlider:function(){this._slider&&(F(this._slider.domNode||this._slider,"visibility","hidden"),this.isZoomSlider=!1)}})})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(l,n,a){l=window.location;a=l.pathname;a={version:"3.14",_appBaseUrl:l.protocol+"//"+l.host+a.substring(0,a.lastIndexOf(a.split("/")[a.split("/").length-1]))};n.noGlobals||(window.esri=a);(a.dijit=
a.dijit||{})._arcgisUrl=("file:"===l.protocol?"http:":l.protocol)+"//www.arcgis.com/sharing/rest";return a})},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has","./kernel"],function(l,n,a,g){a={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},
sliderChangeImmediate:!0,zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:window.Worker&&!1,io:{errorHandler:function(a,h){n.publish("esri.Error",[a])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",corsEnabledServers:"server.arcgisonline.com services.arcgisonline.com www.arcgis.com tiles.arcgis.com tiles1.arcgis.com tiles2.arcgis.com tiles3.arcgis.com tiles4.arcgis.com elevation3d.arcgis.com services.arcgis.com services1.arcgis.com services2.arcgis.com services3.arcgis.com services4.arcgis.com services5.arcgis.com static.arcgis.com utility.arcgisonline.com geocode.arcgis.com geoenrich.arcgis.com qaext.arcgis.com tilesqa.arcgis.com servicesqa.arcgis.com servicesqa1.arcgis.com servicesqa2.arcgis.com servicesqa3.arcgis.com geocodeqa.arcgis.com geoenrichqa.arcgis.com dev.arcgis.com devext.arcgis.com staticdev.arcgis.com tilesdevext.arcgis.com elevation3ddev.arcgis.com servicesdev.arcgis.com servicesdev1.arcgis.com servicesdev2.arcgis.com servicesdev3.arcgis.com geocodedev.arcgis.com geoenrichdev.arcgis.com".split(" "),
corsDetection:window.cordova?!1:!0,corsStatus:{},webTierAuthServers:[],proxyRules:[],postLength:2E3,timeout:6E4,useWorkers:"on-request",maxRequestWorkers:5}}};l.noGlobals||(window.esriConfig=a);return a})},"esri/sniff":function(){define(["dojo/_base/sniff","./kernel"],function(l,n){var a=l("ff"),g=l("ie"),q=void 0===g&&7<=l("trident"),h=l("webkit"),m=l("opera"),f=l("chrome"),d=l("safari"),c=navigator.userAgent,e;(e=c.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+\_\d+)/i))&&l.add("esri-iphone",parseFloat(e[2].replace("_",
".")));(e=c.match(/Android\s+(\d+\.\d+)/i))&&l.add("esri-android",parseFloat(e[1]));(e=c.match(/Fennec\/(\d+\.\d+)/i))&&l.add("esri-fennec",parseFloat(e[1]));0<=c.indexOf("BlackBerry")&&0<=c.indexOf("WebKit")&&l.add("esri-blackberry",1);l.add("esri-touch",l("esri-iphone")||l("esri-android")||l("esri-blackberry")||6<=l("esri-fennec")||(a||h)&&document.createTouch?!0:!1);(e=c.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&l.add("esri-mobile",e);l.add("esri-pointer",navigator.pointerEnabled||
navigator.msPointerEnabled);n._getDOMAccessor=function(b){var c="";a?c="Moz":h?c="Webkit":g?c="ms":m&&(c="O");return c+b.charAt(0).toUpperCase()+b.substr(1)};l.add("esri-phonegap",!!window.cordova);l.add("esri-cors",l("esri-phonegap")||"XMLHttpRequest"in window&&"withCredentials"in new XMLHttpRequest);l.add("esri-file-upload",window.FormData&&window.FileList?!0:!1);l.add("esri-workers",window.Worker?!0:!1);l.add("esri-transforms",q||9<=g||3.5<=a||4<=f||3.1<=d||10.5<=m||3.2<=l("esri-iphone")||2.1<=
l("esri-android"));l.add("esri-transitions",q||10<=g||4<=a||4<=f||3.1<=d||10.5<=m||3.2<=l("esri-iphone")||2.1<=l("esri-android"));l.add("esri-transforms3d",q||10<=a||12<=f||4<=d||3.2<=l("esri-iphone")||3<=l("esri-android"));l.add("esri-url-encodes-apostrophe",function(){var a=window.document.createElement("a");a.href="?'";return-1<a.href.indexOf("?%27")});3>l("esri-android")&&(l.add("esri-transforms",!1,!1,!0),l.add("esri-transitions",!1,!1,!0),l.add("esri-transforms3d",!1,!1,!0));n._css=function(b){var c=
l("esri-transforms3d");if(void 0!==b&&null!==b)c=b;else if(c&&(f||d&&!l("esri-iphone")))c=!1;var e=c?"translate3d(":"translate(",p=c?f?",-1px)":",0px)":")",r=c?"scale3d(":"scale(",t=c?",1)":")",x=c?"rotate3d(0,0,1,":"rotate(",q=c?"matrix3d(":"matrix(",u=c?",0,0,":",",n=c?",0,0,0,0,1,0,":",",v=c?",0,1)":")";return{names:{transition:h&&"-webkit-transition"||a&&"MozTransition"||m&&"OTransition"||g&&"msTransition"||"transition",transform:h&&"-webkit-transform"||a&&"MozTransform"||m&&"OTransform"||g&&
"msTransform"||"transform",transformName:h&&"-webkit-transform"||a&&"-moz-transform"||m&&"-o-transform"||g&&"-ms-transform"||"transform",origin:h&&"-webkit-transform-origin"||a&&"MozTransformOrigin"||m&&"OTransformOrigin"||g&&"msTransformOrigin"||"transformOrigin",endEvent:h&&"webkitTransitionEnd"||a&&"transitionend"||m&&"oTransitionEnd"||g&&"MSTransitionEnd"||"transitionend"},translate:function(a,b){return e+a+"px,"+b+"px"+p},scale:function(a){return r+a+","+a+t},rotate:function(a){return x+a+"deg)"},
matrix:function(b){return q+b.xx+","+b.xy+u+b.yx+","+b.yy+n+b.dx.toFixed(10)+(a?"px,":",")+b.dy.toFixed(10)+(a?"px":"")+v},getScaleFromMatrix:function(a){if(!a)return 1;a=a.toLowerCase();var b=-1<a.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(a.substring(b.length,a.indexOf(",")))}}};return l})},"esri/lang":function(){define("dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),function(l,n,a,g,q,h,m,f,d){function c(a){return void 0!==
a&&null!==a}function e(a,b,d){var e=d.match(/([^\(]+)(\([^\)]+\))?/i),h=g.trim(e[1]);d=b[a];var e=n.fromJson((e[2]?g.trim(e[2]):"()").replace(/^\(/,"({").replace(/\)$/,"})")),s=e.utcOffset;if(-1===l.indexOf(k,h))h=g.getObject(h),g.isFunction(h)&&(d=h(d,a,b,e));else if("number"===typeof d||"string"===typeof d&&d&&!isNaN(Number(d)))switch(d=Number(d),h){case "NumberFormat":return m.format(d,e);case "DateString":a=new Date(d);if(e.local||e.systemLocale)return e.systemLocale?a.toLocaleDateString()+(e.hideTime?
"":" "+a.toLocaleTimeString()):a.toDateString()+(e.hideTime?"":" "+a.toTimeString());a=a.toUTCString();e.hideTime&&(a=a.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i,""));return a;case "DateFormat":return a=new Date(d),c(s)&&(a=q.add(a,"minute",a.getTimezoneOffset()-s)),f.format(a,e)}return c(d)?d:""}function b(a,c){var d;if(c)for(d in a)a.hasOwnProperty(d)&&(void 0===a[d]?delete a[d]:a[d]instanceof Object&&b(a[d],!0));else for(d in a)a.hasOwnProperty(d)&&void 0===a[d]&&delete a[d];return a}var k=["NumberFormat",
"DateString","DateFormat"],s=/<\/?[^>]+>/g;return{valueOf:function(a,b){for(var c in a)if(a[c]==b)return c;return null},stripTags:function(a){if(a){var b=typeof a;if("string"===b)a=a.replace(s,"");else if("object"===b)for(var c in a)(b=a[c])&&"string"===typeof b&&(b=b.replace(s,"")),a[c]=b}return a},substitute:function(a,b,d){var k,f,h;c(d)&&(g.isObject(d)?(k=d.first,f=d.dateFormat,h=d.numberFormat):k=d);if(!b||"${*}"===b){b=[];for(var m in a){d=a[m];if(f&&-1!==l.indexOf(f.properties||"",m))d=e(m,
a,f.formatter||"DateString");else if(h&&-1!==l.indexOf(h.properties||"",m))d=e(m,a,h.formatter||"NumberFormat");b.push(m+" \x3d "+(c(d)?d:"")+"\x3cbr/\x3e");if(k)break}return b.join("")}return g.replace(b,g.hitch({obj:a},function(a,b){var d=b.split(":");return 1<d.length?(b=d[0],d.shift(),e(b,this.obj,d.join(":"))):f&&-1!==l.indexOf(f.properties||"",b)?e(b,this.obj,f.formatter||"DateString"):h&&-1!==l.indexOf(h.properties||"",b)?e(b,this.obj,h.formatter||"NumberFormat"):c(this.obj[b])?this.obj[b]:
""}),/\$\{([^\}]+)\}/g)},filter:function(b,c,d){c=[g.isString(b)?b.split(""):b,d||a.global,g.isString(c)?new Function("item","index","array",c):c];d={};var e;b=c[0];for(e in b)c[2].call(c[e],b[e],e,b)&&(d[e]=b[e]);return d},isDefined:c,fixJson:b}})},"dojo/_base/json":function(){define(["./kernel","../json"],function(l,n){l.fromJson=function(a){return eval("("+a+")")};l._escapeString=n.stringify;l.toJsonIndentStr="\t";l.toJson=function(a,g){return n.stringify(a,function(a,h){if(h){var m=h.__json__||
h.json;if("function"==typeof m)return m.call(h)}return h},g&&l.toJsonIndentStr)};return l})},"dojo/json":function(){define(["./has"],function(l){var n="undefined"!=typeof JSON;l.add("json-parse",n);l.add("json-stringify",n&&'{"a":1}'==JSON.stringify({a:0},function(a,q){return q||1}));if(l("json-stringify"))return JSON;var a=function(a){return('"'+a.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:l("json-parse")?
JSON.parse:function(a,q){if(q&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(a))throw new SyntaxError("Invalid characters in JSON");return eval("("+a+")")},stringify:function(g,q,h){function m(d,c,e){q&&(d=q(e,d));var b;b=typeof d;if("number"==b)return isFinite(d)?d+"":"null";if("boolean"==b)return d+"";if(null===d)return"null";if("string"==typeof d)return a(d);if("function"==b||"undefined"==b)return f;if("function"==typeof d.toJSON)return m(d.toJSON(e),
c,e);if(d instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(a,b,c){a=d["getUTC"+b]()+(c?1:0);return 10>a?"0"+a:a});if(d.valueOf()!==d)return m(d.valueOf(),c,e);var k=h?c+h:"",g=h?" ":"",p=h?"\n":"";if(d instanceof Array){var g=d.length,r=[];for(e=0;e<g;e++)b=m(d[e],k,e),"string"!=typeof b&&(b="null"),r.push(p+k+b);return"["+r.join(",")+p+c+"]"}r=[];for(e in d){var t;if(d.hasOwnProperty(e)){if("number"==typeof e)t='"'+e+'"';else if("string"==
typeof e)t=a(e);else continue;b=m(d[e],k,e);"string"==typeof b&&r.push(p+k+t+":"+g+b)}}return"{"+r.join(",")+p+c+"}"}var f;"string"==typeof q&&(h=q,q=null);return m(g,"","")}}})},"dojo/date":function(){define(["./has","./_base/lang"],function(l,n){var a={getDaysInMonth:function(g){var q=g.getMonth();return 1==q&&a.isLeapYear(g)?29:[31,28,31,30,31,30,31,31,30,31,30,31][q]},isLeapYear:function(a){a=a.getFullYear();return!(a%400)||!(a%4)&&!!(a%100)},getTimezoneName:function(a){var q=a.toString(),h="",
m=q.indexOf("(");if(-1<m)h=q.substring(++m,q.indexOf(")"));else if(m=/([A-Z\/]+) \d{4}$/,q=q.match(m))h=q[1];else if(q=a.toLocaleString(),m=/ ([A-Z\/]+)$/,q=q.match(m))h=q[1];return"AM"==h||"PM"==h?"":h},compare:function(a,q,h){a=new Date(+a);q=new Date(+(q||new Date));"date"==h?(a.setHours(0,0,0,0),q.setHours(0,0,0,0)):"time"==h&&(a.setFullYear(0,0,0),q.setFullYear(0,0,0));return a>q?1:a<q?-1:0},add:function(a,q,h){var m=new Date(+a),f=!1,d="Date";switch(q){case "day":break;case "weekday":var c;
(q=h%5)?c=parseInt(h/5):(q=0<h?5:-5,c=0<h?(h-5)/5:(h+5)/5);var e=a.getDay(),b=0;6==e&&0<h?b=1:0==e&&0>h&&(b=-1);e+=q;if(0==e||6==e)b=0<h?2:-2;h=7*c+q+b;break;case "year":d="FullYear";f=!0;break;case "week":h*=7;break;case "quarter":h*=3;case "month":f=!0;d="Month";break;default:d="UTC"+q.charAt(0).toUpperCase()+q.substring(1)+"s"}if(d)m["set"+d](m["get"+d]()+h);f&&m.getDate()<a.getDate()&&m.setDate(0);return m},difference:function(g,q,h){q=q||new Date;h=h||"day";var m=q.getFullYear()-g.getFullYear(),
f=1;switch(h){case "quarter":g=g.getMonth();q=q.getMonth();g=Math.floor(g/3)+1;q=Math.floor(q/3)+1;f=q+4*m-g;break;case "weekday":m=Math.round(a.difference(g,q,"day"));h=parseInt(a.difference(g,q,"week"));f=m%7;if(0==f)m=5*h;else{var d=0,c=g.getDay();q=q.getDay();h=parseInt(m/7);f=m%7;g=new Date(g);g.setDate(g.getDate()+7*h);g=g.getDay();if(0<m)switch(!0){case 6==c:d=-1;break;case 0==c:d=0;break;case 6==q:d=-1;break;case 0==q:d=-2;break;case 5<g+f:d=-2}else if(0>m)switch(!0){case 6==c:d=0;break;case 0==
c:d=1;break;case 6==q:d=2;break;case 0==q:d=1;break;case 0>g+f:d=2}m=m+d-2*h}f=m;break;case "year":f=m;break;case "month":f=q.getMonth()-g.getMonth()+12*m;break;case "week":f=parseInt(a.difference(g,q,"day")/7);break;case "day":f/=24;case "hour":f/=60;case "minute":f/=60;case "second":f/=1E3;case "millisecond":f*=q.getTime()-g.getTime()}return Math.round(f)}};n.mixin(n.getObject("dojo.date",!0),a);return a})},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string",
"./regexp"],function(l,n,a,g,q){var h={};l.setObject("dojo.number",h);h.format=function(a,d){d=l.mixin({},d||{});var c=n.normalizeLocale(d.locale),c=n.getLocalization("dojo.cldr","number",c);d.customs=c;c=d.pattern||c[(d.type||"decimal")+"Format"];return isNaN(a)||Infinity==Math.abs(a)?null:h._applyPattern(a,c,d)};h._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;h._applyPattern=function(a,d,c){c=c||{};var e=c.customs.group,b=c.customs.decimal;d=d.split(";");var k=d[0];d=d[0>a?1:0]||"-"+k;if(-1!=d.indexOf("%"))a*=
100;else if(-1!=d.indexOf("\u2030"))a*=1E3;else if(-1!=d.indexOf("\u00a4"))e=c.customs.currencyGroup||e,b=c.customs.currencyDecimal||b,d=d.replace(/\u00a4{1,3}/,function(a){return c[["symbol","currency","displayName"][a.length-1]]||c.currency||""});else if(-1!=d.indexOf("E"))throw Error("exponential notation not supported");var m=h._numberPatternRE,k=k.match(m);if(!k)throw Error("unable to find a number expression in pattern: "+d);!1===c.fractional&&(c.places=0);return d.replace(m,h._formatAbsolute(a,
k[0],{decimal:b,group:e,places:c.places,round:c.round}))};h.round=function(a,d,c){c=10/(c||10);return(c*+a).toFixed(d)/c};if(0==(0.9).toFixed()){var m=h.round;h.round=function(a,d,c){var e=Math.pow(10,-d||0),b=Math.abs(a);if(!a||b>=e)e=0;else if(b/=e,0.5>b||0.95<=b)e=0;return m(a,d,c)+(0<a?e:-e)}}h._formatAbsolute=function(a,d,c){c=c||{};!0===c.places&&(c.places=0);Infinity===c.places&&(c.places=6);d=d.split(".");var e="string"==typeof c.places&&c.places.indexOf(","),b=c.places;e?b=c.places.substring(e+
1):0<=b||(b=(d[1]||[]).length);0>c.round||(a=h.round(a,b,c.round));a=String(Math.abs(a)).split(".");var k=a[1]||"";d[1]||c.places?(e&&(c.places=c.places.substring(0,e)),e=void 0!==c.places?c.places:d[1]&&d[1].lastIndexOf("0")+1,e>k.length&&(a[1]=g.pad(k,e,"0",!0)),b<k.length&&(a[1]=k.substr(0,b))):a[1]&&a.pop();b=d[0].replace(",","");e=b.indexOf("0");-1!=e&&(e=b.length-e,e>a[0].length&&(a[0]=g.pad(a[0],e)),-1==b.indexOf("#")&&(a[0]=a[0].substr(a[0].length-e)));var b=d[0].lastIndexOf(","),m,p;-1!=
b&&(m=d[0].length-b-1,d=d[0].substr(0,b),b=d.lastIndexOf(","),-1!=b&&(p=d.length-b-1));d=[];for(b=a[0];b;)e=b.length-m,d.push(0<e?b.substr(e):b),b=0<e?b.slice(0,e):"",p&&(m=p,delete p);a[0]=d.reverse().join(c.group||",");return a.join(c.decimal||".")};h.regexp=function(a){return h._parseInfo(a).regexp};h._parseInfo=function(a){a=a||{};var d=n.normalizeLocale(a.locale),d=n.getLocalization("dojo.cldr","number",d),c=a.pattern||d[(a.type||"decimal")+"Format"],e=d.group,b=d.decimal,k=1;if(-1!=c.indexOf("%"))k/=
100;else if(-1!=c.indexOf("\u2030"))k/=1E3;else{var m=-1!=c.indexOf("\u00a4");m&&(e=d.currencyGroup||e,b=d.currencyDecimal||b)}d=c.split(";");1==d.length&&d.push("-"+d[0]);d=q.buildGroupRE(d,function(c){c="(?:"+q.escapeString(c,".")+")";return c.replace(h._numberPatternRE,function(c){var d={signed:!1,separator:a.strict?e:[e,""],fractional:a.fractional,decimal:b,exponent:!1};c=c.split(".");var p=a.places;1==c.length&&1!=k&&(c[1]="###");1==c.length||0===p?d.fractional=!1:(void 0===p&&(p=a.pattern?c[1].lastIndexOf("0")+
1:Infinity),p&&void 0==a.fractional&&(d.fractional=!0),!a.places&&p<c[1].length&&(p+=","+c[1].length),d.places=p);c=c[0].split(",");1<c.length&&(d.groupSize=c.pop().length,1<c.length&&(d.groupSize2=c.pop().length));return"("+h._realNumberRegexp(d)+")"})},!0);m&&(d=d.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(b,c,d,e){b=q.escapeString(a[["symbol","currency","displayName"][d.length-1]]||a.currency||"");c=c?"[\\s\\xa0]":"";e=e?"[\\s\\xa0]":"";return!a.strict?(c&&(c+="*"),e&&(e+="*"),"(?:"+
c+b+e+")?"):c+b+e}));return{regexp:d.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:e,decimal:b,factor:k}};h.parse=function(a,d){var c=h._parseInfo(d),e=RegExp("^"+c.regexp+"$").exec(a);if(!e)return NaN;var b=e[1];if(!e[1]){if(!e[2])return NaN;b=e[2];c.factor*=-1}b=b.replace(RegExp("["+c.group+"\\s\\xa0]","g"),"").replace(c.decimal,".");return b*c.factor};h._realNumberRegexp=function(a){a=a||{};"places"in a||(a.places=Infinity);"string"!=typeof a.decimal&&(a.decimal=".");if(!("fractional"in a)||/^0/.test(a.places))a.fractional=
[!0,!1];"exponent"in a||(a.exponent=[!0,!1]);"eSigned"in a||(a.eSigned=[!0,!1]);var d=h._integerRegexp(a),c=q.buildGroupRE(a.fractional,function(b){var c="";b&&0!==a.places&&(c="\\"+a.decimal,c=Infinity==a.places?"(?:"+c+"\\d+)?":c+("\\d{"+a.places+"}"));return c},!0),e=q.buildGroupRE(a.exponent,function(b){return b?"([eE]"+h._integerRegexp({signed:a.eSigned})+")":""}),d=d+c;c&&(d="(?:(?:"+d+")|(?:"+c+"))");return d+e};h._integerRegexp=function(a){a=a||{};"signed"in a||(a.signed=[!0,!1]);"separator"in
a?"groupSize"in a||(a.groupSize=3):a.separator="";var d=q.buildGroupRE(a.signed,function(a){return a?"[-+]":""},!0),c=q.buildGroupRE(a.separator,function(c){if(!c)return"(?:\\d+)";c=q.escapeString(c);" "==c?c="\\s":"\u00a0"==c&&(c="\\s\\xa0");var b=a.groupSize,d=a.groupSize2;return d?(c="(?:0|[1-9]\\d{0,"+(d-1)+"}(?:["+c+"]\\d{"+d+"})*["+c+"]\\d{"+b+"})",0<b-d?"(?:"+c+"|(?:0|[1-9]\\d{0,"+(b-1)+"}))":c):"(?:0|[1-9]\\d{0,"+(b-1)+"}(?:["+c+"]\\d{"+b+"})*)"},!0);return d+c};return h})},"dojo/i18n":function(){define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./_base/xhr ./json module".split(" "),
function(l,n,a,g,q,h,m,f,d){a.add("dojo-preload-i18n-Api",1);m=l.i18n={};var c=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,e=function(a,b,c,d){var e=[c+d];b=b.split("-");for(var p="",k=0;k<b.length;k++)if(p+=(p?"-":"")+b[k],!a||a[p])e.push(c+p+"/"+d),e.specificity=p;return e},b={},k=function(a,b,c){c=c?c.toLowerCase():l.locale;a=a.replace(/\./g,"/");b=b.replace(/\./g,"/");return/root/i.test(c)?a+"/nls/"+b:a+"/nls/"+c+"/"+b},s=l.getL10nName=function(a,b,c){return d.id+"!"+k(a,b,c)},p=function(a,c,d,
p,k,r){a([c],function(f){var t=h.clone(f.root||f.ROOT),m=e(!f._v1x&&f,k,d,p);a(m,function(){for(var a=1;a<m.length;a++)t=h.mixin(h.clone(t),arguments[a]);b[c+"/"+k]=t;t.$locale=m.specificity;r()})})},r=function(a){var b=q.extraLocale||[],b=h.isArray(b)?b:[b];b.push(a);return b},t=function(d,e,k){if(a("dojo-preload-i18n-Api")){var t=d.split("*"),m="preload"==t[1];m&&(b[d]||(b[d]=1,v(t[2],f.parse(t[3]),1,e)),k(1));if(!(t=m))u&&z.push([d,e,k]),t=u;if(t)return}d=c.exec(d);var s=d[1]+"/",x=d[5]||d[4],
q=s+x,t=(d=d[5]&&d[4])||l.locale||"",y=q+"/"+t;d=d?[t]:r(t);var n=d.length,B=function(){--n||k(h.delegate(b[y]))};g.forEach(d,function(c){var d=q+"/"+c;a("dojo-preload-i18n-Api")&&w(d);b[d]?B():p(e,q,s,x,c,B)})};if(a("dojo-unit-tests"))var x=m.unitTests=[];a("dojo-preload-i18n-Api");var y=m.normalizeLocale=function(a){a=a?a.toLowerCase():l.locale;return"root"==a?"ROOT":a},u=0,z=[],v=m._preloadLocalizations=function(a,c,d,e){function p(a,b){e([a],b)}function k(a,b){for(var c=a.split("-");c.length;){if(b(c.join("-")))return;
c.pop()}b("ROOT")}function r(){for(--u;!u&&z.length;)t.apply(null,z.shift())}function f(d){d=y(d);k(d,function(f){if(0<=g.indexOf(c,f)){var t=a.replace(/\./g,"/")+"_"+f;u++;p(t,function(a){for(var c in a){var p=a[c],t=c.match(/(.+)\/([^\/]+)$/),m;if(t){m=t[2];t=t[1]+"/";p._localized=p._localized||{};var g;if("ROOT"===f){var s=g=p._localized;delete p._localized;s.root=p;b[n.toAbsMid(c)]=s}else g=p._localized,b[n.toAbsMid(t+m+"/"+f)]=p;f!==d&&function(a,c,p,f){var t=[],m=[];k(d,function(b){f[b]&&(t.push(n.toAbsMid(a+
b+"/"+c)),m.push(n.toAbsMid(a+c+"/"+b)))});t.length?(u++,e(t,function(){for(var e=0;e<t.length;e++)p=h.mixin(h.clone(p),arguments[e]),b[m[e]]=p;b[n.toAbsMid(a+c+"/"+d)]=h.clone(p);r()})):b[n.toAbsMid(a+c+"/"+d)]=p}(t,m,p,g)}}r()});return!0}return!1})}e=e||n;f();g.forEach(l.config.extraLocale,f)},w=function(){},A={},B=new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define \x3d function(mid, factory){define.called \x3d 1; __amdValue.result \x3d factory || mid;},\t   require \x3d function(){define.called \x3d 1;};try{define.called \x3d 0;eval(__bundle);if(define.called\x3d\x3d1)return __amdValue;if((__checkForLegacyModules \x3d __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}"),
w=function(a){for(var c,d=a.split("/"),e=l.global[d[0]],p=1;e&&p<d.length-1;e=e[d[p++]]);e&&((c=e[d[p]])||(c=e[d[p].replace(/-/g,"_")]),c&&(b[a]=c));return c};m.getLocalization=function(a,b,c){var d;a=k(a,b,c);t(a,n,function(a){d=a});return d};a("dojo-unit-tests")&&x.push(function(a){a.register("tests.i18n.unit",function(a){var b;b=B("{prop:1}",w,"nonsense",A);a.is({prop:1},b);a.is(void 0,b[1]);b=B("({prop:1})",w,"nonsense",A);a.is({prop:1},b);a.is(void 0,b[1]);b=B("{'prop-x':1}",w,"nonsense",A);
a.is({"prop-x":1},b);a.is(void 0,b[1]);b=B("({'prop-x':1})",w,"nonsense",A);a.is({"prop-x":1},b);a.is(void 0,b[1]);b=B("define({'prop-x':1})",w,"nonsense",A);a.is(A,b);a.is({"prop-x":1},A.result);b=B("define('some/module', {'prop-x':1})",w,"nonsense",A);a.is(A,b);a.is({"prop-x":1},A.result);b=B("this is total nonsense and should throw an error",w,"nonsense",A);a.is(b instanceof Error,!0)})});return h.mixin(m,{dynamic:!0,normalize:function(a,b){return/^\./.test(a)?b(a):a},load:t,cache:b,getL10nName:s})})},
"dojo/_base/xhr":function(){define("./kernel ./sniff require ../io-query ../dom ../dom-form ./Deferred ./config ./json ./lang ./array ../on ../aspect ../request/watch ../request/xhr ../request/util".split(" "),function(l,n,a,g,q,h,m,f,d,c,e,b,k,s,p,r){l._xhrObj=p._create;var t=l.config;l.objectToQuery=g.objectToQuery;l.queryToObject=g.queryToObject;l.fieldToObject=h.fieldToObject;l.formToObject=h.toObject;l.formToQuery=h.toQuery;l.formToJson=h.toJson;l._blockAsync=!1;var x=l._contentHandlers=l.contentHandlers=
{text:function(a){return a.responseText},json:function(a){return d.fromJson(a.responseText||null)},"json-comment-filtered":function(a){a=a.responseText;var b=a.indexOf("/*"),c=a.lastIndexOf("*/");if(-1==b||-1==c)throw Error("JSON was not comment filtered");return d.fromJson(a.substring(b+2,c))},javascript:function(a){return l.eval(a.responseText)},xml:function(a){var b=a.responseXML;b&&(n("dom-qsa2.1")&&!b.querySelectorAll&&n("dom-parser"))&&(b=(new DOMParser).parseFromString(a.responseText,"application/xml"));
if(n("ie")&&(!b||!b.documentElement)){var c=function(a){return"MSXML"+a+".DOMDocument"},c=["Microsoft.XMLDOM",c(6),c(4),c(3),c(2)];e.some(c,function(c){try{var d=new ActiveXObject(c);d.async=!1;d.loadXML(a.responseText);b=d}catch(e){return!1}return!0})}return b},"json-comment-optional":function(a){return a.responseText&&/^[^{\[]*\/\*/.test(a.responseText)?x["json-comment-filtered"](a):x.json(a)}};l._ioSetArgs=function(a,b,d,e){var p={args:a,url:a.url},k=null;if(a.form){var k=q.byId(a.form),r=k.getAttributeNode("action");
p.url=p.url||(r?r.value:null);k=h.toObject(k)}r=[{}];k&&r.push(k);a.content&&r.push(a.content);a.preventCache&&r.push({"dojo.preventCache":(new Date).valueOf()});p.query=g.objectToQuery(c.mixin.apply(null,r));p.handleAs=a.handleAs||"text";var f=new m(function(a){a.canceled=!0;b&&b(a);var c=a.ioArgs.error;c||(c=Error("request cancelled"),c.dojoType="cancel",a.ioArgs.error=c);return c});f.addCallback(d);var s=a.load;s&&c.isFunction(s)&&f.addCallback(function(b){return s.call(a,b,p)});var x=a.error;
x&&c.isFunction(x)&&f.addErrback(function(b){return x.call(a,b,p)});var u=a.handle;u&&c.isFunction(u)&&f.addBoth(function(b){return u.call(a,b,p)});f.addErrback(function(a){return e(a,f)});t.ioPublish&&(l.publish&&!1!==p.args.ioPublish)&&(f.addCallbacks(function(a){l.publish("/dojo/io/load",[f,a]);return a},function(a){l.publish("/dojo/io/error",[f,a]);return a}),f.addBoth(function(a){l.publish("/dojo/io/done",[f,a]);return a}));f.ioArgs=p;return f};var y=function(a){a=x[a.ioArgs.handleAs](a.ioArgs.xhr);
return void 0===a?null:a},u=function(a,b){return a},z=function(a){0>=v&&(v=0,t.ioPublish&&(l.publish&&(!a||a&&!1!==a.ioArgs.args.ioPublish))&&l.publish("/dojo/io/stop"))},v=0;k.after(s,"_onAction",function(){v-=1});k.after(s,"_onInFlight",z);l._ioCancelAll=s.cancelAll;l._ioNotifyStart=function(a){t.ioPublish&&(l.publish&&!1!==a.ioArgs.args.ioPublish)&&(v||l.publish("/dojo/io/start"),v+=1,l.publish("/dojo/io/send",[a]))};l._ioWatch=function(a,b,d,e){a.ioArgs.options=a.ioArgs.args;c.mixin(a,{response:a.ioArgs,
isValid:function(c){return b(a)},isReady:function(b){return d(a)},handleResponse:function(b){return e(a)}});s(a);z(a)};l._ioAddQueryToUrl=function(a){a.query.length&&(a.url+=(-1==a.url.indexOf("?")?"?":"\x26")+a.query,a.query=null)};l.xhr=function(a,b,c){var d,e=l._ioSetArgs(b,function(a){d&&d.cancel()},y,u),k=e.ioArgs;"postData"in b?k.query=b.postData:"putData"in b?k.query=b.putData:"rawBody"in b?k.query=b.rawBody:(2<arguments.length&&!c||-1==="POST|PUT".indexOf(a.toUpperCase()))&&l._ioAddQueryToUrl(k);
var r={method:a,handleAs:"text",timeout:b.timeout,withCredentials:b.withCredentials,ioArgs:k};"undefined"!==typeof b.headers&&(r.headers=b.headers);"undefined"!==typeof b.contentType&&(r.headers||(r.headers={}),r.headers["Content-Type"]=b.contentType);"undefined"!==typeof k.query&&(r.data=k.query);"undefined"!==typeof b.sync&&(r.sync=b.sync);l._ioNotifyStart(e);try{d=p(k.url,r,!0)}catch(f){return e.cancel(),e}e.ioArgs.xhr=d.response.xhr;d.then(function(){e.resolve(e)}).otherwise(function(a){k.error=
a;a.response&&(a.status=a.response.status,a.responseText=a.response.text,a.xhr=a.response.xhr);e.reject(a)});return e};l.xhrGet=function(a){return l.xhr("GET",a)};l.rawXhrPost=l.xhrPost=function(a){return l.xhr("POST",a,!0)};l.rawXhrPut=l.xhrPut=function(a){return l.xhr("PUT",a,!0)};l.xhrDelete=function(a){return l.xhr("DELETE",a)};l._isDocumentOk=function(a){return r.checkStatus(a.status)};l._getText=function(a){var b;l.xhrGet({url:a,sync:!0,load:function(a){b=a}});return b};c.mixin(l.xhr,{_xhrObj:l._xhrObj,
fieldToObject:h.fieldToObject,formToObject:h.toObject,objectToQuery:g.objectToQuery,formToQuery:h.toQuery,formToJson:h.toJson,queryToObject:g.queryToObject,contentHandlers:x,_ioSetArgs:l._ioSetArgs,_ioCancelAll:l._ioCancelAll,_ioNotifyStart:l._ioNotifyStart,_ioWatch:l._ioWatch,_ioAddQueryToUrl:l._ioAddQueryToUrl,_isDocumentOk:l._isDocumentOk,_getText:l._getText,get:l.xhrGet,post:l.xhrPost,put:l.xhrPut,del:l.xhrDelete});return l.xhr})},"dojo/io-query":function(){define(["./_base/lang"],function(l){var n=
{};return{objectToQuery:function(a){var g=encodeURIComponent,q=[],h;for(h in a){var m=a[h];if(m!=n[h]){var f=g(h)+"\x3d";if(l.isArray(m))for(var d=0,c=m.length;d<c;++d)q.push(f+g(m[d]));else q.push(f+g(m))}}return q.join("\x26")},queryToObject:function(a){var g=decodeURIComponent;a=a.split("\x26");for(var q={},h,m,f=0,d=a.length;f<d;++f)if(m=a[f],m.length){var c=m.indexOf("\x3d");0>c?(h=g(m),m=""):(h=g(m.slice(0,c)),m=g(m.slice(c+1)));"string"==typeof q[h]&&(q[h]=[q[h]]);l.isArray(q[h])?q[h].push(m):
q[h]=m}return q}}})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(l,n,a,g){var q={fieldToObject:function(a){var m=null;if(a=n.byId(a)){var f=a.name,d=(a.type||"").toLowerCase();if(f&&d&&!a.disabled)if("radio"==d||"checkbox"==d)a.checked&&(m=a.value);else if(a.multiple){m=[];for(a=[a.firstChild];a.length;)for(f=a.pop();f;f=f.nextSibling)if(1==f.nodeType&&"option"==f.tagName.toLowerCase())f.selected&&m.push(f.value);else{f.nextSibling&&a.push(f.nextSibling);
f.firstChild&&a.push(f.firstChild);break}}else m=a.value}return m},toObject:function(a){var m={};a=n.byId(a).elements;for(var f=0,d=a.length;f<d;++f){var c=a[f],e=c.name,b=(c.type||"").toLowerCase();if(e&&b&&0>"file|submit|image|reset|button".indexOf(b)&&!c.disabled){var k=m,g=e,c=q.fieldToObject(c);if(null!==c){var p=k[g];"string"==typeof p?k[g]=[p,c]:l.isArray(p)?p.push(c):k[g]=c}"image"==b&&(m[e+".x"]=m[e+".y"]=m[e].x=m[e].y=0)}}return m},toQuery:function(h){return a.objectToQuery(q.toObject(h))},
toJson:function(a,m){return g.stringify(q.toObject(a),null,m?4:0)}};return q})},"dojo/_base/Deferred":function(){define("./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "),function(l,n,a,g,q,h,m){var f=function(){},d=Object.freeze||function(){},c=l.Deferred=function(e){function b(a){if(p)throw Error("This deferred has already been resolved");m=a;p=!0;k()}function k(){for(var a;!a&&u;){var b=u;u=u.next;if(a=b.progress==f)p=!1;var c=x?b.error:b.resolved;
q("config-useDeferredInstrumentation")&&x&&n.instrumentRejected&&n.instrumentRejected(m,!!c);if(c)try{var d=c(m);d&&"function"===typeof d.then?d.then(h.hitch(b.deferred,"resolve"),h.hitch(b.deferred,"reject"),h.hitch(b.deferred,"progress")):(c=a&&void 0===d,a&&!c&&(x=d instanceof Error),b.deferred[c&&x?"reject":"resolve"](c?m:d))}catch(e){b.deferred.reject(e)}else x?b.deferred.reject(m):b.deferred.resolve(m)}}var m,p,r,t,x,l,u,z=this.promise=new a;this.isResolved=z.isResolved=function(){return 0==
t};this.isRejected=z.isRejected=function(){return 1==t};this.isFulfilled=z.isFulfilled=function(){return 0<=t};this.isCanceled=z.isCanceled=function(){return r};this.resolve=this.callback=function(a){this.fired=t=0;this.results=[a,null];b(a)};this.reject=this.errback=function(a){x=!0;this.fired=t=1;q("config-useDeferredInstrumentation")&&n.instrumentRejected&&n.instrumentRejected(a,!!u);b(a);this.results=[null,a]};this.progress=function(a){for(var b=u;b;){var c=b.progress;c&&c(a);b=b.next}};this.addCallbacks=
function(a,b){this.then(a,b,f);return this};z.then=this.then=function(a,b,d){var e=d==f?this:new c(z.cancel);a={resolved:a,error:b,progress:d,deferred:e};u?l=l.next=a:u=l=a;p&&k();return e.promise};var v=this;z.cancel=this.cancel=function(){if(!p){var a=e&&e(v);p||(a instanceof Error||(a=new g(a)),a.log=!1,v.reject(a))}r=!0};d(z)};h.extend(c,{addCallback:function(a){return this.addCallbacks(h.hitch.apply(l,arguments))},addErrback:function(a){return this.addCallbacks(null,h.hitch.apply(l,arguments))},
addBoth:function(a){var b=h.hitch.apply(l,arguments);return this.addCallbacks(b,b)},fired:-1});c.when=l.when=m;return c})},"dojo/request/watch":function(){define("./util ../errors/RequestTimeoutError ../errors/CancelError ../_base/array ../_base/window ../has!host-browser?dom-addeventlistener?:../on:".split(" "),function(l,n,a,g,q,h){function m(){for(var a=+new Date,b=0,k;b<c.length&&(k=c[b]);b++){var h=k.response,p=h.options;if(k.isCanceled&&k.isCanceled()||k.isValid&&!k.isValid(h))c.splice(b--,
1),f._onAction&&f._onAction();else if(k.isReady&&k.isReady(h))c.splice(b--,1),k.handleResponse(h),f._onAction&&f._onAction();else if(k.startTime&&k.startTime+(p.timeout||0)<a)c.splice(b--,1),k.cancel(new n("Timeout exceeded",h)),f._onAction&&f._onAction()}f._onInFlight&&f._onInFlight(k);c.length||(clearInterval(d),d=null)}function f(a){a.response.options.timeout&&(a.startTime=+new Date);a.isFulfilled()||(c.push(a),d||(d=setInterval(m,50)),a.response.options.sync&&m())}var d=null,c=[];f.cancelAll=
function(){try{g.forEach(c,function(b){try{b.cancel(new a("All requests canceled."))}catch(c){}})}catch(d){}};q&&(h&&q.doc.attachEvent)&&h(q.global,"unload",function(){f.cancelAll()});return f})},"dojo/request/util":function(){define("exports ../errors/RequestError ../errors/CancelError ../Deferred ../io-query ../_base/array ../_base/lang ../promise/Promise".split(" "),function(l,n,a,g,q,h,m,f){function d(a){return e(a)}function c(a){return a.data||a.text}l.deepCopy=function(a,c){for(var d in c){var e=
a[d],r=c[d];e!==r&&(e&&"object"===typeof e&&r&&"object"===typeof r?l.deepCopy(e,r):a[d]=r)}return a};l.deepCreate=function(a,c){c=c||{};var d=m.delegate(a),e,r;for(e in a)(r=a[e])&&"object"===typeof r&&(d[e]=l.deepCreate(r,c[e]));return l.deepCopy(d,c)};var e=Object.freeze||function(a){return a};l.deferred=function(b,k,h,p,r,t){var x=new g(function(c){k&&k(x,b);return!c||!(c instanceof n)&&!(c instanceof a)?new a("Request canceled",b):c});x.response=b;x.isValid=h;x.isReady=p;x.handleResponse=r;h=
x.then(d).otherwise(function(a){a.response=b;throw a;});l.notify&&h.then(m.hitch(l.notify,"emit","load"),m.hitch(l.notify,"emit","error"));p=h.then(c);r=new f;for(var q in p)p.hasOwnProperty(q)&&(r[q]=p[q]);r.response=h;e(r);t&&x.then(function(a){t.call(x,a)},function(a){t.call(x,b,a)});x.promise=r;x.then=r.then;return x};l.addCommonMethods=function(a,c){h.forEach(c||["GET","POST","PUT","DELETE"],function(c){a[("DELETE"===c?"DEL":c).toLowerCase()]=function(d,e){e=m.delegate(e||{});e.method=c;return a(d,
e)}})};l.parseArgs=function(a,c,d){var e=c.data,r=c.query;e&&!d&&"object"===typeof e&&(c.data=q.objectToQuery(e));r?("object"===typeof r&&(r=q.objectToQuery(r)),c.preventCache&&(r+=(r?"\x26":"")+"request.preventCache\x3d"+ +new Date)):c.preventCache&&(r="request.preventCache\x3d"+ +new Date);a&&r&&(a+=(~a.indexOf("?")?"\x26":"?")+r);return{url:a,options:c,getHeader:function(a){return null}}};l.checkStatus=function(a){a=a||0;return 200<=a&&300>a||304===a||1223===a||!a}})},"dojo/errors/RequestError":function(){define(["./create"],
function(l){return l("RequestError",function(l,a){this.response=a})})},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(l,n){return l("RequestTimeoutError",null,n,{dojoType:"timeout"})})},"dojo/request/xhr":function(){define(["../errors/RequestError","./watch","./handlers","./util","../has"],function(l,n,a,g,q){function h(b,c){var d=b.xhr;b.status=b.xhr.status;try{b.text=d.responseText}catch(e){}"xml"===b.options.handleAs&&(b.data=d.responseXML);if(!c)try{a(b)}catch(p){c=
p}c?this.reject(c):g.checkStatus(d.status)?this.resolve(b):(c=new l("Unable to load "+b.url+" status: "+d.status,b),this.reject(c))}function m(a){return this.xhr.getResponseHeader(a)}function f(a,r,t){var z=q("native-formdata")&&r&&r.data&&r.data instanceof FormData,v=g.parseArgs(a,g.deepCreate(p,r),z);a=v.url;r=v.options;var w,A=g.deferred(v,k,c,e,h,function(){w&&w()}),B=v.xhr=f._create();if(!B)return A.cancel(new l("XHR was not created")),t?A:A.promise;v.getHeader=m;b&&(w=b(B,A,v));var D=r.data,
E=!r.sync,C=r.method;try{B.open(C,a,E,r.user||s,r.password||s);r.withCredentials&&(B.withCredentials=r.withCredentials);q("native-response-type")&&r.handleAs in d&&(B.responseType=d[r.handleAs]);var F=r.headers;a=z?!1:"application/x-www-form-urlencoded";if(F)for(var K in F)"content-type"===K.toLowerCase()?a=F[K]:F[K]&&B.setRequestHeader(K,F[K]);a&&!1!==a&&B.setRequestHeader("Content-Type",a);(!F||!("X-Requested-With"in F))&&B.setRequestHeader("X-Requested-With","XMLHttpRequest");g.notify&&g.notify.emit("send",
v,A.promise.cancel);B.send(D)}catch(I){A.reject(I)}n(A);B=null;return t?A:A.promise}q.add("native-xhr",function(){return"undefined"!==typeof XMLHttpRequest});q.add("dojo-force-activex-xhr",function(){return q("activex")&&!document.addEventListener&&"file:"===window.location.protocol});q.add("native-xhr2",function(){if(q("native-xhr")){var a=new XMLHttpRequest;return"undefined"!==typeof a.addEventListener&&("undefined"===typeof opera||"undefined"!==typeof a.upload)}});q.add("native-formdata",function(){return"undefined"!==
typeof FormData});q.add("native-response-type",function(){return q("native-xhr")&&"undefined"!==typeof(new XMLHttpRequest).responseType});q.add("native-xhr2-blob",function(){if(q("native-response-type")){var a=new XMLHttpRequest;a.open("GET","/",!0);a.responseType="blob";var b=a.responseType;a.abort();return"blob"===b}});var d={blob:q("native-xhr2-blob")?"blob":"arraybuffer",document:"document",arraybuffer:"arraybuffer"},c,e,b,k;q("native-xhr2")?(c=function(a){return!this.isFulfilled()},k=function(a,
b){b.xhr.abort()},b=function(a,b,c){function d(a){b.handleResponse(c)}function e(a){a=new l("Unable to load "+c.url+" status: "+a.target.status,c);b.handleResponse(c,a)}function p(a){a.lengthComputable?(c.loaded=a.loaded,c.total=a.total,b.progress(c)):3===c.xhr.readyState&&(c.loaded=a.position,b.progress(c))}a.addEventListener("load",d,!1);a.addEventListener("error",e,!1);a.addEventListener("progress",p,!1);return function(){a.removeEventListener("load",d,!1);a.removeEventListener("error",e,!1);a.removeEventListener("progress",
p,!1);a=null}}):(c=function(a){return a.xhr.readyState},e=function(a){return 4===a.xhr.readyState},k=function(a,b){var c=b.xhr,d=typeof c.abort;("function"===d||"object"===d||"unknown"===d)&&c.abort()});var s,p={data:null,query:null,sync:!1,method:"GET"};f._create=function(){throw Error("XMLHTTP not available");};if(q("native-xhr")&&!q("dojo-force-activex-xhr"))f._create=function(){return new XMLHttpRequest};else if(q("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),f._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(r){try{new ActiveXObject("Microsoft.XMLHTTP"),
f._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(t){}}g.addCommonMethods(f);return f})},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has","../selector/_loader"],function(l,n,a,g){function q(a){var b=c[a.options.handleAs];a.data=b?b(a):a.data||a.text;return a}g.add("activex","undefined"!==typeof ActiveXObject);g.add("dom-parser",function(a){return"DOMParser"in a});var h;if(g("activex")){var m=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0",
"MSXML2.DOMDocument.3.0","MSXML.DOMDocument"],f;h=function(c){function b(a){try{var b=new ActiveXObject(a);b.async=!1;b.loadXML(h);d=b;f=a}catch(c){return!1}return!0}var d=c.data,h=c.text;d&&(g("dom-qsa2.1")&&!d.querySelectorAll&&g("dom-parser"))&&(d=(new DOMParser).parseFromString(h,"application/xml"));if(!d||!d.documentElement)(!f||!b(f))&&a.some(m,b);return d}}var d=function(a){return!g("native-xhr2-blob")&&"blob"===a.options.handleAs&&"undefined"!==typeof Blob?new Blob([a.xhr.response],{type:a.xhr.getResponseHeader("Content-Type")}):
a.xhr.response},c={javascript:function(a){return n.eval(a.text||"")},json:function(a){return l.parse(a.text||null)},xml:h,blob:d,arraybuffer:d,document:d};q.register=function(a,b){c[a]=b};return q})},"dojo/selector/_loader":function(){define(["../has","require"],function(l,n){var a=document.createElement("div");l.add("dom-qsa2.1",!!a.querySelectorAll);l.add("dom-qsa3",function(){try{return a.innerHTML="\x3cp class\x3d'TEST'\x3e\x3c/p\x3e",1==a.querySelectorAll(".TEST:empty").length}catch(g){}});var g;
return{load:function(a,h,m,f){f=n;a="default"==a?l("config-selectorEngine")||"css3":a;a="css2"==a||"lite"==a?"./lite":"css2.1"==a?l("dom-qsa2.1")?"./lite":"./acme":"css3"==a?l("dom-qsa3")?"./lite":"./acme":"acme"==a?"./acme":(f=h)&&a;if("?"==a.charAt(a.length-1)){a=a.substring(0,a.length-1);var d=!0}if(d&&(l("dom-compliant-qsa")||g))return m(g);f([a],function(c){"./lite"!=a&&(g=c);m(c)})}}})},"dojo/cldr/nls/number":function(){define({root:{scientificFormat:"#E0","currencySpacing-afterCurrency-currencyMatch":"[:^S:]",
infinity:"\u221e",superscriptingExponent:"\u00d7",list:";",percentSign:"%",minusSign:"-","currencySpacing-beforeCurrency-surroundingMatch":"[:digit:]","decimalFormat-short":"000T","currencySpacing-afterCurrency-insertBetween":"\u00a0",nan:"NaN",plusSign:"+","currencySpacing-afterCurrency-surroundingMatch":"[:digit:]","currencySpacing-beforeCurrency-currencyMatch":"[:^S:]",currencyFormat:"\u00a4\u00a0#,##0.00",perMille:"\u2030",group:",",percentFormat:"#,##0%","decimalFormat-long":"000T",decimalFormat:"#,##0.###",
decimal:".","currencySpacing-beforeCurrency-insertBetween":"\u00a0",exponential:"E"},ar:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,"en-au":!0,es:!0,fi:!0,fr:!0,"fr-ch":!0,he:!0,hu:!0,it:!0,ja:!0,ko:!0,nb:!0,nl:!0,pl:!0,pt:!0,"pt-pt":!0,ro:!0,ru:!0,sk:!0,sl:!0,sv:!0,th:!0,tr:!0,zh:!0,"zh-hant":!0,"zh-hk":!0,"zh-tw":!0})},"dojo/cldr/nls/en/number":function(){define({group:",",percentSign:"%",exponential:"E",scientificFormat:"#E0",percentFormat:"#,##0%",list:";",infinity:"\u221e",minusSign:"-",decimal:".",
superscriptingExponent:"\u00d7",nan:"NaN",perMille:"\u2030",decimalFormat:"#,##0.###",currencyFormat:"\u00a4#,##0.00;(\u00a4#,##0.00)",plusSign:"+","decimalFormat-long":"000 trillion","decimalFormat-short":"000T"})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(l,n){var a={};n.setObject("dojo.regexp",a);a.escapeString=function(a,q){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(a){return q&&-1!=q.indexOf(a)?a:"\\"+a})};a.buildGroupRE=function(g,q,h){if(!(g instanceof
Array))return q(g);for(var m=[],f=0;f<g.length;f++)m.push(q(g[f]));return a.group(m.join("|"),h)};a.group=function(a,q){return"("+(q?"?:":"")+a+")"};return a})},"dojo/date/locale":function(){define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),function(l,n,a,g,q,h,m,f,d){function c(a,b,c,d){return d.replace(/([a-z])\1*/ig,function(e){var f,h,s=e.charAt(0);e=e.length;var q=["abbr","wide","narrow"];switch(s){case "G":f=
b[4>e?"eraAbbr":"eraNames"][0>a.getFullYear()?0:1];break;case "y":f=a.getFullYear();switch(e){case 1:break;case 2:if(!c.fullYear){f=String(f);f=f.substr(f.length-2);break}default:h=!0}break;case "Q":case "q":f=Math.ceil((a.getMonth()+1)/3);h=!0;break;case "M":case "L":f=a.getMonth();3>e?(f+=1,h=!0):(s=["months","L"==s?"standAlone":"format",q[e-3]].join("-"),f=b[s][f]);break;case "w":f=k._getWeekOfYear(a,0);h=!0;break;case "d":f=a.getDate();h=!0;break;case "D":f=k._getDayOfYear(a);h=!0;break;case "e":case "c":if(f=
a.getDay(),2>e){f=(f-g.getFirstDayOfWeek(c.locale)+8)%7;break}case "E":f=a.getDay();3>e?(f+=1,h=!0):(s=["days","c"==s?"standAlone":"format",q[e-3]].join("-"),f=b[s][f]);break;case "a":s=12>a.getHours()?"am":"pm";f=c[s]||b["dayPeriods-format-wide-"+s];break;case "h":case "H":case "K":case "k":h=a.getHours();switch(s){case "h":f=h%12||12;break;case "H":f=h;break;case "K":f=h%12;break;case "k":f=h||24}h=!0;break;case "m":f=a.getMinutes();h=!0;break;case "s":f=a.getSeconds();h=!0;break;case "S":f=Math.round(a.getMilliseconds()*
Math.pow(10,e-3));h=!0;break;case "v":case "z":if(f=k._getZone(a,!0,c))break;e=4;case "Z":s=k._getZone(a,!1,c);s=[0>=s?"+":"-",m.pad(Math.floor(Math.abs(s)/60),2),m.pad(Math.abs(s)%60,2)];4==e&&(s.splice(0,0,"GMT"),s.splice(3,0,":"));f=s.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+d);}h&&(f=m.pad(f,e));return f})}function e(a,b,c,d){var e=function(a){return a};b=b||e;c=c||e;d=d||e;var k=a.match(/(''|[^'])+/g),f="'"==a.charAt(0);n.forEach(k,function(a,d){a?
(k[d]=(f?c:b)(a.replace(/''/g,"'")),f=!f):k[d]=""});return d(k.join(""))}function b(a,b,c,d){d=h.escapeString(d);c.strict||(d=d.replace(" a"," ?a"));return d.replace(/([a-z])\1*/ig,function(d){var e;e=d.charAt(0);var k=d.length,f="",h="";c.strict?(1<k&&(f="0{"+(k-1)+"}"),2<k&&(h="0{"+(k-2)+"}")):(f="0?",h="0{0,2}");switch(e){case "y":e="\\d{2,4}";break;case "M":case "L":e=2<k?"\\S+?":"1[0-2]|"+f+"[1-9]";break;case "D":e="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+f+"[1-9][0-9]|"+h+"[1-9]";break;case "d":e=
"3[01]|[12]\\d|"+f+"[1-9]";break;case "w":e="[1-4][0-9]|5[0-3]|"+f+"[1-9]";break;case "E":case "e":case "c":e=".+?";break;case "h":e="1[0-2]|"+f+"[1-9]";break;case "k":e="1[01]|"+f+"\\d";break;case "H":e="1\\d|2[0-3]|"+f+"\\d";break;case "K":e="1\\d|2[0-4]|"+f+"[1-9]";break;case "m":case "s":e="[0-5]\\d";break;case "S":e="\\d{"+k+"}";break;case "a":k=c.am||b["dayPeriods-format-wide-am"];f=c.pm||b["dayPeriods-format-wide-pm"];e=k+"|"+f;c.strict||(k!=k.toLowerCase()&&(e+="|"+k.toLowerCase()),f!=f.toLowerCase()&&
(e+="|"+f.toLowerCase()),-1!=e.indexOf(".")&&(e+="|"+e.replace(/\./g,"")));e=e.replace(/\./g,"\\.");break;default:e=".*"}a&&a.push(d);return"("+e+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var k={};l.setObject(d.id.replace(/\//g,"."),k);k._getZone=function(b,c,d){return c?a.getTimezoneName(b):b.getTimezoneOffset()};k.format=function(a,b){b=b||{};var d=q.normalizeLocale(b.locale),f=b.formatLength||"short",d=k._getGregorianBundle(d),h=[],m=l.hitch(this,c,a,d,b);if("year"==b.selector)return e(d["dateFormatItem-yyyy"]||
"yyyy",m);var g;"date"!=b.selector&&(g=b.timePattern||d["timeFormat-"+f])&&h.push(e(g,m));"time"!=b.selector&&(g=b.datePattern||d["dateFormat-"+f])&&h.push(e(g,m));return 1==h.length?h[0]:d["dateTimeFormat-"+f].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,b){return h[b]})};k.regexp=function(a){return k._parseInfo(a).regexp};k._parseInfo=function(a){a=a||{};var c=q.normalizeLocale(a.locale),c=k._getGregorianBundle(c),d=a.formatLength||"short",f=a.datePattern||c["dateFormat-"+d],h=a.timePattern||
c["timeFormat-"+d],d="date"==a.selector?f:"time"==a.selector?h:c["dateTimeFormat-"+d].replace(/\{(\d+)\}/g,function(a,b){return[h,f][b]}),m=[];return{regexp:e(d,l.hitch(this,b,m,c,a)),tokens:m,bundle:c}};k.parse=function(b,c){var d=/[\u200E\u200F\u202A\u202E]/g,e=k._parseInfo(c),f=e.tokens,h=e.bundle,d=RegExp("^"+e.regexp.replace(d,"")+"$",e.strict?"":"i").exec(b&&b.replace(d,""));if(!d)return null;var m=["abbr","wide","narrow"],g=[1970,0,1,0,0,0,0],s="",d=n.every(d,function(a,b){if(!b)return!0;var d=
f[b-1],e=d.length,d=d.charAt(0);switch(d){case "y":if(2!=e&&c.strict)g[0]=a;else if(100>a)a=Number(a),d=""+(new Date).getFullYear(),e=100*d.substring(0,2),d=Math.min(Number(d.substring(2,4))+20,99),g[0]=a<d?e+a:e-100+a;else{if(c.strict)return!1;g[0]=a}break;case "M":case "L":if(2<e){if(e=h["months-"+("L"==d?"standAlone":"format")+"-"+m[e-3]].concat(),c.strict||(a=a.replace(".","").toLowerCase(),e=n.map(e,function(a){return a.replace(".","").toLowerCase()})),a=n.indexOf(e,a),-1==a)return!1}else a--;
g[1]=a;break;case "E":case "e":case "c":e=h["days-"+("c"==d?"standAlone":"format")+"-"+m[e-3]].concat();c.strict||(a=a.toLowerCase(),e=n.map(e,function(a){return a.toLowerCase()}));a=n.indexOf(e,a);if(-1==a)return!1;break;case "D":g[1]=0;case "d":g[2]=a;break;case "a":e=c.am||h["dayPeriods-format-wide-am"];d=c.pm||h["dayPeriods-format-wide-pm"];if(!c.strict){var p=/\./g;a=a.replace(p,"").toLowerCase();e=e.replace(p,"").toLowerCase();d=d.replace(p,"").toLowerCase()}if(c.strict&&a!=e&&a!=d)return!1;
s=a==d?"p":a==e?"a":"";break;case "K":24==a&&(a=0);case "h":case "H":case "k":if(23<a)return!1;g[3]=a;break;case "m":g[4]=a;break;case "s":g[5]=a;break;case "S":g[6]=a}return!0}),e=+g[3];"p"===s&&12>e?g[3]=e+12:"a"===s&&12==e&&(g[3]=0);e=new Date(g[0],g[1],g[2],g[3],g[4],g[5],g[6]);c.strict&&e.setFullYear(g[0]);var q=f.join(""),l=-1!=q.indexOf("d"),q=-1!=q.indexOf("M");if(!d||q&&e.getMonth()>g[1]||l&&e.getDate()>g[2])return null;if(q&&e.getMonth()<g[1]||l&&e.getDate()<g[2])e=a.add(e,"hour",1);return e};
var s=[];k.addCustomFormats=function(a,b){s.push({pkg:a,name:b})};k._getGregorianBundle=function(a){var b={};n.forEach(s,function(c){c=q.getLocalization(c.pkg,c.name,a);b=l.mixin(b,c)},this);return b};k.addCustomFormats(d.id.replace(/\/date\/locale$/,".cldr"),"gregorian");k.getNames=function(a,b,c,d){var e;d=k._getGregorianBundle(d);a=[a,c,b];"standAlone"==c&&(c=a.join("-"),e=d[c],1==e[0]&&(e=void 0));a[1]="format";return(e||d[a.join("-")]).concat()};k.isWeekend=function(a,b){var c=g.getWeekend(b),
d=(a||new Date).getDay();c.end<c.start&&(c.end+=7,d<c.start&&(d+=7));return d>=c.start&&d<=c.end};k._getDayOfYear=function(b){return a.difference(new Date(b.getFullYear(),0,1,b.getHours()),b)+1};k._getWeekOfYear=function(a,b){1==arguments.length&&(b=0);var c=(new Date(a.getFullYear(),0,1)).getDay(),d=Math.floor((k._getDayOfYear(a)+(c-b+7)%7-1)/7);c==b&&d++;return d};return k})},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(l,n){var a={};l.setObject("dojo.cldr.supplemental",
a);a.getFirstDayOfWeek=function(g){g={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[a._region(g)];return void 0===g?1:g};a._region=function(a){a=n.normalizeLocale(a);
a=a.split("-");var q=a[1];q?4==q.length&&(q=a[2]):q={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",
hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",
or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",
ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",
fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",
lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",
rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",
umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[a[0]];return q};a.getWeekend=function(g){var q=a._region(g);g={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[q];q={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[q];void 0===g&&(g=6);void 0===q&&(q=0);return{start:g,end:q}};return a})},"dojo/cldr/nls/gregorian":function(){define({root:{"dateFormatItem-Ehm":"E h:mm a",
"days-standAlone-short":"Sun Mon Tue Wed Thu Fri Sat".split(" "),"months-format-narrow":"1 2 3 4 5 6 7 8 9 10 11 12".split(" "),"field-second-relative+0":"now","quarters-standAlone-narrow":["1","2","3","4"],"field-weekday":"Day of the Week","dateFormatItem-yQQQ":"y QQQ","dateFormatItem-yMEd":"y-MM-dd, E","field-wed-relative+0":"this Wednesday","field-wed-relative+1":"next Wednesday","dateFormatItem-GyMMMEd":"G y MMM d, E","dateFormatItem-MMMEd":"MMM d, E",eraNarrow:["BCE","CE"],"field-tue-relative+-1":"last Tuesday",
"days-format-short":"Sun Mon Tue Wed Thu Fri Sat".split(" "),"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateFormat-long":"y MMMM d","field-fri-relative+-1":"last Friday","field-wed-relative+-1":"last Wednesday","months-format-wide":"M01 M02 M03 M04 M05 M06 M07 M08 M09 M10 M11 M12".split(" "),"dateTimeFormat-medium":"{1} {0}","dayPeriods-format-wide-pm":"PM","dateFormat-full":"y MMMM d, EEEE","field-thu-relative+-1":"last Thursday","dateFormatItem-Md":"MM-dd","dayPeriods-format-abbr-am":"AM",
"dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","dayPeriods-format-wide-noon":"noon","dateFormatItem-yMd":"y-MM-dd","field-era":"Era","dateFormatItem-yM":"y-MM","months-standAlone-wide":"M01 M02 M03 M04 M05 M06 M07 M08 M09 M10 M11 M12".split(" "),"timeFormat-short":"HH:mm","quarters-format-wide":["Q1","Q2","Q3","Q4"],"dateFormatItem-yQQQQ":"y QQQQ","timeFormat-long":"HH:mm:ss z","field-year":"Year","dateFormatItem-yMMM":"y MMM","dateTimeFormats-appendItem-Era":"{1} {0}","field-hour":"Hour","months-format-abbr":"M01 M02 M03 M04 M05 M06 M07 M08 M09 M10 M11 M12".split(" "),
"field-sat-relative+0":"this Saturday","field-sat-relative+1":"next Saturday","timeFormat-full":"HH:mm:ss zzzz","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","field-day-relative+0":"today","field-thu-relative+0":"this Thursday","field-day-relative+1":"tomorrow","field-thu-relative+1":"next Thursday","dateFormatItem-GyMMMd":"G y MMM d","dateFormatItem-H":"HH","months-standAlone-abbr":"M01 M02 M03 M04 M05 M06 M07 M08 M09 M10 M11 M12".split(" "),"quarters-format-abbr":["Q1","Q2","Q3","Q4"],"quarters-standAlone-wide":["Q1",
"Q2","Q3","Q4"],"dateFormatItem-Gy":"G y","dateFormatItem-M":"L","days-standAlone-wide":"Sun Mon Tue Wed Thu Fri Sat".split(" "),"dayPeriods-format-abbr-noon":"noon","timeFormat-medium":"HH:mm:ss","field-sun-relative+0":"this Sunday","dateFormatItem-Hm":"HH:mm","field-sun-relative+1":"next Sunday","quarters-standAlone-abbr":["Q1","Q2","Q3","Q4"],eraAbbr:["BCE","CE"],"field-minute":"Minute","field-dayperiod":"Dayperiod","days-standAlone-abbr":"Sun Mon Tue Wed Thu Fri Sat".split(" "),"dateFormatItem-d":"d",
"dateFormatItem-ms":"mm:ss","quarters-format-narrow":["1","2","3","4"],"field-day-relative+-1":"yesterday","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"a","dateFormatItem-h":"h a","dateFormatItem-MMMd":"MMM d","dateFormatItem-MEd":"MM-dd, E","dateTimeFormat-full":"{1} {0}","field-fri-relative+0":"this Friday","field-fri-relative+1":"next Friday","field-day":"Day","days-format-wide":"Sun Mon Tue Wed Thu Fri Sat".split(" "),"field-zone":"Zone","months-standAlone-narrow":"1 2 3 4 5 6 7 8 9 10 11 12".split(" "),
"dateFormatItem-y":"y","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","field-year-relative+-1":"last year","field-month-relative+-1":"last month","dateTimeFormats-appendItem-Year":"{1} {0}","dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","days-format-abbr":"Sun Mon Tue Wed Thu Fri Sat".split(" "),eraNames:["BCE","CE"],"dateFormatItem-yMMMd":"y MMM d","days-format-narrow":"SMTWTFS".split(""),"field-month":"Month","days-standAlone-narrow":"SMTWTFS".split(""),
"dateFormatItem-MMM":"LLL","field-tue-relative+0":"this Tuesday","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","field-tue-relative+1":"next Tuesday","dayPeriods-format-wide-am":"AM","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateFormatItem-EHm":"E HH:mm","field-mon-relative+0":"this Monday","field-mon-relative+1":"next Monday","dateFormat-short":"y-MM-dd","dateFormatItem-EHms":"E HH:mm:ss","dateFormatItem-Ehms":"E h:mm:ss a","dayPeriods-format-narrow-noon":"n",
"field-second":"Second","field-sat-relative+-1":"last Saturday","dateFormatItem-yMMMEd":"y MMM d, E","field-sun-relative+-1":"last Sunday","field-month-relative+0":"this month","field-month-relative+1":"next month","dateTimeFormats-appendItem-Timezone":"{0} {1}","dateFormatItem-Ed":"d, E","field-week":"Week","dateFormat-medium":"y MMM d","field-week-relative+-1":"last week","field-year-relative+0":"this year","field-year-relative+1":"next year","dayPeriods-format-narrow-pm":"p","dateTimeFormat-short":"{1} {0}",
"dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"h:mm:ss a","dateFormatItem-GyMMM":"G y MMM","field-mon-relative+-1":"last Monday","field-week-relative+0":"this week","field-week-relative+1":"next week"},ar:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,"en-au":!0,"en-ca":!0,"en-gb":!0,es:!0,fi:!0,fr:!0,"fr-ch":!0,he:!0,hu:!0,it:!0,ja:!0,ko:!0,nb:!0,nl:!0,pl:!0,pt:!0,"pt-pt":!0,ro:!0,ru:!0,sk:!0,sl:!0,sv:!0,th:!0,tr:!0,zh:!0,"zh-hant":!0,"zh-hk":!0,"zh-tw":!0})},"dojo/cldr/nls/en/gregorian":function(){define({"dateFormatItem-Ehm":"E h:mm a",
"days-standAlone-short":"Su Mo Tu We Th Fr Sa".split(" "),"months-format-narrow":"JFMAMJJASOND".split(""),"field-second-relative+0":"now","quarters-standAlone-narrow":["1","2","3","4"],"field-weekday":"Day of the Week","dateFormatItem-yQQQ":"QQQ y","dateFormatItem-yMEd":"E, M/d/y","field-wed-relative+0":"this Wednesday","field-wed-relative+1":"next Wednesday","dateFormatItem-GyMMMEd":"E, MMM d, y G","dateFormatItem-MMMEd":"E, MMM d",eraNarrow:["B","A"],"field-tue-relative+-1":"last Tuesday","days-format-short":"Su Mo Tu We Th Fr Sa".split(" "),
"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateFormat-long":"MMMM d, y","field-fri-relative+-1":"last Friday","field-wed-relative+-1":"last Wednesday","months-format-wide":"January February March April May June July August September October November December".split(" "),"dateTimeFormat-medium":"{1}, {0}","dayPeriods-format-wide-pm":"PM","dateFormat-full":"EEEE, MMMM d, y","field-thu-relative+-1":"last Thursday","dateFormatItem-Md":"M/d","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})",
"dayPeriods-format-wide-noon":"noon","dateFormatItem-yMd":"M/d/y","field-era":"Era","dateFormatItem-yM":"M/y","months-standAlone-wide":"January February March April May June July August September October November December".split(" "),"timeFormat-short":"h:mm a","quarters-format-wide":["1st quarter","2nd quarter","3rd quarter","4th quarter"],"dateFormatItem-yQQQQ":"QQQQ y","timeFormat-long":"h:mm:ss a z","field-year":"Year","dateFormatItem-yMMM":"MMM y","dateTimeFormats-appendItem-Era":"{0} {1}","field-hour":"Hour",
"months-format-abbr":"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),"field-sat-relative+0":"this Saturday","field-sat-relative+1":"next Saturday","timeFormat-full":"h:mm:ss a zzzz","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","field-day-relative+0":"today","field-thu-relative+0":"this Thursday","field-day-relative+1":"tomorrow","field-thu-relative+1":"next Thursday","dateFormatItem-GyMMMd":"MMM d, y G","dateFormatItem-H":"HH","months-standAlone-abbr":"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
"quarters-format-abbr":["Q1","Q2","Q3","Q4"],"quarters-standAlone-wide":["1st quarter","2nd quarter","3rd quarter","4th quarter"],"dateFormatItem-Gy":"y G","dateFormatItem-M":"L","days-standAlone-wide":"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),"timeFormat-medium":"h:mm:ss a","field-sun-relative+0":"this Sunday","dateFormatItem-Hm":"HH:mm","field-sun-relative+1":"next Sunday",eraAbbr:["BC","AD"],"field-minute":"Minute","field-dayperiod":"AM/PM","dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss",
"field-day-relative+-1":"yesterday","dateFormatItem-h":"h a","dateTimeFormat-long":"{1} 'at' {0}","dayPeriods-format-narrow-am":"a","dateFormatItem-MMMd":"MMM d","dateFormatItem-MEd":"E, M/d","dateTimeFormat-full":"{1} 'at' {0}","field-fri-relative+0":"this Friday","field-fri-relative+1":"next Friday","field-day":"Day","days-format-wide":"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),"field-zone":"Time Zone","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateFormatItem-y":"y",
"months-standAlone-narrow":"JFMAMJJASOND".split(""),"field-year-relative+-1":"last year","field-month-relative+-1":"last month","dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","days-format-abbr":"Sun Mon Tue Wed Thu Fri Sat".split(" "),"dateFormatItem-yMMMd":"MMM d, y",eraNames:["Before Christ","Anno Domini"],"days-standAlone-narrow":"SMTWTFS".split(""),"dateFormatItem-MMM":"LLL","field-month":"Month","field-tue-relative+0":"this Tuesday",
"dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","field-tue-relative+1":"next Tuesday","dayPeriods-format-wide-am":"AM","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateFormatItem-EHm":"E HH:mm","field-mon-relative+0":"this Monday","field-mon-relative+1":"next Monday","dateFormat-short":"M/d/yy","dateFormatItem-EHms":"E HH:mm:ss","dateFormatItem-Ehms":"E h:mm:ss a","dayPeriods-format-narrow-noon":"n","field-second":"Second","field-sat-relative+-1":"last Saturday",
"dateFormatItem-yMMMEd":"E, MMM d, y","field-sun-relative+-1":"last Sunday","field-month-relative+0":"this month","field-month-relative+1":"next month","dateFormatItem-Ed":"d E","dateTimeFormats-appendItem-Timezone":"{0} {1}","field-week":"Week","dateFormat-medium":"MMM d, y","field-year-relative+0":"this year","field-week-relative+-1":"last week","field-year-relative+1":"next year","dayPeriods-format-narrow-pm":"p","dateTimeFormat-short":"{1}, {0}","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"h:mm:ss a",
"dateFormatItem-GyMMM":"MMM y G","field-mon-relative+-1":"last Monday","field-week-relative+0":"this week","field-week-relative+1":"next week"})},"esri/_coremap":function(){define("require module dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/Deferred dojo/_base/lang dojo/_base/array dojo/_base/event dojo/_base/unload dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/sniff dijit/registry dojox/gfx/matrix ./kernel ./config ./basemaps ./lang ./Evented ./fx ./deferredUtils ./tileUtils ./PluginTarget ./geometry/Point ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./geometry/scaleUtils ./geometry/screenUtils ./geometry/webMercatorUtils ./layers/GraphicsLayer ./layers/TileInfo ./layers/LOD ./layers/ArcGISTiledMapServiceLayer ./layers/MapImageLayer ./layers/OpenStreetMapLayer ./dijit/Popup ./plugins/popupManager dojo/uacss".split(" "),
function(l,n,a,g,q,h,m,f,d,c,e,b,k,s,p,r,t,x,y,u,z,v,w,A,B,D,E,C,F,K,I,G,J,H,N,Q,L,Y,X,W,U,P,R){function M(a,b){var c=a.lods;c.sort(function(a,b){return a.scale>b.scale?-1:a.scale<b.scale?1:0});var d=[],c=f.filter(c,function(a){if(-1===T(d,a.scale))return d.push(a.scale),!0}),e=b.lods=[],p;f.forEach(c,function(a,b){p=e[b]=new X(a);p.level=b});b.tileInfo=new Y($(a,{lods:e}))}var O,S=N.toMapPoint,da=N.toScreenPoint,V=q.connect,Z=q.disconnect,aa=m.hitch,ba=r.set,T=f.indexOf,$=m.mixin,ca=0,ea=z.defaults.map,
fa=ea.layerNamePrefix,ja=ea.graphicsLayerNamePrefix,ga=RegExp("^"+fa+"(\\d+)$"),ka=RegExp("^"+ja+"(\\d+)$"),ha=function(){};return g([A,C],{declaredClass:"esri._CoreMap",resizeDelay:300,invalidExtent:"Map does not have a valid extent.",invalidGeometry:"Geometry (wkid: ${geometry}) cannot be converted to spatial reference of the map (wkid: ${map})",unknownBasemap:'Unable to find basemap definition for: "${basemapName}". Try one of these: ${list}',invalidBasemap:'Unable to add basemap: "${basemapName}".',
unknownLayerType:'Unknown basemap layer type: "${type}" found in basemap definition for: "${basemapName}".',visible:!0,_eventMap:{"basemap-change":!0,"extent-change":["extent","delta","levelChange","lod"],"layer-add":["layer"],"layer-add-result":["layer","error"],"layer-remove":["layer"],"layer-reorder":["layer","index"],"layer-resume":["layer"],"layer-suspend":["layer"],"layers-add-result":["layers"],"layers-removed":!0,"layers-reordered":["layerIds"],load:["map"],pan:["extent","delta"],"pan-end":["extent",
"delta"],"pan-start":["extent","screenPoint"],reposition:["x","y"],resize:["extent","width","height"],scale:["matrix","immediate"],"time-extent-change":["timeExtent"],"before-unload":["map"],unload:["map"],"update-end":["error"],"update-start":!0,zoom:["extent","zoomFactor","anchor"],"zoom-end":["extent","zoomFactor","anchor","level"],"zoom-start":["extent","zoomFactor","anchor","level"],click:!0,"dbl-click":!0,"key-down":!0,"key-up":!0,"mouse-down":!0,"mouse-drag":!0,"mouse-drag-end":!0,"mouse-drag-start":!0,
"mouse-move":!0,"mouse-out":!0,"mouse-over":!0,"mouse-up":!0,"mouse-wheel":!0,"basic-tap":!0,"double-tap":!0,"pinch-end":!0,"pinch-move":!0,"pinch-start":!0,"processed-double-tap":!0,"processed-tap":!0,"swipe-end":!0,"swipe-move":!0,"swipe-start":!0,tap:!0,"two-finger-tap":!0},constructor:function(a,d){var r=this;this.registerConnectEvents();$(this,{_internalLayerIds:[],_layers:[],_layerDivs:[],_layerSize:0,_connects:[],_zoomAnimDiv:null,_zoomAnim:null,_layersDiv:null,_firstLayerId:null,_delta:null,
_cursor:null,_ratioW:1,_ratioH:1,_params:null,cursor:null,layerIds:[],graphicsLayerIds:[],graphics:null,_labels:null,loaded:!1,__panning:!1,__zooming:!1,__container:null,root:null,__LOD:null,__tileInfo:null,__visibleRect:null,__visibleDelta:null,_rids:[]});var f=this.container=e.byId(a),h=this.id=b.get(f,"id")||x.getUniqueId(this.declaredClass);k.add(f,"map");var t=p.getContentBox(f),m=k.add,g=s.create;this.position=new K(0,0);this._reposition();var q=this.width=0<t.w?t.w:ea.width,u=this.height=0<
t.h?t.h:ea.height,n=this.root=g("div",{id:h+"_root",style:{width:q+"px",height:u+"px",direction:"ltr"}});m(n,"container");t=this.__container=g("div",{id:h+"_container"},n);ba(t,"position","absolute");m(t,"container");f.appendChild(n);f=this._params=$({slider:!0,nav:!1,zoom:-1,minZoom:-1,maxZoom:-1,scale:-1,minScale:0,maxScale:0,showInfoWindowOnClick:!0,displayGraphicsOnPan:!0,wrapAround180:!0,fitExtent:!1,optimizePanAnimation:!0},d||{});this.wrapAround180=f.wrapAround180;this.optimizePanAnimation=
f.optimizePanAnimation;w.isDefined(f.resizeDelay)&&(this.resizeDelay=f.resizeDelay);f.lods&&(M({rows:512,cols:512,dpi:96,format:"JPEG",compressionQuality:75,origin:{x:-180,y:90},spatialReference:{wkid:4326},lods:f.lods},f),this.__tileInfo=f.tileInfo);this.extent=f.extent;this._extentUtil({mapCenter:f.center,targetLevel:f.zoom,targetScale:f.scale});this.__visibleRect=new G(0,0,q,u);this.__visibleDelta=new G(0,0,q,u);h=this._layersDiv=g("div",{id:h+"_layers"});m(h,"layersDiv");t.appendChild(h);this._zoomAnimDiv=
g("div",{style:{position:"absolute"}});f.infoWindow?this.infoWindow=f.infoWindow:(m=this.infoWindow=new R(f.popupOptions,g("div")),m.startup(),m._ootb=!0,ba(m.domNode,"zIndex",40));f.showLabels&&(l(["./layers/LabelLayer"],function(a){O=a;r._createLabelLayer()}),this.on("load",function(){r._createLabelLayer()}));this.addPlugin(this._getAbsMid("./plugins/popupManager"),{enabled:f.showInfoWindowOnClick});this._zoomStartHandler=aa(this,this._zoomStartHandler);this._zoomingHandler=aa(this,this._zoomingHandler);
this._zoomEndHandler=aa(this,this._zoomEndHandler);this._panningHandler=aa(this,this._panningHandler);this._panEndHandler=aa(this,this._panEndHandler);this._endTranslate=aa(this,this._endTranslate);this._timedResize=aa(this,this._timedResize);this._execResize=aa(this,this._execResize);this.resize=aa(this,this.resize);c.addOnWindowUnload(this,this.destroy)},_getAbsMid:function(a){return l.toAbsMid?l.toAbsMid(a):n.id.replace(/\/[^\/]*$/ig,"/")+a},_cleanUp:function(){var a=this.infoWindow;a&&(a._ootb&&
a.destroy?a.destroy():a.unsetMap(this),delete this.infoWindow);Z(this._tsTimeExtentChange_connect);this.removePlugin("./plugins/popupManager");s.destroy(this.root);this.root=null},_addLayer:function(a,b,c){if(a.id){var d=a.id.match(a instanceof L?ka:ga);d&&d[1]&&(d=Number(d[1]),ca<=d&&(ca=d+1))}var e=a.id||(a instanceof L?ja:fa)+ca++;a.id=e;this._layers[e]=a;var p,k;if(b===this.layerIds||b===this.graphicsLayerIds)p=this._layerSize,this._layerSize++;a._isRefLayer="top"===c;c=!w.isDefined(c)||0>c||
c>b.length||"top"===c?b.length:c;0===p&&(this._firstLayerId=e);if(!a._isRefLayer)for(;(k=this.getLayer(b[c-1]))&&k._isRefLayer;)c--;b.splice(c,0,e);var f=aa(this,this._addLayerHandler),r=this;c=this._connects;d=function(){a.loaded?r._onLoadFix?(r._onLoadFix=!1,setTimeout(function(){f(a)},0)):f(a):(r["_"+e+"_addtoken_load"]=V(a,"onLoad",r,"_addLayerHandler"),r["_"+e+"_addtoken_err"]=V(a,"onError",r,function(c){f(a,c,b)}))};this.loaded||0===p||a.loaded&&-1===T(this.graphicsLayerIds,e)?d():c.push(V(this,
"onLoad",d));return a},_addLayerHandler:function(a,b,c){var d=this.id,e=a.id,p=T(a instanceof L?this.graphicsLayerIds:this.layerIds,e),k=p,r=!1,f=this._params;Z(this["_"+e+"_addtoken_load"]);Z(this["_"+e+"_addtoken_err"]);if(b)delete this._layers[e],-1!==p&&(c.splice(p,1),this.onLayerAddResult(a,b));else{-1===p&&(p=T(this._internalLayerIds,e),k=20+p,r=!0);if(e===this._firstLayerId){b=a.spatialReference;if((c=this.extent&&this.extent.spatialReference)&&!c.equals(b)&&(a.tileInfo||!a.url))c=null;c=this.spatialReference=
c||b;this.wrapAround180=this.wrapAround180&&c&&c._isWrappable()?!0:!1;a.tileInfo&&(this.__tileInfo?(b=this.__tileInfo.lods,this.__tileInfo=$({},a.tileInfo),this.__tileInfo.lods=b):(M($({},a.tileInfo),f),this.__tileInfo=f.tileInfo));if(this.wrapAround180){b=this.__tileInfo;c=c._getInfo();if(!b||Math.abs(c.origin[0]-b.origin.x)>c.dx)this.wrapAround180=!1;this.wrapAround180&&b&&E._addFrameInfo(b,c)}f.units=a.units;if((b=this.__tileInfo&&this.__tileInfo.lods)&&b.length){c=f.minScale;var p=f.maxScale,
h=-1,t=-1,m=!1,g=!1,s;for(s=0;s<b.length;s++)0<c&&!m&&c>=b[s].scale&&(h=b[s].level,m=!0),0<p&&!g&&p>=b[s].scale&&(t=0<s?b[s-1].level:-1,g=!0);-1===f.minZoom&&(f.minZoom=0===c?b[0].level:h);-1===f.maxZoom&&(f.maxZoom=0===p?b[b.length-1].level:t);for(s=0;s<b.length;s++)f.minZoom===b[s].level&&(f.minScale=b[s].scale),f.maxZoom===b[s].level&&(f.maxScale=b[s].scale)}else f.minZoom=f.maxZoom=f.zoom=-1}a instanceof L?(this._gc||(this._gc=new L._GraphicsContainer,this._gc._setMap(this,this._layersDiv).id=
d+"_gc"),k=a._setMap(this,this._gc._surface),k.id=d+"_"+e,this._layerDivs[e]=k,this._reorderLayers(this.graphicsLayerIds)):(k=a._setMap(this,this._layersDiv,k,this.__LOD),k.id=d+"_"+e,this._layerDivs[e]=k,this._reorderLayers(this.layerIds),!r&&-1!==a.declaredClass.indexOf("VETiledLayer")&&this._onBingLayerAdd(a));e===this._firstLayerId&&(this.graphics=new L({id:d+"_graphics",displayOnPan:f.displayGraphicsOnPan}),this._addLayer(this.graphics,this._internalLayerIds,20));if(a===this.graphics){c=this._layers[this._firstLayerId];
d=f.zoom;k=f.scale;b=f.center;c=c.initialExtent||c.fullExtent;this._firstLayerId=null;this.extent&&(this.extent=this._convertGeometry(this,this.extent));!this.extent&&c&&(b&&(b=this._convertGeometry(c,b)),b&&(c=c.centerAt(b)));if(b=this.extent||c&&new I(c.toJson()))-1<d?b=this.__getExtentForLevel(d,null,b).extent:0<k&&(b=H.getExtentForScale(this,k,b));if(!b)return;d=this._fixExtent(b,f.fitExtent);this.extent=d.extent;this.__LOD=d.lod;this.__setExtent(this.extent,null,null,f.fitExtent);this.loaded=
!0;this.attr("data-loaded","");this.infoWindow.setMap(this);this.onLoad(this)}r||(this.onLayerAdd(a),this.onLayerAddResult(a));Z(this[e+"_addLayerHandler_connect"])}},_convertGeometry:function(a,b){var c=a&&a.spatialReference,d=b&&b.spatialReference;c&&d&&!c.equals(d)&&(c._canProject(d)?c.isWebMercator()?b=Q.geographicToWebMercator(b):4326===c.wkid&&(b=Q.webMercatorToGeographic(b,!0)):b=null);return b},_reorderLayers:function(a){var b=this.onLayerReorder,c=s.place,d=this._layerDivs,e=this._layers,
p=this._gc?this._gc._surface.getEventSource():null;if(a===this.graphicsLayerIds)f.forEach(a,function(a,k){var f=d[a];f&&(c(f.getEventSource(),p,k),b(e[a],k))});else{var k=this.graphics,r=k?k.id:null,h=this._layersDiv,m;f.forEach(a,function(a,p){m=d[a];a!==r&&m&&(c(m,h,p),b(e[a],p))});this._mapImageLyr&&this._placeMapImageLyr();p&&(p=9>t("ie")?p.parentNode:p,c(p,p.parentNode,a.length))}this.onLayersReordered([].concat(a))},_zoomStartHandler:function(){this.__zoomStart(this._zoomAnimDiv.startingExtent,
this._zoomAnimDiv.anchor)},_zoomingHandler:function(a){var b=parseFloat(a.left),c=parseFloat(a.top);a=new I(b,c-parseFloat(a.height),b+parseFloat(a.width),c,this.spatialReference);b=this.extent.getWidth()/a.getWidth();this.__zoom(a,b,this._zoomAnimDiv.anchor)},_zoomEndHandler:function(){var a=this._zoomAnimDiv,b=a.extent,c=this.extent.getWidth()/b.getWidth(),d=a.anchor,e=a.newLod,p=a.levelChange;a.extent=a.anchor=a.levelChange=a.startingExtent=a.newLod=this._delta=this._zoomAnim=null;this.__zoomEnd(b,
c,d,e,p)},_panningHandler:function(a){if(isNaN(parseFloat(a.left))||isNaN(parseFloat(a.top))){var b=Math.round,c=this._panAnim.node;a.left=-1*(this._delta.x-b(this.width/2))+"px";a.top=-1*(this._delta.y-b(this.height/2))+"px";r.set(c,"left",a.left);r.set(c,"top",a.top)}a=new K(parseFloat(a.left),parseFloat(a.top));b=this.toMap(a);this.onPan(this.extent.offset(this.extent.xmin-b.x,this.extent.ymax-b.y),a)},_panEndHandler:function(a){this.__panning=!1;var b=Math.round;a=new K(-b(parseFloat(a.style.left)),
-b(parseFloat(a.style.top)));var b=a.x,c=a.y,d=this.__visibleRect,e=this.__visibleDelta;d.x+=-b;d.y+=-c;e.x+=-b;e.y+=-c;ba(this._zoomAnimDiv,{left:"0px",top:"0px"});var d=this.extent,e=this._ratioW,p=this._ratioH,d=new I(d.xmin+b/e,d.ymin-c/p,d.xmax+b/e,d.ymax-c/p,this.spatialReference);a.setX(-a.x);a.setY(-a.y);this._delta=this._panAnim=null;this._updateExtent(d);this.onPanEnd(d,a);this._fireExtChg([d,a,!1,this.__LOD])},_fixExtent:function(a,b){for(var c=this._reshapeExtent(a),d=1.25;!0===b&&(c.extent.getWidth()<
a.getWidth()||c.extent.getHeight()<a.getHeight())&&0<c.lod.level&&3>=d;)c=this._reshapeExtent(a.expand(d)),d+=0.25;return c},_getFrameWidth:function(){var a=-1,b=this.spatialReference._getInfo();this.__LOD?(b=this.__LOD._frameInfo)&&(a=b[3]):b&&(a=Math.round(2*b.valid[1]/(this.extent.getWidth()/this.width)));return a},_fixAspectRatio:function(a){var b=a.getWidth(),c=a.getHeight(),d=b/c,e=this.width/this.height,p=0,k=0;this.width>this.height?b>c?e>d?p=c*e-b:k=b/e-c:p=c*e-b:this.width<this.height?b<
c?e>d?p=c*e-b:k=b/e-c:k=b/e-c:b<c?p=c-b:b>c&&(k=b/e-c);p&&(a.xmin-=p/2,a.xmax+=p/2);k&&(a.ymin-=k/2,a.ymax+=k/2);return a},_reshapeExtent:function(a){a=this._fixAspectRatio(a);return this._getAdjustedExtent(a)},_getAdjustedExtent:function(a){if(this.__tileInfo)return E.getCandidateTileInfo(this,this.__tileInfo,a);var b=H.getScale(this,a),c=this.getMinScale(),d=this.getMaxScale(),e=!d||b>=d;c&&!(b<=c)?a=H.getExtentForScale(this,c,a):e||(a=H.getExtentForScale(this,d,a));return{extent:a}},_onBingLayerAdd:function(a){this["__"+
a.id+"_vis_connect"]=q.connect(a,"onVisibilityChange",this,"_toggleBingLogo");this._toggleBingLogo(a.visible)},_onBingLayerRemove:function(a){q.disconnect(this["__"+a.id+"_vis_connect"]);delete this["__"+a.id+"_vis_connect"];var b=f.some(this.layerIds,function(b){return(a=this._layers[b])&&a.visible&&-1!==a.declaredClass.indexOf("VETiledLayer")},this);this._toggleBingLogo(b)},_toggleBingLogo:function(a){a&&!this._bingLogo?(a={left:this._mapParams&&this._mapParams.nav?"25px":""},6===t("ie")&&(a.filter=
"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+l.toUrl("./images/map/bing-logo-lg.png")+"')"),a=this._bingLogo=s.create("div",{style:a},this.root),k.add(a,"bingLogo-lg")):!a&&this._bingLogo&&(s.destroy(this._bingLogo),delete this._bingLogo)},__panStart:function(a,b){var c=this._zoomAnim,d=this._panAnim;if(c&&c._active)c.stop(),c._fire("onEnd",[c.node]);else if(d&&d._active){d.stop();this._panAnim=null;var d=d.curve.getValue(d._getStep()),c=
Math.round(parseFloat(d.left)),d=Math.round(parseFloat(d.top)),e=this.navigationManager._dragOrigin;this.__pan(c,d);e&&(e.x-=c,e.y-=d);return}this.__panning=!0;this.onPanStart(this.extent,new K(a,b))},__pan:function(a,b){var c=this.extent,d=this._ratioW,e=this._ratioH;this.onPan(new I(c.xmin-a/d,c.ymin+b/e,c.xmax-a/d,c.ymax+b/e,this.spatialReference),new K(a,b))},__panEnd:function(a,b){var c=this.__visibleRect,d=this.__visibleDelta;c.x+=a;c.y+=b;d.x+=a;d.y+=b;var c=new K(a,b),d=this.extent,e=this._ratioW,
p=this._ratioH,d=new I(d.xmin-a/e,d.ymin+b/p,d.xmax-a/e,d.ymax+b/p,this.spatialReference);this.__panning=!1;this._updateExtent(d);this.onPanEnd(d,c);this._fireExtChg([d,c,!1,this.__LOD])},__zoomStart:function(a,b){this.__zooming=!0;this.onZoomStart(a,1,b,this.__LOD?this.__LOD.level:null)},__zoom:function(a,b,c){this.onZoom(a,b,c)},__zoomEnd:function(a,b,c,d,e){ba(this._layersDiv,{left:"0px",top:"0px"});this._delta=new K(0,0);this.__visibleRect.x=this.__visibleRect.y=0;a=new I(a);this.__LOD=d;this._ratioW=
this.width/a.getWidth();this._ratioH=this.height/a.getHeight();var p=this._delta;this._delta=null;this.__zooming=!1;this._updateExtent(a,e);this.onZoomEnd(a,b,c,d?d.level:null);this._fireExtChg([a,p,e,d])},_extentUtil:function(a,b,c,d,e){var p=new h,k,f,r,t,g,s,q,x,l,u,n=this.width,v=this.height,y,B,z;a&&(k=a.numLevels,f=a.targetLevel,y=w.isDefined(f),r=a.factor,t=a.mapAnchor,g=a.screenAnchor,s=a.mapCenter,B=a.levelOrFactor,q=a.targetScale,x=w.isDefined(q)&&0<q);b&&(l=b.dx,u=b.dy,s=b.mapCenter);m.isArray(s)&&
(s=new F(s));var A=this._panAnim;b=(a=this._stopAnim())?a.divExtent:this.extent;var C=this.__tileInfo,P=this._params;if(!this.loaded){if(c)b&&(c=this._convertGeometry(b,c)),c&&(this.extent=c,P.zoom=P.scale=-1,P.center=null);else if(s||y||x){if(s)if(b){if(s=this._convertGeometry(b,s))this.extent=b.centerAt(s),P.center=null}else P.center=s;y&&-1<f?(P.zoom=f,P.scale=-1):x&&(P.scale=q,P.zoom=-1)}p.resolve();return p}if(s&&(s=this._convertGeometry(this,s),!s)||t&&(t=this._convertGeometry(this,t),!t)||
c&&(c=this._convertGeometry(this,c),!c))return p.reject(),p;A&&t&&g&&(t=S(this.extent,n,v,g));a&&t&&g&&(t=S(a.divExtent,n,v,g));y&&(C?(k=this.getMinZoom(),y=this.getMaxZoom(),f<k?f=k:f>y&&(f=y),k=f-(a?a.level:this.getLevel())):(k=0<f?-1:1,z=B?f:null));if(!c)if(w.isDefined(k))C?(n=a?a.level:this.getLevel(),v=this.__getExtentForLevel(n+k,s,b).extent):(v=(a?a.end:this.extent).expand(z||(0<k?0.5*k:2*-k)),z&&s&&(v=v.centerAt(s))),v&&(s?c=v:(n=t||b.getCenter(),l=b.ymax-(v.getHeight()-b.getHeight())*(n.y-
b.ymax)/b.getHeight(),n=b.xmin-(v.getWidth()-b.getWidth())*(n.x-b.xmin)/b.getWidth(),c=new I(n,l-v.getHeight(),n+v.getWidth(),l,this.spatialReference)));else if(x)c=H.getExtentForScale(this,q,b);else if(w.isDefined(r))c=b.expand(r);else if(l||u)a?(c=a.end,t=c.getCenter(),z=da(c,n,v,t),z.x+=l,z.y+=u,z=S(c,n,v,z),c=c.offset(z.x-t.x,z.y-t.y)):(l=new K(n/2+l,v/2+u),u=S(b,n,v,l),v=b.getWidth(),l=b.getHeight(),n=u.x-v/2,u=u.y-l/2,c=new I(n,u,n+v,u+l,this.spatialReference));c||(s?(b=a?a.end:b,v=b.getWidth(),
l=b.getHeight(),n=s.x-v/2,u=s.y-l/2,c=new I(n,u,n+v,u+l,this.spatialReference)):a&&(c=a.end));c?(this._extentDfd&&-1===this._extentDfd.fired&&(this._extentDfd.then(null,ha),this._extentDfd.reject()),this._extentDfd=p,this.__setExtent(c,null,g,d,a,e)):p.reject();return p},__setExtent:function(a,b,c,d,e,p){try{if(this._firstLayerId)this.extent=a;else{var k=!0,f=this.spatialReference,r=e?e.divExtent:this.extent,h=this._fixExtent(a,d||!1);a=h.extent;var t=a.getWidth(),m=a.getHeight(),g=Math.round;if(r)var s=
g(1E6*r.getWidth()),q=g(1E6*t),x=g(1E6*r.getHeight()),l=g(1E6*m),k=s!==q||x!==l;var u,n,v=e&&e.rect,w=e&&e.divExtent;if(ea.zoomDuration&&k&&r){w=w||new I(r);v=v||{left:r.xmin,top:r.ymax,width:r.getWidth(),height:r.getHeight()};n={left:a.xmin,top:a.ymax,width:t,height:m};var y=new F(a.xmin,a.ymax,f),z=new F(a.xmin,a.ymin,f),A=new F(this.extent.xmin,this.extent.ymax,f),P=new F(this.extent.xmin,this.extent.ymin,f);u=J.getLineIntersection(A,y,P,z,f);!u&&!e&&(k=!1)}this._ratioW=this.width/t;this._ratioH=
this.height/m;var C=this._zoomAnimDiv;if(k)ba(this._layersDiv,{left:"0px",top:"0px"}),b=new K(0,0),this.__visibleRect.x=this.__visibleRect.y=0,v&&n?(this._delta=b,C.id="_zAD",C.startingExtent=w,C.extent=a,C.levelChange=k,C.newLod=h.lod,C.anchor=c?c:!u&&e?e.anchor:da(this.extent,this.width,this.height,u),this._zoomAnim=B.resize({node:C,start:v,end:n,duration:ea.zoomDuration,rate:ea.zoomRate,beforeBegin:!e?this._zoomStartHandler:null,onAnimate:this._zoomingHandler,onEnd:this._zoomEndHandler}).play(),
this._fireOnScale(this.extent.getWidth()/a.getWidth(),C.anchor)):(this._updateExtent(a,k),this._fireExtChg([this.extent,b,k,this.__LOD=h.lod]));else if(!this.__panning)if(!1===this.loaded||p)this._updateExtent(a,k),this._fireExtChg([this.extent,b,k,this.__LOD=h.lod]);else{this.__panning=!0;v=(new G(0,0,this.width,this.height,this.spatialReference)).getCenter();v.x=g(v.x);v.y=g(v.y);var L=this._delta=this.toScreen(a.getCenter()),$=Math.abs(v.x-L.x),D=Math.abs(v.y-L.y);this.optimizePanAnimation&&($>
2*this.width||D>2*this.height)?(this.__panStart(0,0),this.__pan(0,0),this.__visibleRect.x=this.__visibleRect.y=this.__visibleDelta.x=this.__visibleDelta.y=0,this.__panning=!1,this._delta=null,this._updateExtent(a,!1),this.onPanEnd(this.extent,new K(0,0)),this._fireExtChg([this.extent,new K(0,0),!0,this.__LOD])):(this.onPanStart(this.extent,new K(0,0)),this._panAnim=B.slideTo({node:C,left:v.x-L.x,top:v.y-L.y,duration:ea.panDuration,rate:ea.panRate,onAnimate:this._panningHandler,onEnd:this._panEndHandler}),
this._panAnim.play())}}}catch(E){}},_fireOnScale:function(a,b,c){if("css-transforms"===this.navigationMode){var d=this.__visibleDelta;this.onScale(y.scaleAt(a,{x:-1*(this.width/2-(b.x-d.x)),y:-1*(this.height/2-(b.y-d.y))}),c)}},_stopAnim:function(){var a=this._zoomAnim,b=this._panAnim;if(a&&a._active){a.stop();var b=a.curve.getValue(a._getStep()),c=parseFloat(b.left),d=parseFloat(b.top),a=a.node;return{anchor:a.anchor,start:a.startingExtent,end:a.extent,level:a.newLod&&a.newLod.level,rect:b,divExtent:new I(c,
d-parseFloat(b.height),c+parseFloat(b.width),d,this.spatialReference)}}b&&b._active&&(b.stop(),b._fire("onEnd",[b.node]))},__getExtentForLevel:function(a,b,c){var d=this.__tileInfo,d=d&&d.lods;a=w.isDefined(a)?a:0;c=c||this.extent;b=b||c&&c.getCenter();if(d){if(b){c=this.getMinZoom();var e=this.getMaxZoom();a>e&&(a=e);a<c&&(a=c);a=d[a];d=this.width*a.resolution/2;c=this.height*a.resolution/2;return{extent:new I(b.x-d,b.y-c,b.x+d,b.y+c,b.spatialReference),lod:a}}}else if(c)return{extent:c.expand(!a||
1>a?1:a).centerAt(b)}},_jobs:0,_incr:function(){1===++this._jobs&&(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart())},_decr:function(){var a=--this._jobs;a?0>a&&(this._jobs=0):(this.updating=!1,this.attr("data-updating"),this.onUpdateEnd())},_fireEvent:function(a,b){this[a]&&this[a].apply(this,b)},_updateExtent:function(a,b){this.extent=a;b&&this._setClipRect();var c=this.spatialReference;c&&(c.isWebMercator()?this.geographicExtent=Q.webMercatorToGeographic(this._getAvailExtent(),
!0):4326===c.wkid&&(this.geographicExtent=new I(this._getAvailExtent().toJson())))},_fireExtChg:function(a){this.attr("data-zoom",this.getZoom());this.attr("data-scale",this.getScale());this._fireEvent("onExtentChange",a);if(a=this._extentDfd)delete this._extentDfd,a.resolve()},attr:function(a,b){var c=this.container;c&&(null==b?c.removeAttribute(a):c.setAttribute(a,b));return this},onUpdateStart:function(){},onUpdateEnd:function(){},onLoad:function(){this._setClipRect()},onBeforeUnload:function(){},
onUnload:function(){},onExtentChange:function(a,b,c){},onTimeExtentChange:function(){},onLayerAdd:function(){},onLayerAddResult:function(){},onLayersAddResult:function(){},onLayerRemove:function(){},onLayersRemoved:function(){},onLayerReorder:function(){},onLayersReordered:function(){},onLayerSuspend:function(){},onLayerResume:function(){},onPanStart:function(){},onPan:function(){},onPanEnd:function(){},onScale:function(){},onZoomStart:function(){},onZoom:function(){},onZoomEnd:function(){},onResize:function(){this._setClipRect()},
onReposition:function(){},destroy:function(){this._destroyed||(this.onBeforeUnload(this),this.removeAllLayers(),this._cleanUp(),clearTimeout(this._resizeT),this._gc&&this._gc._cleanUp(),this._destroyed=!0,this.onUnload(this))},setCursor:function(a){ba(this.__container,"cursor",this.cursor=a)},setMapCursor:function(a){this.setCursor(this._cursor=a)},resetMapCursor:function(){this.setCursor(this._cursor)},setInfoWindow:function(a){var b=this.infoWindow;b&&b.unsetMap(this);this.infoWindow=a;this.loaded&&
a&&a.setMap(this)},setInfoWindowOnClick:function(a){this._params.showInfoWindowOnClick=a;this.popupManager&&this.popupManager.set("enabled",a)},getInfoWindowAnchor:function(a){return this.infoWindow&&this.infoWindow._getAnchor&&this.infoWindow._getAnchor(a)||"upperright"},toScreen:function(a,b){return da(this.extent,this.width,this.height,a,b)},toMap:function(a){return S(this.extent,this.width,this.height,a)},addLayer:function(a,b){a&&!this.getLayer(a.id)&&this._addLayer(a,a instanceof L?this.graphicsLayerIds:
this.layerIds,b);return a},addLayers:function(a){var b=[],c=a.length,d,e,p=a.length;d=q.connect(this,"onLayerAddResult",function(e,p){-1!==f.indexOf(a,e)&&(c--,b.push({layer:e,success:!p,error:p}),c||(q.disconnect(d),this.onLayersAddResult(b)))});for(e=0;e<p;e++)this.addLayer(a[e]);return this},removeLayer:function(a,b){var c=a.id,d=a instanceof L?this.graphicsLayerIds:this.layerIds,e=T(d,c);0<=e&&(d.splice(e,1),a instanceof L?(Z(this["_gl_"+a.id+"_click_connect"]),a.loaded&&a._unsetMap(this,this._gc._surface)):
a.loaded&&(a._unsetMap(this,this._layersDiv),-1!==a.declaredClass.indexOf("VETiledLayer")&&this._onBingLayerRemove(a)),delete this._layers[c],delete this._layerDivs[c],b||this._reorderLayers(d),this.onLayerRemove(a))},removeAllLayers:function(){var a=this.layerIds,b;for(b=a.length-1;0<=b;b--)this.removeLayer(this._layers[a[b]],1);a=this.graphicsLayerIds;for(b=a.length-1;0<=b;b--)this.removeLayer(this._layers[a[b]],1);this.onLayersRemoved()},reorderLayer:function(b,c){m.isString(b)&&(a.deprecated(this.declaredClass+
": Map.reorderLayer(/*String*/ id, /*Number*/ index) deprecated. Use Map.reorderLayer(/*Layer*/ layer, /*Number*/ index).",null,"v2.0"),b=this.getLayer(b));var d=b.id,e,p=b instanceof L?this.graphicsLayerIds:this.layerIds;0>c?c=0:c>=p.length&&(c=p.length-1);e=T(p,d);-1===e||e===c||(p.splice(e,1),p.splice(c,0,d),this._reorderLayers(p))},getLayer:function(a){return this._layers[a]},setExtent:function(a,b){a=new I(a.toJson());var c=a.getWidth(),d=a.getHeight();return 0===c&&0===d?this.centerAt(new F({x:a.xmin,
y:a.ymin,spatialReference:a.spatialReference&&a.spatialReference.toJson()})):this._extentUtil(null,null,a,b)},centerAt:function(a){return this._extentUtil(null,{mapCenter:a})},centerAndZoom:function(a,b){return this._extentUtil({targetLevel:b,mapCenter:a,levelOrFactor:!0})},getScale:function(){return this.__LOD?this.__LOD.scale:H.getScale(this)},getResolution:function(){return this.__LOD?this.__LOD.resolution:this.extent?this.extent.getWidth()/this.width:0},getResolutionInMeters:function(){return this.getResolution()*
H.getUnitValueForSR(this.spatialReference)},getMinScale:function(){return this._params.minScale},getMaxScale:function(){return this._params.maxScale},setScale:function(a){return this._extentUtil({targetScale:a})},getLayersVisibleAtScale:function(a){var b=[];(a=a||this.getScale())&&f.forEach(this.layerIds.concat(this.graphicsLayerIds),function(c){c=this.getLayer(c);c.isVisibleAtScale(a)&&b.push(c)},this);return b},getNumLevels:function(){var a=this.getMinZoom(),b=this.getMaxZoom();return a===b&&0>
a?0:b-a+1},getLevel:function(){return this.__LOD?this.__LOD.level:-1},setLevel:function(a){if(-1<a)return this._extentUtil({targetLevel:a})},getZoom:function(){return this.getLevel()},setZoom:function(a){return this.setLevel(a)},getMinZoom:function(){return this._params.minZoom},getMaxZoom:function(){return this._params.maxZoom},setBasemap:function(a){var b;m.isObject(a)?(b=a,a=b.title):b=v&&v[a];if(b){this._basemapDfd&&-1===this._basemapDfd.fired&&this._basemapDfd.cancel();var c=[],d=[],e=0;f.forEach(b.baseMapLayers||
b.layers,function(a){var b,p={id:a.id,displayLevels:a.displayLevels,opacity:w.isDefined(a.opacity)?a.opacity:null,visible:w.isDefined(a.visibility)?a.visibility:null};if(a.type)switch(a.type){case "OpenStreetMap":b=new P(p)}else{b=a.url;if("https:"===window.location.protocol&&(-1!==b.search(/^http\:\/\/server\.arcgisonline\.com/i)||-1!==b.search(/^http\:\/\/services\.arcgisonline\.com/i)||-1!==b.search(/^http\:\/\/.+\.arcgis\.com/i)))b=b.replace(/http:/i,"https:");b=new W(b,p)}b&&(c.push(b),d.push(a),
a.isReference||e++)},this);if(c.length&&e){var p={basemapName:a,infos:d,layers:c};if(this.loaded){var k=this,r=new h(D._dfdCanceller),t=function(a){r._pendingLayers--;a=f.indexOf(p.layers,this);if(-1<a&&(a=r._layerEvents[a]))q.disconnect(a[0]),q.disconnect(a[1]);0>=r._pendingLayers&&(delete r._layerEvents,delete k._basemapDfd,0>r.fired&&r.callback(p))};this._basemapDfd=r;r._pendingLayers=0;r._layerEvents={};f.forEach(c,function(a,b){a&&(r._pendingLayers++,a.loaded?t(a):r._layerEvents[b]=[q.connect(a,
"onLoad",a,t),q.connect(a,"onError",a,t)])});r.addCallback(aa(this,this._basemapLoaded))}else this._basemapLoaded(p)}}else{b=[];for(var g in v)b.push(g)}},_basemapLoaded:function(a){var b=a.layers,c=a.infos,d=0,e=!0,p;this.loaded&&(f.forEach(b,function(a,b){a.loaded&&(c[b].isReference||d++)}),e=d);e&&(this.basemapLayerIds&&(p={basemapName:this._basemap,infos:v&&v[this._basemap]&&v[this._basemap].baseMapLayers},p.basemapName||(f.forEach(this.basemapLayerIds,function(a){if(this.getLayer(a)instanceof
P)return p.basemapName="osm",p.infos=v&&v.osm&&v.osm.baseMapLayers,!1},this),p.basemapName||(p=null))),this._removeBasemap(),this._basemap=a.basemapName,this.basemapLayerIds=this._addBasemap(b,c),this.attr("data-basemap",this.getBasemap()),this.emit("basemap-change",{current:a,previous:p}))},_addBasemap:function(a,b){var c=[],d=[],e=0;f.forEach(a,function(a,p){b[p].isReference?c.push(a):(this.addLayer(a,e++),d.push(a.id))},this);c.length&&f.forEach(c,function(a){a.attr("data-reference",!0);this.addLayer(a,
"top");d.push(a.id)},this);return d},_removeBasemap:function(){var a=this.basemapLayerIds,b;a&&a.length&&f.forEach(a,function(a){(b=this.getLayer(a))&&this.removeLayer(b)},this)},getBasemap:function(){return this._basemap||""},translate:function(a,b){a=a||0;b=b||0;if(!this._txTimer){this._tx=this._ty=0;var c=this.toScreen(this.extent.getCenter());this.__panStart(c.x,c.y)}this._tx+=a;this._ty+=b;this.__pan(this._tx,this._ty);clearTimeout(this._txTimer);this._txTimer=setTimeout(this._endTranslate,150)},
_endTranslate:function(){clearTimeout(this._txTimer);this._txTimer=null;var a=this._tx,b=this._ty;this._tx=this._ty=0;this.__panEnd(a,b)},setTimeExtent:function(a){a=(this.timeExtent=a)?new a.constructor(a.toJson()):null;this.onTimeExtentChange(a)},setTimeSlider:function(a){this.timeSlider&&(Z(this._tsTimeExtentChange_connect),this.timeSlider=this._tsTimeExtentChange_connect=null);a&&(this.timeSlider=a,this.setTimeExtent(a.getCurrentTimeExtent()),this._tsTimeExtentChange_connect=V(a,"onTimeExtentChange",
this,"setTimeExtent"))},setVisibility:function(a){if(this.visible!==a){(this.visible=a)||(this._display=this.container.style.display);this.container.style.display=a?this._display:"none";if(this.autoResize){var b=a?"resume":"pause";this._rszSignal[b]();this._oriSignal[b]()}a&&this.resize()}return this},resize:function(a){clearTimeout(this._resizeT);!0===a?this._execResize():this._resizeT=setTimeout(this._execResize,this.resizeDelay)},_timedResize:function(){this._resizeT||this._execResize()},_execResize:function(){clearTimeout(this._resizeT);
this._resizeT=null;this.reposition();this._resize();this.autoResize&&this._startResizeTimer()},_resize:function(){var a=this.width,b=this.height,c=r.get(this.container,"display"),d=p.getContentBox(this.container);if(!("none"===c||0>=d.w||0>=d.h||a===d.w&&b===d.h)){if(c=this._zoomAnim||this._panAnim)c.stop(),c._fire("onEnd",[c.node]);ba(this.root,{width:(this.width=d.w)+"px",height:(this.height=d.h)+"px"});d=this.width;c=this.height;this.attribution&&this.attribution.domNode&&r.set(this.attribution.domNode,
"maxWidth",Math.floor(d*this._mapParams.attributionWidth)+"px");this.__visibleRect.update(this.__visibleRect.x,this.__visibleRect.y,d,c);this.__visibleDelta.update(this.__visibleDelta.x,this.__visibleDelta.y,d,c);var e=new G(this.extent),a=(new G(e.x,e.y,e.width*(d/a),e.height*(c/b),this.spatialReference)).getExtent();this.onResize(a,d,c);this._extentUtil(null,null,a,null,!0)}},reposition:function(){var a=this.position,b=a.x,c=a.y;this._reposition();a=this.position;if(b!==a.x||c!==a.y)this.onReposition(a.x,
a.y)},_reposition:function(){var a=p.position(this.container,!0),b=p.getPadBorderExtents(this.container);this.position.update(a.x+b.l,a.y+b.t)},_setClipRect:function(){delete this._clip;var a=7>=t("ie")||void 0===t("ie")&&7<=t("trident")?"rect(auto,auto,auto,auto)":"auto";if(this.wrapAround180){var b=this.width,c=this.height,d=this._getFrameWidth(),e=b-d;0<e&&(a=e/2,a="rect(0px,"+(a+d)+"px,"+c+"px,"+a+"px)",c=this.extent.getWidth(),b=c*(d/b),this._clip=[(c-b)/2,b])}ba(this.__container,"clip",a)},
_getAvailExtent:function(){var a=this.extent,b=this._clip;if(b){if(!a._clip){var c=new G(a);c.width=b[1];c.x+=b[0];a._clip=c.getExtent()}return a._clip}return a},_fixedPan:function(a,b){return this._extentUtil(null,{dx:a,dy:b})},panUp:function(){return this._fixedPan(0,-0.75*this.height)},panUpperRight:function(){return this._fixedPan(0.75*this.width,-0.75*this.height)},panRight:function(){return this._fixedPan(0.75*this.width,0)},panLowerRight:function(){return this._fixedPan(0.75*this.width,0.75*
this.height)},panDown:function(){return this._fixedPan(0,0.75*this.height)},panLowerLeft:function(){return this._fixedPan(-0.75*this.width,0.75*this.height)},panLeft:function(){return this._fixedPan(-0.75*this.width,0)},panUpperLeft:function(){return this._fixedPan(-0.75*this.width,-0.75*this.height)},enableSnapping:function(a){a=a||{};if("esri.SnappingManager"===a.declaredClass)this.snappingManager=a;else{var b=ca++,c=this;this._rids&&this._rids.push(b);l(["./SnappingManager"],function(d){var e=
c._rids?f.indexOf(c._rids,b):-1;-1!==e&&(c._rids.splice(e,1),c.snappingManager=new d(m.mixin({map:c},a)))})}return this.snappingManager},disableSnapping:function(){this.snappingManager&&this.snappingManager.destroy();this.snappingManager=null},_createLabelLayer:function(){function a(){b._labels.removeAllFeatureLayers();f.forEach(b.graphicsLayerIds,function(a){a=b.getLayer(a);"function"===typeof a.applyEdits&&b._labels.addFeatureLayer(a)})}var b=this;!this._labels&&O&&this.loaded&&(this._labels=new O({id:"_internal_LabelLayer"}),
this._labels._setMap(this,this._gc._surface),a(),this.on("layers-reordered",a))},_getMapImageLyr:function(){this.loaded&&!this._mapImageLyr&&(this._mapImageLyr=new U,this._mapImageLyr._setMap(this,this._layersDiv),this._placeMapImageLyr());return this._mapImageLyr},_placeMapImageLyr:function(){for(var a=this.layerIds,b=this._layerDivs,c=!1,d,e,p=a.length-1;0<=p;p--)if(d=a[p],e=this.getLayer(d),d=b[d],e&&d&&!e._isReference){s.place(this._mapImageLyr._div,d,"after");c=!0;break}c||s.place(this._mapImageLyr._div,
this._layersDiv,"first")}})})},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(l,n,a){var g=window,q={addOnWindowUnload:function(h,m){l.windowUnloaded||a(g,"unload",l.windowUnloaded=function(){});a(g,"unload",n.hitch(h,m))},addOnUnload:function(h,m){a(g,"beforeunload",n.hitch(h,m))}};l.addOnWindowUnload=q.addOnWindowUnload;l.addOnUnload=q.addOnUnload;return q})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(l,n){var a=l.matrix={},g={};a._degToRad=
function(a){return g[a]||(g[a]=Math.PI*a/180)};a._radToDeg=function(a){return 180*(a/Math.PI)};a.Matrix2D=function(g){if(g)if("number"==typeof g)this.xx=this.yy=g;else if(g instanceof Array){if(0<g.length){for(var h=a.normalize(g[0]),m=1;m<g.length;++m){var f=h,d=a.normalize(g[m]),h=new a.Matrix2D;h.xx=f.xx*d.xx+f.xy*d.yx;h.xy=f.xx*d.xy+f.xy*d.yy;h.yx=f.yx*d.xx+f.yy*d.yx;h.yy=f.yx*d.xy+f.yy*d.yy;h.dx=f.xx*d.dx+f.xy*d.dy+f.dx;h.dy=f.yx*d.dx+f.yy*d.dy+f.dy}n.mixin(this,h)}}else n.mixin(this,g)};n.extend(a.Matrix2D,
{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});n.mixin(a,{identity:new a.Matrix2D,flipX:new a.Matrix2D({xx:-1}),flipY:new a.Matrix2D({yy:-1}),flipXY:new a.Matrix2D({xx:-1,yy:-1}),translate:function(g,h){return 1<arguments.length?new a.Matrix2D({dx:g,dy:h}):new a.Matrix2D({dx:g.x,dy:g.y})},scale:function(g,h){return 1<arguments.length?new a.Matrix2D({xx:g,yy:h}):"number"==typeof g?new a.Matrix2D({xx:g,yy:g}):new a.Matrix2D({xx:g.x,yy:g.y})},rotate:function(g){var h=Math.cos(g);g=Math.sin(g);return new a.Matrix2D({xx:h,
xy:-g,yx:g,yy:h})},rotateg:function(g){return a.rotate(a._degToRad(g))},skewX:function(g){return new a.Matrix2D({xy:Math.tan(g)})},skewXg:function(g){return a.skewX(a._degToRad(g))},skewY:function(g){return new a.Matrix2D({yx:Math.tan(g)})},skewYg:function(g){return a.skewY(a._degToRad(g))},reflect:function(g,h){1==arguments.length&&(h=g.y,g=g.x);var m=g*g,f=h*h,d=m+f,c=2*g*h/d;return new a.Matrix2D({xx:2*m/d-1,xy:c,yx:c,yy:2*f/d-1})},project:function(g,h){1==arguments.length&&(h=g.y,g=g.x);var m=
g*g,f=h*h,d=m+f,c=g*h/d;return new a.Matrix2D({xx:m/d,xy:c,yx:c,yy:f/d})},normalize:function(g){return g instanceof a.Matrix2D?g:new a.Matrix2D(g)},isIdentity:function(a){return 1==a.xx&&0==a.xy&&0==a.yx&&1==a.yy&&0==a.dx&&0==a.dy},clone:function(g){var h=new a.Matrix2D,m;for(m in g)"number"==typeof g[m]&&("number"==typeof h[m]&&h[m]!=g[m])&&(h[m]=g[m]);return h},invert:function(g){g=a.normalize(g);var h=g.xx*g.yy-g.xy*g.yx;return g=new a.Matrix2D({xx:g.yy/h,xy:-g.xy/h,yx:-g.yx/h,yy:g.xx/h,dx:(g.xy*
g.dy-g.yy*g.dx)/h,dy:(g.yx*g.dx-g.xx*g.dy)/h})},_multiplyPoint:function(a,h,m){return{x:a.xx*h+a.xy*m+a.dx,y:a.yx*h+a.yy*m+a.dy}},multiplyPoint:function(g,h,m){g=a.normalize(g);return"number"==typeof h&&"number"==typeof m?a._multiplyPoint(g,h,m):a._multiplyPoint(g,h.x,h.y)},multiplyRectangle:function(g,h){var m=a.normalize(g);h=h||{x:0,y:0,width:0,height:0};if(a.isIdentity(m))return{x:h.x,y:h.y,width:h.width,height:h.height};var f=a.multiplyPoint(m,h.x,h.y),d=a.multiplyPoint(m,h.x,h.y+h.height),c=
a.multiplyPoint(m,h.x+h.width,h.y),e=a.multiplyPoint(m,h.x+h.width,h.y+h.height),m=Math.min(f.x,d.x,c.x,e.x),b=Math.min(f.y,d.y,c.y,e.y),k=Math.max(f.x,d.x,c.x,e.x),f=Math.max(f.y,d.y,c.y,e.y);return{x:m,y:b,width:k-m,height:f-b}},multiply:function(g){for(var h=a.normalize(g),m=1;m<arguments.length;++m){var f=h,d=a.normalize(arguments[m]),h=new a.Matrix2D;h.xx=f.xx*d.xx+f.xy*d.yx;h.xy=f.xx*d.xy+f.xy*d.yy;h.yx=f.yx*d.xx+f.yy*d.yx;h.yy=f.yx*d.xy+f.yy*d.yy;h.dx=f.xx*d.dx+f.xy*d.dy+f.dx;h.dy=f.yx*d.dx+
f.yy*d.dy+f.dy}return h},_sandwich:function(g,h,m){return a.multiply(a.translate(h,m),g,a.translate(-h,-m))},scaleAt:function(g,h,m,f){switch(arguments.length){case 4:return a._sandwich(a.scale(g,h),m,f);case 3:return"number"==typeof m?a._sandwich(a.scale(g),h,m):a._sandwich(a.scale(g,h),m.x,m.y)}return a._sandwich(a.scale(g),h.x,h.y)},rotateAt:function(g,h,m){return 2<arguments.length?a._sandwich(a.rotate(g),h,m):a._sandwich(a.rotate(g),h.x,h.y)},rotategAt:function(g,h,m){return 2<arguments.length?
a._sandwich(a.rotateg(g),h,m):a._sandwich(a.rotateg(g),h.x,h.y)},skewXAt:function(g,h,m){return 2<arguments.length?a._sandwich(a.skewX(g),h,m):a._sandwich(a.skewX(g),h.x,h.y)},skewXgAt:function(g,h,m){return 2<arguments.length?a._sandwich(a.skewXg(g),h,m):a._sandwich(a.skewXg(g),h.x,h.y)},skewYAt:function(g,h,m){return 2<arguments.length?a._sandwich(a.skewY(g),h,m):a._sandwich(a.skewY(g),h.x,h.y)},skewYgAt:function(g,h,m){return 2<arguments.length?a._sandwich(a.skewYg(g),h,m):a._sandwich(a.skewYg(g),
h.x,h.y)}});l.Matrix2D=a.Matrix2D;return a})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),function(l,n,a,g,q,h,m,f,d){var c=n.getObject("dojox.gfx",!0),e=c._base={};c._hasClass=function(a,b){var c=a.getAttribute("className");return c&&0<=(" "+c+" ").indexOf(" "+b+" ")};c._addClass=function(a,b){var c=a.getAttribute("className")||"";if(!c||0>(" "+
c+" ").indexOf(" "+b+" "))a.setAttribute("className",c+(c?" ":"")+b)};c._removeClass=function(a,b){var c=a.getAttribute("className");c&&a.setAttribute("className",c.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)"),"$1$2"))};e._getFontMeasurements=function(){var a={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},b,c;g("ie")&&(c=q.doc.documentElement.style.fontSize||"",c||(q.doc.documentElement.style.fontSize="100%"));var d=f.create("div",
{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},q.body());for(b in a)d.style.fontSize=b,a[b]=16*Math.round(12*d.offsetHeight/16)/12/1E3;g("ie")&&(q.doc.documentElement.style.fontSize=c);q.body().removeChild(d);return a};var b=null;e._getCachedFontMeasurements=function(a){if(a||!b)b=e._getFontMeasurements();return b};var k=null,s={};e._getTextBox=function(a,b,c){var e,p,h=arguments.length,
g;k||(k=f.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},q.body()));e=k;e.className="";p=e.style;p.borderWidth="0";p.margin="0";p.padding="0";p.outline="0";if(1<h&&b)for(g in b)g in s||(p[g]=b[g]);2<h&&c&&(e.className=c);e.innerHTML=a;e.getBoundingClientRect?(p=e.getBoundingClientRect(),p={l:p.left,t:p.top,w:p.width||p.right-p.left,h:p.height||p.bottom-p.top}):p=d.getMarginBox(e);e.innerHTML="";return p};e._computeTextLocation=function(a,b,c,d){var e={};switch(a.align){case "end":e.x=
a.x-b;break;case "middle":e.x=a.x-b/2;break;default:e.x=a.x}e.y=a.y-c*(d?0.75:1);return e};e._computeTextBoundingBox=function(a){if(!c._base._isRendered(a))return{x:0,y:0,width:0,height:0};var b;b=a.getShape();var d=a.getFont()||c.defaultFont;a=a.getTextWidth();d=c.normalizedLength(d.size);b=e._computeTextLocation(b,a,d,!0);return{x:b.x,y:b.y,width:a,height:d}};e._isRendered=function(a){for(a=a.parent;a&&a.getParent;)a=a.parent;return null!==a};var p=0;e._getUniqueId=function(){var a;do a=l._scopeName+
"xUnique"+ ++p;while(m.byId(a));return a};e._fixMsTouchAction=function(a){a=a.rawNode;"undefined"!=typeof a.style.msTouchAction&&(a.style.msTouchAction="none")};n.mixin(c,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,
height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,
color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var a={};return function(b){var d=a[b];if(d)return new d;d=a[b]=new Function;d.prototype=c["default"+b];return new d}}(),normalizeColor:function(b){return b instanceof a?b:new a(b)},normalizeParameters:function(a,b){var c;if(b){var d={};for(c in a)c in b&&!(c in d)&&(a[c]=b[c])}return a},makeParameters:function(a,
b){var c=null;if(!b)return n.delegate(a);var d={};for(c in a)c in d||(d[c]=n.clone(c in b?b[c]:a[c]));return d},formatNumber:function(a,b){var c=a.toString();if(0<=c.indexOf("e"))c=a.toFixed(4);else{var d=c.indexOf(".");0<=d&&5<c.length-d&&(c=a.toFixed(4))}return 0>a?c:b?" "+c:c},makeFontString:function(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+" "+a.family},splitFontString:function(a){var b=c.getDefault("Font");a=a.split(/\s+/);if(!(5>a.length)){b.style=a[0];b.variant=a[1];b.weight=
a[2];var d=a[3].indexOf("/");b.size=0>d?a[3]:a[3].substring(0,d);var e=4;0>d&&("/"==a[4]?e=6:"/"==a[4].charAt(0)&&(e=5));e<a.length&&(b.family=a.slice(e).join(" "))}return b},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return c._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(a){return a*c.px_in_pt()},px2pt:function(a){return a/c.px_in_pt()},normalizedLength:function(a){if(0===a.length)return 0;if(2<a.length){var b=c.px_in_pt(),d=parseFloat(a);switch(a.slice(-2)){case "px":return d;
case "pt":return d*b;case "in":return 72*d*b;case "pc":return 12*d*b;case "mm":return d*c.mm_in_pt*b;case "cm":return d*c.cm_in_pt*b}}return parseFloat(a)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,equalSources:function(a,b){return a&&b&&a===b},switchTo:function(a){var b="string"==typeof a?c[a]:a;b&&(h.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath Surface createSurface fixTarget".split(" "),
function(a){c[a]=b[a]}),"string"==typeof a?c.renderer=a:h.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(a){return c.renderer=c[a]&&c[a].Surface===c.Surface?a:null}))}});return c})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(l,n,a,g){var q=l.Color=function(a){a&&this.setColor(a)};q.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],
green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:g.transparentColor||[0,0,0,0]};n.extend(q,{r:255,g:255,b:255,a:1,_set:function(a,g,f,d){this.r=a;this.g=g;this.b=f;this.a=d},setColor:function(a){n.isString(a)?q.fromString(a,this):n.isArray(a)?q.fromArray(a,this):(this._set(a.r,a.g,a.b,a.a),a instanceof q||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,
this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+a.map(["r","g","b"],function(a){a=this[a].toString(16);return 2>a.length?"0"+a:a},this).join("")},toCss:function(a){var g=this.r+", "+this.g+", "+this.b;return(a?"rgba("+g+", "+this.a:"rgb("+g)+")"},toString:function(){return this.toCss(!0)}});q.blendColors=l.blendColors=function(h,g,f,d){var c=d||new q;a.forEach(["r","g","b","a"],function(a){c[a]=h[a]+(g[a]-h[a])*f;"a"!=a&&(c[a]=Math.round(c[a]))});return c.sanitize()};
q.fromRgb=l.colorFromRgb=function(a,g){var f=a.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return f&&q.fromArray(f[1].split(/\s*,\s*/),g)};q.fromHex=l.colorFromHex=function(h,g){var f=g||new q,d=4==h.length?4:8,c=(1<<d)-1;h=Number("0x"+h.substr(1));if(isNaN(h))return null;a.forEach(["b","g","r"],function(a){var b=h&c;h>>=d;f[a]=4==d?17*b:b});f.a=1;return f};q.fromArray=l.colorFromArray=function(a,g){var f=g||new q;f._set(Number(a[0]),Number(a[1]),Number(a[2]),Number(a[3]));isNaN(f.a)&&(f.a=1);
return f.sanitize()};q.fromString=l.colorFromString=function(a,g){var f=q.named[a];return f&&q.fromArray(f,g)||q.fromRgb(a,g)||q.fromHex(a,g)};return q})},"esri/basemaps":function(){define(["require","dojo/has","./kernel","dojo/i18n!./nls/jsapi"],function(l,n,a,g){return{streets:{title:g.basemaps.streets,thumbnailUrl:l.toUrl("./images/basemap/streets.jpg"),itemId:"d8855ee4d3d74413babfb0f41203b168",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]},
satellite:{title:g.basemaps.satellite,thumbnailUrl:l.toUrl("./images/basemap/satellite.jpg"),itemId:"86de95d4e0244cba80f0fa2c9403a7b2",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]},hybrid:{title:g.basemaps.hybrid,thumbnailUrl:l.toUrl("./images/basemap/hybrid.jpg"),itemId:"413fd05bbd7342f5991d5ec96f4f8b18",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",
isReference:!0}]},terrain:{title:g.basemaps.terrain,thumbnailUrl:l.toUrl("./images/basemap/terrain.jpg"),itemId:"aab054ab883c4a4094c72e949566ad40",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer"},{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",isReference:!0}]},topo:{title:g.basemaps.topo,thumbnailUrl:l.toUrl("./images/basemap/topo.jpg"),itemId:"6e03e8c26aad4b9c92a87c1063ddb0e3",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"}]},
gray:{title:g.basemaps.gray,thumbnailUrl:l.toUrl("./images/basemap/gray.jpg"),itemId:"8b3b470883a744aeb60e5fff0a319ce7",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"},{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",isReference:!0}]},"dark-gray":{title:g.basemaps["dark-gray"],thumbnailUrl:l.toUrl("./images/basemap/dark-gray.jpg"),itemId:"da65bacab5bd4defb576f839b6b28098",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer"},
{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",isReference:!0}]},oceans:{title:g.basemaps.oceans,thumbnailUrl:l.toUrl("./images/basemap/oceans.jpg"),itemId:"48b8cec7ebf04b5fbdcaf70d09daff21",baseMapLayers:[{url:"http://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{url:"http://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",isReference:!0}]},"national-geographic":{title:g.basemaps["national-geographic"],
thumbnailUrl:l.toUrl("./images/basemap/national-geographic.jpg"),itemId:"509e2d6b034246d692a461724ae2d62c",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer"}]},osm:{title:g.basemaps.osm,thumbnailUrl:l.toUrl("./images/basemap/osm.jpg"),itemId:"5d2bfa736f8448b3a1708e1f6be23eed",baseMapLayers:[{type:"OpenStreetMap"}]}}})},"esri/nls/jsapi":function(){define({root:{io:{proxyNotSet:"esri.config.defaults.io.proxyUrl is not set. If making a request to a CORS enabled server, please push the domain into esri.config.defaults.io.corsEnabledServers."},
map:{deprecateReorderLayerString:"Map.reorderLayer(/*String*/ id, /*Number*/ index) deprecated. Use Map.reorderLayer(/*Layer*/ layer, /*Number*/ index).",deprecateShiftDblClickZoom:"Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported."},basemaps:{streets:"Streets",satellite:"Imagery",hybrid:"Imagery with Labels",terrain:"Terrain with Labels",topo:"Topographic",gray:"Light Gray Canvas","dark-gray":"Dark Gray Canvas",oceans:"Oceans","national-geographic":"National Geographic",
osm:"OpenStreetMap"},geometry:{deprecateToScreenPoint:"esri.geometry.toScreenPoint deprecated. Use esri.geometry.toScreenGeometry.",deprecateToMapPoint:"esri.geometry.toMapPoint deprecated. Use esri.geometry.toMapGeometry."},layers:{tiled:{tileError:"Unable to load tile"},dynamic:{imageError:"Unable to load image"},graphics:{drawingError:"Unable to draw graphic "},agstiled:{deprecateRoundrobin:"Constructor option 'roundrobin' deprecated. Use option 'tileServers'."},imageParameters:{deprecateBBox:"Property 'bbox' deprecated. Use property 'extent'."},
FeatureLayer:{noOIDField:"objectIdField is not set [url: ${url}]",fieldNotFound:"unable to find '${field}' field in the layer 'fields' information [url: ${url}]",noGeometryField:"unable to find a field of type 'esriFieldTypeGeometry' in the layer 'fields' information. If you are using a map service layer, features will not have geometry [url: ${url}]",invalidParams:"query contains one or more unsupported parameters",updateError:"an error occurred while updating the layer",createUserSeconds:"Created by ${userId} seconds ago",
createUserMinute:"Created by ${userId} a minute ago",editUserSeconds:"Edited by ${userId} seconds ago",editUserMinute:"Edited by ${userId} a minute ago",createSeconds:"Created seconds ago",createMinute:"Created a minute ago",editSeconds:"Edited seconds ago",editMinute:"Edited a minute ago",createUserMinutes:"Created by ${userId} ${minutes} minutes ago",createUserHour:"Created by ${userId} an hour ago",createUserHours:"Created by ${userId} ${hours} hours ago",createUserWeekDay:"Created by ${userId} on ${weekDay} at ${formattedTime}",
createUserFull:"Created by ${userId} on ${formattedDate} at ${formattedTime}",editUserMinutes:"Edited by ${userId} ${minutes} minutes ago",editUserHour:"Edited by ${userId} an hour ago",editUserHours:"Edited by ${userId} ${hours} hours ago",editUserWeekDay:"Edited by ${userId} on ${weekDay} at ${formattedTime}",editUserFull:"Edited by ${userId} on ${formattedDate} at ${formattedTime}",createUser:"Created by ${userId}",editUser:"Edited by ${userId}",createMinutes:"Created ${minutes} minutes ago",createHour:"Created an hour ago",
createHours:"Created ${hours} hours ago",createWeekDay:"Created on ${weekDay} at ${formattedTime}",createFull:"Created on ${formattedDate} at ${formattedTime}",editMinutes:"Edited ${minutes} minutes ago",editHour:"Edited an hour ago",editHours:"Edited ${hours} hours ago",editWeekDay:"Edited on ${weekDay} at ${formattedTime}",editFull:"Edited on ${formattedDate} at ${formattedTime}"}},tasks:{gp:{gpDataTypeNotHandled:"GP Data type not handled."},na:{route:{routeNameNotSpecified:"'RouteName' not specified for at least 1 stop in stops FeatureSet."}},
query:{invalid:"Unable to perform query. Please check your parameters."}},toolbars:{draw:{convertAntiClockwisePolygon:"Polygons drawn in anti-clockwise direction will be reversed to be clockwise.",addPoint:"Click to add a point",addShape:"Click to add a shape, or press down to start and let go to finish",addMultipoint:"Click to start adding points",freehand:"Press down to start and let go to finish",start:"Click to start drawing",resume:"Click to continue drawing",complete:"Double-click to complete",
finish:"Double-click to finish",invalidType:"Unsupported geometry type"},edit:{invalidType:"Unable to activate the tool. Check if the tool is valid for the given geometry type.",deleteLabel:"Delete"}},virtualearth:{vetiledlayer:{bingMapsKeyNotSpecified:"BingMapsKey must be provided."},vegeocode:{bingMapsKeyNotSpecified:"BingMapsKey must be provided.",requestQueued:"Server token not retrieved. Queing request to be executed after server token retrieved."}},widgets:{appProxySettings:{premiumContent:"Subscriber Content",
untitled:"Untitled (${url})"},attributeInspector:{NLS_first:"First",NLS_previous:"Previous",NLS_next:"Next",NLS_last:"Last",NLS_deleteFeature:"Delete",NLS_title:"Edit Attributes",NLS_errorInvalid:"Invalid",NLS_validationInt:"Value must be an integer.",NLS_validationFlt:"Value must be a float.",NLS_of:"of",NLS_noFeaturesSelected:"No features selected"},basemapToggle:{toggle:"Toggle basemap"},homeButton:{home:{button:"Home",title:"Default extent"}},layerSwipe:{title:"Drag to see underlying layer"},
locateButton:{locate:{button:"My Location",title:"Find my location",tracking:"Track location",stopTracking:"Stop tracking location"}},overviewMap:{NLS_drag:"Drag To Change The Map Extent",NLS_show:"Show Map Overview",NLS_hide:"Hide Map Overview",NLS_maximize:"Maximize",NLS_restore:"Restore",NLS_noMap:"'map' not found in input parameters",NLS_noLayer:"main map does not have a base layer",NLS_invalidSR:"spatial reference of the given layer is not compatible with the main map",NLS_invalidType:"unsupported layer type. Valid types are 'TiledMapServiceLayer' and 'DynamicMapServiceLayer'"},
timeSlider:{NLS_first:"First",NLS_previous:"Previous",NLS_next:"Next",NLS_play:"Play/Pause",NLS_invalidTimeExtent:"TimeExtent not specified, or in incorrect format."},mdSlider:{NLS_play:"Play/Pause"},attachmentEditor:{NLS_attachments:"Attachments:",NLS_add:"Add",NLS_none:"None",NLS_error:"There was an error.",NLS_fileNotSupported:"This file type is not supported."},directions:{error:{notEnoughStops:"Enter an origin and a destination.",unknownStop:"Location '\x3cname\x3e' could not be found.",routeTask:"Unable to route to these addresses.",
locator:"Location could not be found.",invalidStopType:"Invalid stop type",locatorUndefined:"Unable to reverse geocode. Locator URL is undefined.",noAddresses:"No addresses were returned.",noStops:"No stops were given to be added.",maximumStops:"The maximum number of stops has been reached",cantFindRouteServiceDescription:"Route service description was not reached or recognized. Please check service URL and/or user credentials, if specified.",maxWalkingDistance:"The distance between any inputs must be less than 50 miles (80 kilometers) when walking.",
nonNAmTruckingMode:"Calculating trucking routes outside of North and Central America is not currently supported.",cantRemoveStop:"Failed to remove stop."},time:{minute:"minute",minutes:"minutes",hour:"hour",hours:"hours"},units:{KILOMETERS:{name:"kilometers",abbr:"km"},METERS:{name:"meters",abbr:"m"},MILES:{name:"miles",abbr:"mi"},NAUTICAL_MILES:{name:"nautical miles",abbr:"nm"}},travelMode:{car:"By Car",truck:"By Truck",walking:"Walking"},impedance:{fastest:"Fastest",shortest:"Shortest"},unlocatedStop:"\x3cunknown location\x3e",
showOptions:"Show more options",hideOptions:"Hide options",findOptimalOrder:"Optimize order",useTraffic:"Use traffic",returnToStart:"Return to start",addDestination:"Add destination",viewFullRoute:"Zoom to full route",getDirections:"Get Directions",clearDirections:"Clear",reverseDirections:"Reverse directions",activate:"Add destinations by clicking on the map",print:"Print",printNotes:"Enter notes here",printDisclaimer:"Directions are provided for planning purposes only and are subject to \x3ca href\x3d'http://www.esri.com/legal/software-license' target\x3d'_blank'\x3eEsri's terms of use\x3c/a\x3e. Dynamic road conditions can exist that cause accuracy to differ from your directions and must be taken into account along with signs and legal restrictions. You assume all risk of use.",
retrievingMyLocation:"Retrieving location...",myLocationError:"Cannot retrieve location",setToMyLocation:"Use my current location",setToMyLocationTitle:"Depart from my current location",stopNoTitle:"Stop #"},editor:{tools:{NLS_attributesLbl:"Attributes",NLS_cutLbl:"Cut",NLS_deleteLbl:"Delete",NLS_extentLbl:"Extent",NLS_freehandPolygonLbl:"Freehand Polygon",NLS_freehandPolylineLbl:"Freehand Polyline",NLS_pointLbl:"Point",NLS_polygonLbl:"Polygon",NLS_polylineLbl:"Polyline",NLS_reshapeLbl:"Reshape",
NLS_selectionNewLbl:"New selection",NLS_selectionAddLbl:"Add to selection",NLS_selectionClearLbl:"Clear selection",NLS_selectionRemoveLbl:"Subtract from selection",NLS_selectionUnionLbl:"Union",NLS_autoCompleteLbl:"Auto Complete",NLS_unionLbl:"Union",NLS_rectangleLbl:"Rectangle",NLS_circleLbl:"Circle",NLS_ellipseLbl:"Ellipse",NLS_triangleLbl:"Triangle",NLS_arrowLbl:"Arrow",NLS_arrowLeftLbl:"Left Arrow",NLS_arrowUpLbl:"Up Arrow",NLS_arrowDownLbl:"Down Arrow",NLS_arrowRightLbl:"Right Arrow",NLS_undoLbl:"Undo",
NLS_redoLbl:"Redo"}},Search:{main:{searchButtonTitle:"Search",clearButtonTitle:"Clear search",placeholder:"Find address or place",searchIn:"Search in",lonlat:"Longitude, Latitude",reverseLonLatHeader:"Did you mean?",all:"All",allPlaceholder:"Find address or place",emptyValue:"Please enter a search term.",untitledResult:"Untitled",untitledSource:"Untitled source",noResults:"No results",noResultsFound:"There were no results found for ${value}.",showMoreResults:"Show more results",hideMoreResults:"Hide",
searchResult:"Search result",moreResultsHeader:"More results",esriLocatorName:"Esri World Geocoder"}},Geocoder:{main:{clearButtonTitle:"Clear Search",searchButtonTitle:"Search",geocoderMenuButtonTitle:"Change Geocoder",geocoderMenuHeader:"Search in",geocoderMenuCloseTitle:"Close Menu",untitledGeocoder:"Untitled geocoder"},esriGeocoderName:"Esri World Geocoder"},geocodeMatch:{match:{mapAllCandidatesLabel:"Map All Suggestions",defaultSortOrderLabel:"Default Sort Order",tableOptionsLabel:"Options",columnLabelAddress:"Address",
columnLabelType:"Type",columnLabelScore:"Score",noDataMsg:"No Results.",userCreatedLabel:"User Created",defaultMatchType:"DefaultMatch"},popup:{noAddress:"No Address Found.",matchButtonLabel:"Match",discardButtonLabel:"Discard",checkBoxLocation:"Location (X, Y)",checkBoxAddress:"Suggested Address",addressTitle:"Suggested Address",optionsTitle:"Match Options:",loadingPH:"Searching...",locationTitle:"Location",xTitle:"X: ",yTitle:"Y: "},customLabel:"Custom",idProperty:"id",gridTitle:"Suggestions",matchedLC:"matched",
matchedUC:"Matched",unmatchedLC:"unmatched",unmatchedUC:"Unmatched"},geocodeReview:{review:{noDataMsg1:"No Unmatched Features",noDataMsg2:"No Matched Features",noDataMsg3:"No Reviewed Features",columnOriginalLocation:"Original Location",columnSelectedLocation:"Selected Location",columnOriginalAddress:"Original Address",columnSelectedAddress:"Selected Address"},customLabel:"Custom",unmatchedLC:"unmatched",matchedLC:"matched",unmatchedUC:"Unmatched",matchedUC:"Matched",totalUC:"Total",remainingUC:"Remaining",
idProperty:"id",reviewedUC:"Reviewed",columnLabelAddress:"Address",of:"of",unmatchedTotal:"Unmatched (${count} Total)",unmatchedRemaining:"Unmatched (${count1} of ${count2} Remaining)",matchedTotal:"Matched (${count} Total)",reviewedTotal:"Reviewed (${count} Total)"},FeatureTable:{sortAsc:"Sort Ascending",sortDesc:"Sort Descending",defaultSort:"Default Sort Order",showSelected:"Show Selected Records",clearSelection:"Clear Selection",toggleColumns:"Show/Hide Columns"},HistogramTimeSlider:{count:"Count: ${count}",
dateRange:"Date Range: ${start} - ${end}"},layerList:{noLayers:"No layers to display."},legend:{NLS_points:"Points",NLS_lines:"Lines",NLS_polygons:"Polygons",NLS_creatingLegend:"Creating legend",NLS_noLegend:"No legend",NLS_dotValue:"1 Dot \x3d ${value} ${unit}",NLS_currentObservations:"Current observations",NLS_previousObservations:"Previous observations",high:"High",low:"Low",NLS_esriMetersPerSecond:"m/s",NLS_esriKilometersPerHour:"km/h",NLS_esriKnots:"knots",NLS_esriFeetPerSecond:"ft/sec",NLS_esriMilesPerHour:"mph",
showField:"Showing ${field}.",showNormField:"Showing ${field} divided by ${normField}.",showNormPct:"Showing ${field} as a percent of the total.",showOpField:"Showing ${field} with ${opField}.",showOpNormField:"Showing ${field} with ${opField} divided by ${opNormField}."},popup:{NLS_moreInfo:"More info",NLS_searching:"Searching",NLS_prevFeature:"Previous feature",NLS_nextFeature:"Next feature",NLS_close:"Close",NLS_prevMedia:"Previous media",NLS_nextMedia:"Next media",NLS_noInfo:"No information available",
NLS_noAttach:"No attachments found",NLS_maximize:"Maximize",NLS_restore:"Restore",NLS_zoomTo:"Zoom to",NLS_pagingInfo:"(${index} of ${total})",NLS_attach:"Attachments"},measurement:{NLS_distance:"Distance",NLS_area:"Area",NLS_location:"Location",NLS_resultLabel:"Measurement Result",NLS_length_miles:"Miles",NLS_length_kilometers:"Kilometers",NLS_length_feet:"Feet",NLS_length_meters:"Meters",NLS_length_yards:"Yards",NLS_length_nautical_miles:"Nautical Miles",NLS_area_acres:"Acres",NLS_area_sq_miles:"Sq Miles",
NLS_area_sq_kilometers:"Sq Kilometers",NLS_area_hectares:"Hectares",NLS_area_sq_yards:"Sq Yards",NLS_area_sq_feet:"Sq Feet",NLS_area_sq_meters:"Sq Meters",NLS_area_sq_nautical_miles:"Sq Nautical Miles",NLS_deg_min_sec:"DMS",NLS_decimal_degrees:"Degrees",NLS_map_coordinate:"Map Coordinate",NLS_longitude:"Longitude",NLS_latitude:"Latitude",NLS_MGRS:"MGRS",NLS_USNG:"USNG",NLS_UTM:"UTM",NLS_GeoRef:"GeoRef",NLS_GARS:"GARS",NLS_geometry_service_error:"Geometry Service Error",NLS_calculating:"Calculating..."},
bookmarks:{NLS_add_bookmark:"Add Bookmark",NLS_new_bookmark:"Untitled",NLS_bookmark_edit:"Edit",NLS_bookmark_remove:"Remove"},print:{NLS_print:"Print",NLS_printing:"Printing",NLS_printout:"Printout"},textSymbolEditor:{symbolConfiguration:"Symbol Configuration",alignment:"Alignment",color:"Color"},scalebar:{km:"km",mi:"mi",ft:"ft",m:"m"},templatePicker:{creationDisabled:"Feature creation is disabled for all layers.",loading:"Loading.."},renderingRule:{rendererLabelTitle:"Renderer",bandCombinationLabelTitle:"RGB composite",
userDefinedRendererTitle:"User Defined Renderer",userDefinedRendererDesc:"A user defined renderer. Use different bands for inputs to the Red, Green, and Blue channels (multi-band services only). Apply different radiometric enhancement algorithms to make image look better.",imageEnhancementLabelTitle:"Image Enhancement",stretchDescLabel:"Apply contrast enhancements to improve the image display.",stretchMethodLabel:"Stretch Type:",stretchMethodNoneDesc:"No additional enhancements applied.",stretchMethodMinMaxDesc:"Stretch to the entire range of pixel values.",
numStdDevLabelTitle:"Trim extreme pixel values beyond",numStdDevEndLabelTitle:"standard deviations.",draLabelTitle:"Dynamic range adjustment",minMaxDescLabelTitle:"Trim extreme pixel values",minPercentLabelTitle:"Exclude bottom:",maxPercentLabelTitle:"Exclude top:",percentLabelTitle:"%",gammaLabelTitle:"Gamma:",bandNamesRequestMsg:"Requesting band information...",noneStretchAlias:"None",minMaxStretchAlias:"Minimum and Maximum",stdDevStretchAlias:"Standard Deviation",percentClipStretchAlias:"Percent Clip",
minGammaLabel:"0.1",maxGammaLabel:"10"},vectorFieldRenderer:{symbolTypeLabelTitle:"Symbol:",simpleScalarLabelTitle:"Simple Scalar",simpleScalarDesc:"Symbolizes the magnitude of the data using graduated symbol sizes.",singleArrowLabelTitle:"Single Arrow",singleArrowDesc:"Symbolizes the magnitude and direction of flow with an arrow. The size of the arrow represents flow magnitude and the direction of the arrow indicates direction of flow.",windBarbsLabelTitle:"Wind Barbs",windBarbsDesc:"Symbolizes the magnitude and direction of wind using wind barbs. A long barb represents 10 knots, a short barb indicates 5 knots, and a black pennant represents 50 knots. The barb points to the direction where the wind originates.",
beaufortLabelTitle:"Beaufort Wind Scale",beaufortDesc:"Symbolizes the magnitude and direction of wind using the Beaufort Wind Scale. The magnitude is categorized into levels 0 through 12, where 0 represents a calm wind (displayed in blue), and 12 represents a hurricane (red). The arrow points to the direction where the wind originates.",oceanCurrentKnotsLabelTitle:"Ocean Current (Nine classes)",oceanCurrentKnotsDesc:"Symbolizes the magnitude and direction of ocean current using nine predefined categories that range from 0 to 4 knots. The arrows point to the current direction of flow.",
oceanCurrentMpsLabelTitle:"Ocean Current (Four classes)",oceanCurrentMpsDesc:"Symbolizes the magnitude and direction of ocean current using four predefined categories that range from 0 to 2 m/s. The arrows point to the current direction of flow.",classifiedArrowLabelTitle:"Classified Arrow",classifiedArrowDesc:"Symbolizes the magnitude and direction of flow, using categories calculated based on magnitude limits. Magnitude is represented using graduated symbol sizes and colors, ranging from green (low) to red (high).",
dataTypeLabelTile:"Direction represents flow:",angleFromAlias:"From (Meteorological)",angleToAlias:"To (Oceanographic)",unitLabelTitle:"Convert magnitude ",outputUnitLabelTitle:"To: ",inputUnitLabelTitle:"From: ",symbolDensityLabelTitle:"Symbol density: ",sparseTileSizeAlias:"Sparse",denseTileSizeAlias:"Dense",symbolSizeLabelTitle:"Symbol scaling:",minSymbolSizeAlias:"Minimum",maxSymbolSizeAlias:"Maximum",advancedOptionsTitle:"Advanced Settings",magnitudeLabelTitle:"Magnitude",minAlias:"Minimum:",
maxAlias:"Maximum:",invalidNumberMessage:"Please enter a numeric value.",dataValueRangeLabelTitle:"Symbol sizes represent magnitude range. Define magnitude range",applyLabelTitle:"Apply",esriMetersPerSecond:"m/s",esriKilometersPerHour:"km/h",esriKnots:"knots",esriFeetPerSecond:"ft/sec",esriMilesPerHour:"mph"},mosaicRule:{mosaicMethodLabel:"Prioritize imagery based on:",orderFieldLabel:"Attribute:",orderValueLabel:"Highest priority value:",lockRasterIdLabel:"Image IDs:",mosaicOperatorLabel:"Resolve overlapping pixels by:",
descendingLabel:"Reverse the order",queryLabel:"Filter your images:",queryFieldLabel:"Field:",queryOperatorLabel:"Operator:",queryValueLabel:"Value:",selectAllLabel:"Select All",mosaicruleNotApplicable:"The image layer contains only one image and does not support changing image display order.",lockRasterRequestMsg:"Searching...",lockRasterRequestDoneMsg:"Done...",lockRasterRequestErrorMsg:"Error searching...",lockRasterRequestNoRasterMsg:"No rasters found...",refreshLockRasterIdsLabel:"Refresh",orderFieldNotFound:"Not Available",
byAttributeAlias:"An attribute",centerAlias:"Image center closest to view center",lockRasterAlias:"A list of images",nadirAlias:"Sensor location closest to view center",northWestAlias:"Fixed order with most North West on top",seamlineAlias:"Defined Seamlines",viewPointAlias:"View point",noneAlias:"Only scale",firstAlias:"Only highest priority",lastAlias:"Only Lowest priority",minAlias:"Minimum of pixel values",maxAlias:"Maximum of pixel values",averageAlias:"Average of pixel values",blendAlias:"Blend pixel values",
sumAlias:"Sum of pixel values"},multidimensionalFilter:{variableFilter:"Variable",filterByDimensionalValues:"Dimensions",fromTimeText:"Start Time:",toTimeText:"End Time:",fromNumericText:"From:",toNumericText:"To:",sliceTimeText:"Time:",sliceNumberText:"Value:",rangeText:"Define a range",hasRangesInfoText1:"Data points are in the form of ranges.",hasRangesInfoText2:"Please select predefined range values.",defaultVariableText:"Default",dateSnapText:"Snapped to closest date",numSnapText:"Snapped to closest value",
disabledNumericDimensionText:"*Disabled because dimension slider is active.",disabledTimeDimensionText:"*Disabled because time slider is active.",applyLabelTitle:"Apply"},imageServiceMeasure:{measureBtnText:"Measure",angularUnits:"Angular Units",linearUnits:"Linear Units",areaUnits:"Area Units",infoWindowTitle:"Measure Result",measure3DLabel:"Measure in 3D",operationLabel:{OPERATION_POINT:"Point",OPERATION_DISTANCE_ANGLE:"Distance and Angle",OPERATION_AREA_PERIMETER:"Area and Perimeter",OPERATION_BASE_TOP:"Base to Top",
OPERATION_BASE_TOP_SHADOW:"Base to Top-Shadow",OPERATION_TOP_TOP_SHADOW:"Top to Top-Shadow",OPERATION_CENTROID:"Centroid",OPERATION_POINT_3D:"Point (3D)",OPERATION_DISTANCE_ANGLE_3D:"Distance and Angle (3D)",OPERATION_AREA_PERIMETER_3D:"Area and Perimeter (3D)",OPERATION_CENTROID_3D:"Centroid (3D)"},unitLabel:{esriInches:"Inches",esriFeet:"Feet",esriYards:"Yards",esriMiles:"Miles",esriNauticalMiles:"Nautical Miles",esriMillimeters:"Millimeters",esriCentimeters:"Centimeters",esriDecimeters:"Decimeters",
esriMeters:"Meters",esriKilometers:"Kilometers",esriDURadians:"Radians",esriDUDecimalDegrees:"Degrees",esriSquareInches:"Sq Inches",esriSquareFeet:"Sq Feet",esriSquareYards:"Sq Yards",esriAcres:"Acres",esriSquareMiles:"Sq Miles",esriSquareMillimeters:"Sq Millimeters",esriSquareCentimeters:"Sq Centimeters",esriSquareDecimeters:"Sq Decimeters",esriSquareMeters:"Sq Meters",esriAres:"Ares",esriHectares:"Hectares",esriSquareKilometers:"Sq Kilometers"}},obliqueViewer:{northTooltip:"Viewing angle towards north",
southTooltip:"Viewing angle towards south",eastTooltip:"Viewing angle towards east",westTooltip:"Viewing angle towards west",nadirTooltip:"Center as viewed from above"},tags:{addTags:"Add tag(s)",noTagsFound:"No existing tags match.",required:"One ore more tags are required."},rendererSlider:{statsAvg:"Average : ${avg}",high:"High",low:"Low",color:{changeMinMaxToolTIp:"Type in a value.",handleToolTip:"Match data values to colors.",maxValueToolTip:"Type in the largest expected data value.",minValueToolTip:"Type in the smallest expected data value.",
changeSymbol:"Change symbol"},size:{handleToolTip:"Match data values to symbol size.",sizeInputBoxLines:"Set line thickness from 0 to 18 pixels.",sizeInputBoxPoints:"Set symbol size from 1 to 120 pixels"}},zoomSlider:{zoomIn:"Zoom In",zoomOut:"Zoom Out"},colorPicker:{transparency:"Transparency",suggested:"Suggested",recent:"Recent",more:"More",moreColorsTooltip:"See more colors.",paletteTooltip:"Select a color.",noColorTooltip:"No color",hexInputTooltip:"A custom color in hexadecimal notation (#FFFF00)."},
visibleScaleRangeSlider:{noLimit:"No Limit",preview:"Preview",currentScaleTooltip:"Current map scale (${scaleLabel})",customScaleInputTooltip:"Type in a scale.",current:"Current",setTo:"Set to",selectOne:"(select one)",setToSelectOne:"${setTo} ${selectOne}",scaleRangeLabels:{world:"World",continent:"Continent",countries:"Countries",country:"Country",states:"States",state:"State",counties:"Counties",county:"County",metropolitanArea:"Metropolitan Area",cities:"Cities",city:"City",town:"Town",neighborhood:"Neighborhood",
streets:"Streets",street:"Street",buildings:"Buildings",building:"Building",smallBuilding:"Small Building",rooms:"Rooms",room:"Room"},featuredScaleLabels:{current:"Current Map View (${scaleLabel})",world:"World (${scaleLabel})",continent:"Continent (${scaleLabel})",countriesBig:"Countries - Big (${scaleLabel})",countriesSmall:"Countries - Small (${scaleLabel})",statesProvinces:"States / Provinces (${scaleLabel})",stateProvince:"State/Province (${scaleLabel})",counties:"Counties (${scaleLabel})",county:"County (${scaleLabel})",
metropolitanArea:"Metropolitan Area (${scaleLabel})",cities:"Cities (${scaleLabel})",city:"City (${scaleLabel})",town:"Town (${scaleLabel})",neighborhood:"Neighborhood (${scaleLabel})",streets:"Streets (${scaleLabel})",street:"Street (${scaleLabel})",buildings:"Buildings (${scaleLabel})",building:"Building (${scaleLabel})"}},symbolEditor:{preview:"Preview",shape:"Shape",fill:"Fill",outline:"Outline",px:"px",symbolSize:"Symbol Size",symbolSizeTooltip:"Set symbol size from ${min} to ${max} pixels.",
useImage:"Use an Image",useImageTooltip:"Use a custom image.",imageUrlInputTooltip:"For best results, the image should be no greater than 120 pixels wide by 120 pixels high. Other sizes will be adjusted to fit. Acceptable image formats are: PNG, GIF and JPEG.",selectCategoryTooltip:"Select a category.",imageLoadError:"Unable to load image.",symbolLoadError:"Unable to load symbols.",noFillTooltip:"No fill",symbolTransparencyTooltip:"Symbol transparency",lineWidth:"Line Width",lineWidthTooltip:"Set a line width from ${min} to ${max} pixels.",
pattern:"Pattern",patternTooltip:"Line type",flipColors:"Flip Colors",flipColorsTooltip:"Invert color ramp.",noOutlineTooltip:"No outline",autoAdjustOutline:"Adjust outline automatically",saturation:"Saturation",saturationTooltip:"Adjust color intensity.",selectRampTooltip:"Select a color ramp."}},arcgis:{utils:{baseLayerError:"Unable to load the base map layer",geometryServiceError:"Provide a geometry service to open Web Map.",showing:"Showing ${fieldAlias}"}},identity:{lblItem:"item",title:"Sign In",
info:"Please sign in to access the item on ${server} ${resource}",oAuthInfo:"Please sign in to continue.",lblUser:"Username:",lblPwd:"Password:",lblOk:"OK",lblSigning:"Signing in...",lblCancel:"Cancel",errorMsg:"Invalid username/password. Please try again.",invalidUser:"The username or password you entered is incorrect.",forbidden:"The username and password are valid, but you don't have access to this resource.",noAuthService:"Unable to access the authentication service."},common:{cancel:"Cancel",
ok:"OK",create:"Create",close:"Close",done:"Done",apply:"Apply",remove:"Remove",open:"Open",edit:"Edit",share:"Share",save:"Save",help:"Help",warning:"Warning",deleteLabel:"Delete",titleLabel:"Title:",newLabel:"New",arcgis:"ArcGIS",previous:"Previous",submit:"Submit",next:"Next",yesLabel:"Yes",noLabel:"No",errorTitle:"Error",upload:"Upload",sum:"Sum",minimum:"Minimum",maximum:"Maximum",average:"Average",standardDev:"Std Deviation",statistic:"Statistic",attribute:"Field",selectAttribute:"Select attribute",
runAnalysis:"Run Analysis",oneLabel:"1",twoLabel:"2",threeLabel:"3",fourLabel:"4",fiveLabel:"5",sixLabel:"6",sevenLabel:"7",eightLabel:"8",nineLabel:"9",tenLabel:"10",outputnameMissingMsg:"Output name is required",miles:"Miles",kilometers:"Kilometers",meters:"Meters",feet:"Feet",degree:"Decimal Degree(s)",inches:"Inch(es)",nautMiles:"Nautical Miles",pointsUnit:"Point(s)",yards:"Yards",comingSoonLabel:"Coming Soon!",sqMiles:"Square Miles",sqFeet:"Square Feet",sqKm:"Square Kilometers",sqMeters:"Square Meters",
hectares:"Hectares",acres:"Acres",seconds:"Seconds",minutes:"Minutes",hours:"Hours",today:"Today",monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday",chooseSummarizeLabel:"Choose layer to summarize",creditTitle:"Credit Usage Report",analysisLayers:"Analysis layers:",showCredits:"Show credits",learnMore:"Learn More",hoursSmall:"hr",minutesSmall:"min",secondsSmall:"sec",statsRequiredMsg:"At least one of the statistics parameters is required.",
nowLabel:"Now",hrsLabel:"hrs",groupLabel:"Group",ungroupLabel:"Ungroup",and:"and",or:"or",add:"Add",polygons:"Polygons",points:"Points",lines:"Lines",input:"Input",areas:"Areas",validateRouteIdMsg:"Layers must have the same number of records, or one layer must have one record only.",straightLineDistance:"Line distance",outputLabel:"Output:",addPoint:"Click to add a point",movePoint:"Click to move the point",selectAll:"Select All",unselectAll:"Unselect All",selectLabel:"Select",queryLabel:"Query",
drawnBoundary:"Drawn Boundary",basic:"Basic",intermediate:"Intermediate",advanced:"Advanced",majority:"Majority",minority:"Minority",addMinMajorityLable:"Add minority, majority",addPercentageLabel:"Add percentages",drivingMode:"Driving",truckingMode:"Trucking",walkingMode:"Walking",distanceMsg:"Only numeric values are allowed",analysisLayerLabel:"Select the analysis layer",selectPointLayer:"You need to select a point feature layer to run ${toolName}.",selectPolyLayer:"You need to select an area (polygon) feature layer to run ${toolName}.",
hotspotsLineFeatureMsg:"Line features are not supported as input to ${toolName}.",areaFeatureInvalidMsg:"Area features are not supported as input to ${toolName}.",overlayValidationMsg:"You need to have two feature layers in the map to perform ${toolName}.",aggregatePolyMsg:"You need to have at least one area (polygon) feature layer to run ${toolName}.",odPointMsg:"You need to have at least two point feature layers to run ${toolName}.",mapNotesAllMsg:"Map note contains points, lines and areas.  Only areas will be used for ${toolName}.",
mapNotesPtsPoly:"Map note contains points and areas.  Only areas will be used for ${toolName}.",mapNotesLinesPoly:"Map note contains lines and areas.  Only areas will be used for ${toolName}.",mapNotesLinesPts:"Map note contains points and lines.  Only lines will be used for ${toolName}.",mergeValidationMsg:"Merge Layers requires at least two layers of the same feature type (point, line, area).",runAnalysisMsg:"Data is being extracted and will be available in My Content.",extractValidationMsg:"There is no data in the map that can be extracted. Data owner(s) must first allow others to export.",
analysisSignInErrorMsg:"Unable to access the analysis service.",drawLabel:"Draw",noneLabel:"None",chooseLabel:"Choose ...",browseAnalysisTitle:"Choose Living Atlas Analysis Layer",addLayer:"Add layer to map"},analysisTools:{performAnalysis:"Perform Analysis",summarizeData:"Summarize Data",findLocations:"Find Locations",aggregateTool:"Aggregate Points",bufferTool:"Buffer Data",dataEnrichment:"Data Enrichment",analyzePatterns:"Analyze Patterns",useProximity:"Use Proximity",manageData:"Manage Data",
aggregateToolName:"Aggregate Points",bufferToolName:"Create Buffers",aggregatePoints:"Aggregate Points",summarizeWithin:"Summarize Within",summarizeNearby:"Summarize Nearby",enrichLayer:"Enrich Layer",findNearest:"Find Nearest",findHotSpots:"Find Hot Spots",createBuffers:"Create Buffers",dissolveBoundaries:"Dissolve Boundaries",mergeLayers:"Merge Layers",extractData:"Extract Data",overlayLayers:"Overlay Layers",fieldCalculator:"Field Calculator",createDriveTimeAreas:"Create Drive-Time Areas",deriveNewLocations:"Derive New Locations",
findExistingLocations:"Find Existing Locations",findSimilarLocations:"Find Similar Locations",exploreCorrelations:"Explore Correlations",findRoute:"Find Route",generateFleetPlan:"Generate Fleet-routing plan",createDensitySurface:"Create density surface",interpolatePoints:"Interpolate Points",orgUsrMsg:"You must be a member of an organization to run this service.",pubRoleMsg:"Your online account has not been assigned to the Publisher role.",servNameExists:"A result layer already exists with this name. Result layers must be named uniquely across the organization. Please use a different name.",
outputLayerLabel:"Result layer name",outputFileName:"Output file name",emptyResultInfoMsg:"The result of your analysis did not return any features. No layer will be created.",invalidServiceName:'The result layer name contains one or more invalid characters (\x3c, \x3e, #, %, :, ", ?, \x26, +, /, or \\).',invalidServiceNameLength:"The result layer name length should be less than 98 characters.",invalidEncodedServiceNameLength:"The encoded result layer name length should be less than 170 characters.",
requiredValue:"This value is required.",saveResultIn:"Save result in",useMapExtent:"Use current map extent",connectOriginsToDestinations:"Connect Origins to Destinations",planRoutes:"Plan Routes",calculateDensity:"Calculate Density",traceDownstream:"Trace Downstream",createWatershed:"Create Watersheds",createViewshed:"Create Viewshed",createWatersheds:"Create Watersheds",filterNoResults:"Filter did not return any results."},aggregatePointsTool:{aggregateDefine:"Count \x3cb\x3e${layername}\x3c/b\x3e within",
outputLayerName:"Aggregation of ${pointlayername} to ${polygonlayername}",groupByLabel:"Choose field to group by (optional)",itemDescription:"Feature Service generated from running the Aggregate Points solutions. Points from ${pointlayername} were aggregated to ${polygonlayername}",itemTags:"Analysis Result, Aggregate Points, ${pointlayername}, ${polygonlayername}",itemSnippet:"Analysis Feature Service generated from Aggregate Points",removeAttrStats:"Remove Attribute Statistics",keepPolygonLabel:"Keep areas with no points",
addStatsLabel:"Add statistic (optional)",chooseAreaLabel:"Choose layer containing aggregation areas",analysisLayerLabel:"Choose layer containing points to aggregate into areas"},findHotSpotsTool:{hotspotsPolyDefine:"Analyze \x3cb\x3e${layername}\x3c/b\x3e  to find statistically significant hot and cold spots of ",hotspotsPointDefine:"Analyze \x3cb\x3e${layername}\x3c/b\x3e  to find statistically significant hot and cold spots ",fieldLabel:"with or without an analysis field",noAnalysisField:"No Analysis Field",
hotspots:"Hot Spots",outputLayerName:"Hot Spots ${layername}",Options:"Options",defineBoundingLabel:"Define where points are possible",provideAggLabel:"Count points within",defaultBoundingOption:"None",defaultAggregationOption:"Fishnet Grid",itemDescription:"Feature Service generated from running the Find Hot Spots solution.",itemTags:"Analysis Result, Hot Spots, ${layername}, ${fieldname}",itemSnippet:"Analysis Feature Service generated from Find Hot Spots",chooseAttributeLabel:"Find clusters of high and low",
divideByLabel:"Divide by (optional)",blayerName:"Drawn Boundaries",analysisLayerLabel:"Choose layer for which hot spots will be calculated",pointCounts:"Point Counts",enrichLabel:"Esri Population (uses credits)"},overlayLayersTool:{overlayDefine:"Overlay \x3cb\x3e${layername}\x3c/b\x3e with",chooseOverlayLayer:"Choose overlay layer",chooseOverlayMethod:"Choose overlay method",chooseOutputType:"Choose output type",itemDescription:"Feature Service generated from running the Overlay layers solution.",
itemTags:"Analysis Result, Overlay layers, ${layername}",itemSnippet:"Analysis Feature Service generated from Overlay layers",unionOutputLyrName:"Union of ${layername} and ${overlayname}",intersectOutputLyrName:"Intersect of ${layername} and ${overlayname}",eraseOutputLyrName:"Erase ${layername} with ${overlayname}",overlayLayerPolyMsg:"The Overlay layer should be a Polygon Layer for Union overlay",notSupportedEraseOverlayMsg:"This Overlay layer is not supported for Erase overlay. Defaults to Intersect overlay.",
intersect:"Intersect",union:"Union",erase:"Erase",analysisLayerLabel:"Choose input layer"},bufferTool:{bufferDefine:"Create buffers from \x3cb\x3e${layername}\x3c/b\x3e",outputLayerName:"Buffer of ${layername}",sizeLabel:"Enter buffer size",sizeHelp:"To create multiple buffers, enter distances separated by spaces (2 3 5).",typeLabel:"Buffer type",resultLabel:"Result layer name",optionsLabel:"Options",itemDescription:"Feature Service generated from running the Buffer Features solution. Input from ${layername} were buffered by ${distance_field} ${units}",
itemTags:"Analysis Result, Buffer, ${layername}",itemSnippet:"Analysis Feature Service generated from Buffer",overlap:"Overlap",dissolve:"Dissolve",include:"Include",exclude:"Exclude",around:"Around",sideType:"Side type",endType:"End type",left:"Left",right:"Right",round:"Round",flat:"Flat",multipleDistance:"Multiple distance buffers should be",rings:"Rings",disks:"Disks",areaofInputPoly:"Area of input polygons in buffer polygons",distance:"Distance",field:"Field",analysisLayerLabel:"Choose layer containing features to buffer"},
driveTimes:{toolDefine:"Create areas around \x3cb\x3e${layername}\x3c/b\x3e",outputLayerName:"Drive from ${layername} (${breakValues} ${breakUnits})",outputModeLayerName:"${mode} from ${layername} (${breakValues} ${breakUnits})",driving:"Drive",trucking:"Truck",walking:"Walk",other:"Travel",measureLabel:"Measure",measureHelp:"To output multiple areas for each point, type sizes separated by spaces (2 3.5 5).",areaLabel:"Areas from different points",trafficLabel:"Use traffic",typicalTraffCdtnLabel:"Traffic based on typical conditions for",
resultLabel:"Result layer name",liveTrafficLabel:"Live traffic",itemDescription:"Feature Service generated from running the Create Drive Times solution.",itemTags:"Analysis Result, Drive Times, ${layername}",itemSnippet:"Analysis Feature Service generated from Create Drive Times",split:"Split",seeAvailability:"See availability.",timeOfDeparture:"Time of departure",drivingDistance:"Driving Distance",drivingTime:"Driving Time",truckingTime:"Trucking Time",truckingDistance:"Trucking Distance",walkingDistance:"Walking Distance",
walkingTime:"Walking Time",liveSingularTimeLabel:"Live traffic +1 hr ${minute} min",liveSingularHourTimeLabel:"Live traffic +1 hr",liveTimeLabel:"Live traffic +${hour} hr ${minute} min",liveTimeHoursLabel:"Live traffic +${hour} hr",liveTimeMinutesLabel:"Live traffic +${minute} min",analysisLayerLabel:"Choose point layer to calculate drive-time areas around"},routeOriginDestinationPairsTool:{toolDefine:"Route between pairs of points originating from \x3cb\x3e${layername}\x3c/b\x3e",labelOne:"Route to destinations in",
pairPoints:"Points with matching IDs will connect:",originTripId:"ID field in origins",destnTripId:"Matching ID field in destinations",includeSegments:"Include individual road segments.",inValidNumberRecordsMsg:"Layers must have the same number of records, or one layer must have one record only.",outputLayerName:"${layername} to ${destnlayername}",itemDescription:"Feature Service generated from running the Connect Origins to Destinations solution.",itemTags:"Analysis Result, Connect Origins to Destinations, ${layername}, ${destnlayername}",
itemSnippet:"Analysis Feature Service generated from Connect Origins to Destinations",analysisLayerLabel:"Choose point layer representing the origin locations:"},planRoutesTool:{toolDefine:"Route vehicles to stops in \x3cb\x3e${layername}\x3c/b\x3e",timeSpentLabel:"Time spent at each stop",defineRoutesLabel:"Define routes",startRoutesLabel:"Routes begin at",endRoutesLabel:"Routes end at",routes:"Routes",stops:"Stops",numRoutes:"Maximum number of vehicles to route",maxPtsRoute:"Maximum number of stops per vehicle",
limitMaxTime:"Limit the total route time per vehicle",returnToStart:"Return to start",specifyStartTime:"Start time for all routes",createStartLoc:"Add point to map",createEndLoc:"Add point to map",selectStartLoc:"Select starting location",selectEndLoc:"Select ending location",vehicles:"Vehicles",routeId:"Route ID field",selectRouteId:"Select RouteID",stopsLabel:"Your layer has ${numStops} stops.",stopsLabelByExtent:"The current map extent shows ${numStops} stops.",outputLayerName:"Routes to ${layername}",
itemDescription:"Feature Service generated from running the Plan Routes solution.",itemTags:"Analysis Result, Plan Routes, ${layername}",itemSnippet:"Analysis Feature Service generated from Plan Routes",startEndPtsValidMsg:"Start or end points not set",travelModeLabel:"Travel mode for routes",analysisLayerLabel:"Choose point layer representing stops to visit"},extractDataTool:{layersToExtract:"Layers to extract",studyArea:"Study area",outputDataFormat:"Output data format",filegdb:"File Geodatabase (.zip)",
shpFile:"Shapefile (.zip)",lyrpkg:"Layer Package (.lpk)",selectFtrs:"Select features",clipFtrs:"Clip features",sameAsDisplay:"Same as Display",sameAsLayer:"Same as ${layername}",outputfileName:"Extract Data ${datetime}",itemDescription:"File generated from running the Extract Data solution.",itemTags:"Analysis Result, Extract Data",itemSnippet:"Analysis File item generated from Extract Data",kml:"KML (.kmz or .zip)",csvPoints:"CSV (.csv or .zip)  ",linesCSVValidationMsg:"Line and area layers cannot be extracted to CSV.  Choose a different format or uncheck all line and area layers.",
runAnalysisMsg:"Data is being extracted and will be available in My Content."},summarizeWithinTool:{summarizeDefine:"For Features within \x3cb\x3e${sumWithinLayerName}\x3c/b\x3e",outputLayerName:"Summarize ${summaryLayerName} within ${sumWithinLayerName}",groupByLabel:"Choose field to group by (optional)",itemDescription:"Feature Service generated from running the Summarize Within solution. ${summaryLayerName} were summarized within ${sumWithinLayerName}",itemTags:"Analysis Result, Summarize Within, ${sumWithinLayerName}, ${summaryLayerName}",
itemSnippet:"Analysis Feature Service generated from Summarize Within",removeAttrStats:"Remove Attribute Statistics",summarizeMetricPoint:"Count of points",summarizeMetricLine:"Length of lines in",summarizeMetricPoly:"Sum Area in",addStatsLabel:"Attribute statistics",addStats:"Add statistics from the layer to summarize",sumLabel:"Summarize",analysisLayerLabel:"Choose area layer to summarize other features within its boundaries"},summarizeNearbyTool:{summarizeDefine:"Summarize what is nearby \x3cb\x3e${sumNearbyLayerName}\x3c/b\x3e",
findNearLabel:"Summarize nearest features using a",outputLayerName:"Summarize ${summaryLayerName} in ${sumNearbyLayerName}",groupByLabel:"Choose field to group by (optional)",itemDescription:"Feature Service generated from running the Summarize Nearby solution. ${sumNearbyLayerName} were summarized nearby ${summaryLayerName}",itemTags:"Analysis Result, Summarize Nearby, ${sumNearbyLayerName}, ${summaryLayerName}",itemSnippet:"Analysis Feature Service generated from Summarize Nearby",removeAttrStats:"Remove Attribute Statistics",
summarizeMetricPoint:"Count of points",summarizeMetricLine:"Total Length",summarizeMetricPoly:"Total Area",addStatsLabel:"Attribute statistics",addStats:"Add statistics from the layer to summarize",sumLabel:"Summarize",chooseLayer:"Choose layer to summarize",returnBdrycCheckLabel:"Return bounding areas",analysisLayerLabel:"Choose layer from which distances will be measured to features in the layer to summarize"},creditEstimator:{analysisLayersLabel:"Analysis layers:",totalRecordsLabel:"Total records:",
creditsAvailLabel:"Credits available:",creditsReqLabel:"Credits required:",ntwCreditsReqLabel:"Network credits required:",EnrichCreditsLabel:"Enrichment credits required"},enrichLayerTool:{selectCountryLabel:"Select country",enrichDefine:"Enrich \x3cb\x3e${inputLayerName}\x3c/b\x3e",chooseDataCollectionLabel:"Show available data for:",defAreasLabel:"Define areas to enrich",outputLayerName:"Enriched ${layername}",itemDescription:"Feature Service generated from running the Enrich layer solution. ${inputLayerName} were enriched",
itemTags:"Analysis Result, Enrich Layer, ${inputLayerName}",itemSnippet:"Analysis Feature Service generated from Enrich layer",straightLineDistance:"Line distance",selectDataVar:"Select Variables",clickDataVar:"Click Select Variables to open Data Browser and browse for variables",selectedVars:"Selected Variables",usCountryCode:"United States",canadaCountryCode:"Canada",albaniaCountryCode:"Albania",australiaCountryCode:"Australia",austriaCountryCode:"Austria",bahrainCountryCode:"Bahrain",belarusCountryCode:"Belarus",
bosniaCountryCode:"Bosnia and Herzegovina",botswanaCountryCode:"Botswana",belgiumCountryCode:"Belgium",brazilCountryCode:"Brazil",bulgariaCountryCode:"Bulgaria",chinaCountryCode:"China",colombiaCountryCode:"Colombia",croatiaCountryCode:"Croatia",cyprusCountryCode:"Cyprus",czechCountryCode:"Czech Republic",coteCountryCode:"Cote d'Ivoire",denmarkCountryCode:"Denmark",finlandCountryCode:"Finland",franceCountryCode:"France",germanyCountryCode:"Germany",ghanaCountryCode:"Ghana",greeceCountryCode:"Greece",
hungaryCountryCode:"Hungary",icelandCountryCode:"Iceland",indiaCountryCode:"India",indonesiaCountryCode:"Indonesia",irelandCountryCode:"Ireland",israelCountryCode:"Israel",italyCountryCode:"Italy",japanCountryCode:"Japan",kazakhstanCountryCode:"Kazakhstan",kenyaCountryCode:"Kenya",latviaCountryCode:"Latvia",liechtensteinCountryCode:"Liechtenstein",lithuaniaCountryCode:"Lithuania",luxembourgCountryCode:"Luxembourg",malawiCountryCode:"Malawi",malaysiaCountryCode:"Malaysia",maltaCountryCode:"Malta",
mauritiusCountryCode:"Mauritius",mexicoCountryCode:"Mexico",moldovaCountryCode:"Moldova",montenegroCountryCode:"Montenegro",mozambiqueCountryCode:"Mozambique",namibiaCountryCode:"Namibia",netherlandsCountryCode:"Netherlands",nzCountryCode:"New Zealand",nigeriaCountryCode:"Nigeria",norwayCountryCode:"Norway",peruCountryCode:"Peru",polandCountryCode:"Poland",portugalCountryCode:"Portugal",puertoCountryCode:"Puerto Rico",romaniaCountryCode:"Romania",reunionCountryCode:"Reunion",spainCountryCode:"Spain",
switzerlandCountryCode:"Switzerland",swedenCountryCode:"Sweden",turkeyCountryCode:"Turkey",ukCountryCode:"United Kingdom",zmCountryCode:"Zambia",ugandaCountryCode:"Uganda",mkCountryCode:"The Former Yugoslav Republic of Macedonia",uaeCountryCode:"United Arab Emirates",thCountryCode:"Thailand",twCountryCode:"Taiwan",szCountryCode:"Swaziland",krCountryCode:"South Korea",siCountryCode:"Slovenia",sgCountryCode:"Singapore",rsCountryCode:"Serbia",saCountryCode:"Saudi Arabia",tzCountryCode:"Tanzania",ukrCountryCode:"Ukraine",
globalCode:"Global",russiaCountryCode:"Russia",algCountryCode:"Algeria",andCountryCode:"Andorra",argCountryCode:"Argentina",azCountryCode:"Azerbaijan",baCountryCode:"Bangladesh",chCountryCode:"Chile",coCountryCode:"Costa Rica",egCountryCode:"Egypt",elCountryCode:"El Salvador",eeCountryCode:"Estonia",grCountryCode:"Georgia",gtCountryCode:"Guatemala",hoCountryCode:"Honduras",joCountryCode:"Jordan",kwCountryCode:"Kuwait",kzCountryCode:"Kyrgyzstan",lbCountryCode:"Lebanon",leCountryCode:"Lesotho",mgCountryCode:"Mongolia",
moCountryCode:"Morocco",niCountryCode:"Nicaragua",omCountryCode:"Oman",pkCountryCode:"Pakistan",phCountryCode:"Philippines",qaCountryCode:"Qatar",slCountryCode:"Slovakia",safCountryCode:"South Africa",sriCountryCode:"Sri Lanka",sdCountryCode:"Sudan",tnCountryCode:"Tunisia",ugCountryCode:"Uruguay",syCountryCode:"Syria",vzCountryCode:"Venezuela",vtCountryCode:"Vietnam",keyGlobalFacts:"Key Global Facts",age:"Age",husByOccupancy:"Housing Units By Occupancy",householdsByIncome:"Households by Income",keyUSFacts:"Key US Facts",
policy:"Policy Facts",raceAndEthnicity:"Race And Ethnicity",wealth:"Wealth Facts",keyCanFacts:"Key Canada Facts",aTSpend:"Austria Spending",aTFacts:"Austria Facts",bESpend:"Belgium Spending",bEFacts:"Belgium Facts",bRSpend:"Brazil Spending",bRFacts:"Brazil Facts",dKSpend:"Denmark Spending",dKFacts:"Denmark Facts",fISpend:"Finland Spending",fIFacts:"Finland Facts",fRSpend:"France Spending",fRFacts:"France Facts",dESpend:"Germany Spending",dEFacts:"Germany Facts",gRSpend:"Greece Spending",gRFacts:"Greece Facts",
iEFacts:"Ireland Facts",iESpend:"Ireland Spending",iNFacts:"India Facts",iNSpend:"India Spending",iTFacts:"Italy Facts",iTSpend:"Italy Spending",keyWEFacts:"Key Western Europe Facts",keyWESpend:"Key Western Europe Spending",jPFacts:"Japan Facts",jPSpend:"Japan Spending",lIFacts:"Liechtenstein Facts",lISpend:"Liechtenstein Spending",lUFacts:"Luxembourg Facts",lUSpend:"Luxembourg Spending",nLFacts:"Netherlands Facts",nLSpend:"Netherlands Spending",nOFacts:"Norway Facts",nOSpend:"Norway Spending",pTFacts:"Portugal Facts",
pTSpend:"Portugal Spending",eSSpend:"Spain Spending",eSFacts:"Spain Facts",sEFacts:"Sweden Facts",sESpend:"Sweden Spending",cHFacts:"Switzerland Facts",cHSpend:"Switzerland Spending",tRFacts:"Turkey Facts",tRSpend:"Turkey Spending",gBFacts:"United Kingdom Facts",gBSpend:"United Kigdom Spending",tapestry:"Tapestry",infrastructure:"Infrastructure",landCover:"Land Cover",landscapeFacts:"Landscape Facts",publicLands:"Public Lands",soils:"Soils",waterWetlands:"Water Wetlands",rUFacts:"Russia Facts",rUSpend:"Russia Spending",
analysisLayerLabel:"Choose layer to enrich with new data"},dissolveBoundaries:{dissolveBoundariesDefine:"Dissolve \x3cb\x3e${layername}\x3c/b\x3e",chooseDissolveLabel:"Choose dissolve method",overlappingAreasLabel:"Areas that overlap or are adjacent",sameAttributeAreasLabel:"Areas with same field value",summarizeLabel:"Add statistic (optional)",itemDescription:"Feature Service generated from running the Dissolve Boundaries solution.",itemTags:"Analysis Result, Dissolve Boundaries, ${layername}",itemSnippet:"Analysis Feature Service generated from Dissolve Boundaries",
resultLabel:"Result layer name",outputLayerName:"Dissolve ${layername}",analysisLayerLabel:"Choose area layer whose boundaries will be dissolved"},FindNearestTool:{summarizeDefine:"For each location in \x3cb\x3e${sumNearbyLayerName}\x3c/b\x3e, find its nearest locations.",findNearLabel:"Find the nearest locations by measuring",outputLayerName:"Nearest ${layer} to ${sumNearbyLayerName}",groupByLabel:"Choose field to group by (optional)",itemDescription:"Feature Service generated from running the Find Nearest solution. Nearest ${sumNearbyLayerName}",
itemTags:"Analysis Result, Find Nearest, ${sumNearbyLayerName}, ${summaryLayerName}",itemSnippet:"Analysis Feature Service generated from Find Nearest",removeAttrStats:"Remove Attribute Statistics",forEachLocationLabel:"For each location in the input layer",findNearestLabel:"Limit the number of nearest locations to:",limitSearchRangeCheck:"Limit the search range to",addStats:"For each location in \x3cb\x3e${summaryLayerName}\x3c/b\x3e",chooseLayer:"Choose a layer",findLocationsIn:"Find the nearest locations in:",
outputLayersLabel:"Result layer names",straightLineDistance:"Line distance",resultLabel1:"Nearest locations layer",resultLabel2:"Connecting lines layer",outputConnectingLayerName:"Nearest ${layer} to ${sumNearbyLayerName} (Lines)",chooseLayerInfoLabel:"Both input layers must contain points to enable Driving distance and Driving time options",analysisLayerLabel:"Choose point layer from which the nearest locations are found:"},mergeLayers:{mergeLayersDefine:"Merge \x3cb\x3e${layername}\x3c/b\x3e with",
outputLayerName:"Merge ${layername} ${mergelayername}",chooseMergeLayer:"Choose layer to merge",mergeFieldsLabel:"Modify merging fields (optional)",itemDescription:"Feature Service generated from running the Merge Layers solution.",itemTags:"Analysis Result, Merge Layers, ${layername}",itemSnippet:"Analysis Feature Service generated from Merge Layers",resultLabel:"Result layer name",rename:"Rename",remove:"Remove",match:"Match",operation:"Operation",fieldTypeMatchValidationMsg:"Fields to be matched must have the same type.  Transformation of types is supported (for example, double to integer, integer to string) except for string to numeric.",
analysisLayerLabel:"Choose layer"},findExistingLocations:{findExpLabel:"Build a query to find features",outputLayerName:"Find Locations in ${analysisLayerName}",itemDescription:"Feature Service generated from running the Find Existing Locations solutions for  ${analysisLayerName}.",itemTags:"Analysis Result, Find Existing Locations, ${analysisLayerName}",itemSnippet:"Analysis Feature Service generated from Find Existing Locations",analysisLayerLabel:"Choose layer containing features you want to find using attribute and spatial queries"},
deriveNewLocations:{findExpLabel:"Derive new locations that match the following expression(s)",outputLayerName:"New Locations",itemDescription:"Feature Service generated from running the Derive New Locations solutions.",itemTags:"Analysis Result, Derive New Locations, ${analysisLayerName}",itemSnippet:"Analysis Feature Service generated from Find Existing Locations"},findSimilarLocations:{toolDefine:"Find locations that are similar to: \x3cb\x3e${layername}\x3c/b\x3e",labelOneText:"You may use all locations or make a selection",
labelTwoText:"Search for similar locations in",labelThreeText:"Base similarity on",labelFourText:"Show me",outputLayerName:"Most Similar ${analysisLayerName}",selectTargetFtrs:"Select one or more target features",useAllFtrs:"Use all features",itemDescription:"Feature Service generated from running the Find Similar Locations solutions for  ${analysisLayerName}.",itemTags:"Analysis Result, Find Similar Locations, ${analysisLayerName}",itemSnippet:"Analysis Feature Service generated from Find Similar Locations",
allResults:"all locations from most to least similar",justShowTop:"the top",selectSearchLayer:"Select the search layer",query:"Query",noFieldMatchMsg:"Search layer and input layer do not have any fields in common.",reqSelectionMsg:"You must select the feature(s) to match by making an interactive selection or by constructing a query.",selectedFeaturesLabel:"${total} feature(s) selected",analysisLayerLabel:"Choose layer containing features you want to find using attribute and spatial queries"},expressionGrid:{addExpr:"Add Expression",
expression:"Expression",editExpr:"Edit Expression",viewText:"View Text",viewGrid:"View Grid",addExprDescription:"Click Add Expression to begin building your query.",duplicateExpression:"This Expression already exists"},expressionForm:{where:"where (attribute query)",whereLabel:"where",intersects:"intersects",notIntersects:"does not intersect",withinDistance:"within a distance of",notWithinDistance:"not within a distance of",contains:"completely contains",notContains:"does not completely contain",
completelyContains:"completely contains",notCompletelyContains:"does not completely contain",within:"completely within",notWithin:"not completely within",completelyWithin:"completely within",notCompletelyWithin:"not completely within",identical:"are identical to",notIdentical:"are not identical to",touches:"touches",notTouches:"does not touch",crossesOutline:"crossed by the outline of",notCrossesOutline:"not crossed by the outline of",from:"from",inValidAttributeFilterMessage:"Layer ${layername} does not contain any attributes that can be used in an attribute query."},
interpolatePointsTool:{toolDefine:"Interpolate values from \x3cb\x3e${layername}\x3c/b\x3e",outputLayerName:"${layername} Prediction",interpolationMethod:"Interpolation method",optimizeFor:"Optimize for",selectAttributesLabel:"Choose field to interpolate",classifyLabel:"Classify by",classesCountLabel:"Number of classes",equalInterval:"Equal Interval",manual:"Manual",quantile:"Equal Area",geometricInterval:"Geometric Interval",outputPredictionErrors:"Output prediction errors",interpolateWithin:"Clip output to",
predictLocLabel:"Predict at these locations",choosePointLayer:"Choose point layer",pointlayerName:"Drawn Prediction Points",classBreakValues:"Class break values",defaultBoundingOption:"Choose study area",classBreaksHelp:"Enter break values spearated by spaces: (10 20 30)",itemDescription:"Feature Service generated from running the Interpolate Points solution.",itemTags:"Analysis Result, Interpolate Points, ${layername}, ${fieldname}",itemSnippet:"Analysis Feature Service generated from Interpolate Points",
speed:"Speed",accuracy:"Accuracy",analysisLayerLabel:"Choose point layer containing locations with known values"},calculateDensityTool:{toolDefine:"Calculate density values from \x3cb\x3e${layername}\x3c/b\x3e",selectAttributesLabel:"Use a count field (optional)",outputAerealUnits:"Output area units",itemDescription:"Feature Service generated from running the Calculate Density solution.",itemTags:"Analysis Result, Calculate Density, ${layername}, ${fieldname}",itemSnippet:"Analysis Feature Service generated from Calculate Density",
outputLayerName:"${layername} Density",searchDistance:"Search Distance",naturalBreaks:"Natural Breaks",standardDeviation:"Standard Deviation",chooseCountField:"No count field",analysisLayerLabel:"Choose point or line layer from which to calculate density"},traceDownstreamTool:{toolDefine:"Trace downstream from \x3cb\x3e${layername}\x3c/b\x3e",outputLayerName:"${layername} Trace",choosePointLayer:"Choose point layer",pointlayerName:"Drawn Input Points",defaultBoundingOption:"Choose study area",itemDescription:"Feature Service generated from running the Trace Downstream solution.",
itemTags:"Analysis Result, Trace Downstream, ${layername}",itemSnippet:"Analysis Feature Service generated from Trace Downstream",clipOutputToLabel:"Clip output to",traceOptionsLabel:"Trace downstream settings (optional)",splitTraceLabel:"Split the trace into line segments",maxTraceLabel:"Maximum distance of the trace",analysisLayerLabel:"Point features used as the starting locations for each downstream trace"},createWatershedTool:{toolDefine:"Create Watersheds from \x3cb\x3e${layername}\x3c/b\x3e",
outputLayerName:"${layername} Watersheds",choosePointLayer:"Choose point layer",pointlayerName:"Drawn Input Points",defaultBoundingOption:"Choose study area",itemDescription:"Feature Service generated from running the Create Watershed solution.",itemTags:"Analysis Result, Create Watersheds, ${layername}",itemSnippet:"Analysis Feature Service generated from Create Watershed",searchDistanceLabel:"Search distance to nearest drainage (optional)",analysisLayerLabel:"Point features to use for calculating watersheds"},
createViewshedTool:{toolDefine:"Create areas that are visible from \x3cb\x3e${layername}\x3c/b\x3e",outputLayerName:"${layername} visible areas",itemDescription:"Feature Service generated from running the Create Viewshed solution.",itemTags:"Analysis Result, Create Viewshed, ${layername}",itemSnippet:"Analysis Feature Service generated from Create Viewshed",maxDistanceLabel:"Maximum viewing distance",observerHghtLabel:"Height of observer locations",targetHghtLabel:"Height of other objects on the ground",
viewshedOptionlabel:"Visibility settings (optional)",maxDistanceValidMsg:"The maximum viewing distance cannot be more than ${limit} ${units}.",maxdistanceInValidMsg:"Only integer values are allowed",analysisLayerLabel:"Point features that represent observer locations",pointlayerName:"Drawn Input Points"},analysisMsgCodes:{SS_84493:"There was 1 outlier location; it was not used to compute ${AggregationType}.",SS_84492:"The total study area was ${Area}.",SS_84491:"There were ${NumFeatures} valid input aggregation areas.",
SS_84490:"The aggregation process resulted in ${AggNumFeatures} weighted areas.",SS_84489:"Analysis was performed on all aggregation areas.",SS_84485:"There were ${NumFeatures} valid input features.",SS_84477:"Blue output features represent cold spots where low ${FieldName} cluster.",SS_84476:"Red output features represent hot spots where high ${FieldName} cluster.",SS_84471:"Output",SS_84470:"${NumSignificant} output features are statistically significant based on a FDR correction for multiple testing and spatial dependence.",
SS_84466:"Hot Spot Analysis",SS_84465:"The optimal fixed distance band was based on one standard distance of the features from the geometric mean: ${DistanceInfo}.",SS_84464:"The optimal fixed distance band was based on the average distance to ${NumNeighs} nearest neighbors: ${DistanceInfo}.",SS_84461:"The optimal fixed distance band selected was based on peak clustering found at ${DistanceInfo}.",SS_84459:"Scale of Analysis",SS_84458:"Analysis was based on the number of points in each polygon cell.",
SS_84457:"Points were aggregated to the fishnet polygon cells falling within the bounding areas provided.",SS_84453:"Analysis was performed on all fishnet polygon cells within the bounding area layer.",SS_84452:"Analysis was performed on all fishnet polygon cells containing at least one point.",SS_84451:"Analysis was based on the number of points in each fishnet polygon cell.",SS_84450:"The polygon cell size was ${SnapInfo}.",SS_84449:"A fishnet polygon mesh was created for aggregating points.",SS_84446:"${VarName} Properties:",
SS_84444:"Incident Aggregation",SS_84437:"There were no locational outliers.",SS_84434:"There were ${NumOutliers} outlier locations; these were not used to compute ${AggregationType}.",SS_84428:"Initial Data Assessment.",SS_84271_0:"Min",SS_84272_0:"Max",SS_84261_0:"Mean",SS_84262_0:"Std. Dev.",SS_00002:"The following report outlines the workflow used to optimize your Find Hot Spots result:",AO_100001:"Aggregate Points failed.",AO_100002:"The geometry type of Point Layer must be points.",AO_100003:"The geometry type of  Polygon Layer must be polygons.",
AO_100004:"The field  ${fieldName} provided for Summary Fields does not exist.",AO_100005:"The field  ${fieldName} provided for Summary Fields is not numeric.",AO_100006:"The summary type ${summary} provided for field ${fieldName} is invalid.",AO_100007:"Find Hot Spots failed.",AO_100008:"The geometry type for the boundingPolygonLayer must be polygon.",AO_100009:"The geometry type of Analysis Layer must be points or polygons.",AO_100010:"The geometry type of Aggregation Polygon Layer must be polygon.",
AO_100011:"Must provide an Analysis Field for polygon Analysis Layer.",AO_100012:"Create Buffers failed.",AO_100013:"Overlay Layers failed.",AO_100014:"Summarize Within failed.",AO_100015:"The geometry type of Summarize Layer input must be point, line, or polygons.",AO_100016:"The geometry type of Summarize Layer input must be point or line.",AO_100017:"The geometry type of Summarize Layer input must be point.",AO_100018:"Sum Units ${sumUnits} is not applicable for ${shapeType} shape type.",AO_100019:"At least one of the parameters, Summarize Shape or  Summary Fields is required.",
AO_468:"Input shape types are not equal.",AO_1156:"A field value was incompatible with the field type.",AO_800:"The value is not a member of SUM | MEAN | MIN | MAX | RANGE | STD | COUNT | FIRST | LAST.",AO_728:"The analysisField ${fieldName} you specified does not exist in the analysisLayer.",AO_12:"Field to add already exists.",AO_539:"Expression is invalid.",AO_1115:"Layer description property must be set for ${layerName}.",AO_366:"Invalid geometry type.",AO_641:"This tool requires at least ${numFeatures} feature(s) to compute results.",
AO_906:"Zero variance: all of the values for your input field are likely the same.",AO_1533:"We were not able to compute hot and cold spots for the data provided. If appropriate, try specifying an Analysis Field.",AO_1534:"Hot and cold spots cannot be computed when the number of points in every polygon area is identical. Try different polygon areas or different analysis options.",AO_1535:"The analysis option you selected requires a minimum of ${minNumFeatures} aggregation areas.",AO_1536:"The analysis options you selected require a minimum of ${minNumIncidents} points to compute hot and cold spots.",
AO_1570:"The analysis option you selected requires a minimum of ${minNumIncidents} points to be inside the bounding polygon area(s).",AO_1571:"The analysis options you selected require a minimum of ${minNumFeatures} features with valid data in the analysis field in order to compute hot and cold spots.\t",AO_1572:"There is not enough variation in point locations to compute hot and cold spots. Coincident points, for example, reduce spatial variation. You can try providing a bounding area, aggregation areas (a minimum of 30), or an Analysis Field.",
AO_1573:"There is not enough variation among the points within the bounding polygon area(s). You can try providing larger boundaries.",AO_1574:"The analysis option you selected requires a minimum of ${minNumIncidents} points to be inside the aggregation polygons.",AO_1575:"All of the values for your analysis field are likely the same. Hot and cold spots cannot be computed when there is no variation in the field being analyzed.",AO_84426:"Must provide polygons for aggregating incidents into counts for this incident data aggregation method.",
AO_26:"Buffer distance is zero.",AO_109:"The buffer distance cannot be negative for lines and points.",AO_385:"The LINE option is not valid with point features.",AO_438:"Overlay not polygon.",AO_100020:"Enrich Layer failed.",AO_100021:"The geometry type of Input Layer must be point, line or polygon.",AO_100022:"Units ${units} is not supported for Buffer type ${bufferType}.",AO_100023:"Unable to enrich layer for input spatial reference ${spref}.",AO_100024:"The number of features in ${inputLayer} is zero.",
AO_100025:"Summarize Nearby failed.",AO_100026:"Extract Data failed.",AO_100027:"Dissolve Boundaries failed.",AO_100028:"Create Drive Time Areas failed.",AO_100029:"Merge Layers failed.",AO_100030:"Find Nearest failed.",AO_100031:"The number of nearest locations to find can not be greater than 100.",AO_100032:"The number of features in ${analysisLayer} is zero.",AO_100033:"The number of features in ${nearLayer} is zero.",AO_100034:"The number of features in ${analysisLayer} can not be greater than 1000.",
AO_100035:"The number of features in ${nearLayer} can not be greater than 1000.",AO_100036:"The ${analysisLayer} layer must have a point geometry type when using ${measurementType} as the measurement type.",AO_100037:"The ${nearLayer} layer must have a point geometry type when using ${measurementType} as the measurement type.",AO_100038:"The search cutoff cannot be less than zero.",AO_100039:"The ${inputLayer} must have a point geometry type.",AO_100040:"The number of features in ${inputLayer} can not be greater than ${max}.",
AO_100041:"Buffer type parameter is supported only for layers containing points or lines.",AO_100042:"The geometry type ${shapeType} of Nearby Layer is not supported for Near type ${nearType}",AO_100043:"Units ${units} is not supported for Near type ${nearType}.",AO_100044:"Distance value should be greater than 0",AO_100045:"Distance and units are required when Buffer type is specified",AO_100046:"Failed to access GeoEnrichment server.",AO_100047:"Enrichment may not be available for some features.",
AO_100048:"The input layer ${inputLayer} contains multipoint geometry and has been converted to single point geometry.",AO_100049:"No features in the processing extent for any input layers.",AO_100050:"No fields exist in the input layer for data extraction.",AO_100051:"No features in the processing extent for any input layers and none of the input layers have fields for data extraction. ",AO_100052:"The field name ${fieldName} does not exist in the ${paramName}.",AO_100053:"Required keys ${missingKeys} are missing in attribute expression ${expression}.",
AO_100054:"Required keys ${missingKeys} are missing in spatial relationship expression ${expression}.",AO_100055:"Invalid expression; malformed JSON.",AO_100056:"Invalid layer index in expression ${expression}.",AO_100057:"Layer index exceeds the number of input layers in expression ${expression}.",AO_100058:"${spatialRel} spatial relationship does not support ${lyrGeomType}/${selLyrGeomType} geometry types for layer/selectingLayer in expression ${expression}.",AO_100059:"Invalid spatial relationship {spatialRel} in expression ${expression}.",
AO_100060:"Query expression failed in expression ${expression}.",AO_100061:"FindExistingLocations failed.",AO_100062:"Invalid distance and/or units in expression ${expression}",AO_100063:"PlanRoutes failed.",AO_100064:"The number of features in ${stopsLayer} is zero.",AO_100065:"The number of features in ${startLayer} is zero.",AO_100066:"The maximum number of vehicles to route cannot be less than zero and greater than ${max}.",AO_100067:"The maximum number of stops per vehicle cannot be less than zero and greater than ${max}.",
AO_100068:"The number of features in ${stopsLayer} cannot be greater than ${max}.",AO_100069:"The number of features in ${startLayer} cannot be greater than ${max}.",AO_100070:"The number of features in ${endLayer} cannot be greater than ${max}.",AO_100071:"The ${stopsLayer} layer must have a point geometry type.",AO_100072:"The ${startLayer} layer must have a point geometry.",AO_100073:"The ${endLayer} layer must have a point geometry.",AO_100074:"The time spent at each stop cannot be less than zero.",
AO_100075:"The total route time per vehicle should be greater than zero and less than one year (525600 minutes).",AO_100076:"The ${endLayer} should not be specified if return to start is true.",AO_100077:"Find Similar Locations failed.",AO_100078:"Invalid field name in expression ${expression}",AO_100079:"Derive New Locations failed.",AO_100080:"Connect Origins To Destinations failed.",AO_100081:"Field Calculator failed.",AO_735:"Please provide at least one valid analysis field to base similarity on.",
AO_1589:"This tool requires a minimum of 2 locations to search.",AO_100082:"A field name and an expression are required.",AO_100083:"A field type is required for creating a new field.",AO_100084:"Field type is required to be String, Integer, Double or Date.",AO_1599:"Too few records for analysis. This tool requires at least 1 reference  location in the Input Layer to compute results.",AO_100088:"Field(s) ${attribute} must be in both the reference and candidate search layers.",AO_100089:"The following fields lack sufficient variation for use in this analysis: ${attribute}.",
AO_100090:"This tool requires at least 2 candidate search locations that are not also reference locations.",AO_100094:"The maximum number of vehicles to route must be equal to the number of features in ${startLayer}.",AO_100104:"InterpolatePoints failed.",AO_40039:"Not enough data to compute method. At least 10 points are required.",AO_40040:"Data is distributed along a straight line and cannot be processed.",AO_40069:"The variance of the data is too small to be calculated.",AO_100091:"The geometry type of ${paramName} must be Points",
AO_100092:"The geometry type of boundingPolygonLayer must be Polygons",AO_100093:"The classification type Manual requires classbreaks value.",AO_100095:"The number of features in ${endLayer} must be equal to the number of features in ${startLayer}.",AO_100096:"The ${startLayerRouteIDField} in ${startLayer} does not have unique values.",AO_100097:"The ${endLayerRouteIDField} in ${endLayer} does not have unique values.",AO_100098:"The values in ${startLayerRouteIDField} in ${startLayer} do not have a one-to-one match with the values in ${endLayerRouteIDField} in ${endLayer}.",
AO_100099:"All break values must be greater than zero.",AO_100100:"The features in ${inputLayer} are not within the data coverage area. See availability at ${url}.",AO_100101:"No features in ${inputLayer} are within a distance of ${max} kilometers from streets.",AO_100102:"All features in ${inputLayer} must be in the same time zone when using traffic and creating areas with dissolve or split options.",AO_100103:"The ${measureType} value cannot be greater than ${max} ${breakUnits}.",AO_100105:"CalculateDensity failed",
AO_100106:"Field ${fieldName} is not numeric.",AO_100107:"Field ${fieldName} does not have any positive values.",AO_100108:"Field ${fieldName} has negative values, only positive values will be considered for calculating density.",AO_100109:"The geometry type for the input layer must be points or lines.",AO_100110:"Your user role doesn't include the geoEnrichment privilege",AO_100111:"Your user role doesn't include the network analysis privilege",AO_100112:"Your user role doesn't include the publish hosted features privilege",
AO_100113:"None of the stops were assigned to any routes. Check the Status and Violated Constraints fields in the output unassigned stops layer for more information.",AO_100114:"The time spent at each stop, ${stopServiceTime} minutes, must be less than the total route time per vehicle, ${maxRouteTime} minutes.",AO_100115:"Some stops were not assigned to any routes. Check the Violated Constraints field in the output unassigned stops layer for more information.",AO_100116:"Only ${routesUsed} out of ${routeCount} routes are needed to reach all stops. If you want to use more routes, run Plan Routes again but reduce the limits on the maximum number of stops or the total route time per vehicle.",
AO_100117:"Driving a truck is currently not supported outside of North America and Central America.",AO_100118:"Your user role doesn't include the create, update and delete content privilege.",GPEXT_001:"Invalid parameter ${name} value",GPEXT_002:"Parameter missing ${name}",GPEXT_003:"Invalid parameter ${name}:property ${propname} is missing",GPEXT_004:"Invalid layer parameter property ${propname} is missing",GPEXT_005:"Failed to access url ${url}",GPEXT_006:"Accessing url ${url} returned error ${error}",
GPEXT_007:"Invalid item ${id}",GPEXT_008:"Failed to create service ${name}",GPEXT_009:"Failed to add layer ${lname} to service ${name}",GPEXT_010:"Failed to parse layer JSON",GPEXT_011:"Layer ${url} does not have Extract capability",GPEXT_012:"Invalid External Operation",GPEXT_013:"This tool uses the Geoenrichment Service.  Please refer to ArcGIS Online Service Credit Estimator for more details.",GPEXT_014:"This tool uses Network Analysis Services.  Please refer to ArcGIS Online Service Credit Estimator for more details.",
GPEXT_015:"Select appropriate helper services url from Portal for requested operation.",GPEXT_016:"Invalid layer object.",GPEXT_017:"Service ${name} already exists.",GPEXT_018:"The remote feature service ${url} exceeds the limit of 100,000 features. Create a hosted feature service to analyze large data.",SS_00003:"The following report outlines the summary of your Find Similar Locations result:",SS_84503:"Summary of Input Features to Match",SS_89997:'["Attribute", "Min", "Max", "SD", "Mean"]',SS_84504:"Summary of Attributes of Interest",
SS_84512:'["Attribute", "Min", "Max", "SD", "Mean", "Input"]',SS_84505:"Top ${numResults} Most Similar Locations (Values)",SS_84506:" Top 10 of ${numResults} Most Similar Locations (Values)",SS_84510:'["OID", "SIMRANK", "SIMINDEX"]',SS_89998:' ["", "Total", ${sumIndex}] ',AO_100119:"The geometry type of WithinLayer input must be polygons",AO_100120:"The features in the layer are beyond max request size limit and cannot be enriched",AO_100121:"CreateViewshed Failed",AO_100122:"TraceDownstream Failed",
AO_100123:"CreateWatersheds Failed",AO_100124:"The geometry type of Input Layer must be point for buffer type ${bufferType}",AO_100125:"The groupby field ${fieldName} must be integers, text or date.",AO_100126:"The features in the input layer are beyond max request size and hence simplified",AO_100127:"All points fall outside the processing unit extent",AO_100128:"The point field provided must be string or integer",AO_100129:"The point falls outside the catchment extent",AO_100130:"The point falls outside the processing unit extent",
AO_100131:"The maximum viewing distance parameter cannot be more than ${max}${units}",AO_100132:"The DEM source data is not available in the input points area.",AO_100133:"The input DEM resolution is not supported at the specified maximum distance value. Specify a smaller maximum distance value.",AO_100136:"The geometry type for Extent Layer must be polygon.",AO_100137:"A value for the  ${parameterName} is required.",AO_100138:"Some origins were not connected to their paired destinations. Check the Status field in output unassigned origins and unassigned destinations layers for more information.",
AO_100139:"None of the origins could be connected to destinations.",AO_100140:"The features in the Extent Layer are beyond max request size and hence simplified.",AO_100141:"The features in the Extent Layer are beyond max request size limit and cannot be extracted.",AO_100142:"The extent of the input point features exceeds the allowed maximum extent.",AO_100143:"Your user role doesn't include the elevation analysis privilege.",AO_100144:"The ${serviceName} service is not registered for the portal.",
AO_100145:"The following travel mode is invalid: ${travelMode}.",AO_100146:"The chosen break units, ${breakUnits}, and travel mode, ${travelMode}, are incompatible. They are not mutually time or distance values.",AO_100147:"The travel mode does not specify a time-based impedance attribute."},geoenrichment:{task:{GeoenrichmentTask:{noData:"There is no data for the selected area"}},dijit:{AgePyramid:{maxLabel:"The largest group:",minLabel:"The smallest group:",compLabel:"Dots show comparison to",menLabel:"Men",
womenLabel:"Women"},BufferOptions:{studyArea:"Show data for:",ring:"Ring",driveTime:"Drive Times",driveDistance:"Drive Distance",radius:"Radius:",time:"Time:",distance:"Distance:",buffer:"Buffer:",units:{esriDriveTimeUnitsMinutes:"minutes",esriMiles:"miles",esriKilometers:"kilometers",esriFeet:"feet",esriMeters:"meters"}},bufferTitle:{pointRing:{esriFeet:"${radius}-feet ring",esriKilometers:"${radius}-km ring",esriMeters:"${radius}-meter ring",esriMiles:"${radius}-mile ring"},pointDriveTime:{esriFeet:"${radius}-feet drive distance",
esriKilometers:"${radius}-km drive distance",esriMeters:"${radius}-meter drive distance",esriMiles:"${radius}-mile drive distance",esriDriveTimeUnitsMinutes:"${radius}-minute drive time"},lineBuffer:{esriFeet:"${radius}-feet buffer",esriKilometers:"${radius}-km buffer",esriMeters:"${radius}-meter buffer",esriMiles:"${radius}-mile buffer"},polygon:"This area",stdGeo:"Intersecting ${level} feature"},DataCategoriesPage:{loading:"Loading...",global:"Global",search:"search for a variable name",noResults:"No results found for '${seachKey}'."},
DataCollectionsPage:{categoryName:"${categoryName} Variables",mapPopVar:"Choose a Popular Variable",keepBrowse:"Keep Browsing",showAll:"Show all ${categoryName} Variables",search:"search within the current category",noResults:"No results found for '${seachKey}'.",from:"from '${categoryName}'"},DataVariablesPage:{vars:"variables"},ShoppingCart:{selectedVars:"Selected Variables",noVariables:"No variables have yet been selected"},VariableInfo:{name:"Name",variable:"Variable",source:"Source",vintage:"Vintage"},
EnrichOptionsPage:{bufferRing:"1 mile circle around locations",bufferPolygon:"input polygons (buffer unavailable)",selectedVariables:"Selected Variables:",customize:"customize",bufferOptions:"Show data for:",edit:"edit",totalVars:"Total Variables: ${varCount} (${credits})",varsPerRow:"Variables per Row: ${varCount} (${credits})",credits:"${credits} credits",creditsCalc:"calculating...",totalVarsTooltip:"This operation will enrich ${rowCount} rows with ${varCount} variables and will cost ${credits}.",
varsPerRowTooltip:"This operation will enrich each row with ${varCount} variables and will cost ${credits} per row.",overwriteExisting:"Existing column values will be overwritten",varName:"Variable Name",column:"Column",newColumn:"\x3cCreate New\x3e",noColumn:"\x3cNone\x3e",back:"Back",finish:"Add data to system"},InfographicsMainPage:{mainTitle:"Configure Infographics",loading:"Loading...",chooseCountry:"Show available data for: ",chooseDataCollection:"Choose from popular data collections: ",chooseTheme:"Select color theme:",
dark:"Dark",light:"Light",addVariables:"Add more variables...",ok:"OK",add:"Add",cancel:"Cancel"},OneVar:{subtitleSite2:"for this area ",subtitleVar2:"${alias} is ",lessThan:"which is less than the average for ${site}",moreThan:"which is more than the average for ${site}",same:"which is the same as the average for ${site}",areaCol:"Area",valueCol:"Value"},RelatedVariables:{highLabel2:"The largest group: ${alias}",lowLabel2:"The smallest group: ${alias}",indicatorCol:"Indicator",valueCol:"Value",difCol:"Difference",
chartLabel:"Bars show deviation from"},Tapestry:{hhTypeLabel:"Household Type:",medianAgeLabel:"Median Age:",incomeLabel:"Income:",employmentLabel:"Employment:",educationLabel:"Education:",residentialLabel:"Residential:",raceEthnicityLabel:"Race / Ethnicity:",hhLabel:"households",adultsLabel:"adults"},WizardButtons:{back:"Back",ok:"OK",apply:"Apply",cancel:"Cancel",next:"Next"},EnrichConfig:{title:"Enrich Layer"},DataBrowser:{title:"Data Browser"}}},filterDlg:{expressionTemplate:"${field_dropdown} ${operator_dropdown} ${values_input}",
filter:"Filter",applyFilter:"Apply Filter",applyFilterBtn:"Apply Filter",removeFilterBtn:"Remove Filter",view:"View",change:"Change",edit:"Edit",create:"Create",match1Msg:"Display features in the layer that match the following expression",matchMsg:"Display features in the layer that match ${any_or_all} of the following expressions",matchMsgSet:"${any_or_all} of the following expressions in this set are true",all:"All",any:"Any",andBetweenValues:"and",and:"and",or:"or",friendlyAnd:"All of these expressions must be true:",
friendlyOr:"Any of these expressions must be true:",friendlyDatePattern:"MM/dd/yyyy",addAnotherExpression:"Add another expression",addSet:"Add a set",askForValues:"Ask for values",value:"Value",valueTooltip:"Enter value",field:"Field",fieldTooltip:"Pick from existing field",uniqueValues:"Unique",uniqueValueTooltip:"Pick from unique values in selected field",toThisLayer:"To this layer",toNewLayer:"To a new layer",newLayerName:"New layer name",showFilterExpression:"Show filter's expressions",deleteExpression:"Delete this expression",
deleteSet:"Delete this set",addExpression:"Add an expression to this set",addSetTooltip:"Add a set to contain expressions",promptMsg:"Provide a prompt and some hint text to present this filter interactively to others",prompt:"Prompt",hint:"Hint",stringOperatorIs:"is",stringOperatorIsNot:"is not",stringOperatorStartsWith:"starts with",stringOperatorEndsWith:"ends with",stringOperatorContains:"contains",stringOperatorDoesNotContain:"does not contain",stringOperatorIsBlank:"is blank",stringOperatorIsNotBlank:"is not blank",
dateOperatorIsOn:"is on",dateOperatorIsNotOn:"is not on",dateOperatorIsBefore:"is before",dateOperatorIsAfter:"is after",dateOperatorDays:"days",dateOperatorWeeks:"weeks",dateOperatorMonths:"months",dateOperatorInTheLast:"in the last",dateOperatorNotInTheLast:"not in the last",dateOperatorIsBetween:"is between",dateOperatorIsNotBetween:"is not between",dateOperatorIsBlank:"is blank",dateOperatorIsNotBlank:"is not blank",numberOperatorIs:"is",numberOperatorIsNot:"is not",numberOperatorIsAtLeast:"is at least",
numberOperatorIsLessThan:"is less than",numberOperatorIsAtMost:"is at most",numberOperatorIsGreaterThan:"is greater than",numberOperatorIsBetween:"is between",numberOperatorIsNotBetween:"is not between",numberOperatorIsBlank:"is blank",numberOperatorIsNotBlank:"is not blank",emptyString:"empty string",error:{noUniqueValues:"The specified field has has no values.",generateRendererFailed:"Unique values could not be determined for the selected field.",missingValue:"there's a missing value in one of the expressions",
cantParseExpression:"Filter cannot be shown because one or more of its expressions cannot be parsed. To edit the filter expressions, clear the filter and create a new filter interactively."}},calculateFields:{addFieldTitle:"Add Field",nameLabel:"Name:",aliasLabel:"Alias:",typeLabel:"Type:",lengthLabel:"Length:",defaultValueLabel:"Default Value:",optional:"(Optional)",stringLabel:"String",integerLabel:"Integer",doubleLabel:"Double",dateLabel:"Date",expBuilderTitle:"Expression Builder",operators:"Operators",
availableFields:"Available Fields",helpers:"Helpers",functions:"Functions",numeric:"Numeric",clear:"Clear",validate:"Validate",addNewField:"Add New Field",add:"Add",close:"Close",calculate:"Calculate",deleteLabel:"Delete",exprLabel:"${fieldName} \x3d",layerReqMsg:"A layer is required parameter for calculate field",fieldReqMsg:"A calculate field has not been provided",lyrSupportCalMsg:"This layer ${layername} does not support calculate fields",lyrUpdateCapMsg:"Either update capability is not enabled on the layer ${layername} or, you do not have access to update features on this layer",
selectCalField:"Choose field to calculate:",firstOperatorMsg:"Operator '${operator}' cannot start an expression",completeHelperMsg:"Complete the helper method added previously",successMsg:"Successfully updated ${count} features ",deleteField:"Delete Field",deleteFieldConfirm:"Are you sure you want to delete '${field}' field from this layer?",fields:"Fields",exprFailedMsg:"Calculate for the expression '${expr}' failed.",inValidFielNameCharMsg:"The field name contains one or more invalid characters \x3cbr/\x3e(`~@#$%^\x26*()-+\x3d|\\\x3c\x3e?/{.!'[]:\n\r).",
inValidFieldStartCharMsg:"The field name cannot start with one of these invalid characters \x3cbr/\x3e(`~@#$%^\x26*()-+\x3d|\\\x3c\x3e?/{}.!'[]:;\n\r_012356789).",invalidSqlkeywordsMsg:"The field name cannot be the same as an SQL keyword.",invalidExpression:"The calculate expression is not valid",validExpression:"The expression was successfully verified.",sameFielNameMsg:"The field name cannot be same as an existing field name",invalidFieldLengthMsg:"The field name length should be less than 128 characters.",
errorCodes:{3001:"Sql expression is not supported.",3002:"Sql expression syntax error.",3004:"Sql expression semantic error.",3007:"Invalid table name ${tableName}.",3008:"Invalid field name ${fieldName}.",3009:"Unsafe sql expression is not allowed."},absFunc:"${functionName}: Returns the absolute (positive) value of ${num}.",castFunc:"${functionName}: Converts a ${num} to a different type. FLOAT converts ${num} to a double and INT converts to an integer.",ceilingFunc:"${functionName}: Returns the smallest integer greater than or equal to  ${num}.",
cosFunc:"${functionName}: Returns the trigonometric cosine of ${num}. ${num} is assumed to be an angle in radians.",floorFunc:"${functionName}: Returns the largest integer that is less than or equal to ${num}.",logFunc:"${functionName}: The natural logarithm of ${num}.",log10Func:"${functionName}: The base-10 logarithm of ${num}.",modFunc:"${functionName}: Returns the remainder after the division of n is performed on ${num}. Both ${n} and ${num} must be integer.",powerFunc:"${functionName}: Returns the value of ${num} raised to the specified power ${y}.",
roundFunc:"${functionName}: Rounds ${num} to the specified ${length}.",sinFunc:"${functionName}: Returns the trigonometric sine of ${num}. ${num} is assumed to be an angle in radians.",tanFunc:"${functionName}: Returns the tangent of ${num}. ${num} is assumed to be an angle in radians.",truncateFunc:"${functionName}: Truncates ${num} at the specified ${decimal_place}. A positive ${decimal_place} truncates while a negative ${decimal_place} rounds.",nullifFunc:"${functionName}: Returns null if ${num} equals ${value}. Commonly used to prevent divide-by-zero errors by setting ${value} to 0.",
char_lengthFunc:"${functionName}: Returns the number of characters in ${str}. The result is an integer.",concatFunc:"${functionName}: Concatenates two strings.",positionFunc:"${functionName}: Returns the position of the first occurrence of substring in ${str}. If substring is not found, the result is 0.",lowerFunc:"${functionName}: Returns a string where all characters in ${str} are converted to lowercase.",substringFunc:"${functionName}: Returns a part of ${str}. ${start} is an integer index specifying where the returned characters start. ${length} is the number of characters to be returned.",
trimFunc:"${functionName}: Returns a string where all leading or trailing spaces are removed from ${str}.",upperFunc:"${functionName}: Returns a string where all characters in ${str} are converted to uppercase.",current_dateFunc:"${functionName}: Returns the current date.",current_timeFunc:"${functionName}: Returns the current time (hours, minutes, seconds).",current_timestampFunc:"${functionName}: Returns the current time (hours, minutes, seconds, milliseconds)."},smartMapping:{other:"Other",minToMax:"to"},
browseLayersDlg:{browseTitle:"Browse Living Atlas Layers",categoryAll:"All Categories",categoryImagery:"Imagery",subCategoryBasemapImagery:"Basemap Imagery",subCategoryMultiSpectral:"Multispectral Imagery",subCategoryTemporal:"Temporal Imagery",subCategoryEvent:"Event Imagery",categoryBasemaps:"Basemaps",subCategoryEsriBasemaps:"Esri Basemaps",subCategoryPartnerBasemaps:"Partner Basemaps",subCategoryUserBasemaps:"User Basemaps",categoryHistoricalMaps:"Historical Maps",categoryDemographics:"Demographics \x26 Lifestyle",
subCategoryIncome:"Income \x26 Spending",subCategoryPopulation:"Population \x26 Housing",subCategorySegmentation:"Segmentation \x26 Behaviors",subCategoryBusiness:"Business \x26 Jobs",subCategoryAtRisk:"At Risk",categoryLandscape:"Landscape",subCategoryClimate:"Climate \x26 Weather",subCategoryEcology:"Ecology",subCategorySpecies:"Species Biology",subCategoryDisturbance:"Disturbance \x26 Impact",subCategoryElevation:"Elevation",subCategoryLand:"Land Cover",subCategoryHazards:"Natural Hazards",subCategoryOceans:"Oceans",
subCategorySoils:"Soils/Geology",subCategorySubsurface:"Subsurface",subCategoryWater:"Water",subCategoryWeather:"Weather",categoryEarthObservations:"Earth Observations",categoryUrbanSystems:"Urban Systems",subCategory3DCities:"3D Cities",subCategoryMovement:"Movement",subCategoryParcels:"Parcels",subCategoryPeople:"People",subCategoryPlanning:"Planning",subCategoryPublic:"Public",subCategoryWork:"Work",categoryTransportation:"Transportation",categoryBoundaries:"Boundaries \x26 Places",subCategoryBoundaries:"Boundaries",
subCategoryPlaces:"Places",categoryHexBins:"Hexbins",searchFor:"Search for",errorLabel:"Error",searchTitle:"Search",error:{wildCardSearchError:"Wildcard searches are not supported."}},gallery:{noFilterFields:"Layer ${name} has no fields that can be used for filtering.",addToViewer:"Add layer to map",noItemsToDisplay:"There are no items currently available to display.",searchFor:"Search for",searching:"Searching"}},ar:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,it:1,ja:1,ko:1,lv:1,lt:1,nl:1,nb:1,
pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1})},"esri/Evented":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/has ./kernel".split(" "),function(l,n,a,g,q,h){return l([g],{declaredClass:"esri.Evented",registerConnectEvents:function(){var a=this.constructor,f=this.constructor._meta.parents,d=[{}],c={},e,b,k=function(a,b){n.isArray(a)||(a=[a]);for(var c=0;c<a.length;c++){var d=a[c];d._meta&&d._meta.parents&&k(d._meta.parents,
b);d.prototype._eventMap&&b.push(n.mixin({},d.prototype._eventMap))}return b};if(!a._onMap){k(f,d);d.push(this._eventMap);f=n.mixin.apply(this,d);for(e in this)/^on\w/.test(e)&&n.isFunction(this[e])&&(d=this._hyphenLower(e).toLowerCase(),f[d]||(c[d]={method:e}));for(b in f)e=this._onCamelCase(b),c[b]={method:e,argKeys:f[b]};a._onMap=c;return a._onMap}},on:function(h,f){if(-1<h.indexOf(",")){for(var d=h.split(/\s*,\s*/),c=d.length,e=[];c--;)e.push(this.on(d[c],f));e.remove=function(){for(var a=0;a<
e.length;a++)e[a].remove()};return e}var d=this.constructor._onMap||this.registerConnectEvents(),c="string"==typeof h&&h.toLowerCase(),b=this._onCamelCase(c),k=d&&d[c];return(b=k&&k.method||this[b]&&n.isFunction(this[b])&&b)?k&&n.isArray(k.argKeys)?(d=this._onArr2Obj(f,d[c].argKeys),a.after(this,b,d,!0)):a.after(this,b,function(a){a=a||{};a.target||(a.target=this);f.call(this,a)},!0):this.inherited(arguments)},emit:function(a,f){var d,c,e,b,k=a.toLowerCase();b=this._onCamelCase(a);var h=this.constructor._onMap||
this.registerConnectEvents();b=(e=h&&h[k]&&h[k].method||n.isFunction(this[b])&&b)&&this[e];e&&h&&h[k]&&this._onObj2Arr(function(){c=Array.prototype.slice.call(arguments)},h[k].argKeys)(f);f=f||{};f.target||(f.target=this);b&&(d=c&&c.length?c:[f],d=b.apply(this,d));this.inherited(arguments,[a,f]);return d},_onObj2Arr:function(a,f){if(f){var d=this;return function(c){var e,b=[],k=f.length;for(e=0;e<k;e++)b[e]=c[f[e]];a.apply(d,b)}}return a},_onArr2Obj:function(a,f){if(f){var d=this;return function(){var c,
e={},b=arguments.length;for(c=0;c<b;c++)e[f[c]]=arguments[c];e.target||(e.target=d);a.call(d,e)}}return a},_hyphenLower:function(a){return a.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(a,d){return(d?"-":"")+a.toLowerCase()})},_onCamelCase:function(a){return"on"+a.substr(0,1).toUpperCase()+a.substr(1).replace(/\-([a-z])/g,function(a,d){return d.toUpperCase()})}})})},"esri/fx":function(){define("dojo/_base/connect dojo/_base/fx dojo/_base/lang dojo/dom dojo/dom-geometry dojo/dom-style dojo/fx dojo/has ./kernel".split(" "),
function(l,n,a,g,q,h,m,f,d){return{animateRange:function(c){var d=c.range;return new n.Animation(a.mixin({curve:new n._Line(d.start,d.end)},c))},resize:function(c){var d=c.node=g.byId(c.node),b=c.start,k=c.end;b||(b=q.getMarginBox(d),d=q.getPadBorderExtents(d),b=c.start={left:b.l+d.l,top:b.t+d.t,width:b.w-d.w,height:b.h-d.h});k||(k=c.anchor?c.anchor:{x:b.left,y:b.top},d=c.size,k=c.end={left:b.left-(d.width-b.width)*(k.x-b.left)/b.width,top:b.top-(d.height-b.height)*(k.y-b.top)/b.height,width:d.width,
height:d.height});return n.animateProperty(a.mixin({properties:{left:{start:b.left,end:k.left},top:{start:b.top,end:k.top},width:{start:b.width,end:k.width},height:{start:b.height,end:k.height}}},c))},slideTo:function(c){var d=c.node=g.byId(c.node),b=h.getComputedStyle,k=null,f=null,p=function(){return function(){var a="absolute"==d.style.position?"absolute":"relative";k="absolute"==a?d.offsetTop:parseInt(b(d).top)||0;f="absolute"==a?d.offsetLeft:parseInt(b(d).left)||0;"absolute"!=a&&"relative"!=
a&&(a=q.position(d,!0),k=a.y,f=a.x,d.style.position="absolute",d.style.top=k+"px",d.style.left=f+"px")}}();p();c=n.animateProperty(a.mixin({properties:{top:{start:k,end:c.top||0},left:{start:f,end:c.left||0}}},c));l.connect(c,"beforeBegin",c,p);return c},flash:function(c){c=a.mixin({end:"#f00",duration:500,count:1},c);c.duration/=2*c.count;var d=g.byId(c.node),b=c.start;b||(b=h.getComputedStyle(d).backgroundColor);var k=c.end,f=[],p=c.count,d={node:d,duration:c.duration};for(c=0;c<p;c++)f.push(n.animateProperty(a.mixin({properties:{backgroundColor:{start:b,
end:k}}},d))),f.push(n.animateProperty(a.mixin({properties:{backgroundColor:{start:k,end:b}}},d)));return m.chain(f)}}})},"dojo/_base/fx":function(){define("./kernel ./config ./lang ../Evented ./Color ../aspect ../sniff ../dom ../dom-style".split(" "),function(l,n,a,g,q,h,m,f,d){var c=a.mixin,e={},b=e._Line=function(a,b){this.start=a;this.end=b};b.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};var k=e.Animation=function(d){c(this,d);a.isArray(this.curve)&&(this.curve=new b(this.curve[0],
this.curve[1]))};k.prototype=new g;a.extend(k,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var a=this._percent,b=this.easing;return b?b(a):a},_fire:function(a,b){var c=b||[];if(this[a])if(n.debugAtAllCosts)this[a].apply(this,c);else try{this[a].apply(this,c)}catch(d){}return this},play:function(b,c){this._delayTimer&&this._clearTimer();if(c)this._stopTimer(),this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;this._fire("beforeBegin",
[this.node]);var d=b||this.delay,e=a.hitch(this,"_play",c);if(0<d)return this._delayTimer=setTimeout(e,d),this;e();return this},_play:function(a){this._delayTimer&&this._clearTimer();this._startTime=(new Date).valueOf();this._paused&&(this._startTime-=this.duration*this._percent);this._active=!0;this._paused=!1;a=this.curve.getValue(this._getStep());this._percent||(this._startRepeatCount||(this._startRepeatCount=this.repeat),this._fire("onBegin",[a]));this._fire("onPlay",[a]);this._cycle();return this},
pause:function(){this._delayTimer&&this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);return this},gotoPercent:function(a,b){this._stopTimer();this._active=this._paused=!0;this._percent=a;b&&this.play();return this},stop:function(a){this._delayTimer&&this._clearTimer();if(!this._timer)return this;this._stopTimer();a&&(this._percent=1);this._fire("onStop",[this.curve.getValue(this._getStep())]);this._active=
this._paused=!1;return this},destroy:function(){this.stop()},status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var a=(new Date).valueOf(),a=0===this.duration?1:(a-this._startTime)/this.duration;1<=a&&(a=1);this._percent=a;this.easing&&(a=this.easing(a));this._fire("onAnimate",[this.curve.getValue(a)]);1>this._percent?this._startTimer():(this._active=!1,0<this.repeat?(this.repeat--,this.play(null,!0)):-1==this.repeat?this.play(null,
!0):this._startRepeatCount&&(this.repeat=this._startRepeatCount,this._startRepeatCount=0),this._percent=0,this._fire("onEnd",[this.node]),!this.repeat&&this._stopTimer())}return this},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});var s=0,p=null,r={run:function(){}};a.extend(k,{_startTimer:function(){this._timer||(this._timer=h.after(r,"run",a.hitch(this,"_cycle"),!0),s++);p||(p=setInterval(a.hitch(r,"run"),this.rate))},_stopTimer:function(){this._timer&&(this._timer.remove(),
this._timer=null,s--);0>=s&&(clearInterval(p),p=null,s=0)}});var t=m("ie")?function(a){var b=a.style;!b.width.length&&"auto"==d.get(a,"width")&&(b.width="auto")}:function(){};e._fade=function(b){b.node=f.byId(b.node);var p=c({properties:{}},b);b=p.properties.opacity={};b.start=!("start"in p)?function(){return+d.get(p.node,"opacity")||0}:p.start;b.end=p.end;b=e.animateProperty(p);h.after(b,"beforeBegin",a.partial(t,p.node),!0);return b};e.fadeIn=function(a){return e._fade(c({end:1},a))};e.fadeOut=
function(a){return e._fade(c({end:0},a))};e._defaultEasing=function(a){return 0.5+Math.sin((a+1.5)*Math.PI)/2};var x=function(a){this._properties=a;for(var b in a){var c=a[b];c.start instanceof q&&(c.tempColor=new q)}};x.prototype.getValue=function(b){var c={},d;for(d in this._properties){var e=this._properties[d],p=e.start;p instanceof q?c[d]=q.blendColors(p,e.end,b,e.tempColor).toCss():a.isArray(p)||(c[d]=(e.end-p)*b+p+("opacity"!=d?e.units||"px":0))}return c};e.animateProperty=function(b){var e=
b.node=f.byId(b.node);b.easing||(b.easing=l._defaultEasing);b=new k(b);h.after(b,"beforeBegin",a.hitch(b,function(){var b={},p;for(p in this.properties){if("width"==p||"height"==p)this.node.display="block";var k=this.properties[p];a.isFunction(k)&&(k=k(e));k=b[p]=c({},a.isObject(k)?k:{end:k});a.isFunction(k.start)&&(k.start=k.start(e));a.isFunction(k.end)&&(k.end=k.end(e));var f=0<=p.toLowerCase().indexOf("color"),r=function(a,b){var c={height:a.offsetHeight,width:a.offsetWidth}[b];if(void 0!==c)return c;
c=d.get(a,b);return"opacity"==b?+c:f?c:parseFloat(c)};"end"in k?"start"in k||(k.start=r(e,p)):k.end=r(e,p);f?(k.start=new q(k.start),k.end=new q(k.end)):k.start="opacity"==p?+k.start:parseFloat(k.start)}this.curve=new x(b)}),!0);h.after(b,"onAnimate",a.hitch(d,"set",b.node),!0);return b};e.anim=function(a,b,c,d,p,f){return e.animateProperty({node:a,duration:c||k.prototype.duration,properties:b,easing:d,onEnd:p}).play(f||0)};c(l,e);l._Animation=k;return e})},"dojo/fx":function(){define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),
function(l,n,a,g,q,h,m,f,d,c,e){a.isAsync||c(0,function(){e(["./fx/Toggler"])});a=a.fx={};c={_fire:function(a,b){this[a]&&this[a].apply(this,b||[]);return this}};var b=function(a){this._index=-1;this._animations=a||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;g.forEach(this._animations,function(a){this.duration+=a.duration;a.delay&&(this.duration+=a.delay)},this)};b.prototype=new n;l.extend(b,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){this._onAnimateCtx.remove();
this._onEndCtx.remove();this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=q.after(this._current,"onAnimate",l.hitch(this,"_onAnimate"),!0),this._onEndCtx=q.after(this._current,"onEnd",l.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(a,b){this._current||(this._current=this._animations[this._index=0]);if(!b&&"playing"==this._current.status())return this;var c=q.after(this._current,
"beforeBegin",l.hitch(this,function(){this._fire("beforeBegin")}),!0),d=q.after(this._current,"onBegin",l.hitch(this,function(a){this._fire("onBegin",arguments)}),!0),e=q.after(this._current,"onPlay",l.hitch(this,function(a){this._fire("onPlay",arguments);c.remove();d.remove();e.remove()}));this._onAnimateCtx&&this._onAnimateCtx.remove();this._onAnimateCtx=q.after(this._current,"onAnimate",l.hitch(this,"_onAnimate"),!0);this._onEndCtx&&this._onEndCtx.remove();this._onEndCtx=q.after(this._current,
"onEnd",l.hitch(this,"_onEnd"),!0);this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var a=q.after(this._current,"onPause",l.hitch(this,function(b){this._fire("onPause",arguments);a.remove()}),!0);this._current.pause()}return this},gotoPercent:function(a,b){this.pause();var c=this.duration*a;this._current=null;g.some(this._animations,function(a,b){if(c<=a.duration)return this._current=a,this._index=b,!0;c-=a.duration;return!1},this);this._current&&this._current.gotoPercent(c/
this._current.duration);b&&this.play();return this},stop:function(a){if(this._current){if(a){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=this._animations[this._index]}var b=q.after(this._current,"onStop",l.hitch(this,function(a){this._fire("onStop",arguments);b.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this.stop();this._onAnimateCtx&&
this._onAnimateCtx.remove();this._onEndCtx&&this._onEndCtx.remove()}});l.extend(b,c);a.chain=function(a){return new b(a)};var k=function(a){this._animations=a||[];this._connects=[];this.duration=this._finished=0;g.forEach(a,function(a){var b=a.duration;a.delay&&(b+=a.delay);this.duration<b&&(this.duration=b);this._connects.push(q.after(a,"onEnd",l.hitch(this,"_onEnd"),!0))},this);this._pseudoAnimation=new h.Animation({curve:[0,1],duration:this.duration});var b=this;g.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "),
function(a){b._connects.push(q.after(b._pseudoAnimation,a,function(){b._fire(a,arguments)},!0))})};l.extend(k,{_doAction:function(a,b){g.forEach(this._animations,function(c){c[a].apply(c,b)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(a,b){var c=this._pseudoAnimation;c[a].apply(c,b)},play:function(a,b){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",
arguments);this._call("pause",arguments);return this},gotoPercent:function(a,b){var c=this.duration*a;g.forEach(this._animations,function(a){a.gotoPercent(a.duration<c?1:c/a.duration,b)});this._call("gotoPercent",arguments);return this},stop:function(a){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){this.stop();g.forEach(this._connects,function(a){a.remove()})}});l.extend(k,c);a.combine=function(a){return new k(a)};
a.wipeIn=function(a){var b=a.node=m.byId(a.node),c=b.style,d;a=h.animateProperty(l.mixin({properties:{height:{start:function(){d=c.overflow;c.overflow="hidden";if("hidden"==c.visibility||"none"==c.display)return c.height="1px",c.display="",c.visibility="",1;var a=f.get(b,"height");return Math.max(a,1)},end:function(){return b.scrollHeight}}}},a));var e=function(){c.height="auto";c.overflow=d};q.after(a,"onStop",e,!0);q.after(a,"onEnd",e,!0);return a};a.wipeOut=function(a){var b=(a.node=m.byId(a.node)).style,
c;a=h.animateProperty(l.mixin({properties:{height:{end:1}}},a));q.after(a,"beforeBegin",function(){c=b.overflow;b.overflow="hidden";b.display=""},!0);var d=function(){b.overflow=c;b.height="auto";b.display="none"};q.after(a,"onStop",d,!0);q.after(a,"onEnd",d,!0);return a};a.slideTo=function(a){var b=null,c=null,e=function(a){return function(){var e=f.getComputedStyle(a),k=e.position;b="absolute"==k?a.offsetTop:parseInt(e.top)||0;c="absolute"==k?a.offsetLeft:parseInt(e.left)||0;"absolute"!=k&&"relative"!=
k&&(e=d.position(a,!0),b=e.y,c=e.x,a.style.position="absolute",a.style.top=b+"px",a.style.left=c+"px")}}(a.node=m.byId(a.node));e();a=h.animateProperty(l.mixin({properties:{top:a.top||0,left:a.left||0}},a));q.after(a,"beforeBegin",e,!0);return a};return a})},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(l,n,a){return{_dfdCanceller:function(a){a.canceled=!0;var l=a._pendingDfd;-1===a.fired&&l&&-1===l.fired&&l.cancel();a._pendingDfd=null},_fixDfd:function(a){var l=
a.then;a.then=function(a,g,f){if(a){var d=a;a=function(a){return a&&a._argsArray?d.apply(null,a):d(a)}}return l.call(this,a,g,f)};return a},_resDfd:function(a,l,h){var m=l.length;1===m?h?a.errback(l[0]):a.callback(l[0]):1<m?(l._argsArray=!0,a.callback(l)):a.callback()}}})},"esri/tileUtils":function(){define(["dojo/_base/array","dojo/has","./kernel","./geometry/Point","./geometry/Extent"],function(l,n,a,g,q){return{_addFrameInfo:function(a,g){var f,d,c=2*g.origin[1],e=g.origin[0],b=a.origin.x,k=a.width,
s;l.forEach(a.lods,function(a){f=Math.round(c/a.resolution);d=Math.ceil(f/k);s=Math.floor((e-b)/(k*a.resolution));a._frameInfo||(a._frameInfo=[d,s,s+d-1,f])})},getContainingTileCoords:function(a,g,f){var d=a.origin;f=f.resolution;return{row:Math.floor((d.y-g.y)/(a.height*f)),col:Math.floor((g.x-d.x)/(a.width*f))}},getCandidateTileInfo:function(a,m,f){var d;d=a.width;for(var c=a.height,e=f.xmax-f.xmin,b=f.ymax-f.ymin,k=a.__tileInfo===m,s=k?a.getMinZoom():-1,k=k?a.getMaxZoom():-1,p=-1,r=m.lods,t=Math.abs,
l,n,u,k=-1<k?k:r.length-1,s=-1<s?s:0;s<=k;s++)if(n=r[s])if(u=e>b?t(b-c*n.resolution):t(e-d*n.resolution),0>p||u<=p)l=n,p=u;else break;d=l;l=d.resolution;c=(f.xmin+f.xmax)/2;e=(f.ymin+f.ymax)/2;b=a.width/2*l;l*=a.height/2;c=new q(c-b,e-l,c+b,e+l,f.spatialReference);f=new g(c.xmin,c.ymax,f.spatialReference);k=d.resolution;b=m.width;e=m.height;m=m.origin;a=a.__visibleDelta;l=Math.floor;r=b*k;t=e*k;k=l((m.y-f.y)/t);p=l((f.x-m.x)/r);s=m.y-k*t;m=l(Math.abs((f.x-(m.x+p*r))*b/r))+a.x;a=l(Math.abs((f.y-s)*
e/t))+a.y;return{tile:{point:f,coords:{row:k,col:p},offsets:{x:m,y:a}},lod:d,extent:c}},getTileExtent:function(a,g,f,d){var c=a.origin;g=a.lods[g].resolution;var e=a.width,b=a.height;return new q(d*g*e+c.x,c.y-(f+1)*g*b,(d+1)*g*e+c.x,c.y-f*g*b,a.spatialReference)}}})},"esri/geometry/Point":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ../srUtils".split(" "),function(l,n,a,g,q,h,m,f){function d(a,b){89.99999<b?b=89.99999:-89.99999>b&&
(b=-89.99999);var c=b*s;return[a*s*e,e/2*Math.log((1+Math.sin(c))/(1-Math.sin(c)))]}function c(a,c,d){a=a/e*k;if(d)return c=b/2-2*Math.atan(Math.exp(-1*c/e)),[a,c*k];d=a-360*Math.floor((a+180)/360);c=b/2-2*Math.atan(Math.exp(-1*c/e));return[d,c*k]}var e=6378137,b=3.141592653589793,k=57.29577951308232,s=0.017453292519943,p={type:"point",x:0,y:0};l=l(m,{declaredClass:"esri.geometry.Point",constructor:function(a,b,c){n.mixin(this,p);n.isArray(a)?(this.x=a[0],this.y=a[1],this.spatialReference=b):n.isObject(a)?
(n.mixin(this,a),q.isDefined(this.latitude)&&(this.y=this.latitude),q.isDefined(this.longitude)&&(this.x=this.longitude),this.spatialReference&&(this.spatialReference=f.createSpatialReference(this.spatialReference))):(this.x=a,this.y=b,this.spatialReference=c);this.verifySR()},offset:function(a,b){return new this.constructor(this.x+a,this.y+b,this.spatialReference)},setX:function(a){this.x=a;this.clearCache();return this},setY:function(a){this.y=a;this.clearCache();return this},setLongitude:function(a){var b=
this.spatialReference;b&&(b._isWebMercator()?this.setX(d(a,this.y)[0]):4326===b.wkid&&this.setX(a));return this},setLatitude:function(a){var b=this.spatialReference;b&&(b._isWebMercator()?this.setY(d(this.x,a)[1]):4326===b.wkid&&this.setY(a));return this},getLongitude:function(){var a=this.spatialReference,b;a&&(a._isWebMercator()?b=c(this.x,this.y)[0]:4326===a.wkid&&(b=this.x));return b},getLatitude:function(){var a=this.spatialReference,b;a&&(a._isWebMercator()?b=c(this.x,this.y)[1]:4326===a.wkid&&
(b=this.y));return b},update:function(a,b){this.x=a;this.y=b;this.clearCache();return this},normalize:function(){var a=this.x,b=this.spatialReference;if(b){var c=b._getInfo();if(c){var d=c.valid[0],e=c.valid[1],c=2*e;a>e?(d=Math.ceil(Math.abs(a-e)/c),a-=d*c):a<d&&(d=Math.ceil(Math.abs(a-d)/c),a+=d*c)}}return new this.constructor(a,this.y,b)},toJson:function(){var a={x:this.x,y:this.y},b=this.spatialReference;b&&(a.spatialReference=b.toJson());return a}});l.lngLatToXY=d;l.xyToLngLat=c;l.defaultProps=
p;return l})},"esri/SpatialReference":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ./kernel ./lang".split(" "),function(l,n,a,g,q,h){g=[-2.0037508342788905E7,2.0037508342788905E7];q=[-2.0037508342787E7,2.0037508342787E7];return l(null,{declaredClass:"esri.SpatialReference",constructor:function(h){h&&(a.isObject(h)?a.mixin(this,h):a.isString(h)?this.wkt=h:this.wkid=h)},wkid:null,wkt:null,_info:{102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:g,origin:q,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:g,origin:q,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:g,origin:q,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:g,origin:q,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",${Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}},_isWebMercator:function(){return-1!==n.indexOf([102113,102100,3857,3785],this.wkid)},_isWrappable:function(){return-1!==n.indexOf([102113,102100,3857,3785,4326],this.wkid)},_getInfo:function(){return this.wkid?this._info[this.wkid]:null},_canProject:function(a){var f=!1;a&&(f=this.isWebMercator()&&4326===a.wkid||a.isWebMercator()&&4326===this.wkid);return f},isWebMercator:function(){return this._isWebMercator()},equals:function(a){var f=!1;a&&(this===a&&
(f=!0),this.wkid||a.wkid?f=this.wkid===a.wkid||this.isWebMercator()&&a.isWebMercator()||this.wkid===a.latestWkid||a.wkid===this.latestWkid:this.wkt&&a.wkt&&(f=this.wkt.toUpperCase()===a.wkt.toUpperCase()));return f},toJson:function(){var a=null,f=h.isDefined;f(this.wkid)?a={wkid:this.wkid}:f(this.wkt)&&(a={wkt:this.wkt});a&&f(this.latestWkid)&&(a.latestWkid=this.latestWkid);return a}})})},"esri/geometry/Geometry":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../SpatialReference"],
function(l,n,a,g,q){return l(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,cache:void 0,setSpatialReference:function(a){this.spatialReference=a;return this},verifySR:function(){this.spatialReference||this.setSpatialReference(new q(4326))},getExtent:function(){return null},clearCache:function(){this.cache=void 0},getCacheValue:function(a){return this.cache&&this.cache[a]},setCacheValue:function(a,g){this.cache||(this.cache={});this.cache[a]=g}})})},"esri/srUtils":function(){define(["./SpatialReference",
"./ImageSpatialReference","./kernel","./sniff","dojo/_base/lang"],function(l,n,a,g,q){function h(a){var f=!1;if(a&&(a.ics||a.icsid))f=!0;return f}return{isICS:h,createSpatialReference:function(a){var f=null;a&&(f=h(a)?new n(a):new l(a));return f}}})},"esri/ImageSpatialReference":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./lang ./SpatialReference".split(" "),function(l,n,a,g,q,h){return l(h,{declaredClass:"esri.ImageSpatialReference",constructor:function(a){a&&n.isObject(a)&&
n.mixin(this,a)},icsid:null,ics:null,_isWebMercator:function(){return!1},_isWrappable:function(){return!1},equals:function(a){var f=!1;a&&(this.icsid&&a.icsid?f=this.icsid===a.icsid:this.ics&&a.ics&&(f=this.ics===a.ics));return f},toJson:function(a){var f=null,d=q.isDefined;a=d(a)?a:!0;d(this.icsid)?f={icsid:this.icsid}:d(this.ics)&&(f={ics:this.ics});d(this.url)&&d(f)&&a&&(f.url=this.url);return f}})})},"esri/geometry/Extent":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./webMercatorUtils ./mathUtils ../srUtils".split(" "),
function(l,n,a,g,q,h,m,f,d,c,e,b){var k={type:"extent",xmin:0,ymin:0,xmax:0,ymax:0},s=l(f,{declaredClass:"esri.geometry.Extent",constructor:function(c,d,e,f,h){a.mixin(this,k);a.isObject(c)?(a.mixin(this,c),this.spatialReference&&(this.spatialReference=b.createSpatialReference(this.spatialReference))):this.update(c,d,e,f,h);this.verifySR()},getWidth:function(){return Math.abs(this.xmax-this.xmin)},getHeight:function(){return Math.abs(this.ymax-this.ymin)},getCenter:function(){return new d((this.xmin+
this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference)},centerAt:function(a){var b=this.getCenter(),c=a.x-b.x;a=a.y-b.y;return new s(this.xmin+c,this.ymin+a,this.xmax+c,this.ymax+a,this.spatialReference)},update:function(a,b,c,d,e){this.xmin=a;this.ymin=b;this.xmax=c;this.ymax=d;this.spatialReference=e;this.clearCache();return this},offset:function(a,b){return new s(this.xmin+a,this.ymin+b,this.xmax+a,this.ymax+b,this.spatialReference)},expand:function(a){var b=(1-a)/2;a=this.getWidth()*b;b*=
this.getHeight();return new s(this.xmin+a,this.ymin+b,this.xmax-a,this.ymax-b,this.spatialReference)},intersects:function(a){if(!a)return!1;var b=a.type,d=this.spatialReference,e=a.spatialReference;d&&e&&(!d.equals(e)&&d._canProject(e))&&(a=d.isWebMercator()?c.geographicToWebMercator(a):c.webMercatorToGeographic(a,!0));switch(b){case "point":return this.contains(a);case "multipoint":return this._intersectsMultipoint(a);case "extent":return this._intersectsExtent(a);case "polygon":return this._intersectsPolygon(a);
case "polyline":return this._intersectsPolyline(a)}},normalize:function(){var b=this._normalize(!1,!0);a.isArray(b)||(b=[b]);return b},shiftCentralMeridian:function(){return this._normalize(!0)},_intersectsMultipoint:function(a){var b=a.points.length,c;for(c=0;c<b;c++)if(this.contains(a.getPoint(c)))return!0;return!1},_intersectsExtent:function(a){var b,c,d,e,k=!1;this.xmin<=a.xmin?(b=a.xmin,this.xmax<b?k=!0:d=Math.min(this.xmax,a.xmax)-b):(b=this.xmin,a.xmax<b?k=!0:d=Math.min(this.xmax,a.xmax)-b);
this.ymin<=a.ymin?(c=a.ymin,this.ymax<c?k=!0:e=Math.min(this.ymax,a.ymax)-c):(c=this.ymin,a.ymax<c?k=!0:e=Math.min(this.ymax,a.ymax)-c);return k?null:new s(b,c,b+d,c+e,this.spatialReference)},_intersectsPolygon:function(a){var b=[this.xmin,this.ymax],c=[this.xmax,this.ymax],e=[this.xmin,this.ymin],k=[this.xmax,this.ymin],f=[b,c,e,k],b=[[e,b],[b,c],[c,k],[k,e]],e=a.rings,k=e.length,h,g=new d(0,0,this.spatialReference);h=f.length;for(c=0;c<h;c++)if(g.update(f[c][0],f[c][1]),a.contains(g))return!0;g.setSpatialReference(a.spatialReference);
for(var m,s,c=0;c<k;c++)if(f=e[c],h=f.length){m=f[0];g.update(m[0],m[1]);if(this.contains(g))return!0;for(a=1;a<h;a++){s=f[a];g.update(s[0],s[1]);if(this.contains(g)||this._intersectsLine([m,s],b))return!0;m=s}}return!1},_intersectsPolyline:function(a){var b=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],c,e=a.paths,k=e.length,f,h,g,m,s=new d(0,0,a.spatialReference);
for(a=0;a<k;a++)if(f=e[a],h=f.length){g=f[0];s.update(g[0],g[1]);if(this.contains(s))return!0;for(c=1;c<h;c++){m=f[c];s.update(m[0],m[1]);if(this.contains(s)||this._intersectsLine([g,m],b))return!0;g=m}}return!1},_intersectsLine:function(a,b){var c=e._getLineIntersection2,d,k=b.length;for(d=0;d<k;d++)if(c(a,b[d]))return!0;return!1},contains:function(a){if(!a)return!1;var b=a.type;if("point"===b){var c=this.spatialReference,e=a.spatialReference,b=a.x;a=a.y;c&&e&&(!c.equals(e)&&c._canProject(e))&&(a=
c.isWebMercator()?d.lngLatToXY(b,a):d.xyToLngLat(b,a,!0),b=a[0],a=a[1]);return b>=this.xmin&&b<=this.xmax&&a>=this.ymin&&a<=this.ymax}return"extent"===b?this._containsExtent(a):!1},_containsExtent:function(a){var b=a.xmin,c=a.ymin,e=a.xmax,k=a.ymax,f=a.spatialReference;a=new d(b,c,f);b=new d(b,k,f);k=new d(e,k,f);c=new d(e,c,f);return this.contains(a)&&this.contains(b)&&this.contains(k)&&this.contains(c)?!0:!1},union:function(a){return new s(Math.min(this.xmin,a.xmin),Math.min(this.ymin,a.ymin),Math.max(this.xmax,
a.xmax),Math.max(this.ymax,a.ymax),this.spatialReference)},getExtent:function(){var a=this.spatialReference;return new s(this.xmin,this.ymin,this.xmax,this.ymax,a&&new m(a.toJson()))},_shiftCM:function(a){var b=this.getCacheValue("_shifted");if(!b){var b=new s(this.toJson()),d=b.spatialReference;if(a=a||d._getInfo()){var e=this._getCM(a);if(e){var k=d._isWebMercator()?c.webMercatorToGeographic(e):e;b.xmin-=e.x;b.xmax-=e.x;d._isWebMercator()||(k.x=this._normalizeX(k.x,a).x);b.setSpatialReference(new m(h.substitute({Central_Meridian:k.x},
4326===d.wkid?a.altTemplate:a.wkTemplate)))}}this.setCacheValue("_shifted",b)}return b},_getCM:function(a){var b,c=a.valid[0];a=a.valid[1];var d=this.xmin,e=this.xmax;if(!(d>=c&&d<=a)||!(e>=c&&e<=a))b=this.getCenter();return b},_normalize:function(a,b,c){var d=new s(this.toJson()),e=d.spatialReference;if(e&&(c=c||e._getInfo())){var k=n.map(this._getParts(c),function(a){return a.extent});return 2<k.length?a?this._shiftCM(c):d.update(c.valid[0],d.ymin,c.valid[1],d.ymax,e):2===k.length?a?this._shiftCM(c):
b?k:{rings:n.map(k,function(a){return[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]}),spatialReference:e}:k[0]||d}return d},_getParts:function(a){var b=this.getCacheValue("_parts");if(!b){var b=[],c=this.xmin,d=this.xmax,e=this.ymin,k=this.ymax,f=this.spatialReference,h=this.getWidth(),g=c,m=d,l=0,q=0,n,C;a=a||f._getInfo();n=a.valid[0];C=a.valid[1];q=this._normalizeX(c,a);c=q.x;l=q.frameId;q=this._normalizeX(d,a);d=q.x;q=q.frameId;a=c===d&&0<h;if(h>2*C){h=new s(g<
m?c:d,e,C,k,f);c=new s(n,e,g<m?d:c,k,f);C=new s(0,e,C,k,f);e=new s(n,e,0,k,f);f=[];n=[];h.contains(C)&&f.push(l);h.contains(e)&&n.push(l);c.contains(C)&&f.push(q);c.contains(e)&&n.push(q);for(k=l+1;k<q;k++)f.push(k),n.push(k);b.push({extent:h,frameIds:[l]},{extent:c,frameIds:[q]},{extent:C,frameIds:f},{extent:e,frameIds:n})}else c>d||a?b.push({extent:new s(c,e,C,k,f),frameIds:[l]},{extent:new s(n,e,d,k,f),frameIds:[q]}):b.push({extent:new s(c,e,d,k,f),frameIds:[l]});this.setCacheValue("_parts",b)}return b},
_normalizeX:function(a,b){var c=0,d=b.valid[0],e=b.valid[1],k=2*e;a>e?(c=Math.ceil(Math.abs(a-e)/k),a-=c*k):a<d&&(c=Math.ceil(Math.abs(a-d)/k),a+=c*k,c=-c);return{x:a,frameId:c}},toJson:function(){var a={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},b=this.spatialReference;b&&(a.spatialReference=b.toJson());return a}});s.defaultProps=k;return s})},"esri/geometry/webMercatorUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point".split(" "),
function(l,n,a,g,q,h){function m(a,c,e,b){if("point"===a.type){var k=c(a.x,a.y,b);return new a.constructor(k[0],k[1],new q(e))}if("extent"===a.type){var k=c(a.xmin,a.ymin,b),f=c(a.xmax,a.ymax,b);return new a.constructor(k[0],k[1],f[0],f[1],new q(e))}if("polyline"===a.type||"polygon"===a.type){var k="polyline"===a.type,p=[],h;l.forEach(k?a.paths:a.rings,function(a){p.push(h=[]);l.forEach(a,function(a){h.push(c(a[0],a[1],b))})});return k?new a.constructor({paths:p,spatialReference:new q(e)}):new a.constructor({rings:p,
spatialReference:new q(e)})}if("multipoint"===a.type){var g=[];l.forEach(a.points,function(a){g.push(c(a[0],a[1],b))});return new a.constructor({points:g,spatialReference:new q(e)})}}function f(a,c){var e=a&&(null!=a.wkid?a:a.spatialReference),b=c&&(null!=c.wkid?c:c.spatialReference);return!e||!b?!1:b.equals(e)?!0:b._canProject(e)}return{canProject:f,project:function(a,c){var e=a&&a.spatialReference,b=c&&(null!=c.wkid?c:c.spatialReference);e&&b?e.equals(b)?a=new a.constructor(a.toJson()):f(e,b)?b.isWebMercator()?
a=m(a,h.lngLatToXY,{wkid:102100}):4326===b.wkid&&(a=m(a,h.xyToLngLat,{wkid:4326})):a=null:a=null;return a},lngLatToXY:h.lngLatToXY,xyToLngLat:h.xyToLngLat,geographicToWebMercator:function(a){return m(a,h.lngLatToXY,{wkid:102100})},webMercatorToGeographic:function(a,c){return m(a,h.xyToLngLat,{wkid:4326},c)}}})},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","./Point"],function(l,n,a,g){function q(a,d,c){return a instanceof g?new g(a.x+c*(d.x-a.x),a.y+c*(d.y-
a.y)):[a[0]+c*(d[0]-a[0]),a[1]+c*(d[1]-a[1])]}function h(a,d){return 1E-8>Math.abs(a-d)}function m(a,d,c,e){var b,k=h(a[0],d[0])?1E10:(a[1]-d[1])/(a[0]-d[0]),g=h(c[0],e[0])?1E10:(c[1]-e[1])/(c[0]-e[0]),p=a[1]-k*a[0],r=c[1]-g*c[0];if(h(k,g)){if(h(p,r)){if(h(a[0],d[0]))if(Math.min(a[1],d[1])<Math.max(c[1],e[1])||Math.max(a[1],d[1])>Math.min(c[1],e[1]))a=(a[1]+d[1]+c[1]+e[1]-Math.min(a[1],d[1],c[1],e[1])-Math.max(a[1],d[1],c[1],e[1]))/2,b=(a-p)/k;else return null;else if(Math.min(a[0],d[0])<Math.max(c[0],
e[0])||Math.max(a[0],d[0])>Math.min(c[0],e[0]))b=(a[0]+d[0]+c[0]+e[0]-Math.min(a[0],d[0],c[0],e[0])-Math.max(a[0],d[0],c[0],e[0]))/2,a=k*b+p;else return null;return[b,a]}return null}h(k,1E10)?(b=a[0],a=g*b+r):h(g,1E10)?(b=c[0],a=k*b+p):(b=-(p-r)/(k-g),a=a[1]===d[1]?a[1]:c[1]===e[1]?c[1]:k*b+p);return[b,a]}return{getLength:function(a,d){var c=d.x-a.x,e=d.y-a.y;return Math.sqrt(c*c+e*e)},_getLength:function(a,d){var c=d[0]-a[0],e=d[1]-a[1];return Math.sqrt(c*c+e*e)},getPointOnLine:q,getMidpoint:function(a,
d){return q(a,d,0.5)},_equals:h,_getLineIntersection:m,getLineIntersection:function(a,d,c,e,b){(a=m([a.x,a.y],[d.x,d.y],[c.x,c.y],[e.x,e.y]))&&(a=new g(a[0],a[1],b));return a},_getLineIntersection2:function(a,d){var c=a[0],e=a[1],b=d[0],k=d[1],h=c[0],c=c[1],p=e[0],e=e[1],r=b[0],g=b[1],b=k[0]-r,r=h-r,m=p-h,k=k[1]-g,g=c-g,l=e-c,q=k*m-b*l;if(0===q)return!1;b=(b*g-k*r)/q;r=(m*g-l*r)/q;return 0<=b&&1>=b&&0<=r&&1>=r?[h+b*(p-h),c+b*(e-c)]:!1},_pointLineDistance:function(a,d){var c=d[0],e=d[1],b=c[0],k=c[1],
c=a[0],h=a[1],p=e[0]-b,r=e[1]-k,g=c-b,m=h-k,e=Math.sqrt,l=Math.pow,q=e(l(p,2)+l(r,2)),g=(g*p+m*r)/(q*q),k=k+g*r;return e(l(c-(b+g*p),2)+l(h-k,2))}}})},"esri/PluginTarget":function(){define("require dojo/aspect dojo/_base/array dojo/_base/lang dojo/Deferred dojo/when".split(" "),function(l,n,a,g,q,h){function m(){n.after(this.constructor._meta,"ctor",this._pluginsHandler,!0);this._plugins={}}m.prototype={addPlugin:function(a,d){var c=this,e=this._plugins,b=new q;try{l([a],function(k){a in e?b.resolve({id:e[a].declaredId||
a.replace(/\//g,".")}):(e[a]=k,h(k.add(c,d),function(){var d={id:k.declaredId||a.replace(/\//g,".")};c.emit("plugin-add",d);b.resolve(d)},function(a){b.reject(a)}))})}catch(k){b.reject(k)}return b.promise},removePlugin:function(a){if(a in this._plugins){var d=this._plugins[a];d.remove(this);delete this._plugins[a];this.emit("plugin-remove",{id:d.declaredId||a.replace(/\//g,".")})}},_pluginsHandler:function(){var f=this;a.some(arguments,function(a){if(a&&a.plugins&&a.plugins instanceof Array){a=a.plugins;
var c,e,b;for(b=0;b<a.length;b++)c=a[b],e=c instanceof Object?c.id:c,f.addPlugin(e,c.options);return!0}})}};return m})},"esri/geometry/ScreenPoint":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Point"],function(l,n,a,g,q){return l(q,{declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}})})},"esri/geometry/Rect":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),
function(l,n,a,g,q,h,m,f,d,c){var e=l(m,{declaredClass:"esri.geometry.Rect",constructor:function(a,d,e,p,f){n.mixin(this,g.defaultRect);n.isObject(a)&&"extent"===a.type&&(d=a.ymax,e=a.getWidth(),p=a.getHeight(),f=a.spatialReference,a=a.xmin);n.isObject(a)?(n.mixin(this,a),this.spatialReference&&(this.spatialReference=c.createSpatialReference(this.spatialReference))):(this.x=a,this.y=d,this.width=e,this.height=p,this.spatialReference=f);this.verifySR()},getCenter:function(){return new f(this.x+this.width/
2,this.y+this.height/2,this.spatialReference)},offset:function(a,c){return new e(this.x+a,this.y+c,this.width,this.height,this.spatialReference)},intersects:function(a){return a.x+a.width<=this.x||a.y+a.height<=this.y||a.y>=this.y+this.height||a.x>=this.x+this.width?!1:!0},getExtent:function(){return new d(parseFloat(this.x),parseFloat(this.y)-parseFloat(this.height),parseFloat(this.x)+parseFloat(this.width),parseFloat(this.y),this.spatialReference)},update:function(a,c,d,e,f){this.x=a;this.y=c;this.width=
d;this.height=e;this.spatialReference=f;this.clearCache();return this}});return e})},"esri/geometry/scaleUtils":function(){define("dojo/_base/lang dojo/has ../kernel ../config ../lang ../WKIDUnitConversion".split(" "),function(l,n,a,g,q,h){var m=6370997*Math.PI/180,f=g.defaults,d={getUnitValueForSR:function(a){return this.getUnitValue(a)||m},getUnitValue:function(a){var d,b,k;a&&("object"===typeof a?(d=a.wkid,b=a.wkt):"number"===typeof a?d=a:"string"===typeof a&&(b=a));d?k=h.values[h[d]]:b&&-1!==
b.search(/^PROJCS/i)&&(a=/UNIT\[([^\]]+)\]\]$/i.exec(b))&&a[1]&&(k=parseFloat(a[1].split(",")[1]));return k},getScale:function(a,e,b){var k,h,p;1<arguments.length&&q.isDefined(e)&&!e.declaredClass?(k=a,h=e,e=null,p=d.getUnitValue(b)):(k=e||a.extent,h=a.width,p=d.getUnitValue(k&&k.spatialReference));return k&&h?39.37*(k.getWidth()/h*(p||m))*f.screenDPI:0},getExtentForScale:function(a,e,b){b=b||a.extent;var k=d.getUnitValue(a.spatialReference);return b.expand(e*a.width/(39.37*(k||m)*f.screenDPI)/b.getWidth())}};
return d})},"esri/WKIDUnitConversion":function(){define(["dojo/has","./kernel"],function(l,n){var a,g={values:[1,0.3048,0.3048006096012192,0.3047972654,0.9143917962,0.201166195164,0.9143984146160287,0.3047994715386762,20.11676512155263,20.11678249437587,0.9143985307444408,0.91439523,0.3047997101815088,20.116756,5E4,15E4],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,
2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,
3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,
3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,
3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,
5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6210:0,6211:0,6316:0,6391:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,
26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,
53034:0,53048:0,53049:0,54034:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,
103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,
103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,
103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,
103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103695:2};for(a=2E3;2046>a;a++)g[a]=0;for(a=2056;2066>a;a++)g[a]=0;for(a=2067;2136>a;a++)g[a]=0;for(a=2137;2155>a;a++)g[a]=0;for(a=2161;2171>a;a++)g[a]=0;for(a=2172;2194>a;a++)g[a]=0;for(a=2195;2199>a;a++)g[a]=0;for(a=2200;2204>a;a++)g[a]=0;for(a=2205;2218>a;a++)g[a]=0;for(a=2222;2225>a;a++)g[a]=1;for(a=2225;2251>a;a++)g[a]=2;for(a=2251;2254>a;a++)g[a]=
1;for(a=2257;2265>a;a++)g[a]=2;for(a=2274;2280>a;a++)g[a]=2;for(a=2280;2283>a;a++)g[a]=1;for(a=2283;2290>a;a++)g[a]=2;for(a=2290;2293>a;a++)g[a]=0;for(a=2308;2314>a;a++)g[a]=0;for(a=2315;2463>a;a++)g[a]=0;for(a=2523;2867>a;a++)g[a]=0;for(a=2867;2870>a;a++)g[a]=1;for(a=2870;2889>a;a++)g[a]=2;for(a=2891;2896>a;a++)g[a]=2;for(a=2896;2899>a;a++)g[a]=1;for(a=2902;2909>a;a++)g[a]=2;for(a=2915;2921>a;a++)g[a]=2;for(a=2921;2924>a;a++)g[a]=1;for(a=2924;2931>a;a++)g[a]=2;for(a=2931;2963>a;a++)g[a]=0;for(a=
2964;2969>a;a++)g[a]=2;for(a=2969;2974>a;a++)g[a]=0;for(a=2975;2992>a;a++)g[a]=0;for(a=2995;3052>a;a++)g[a]=0;for(a=3054;3080>a;a++)g[a]=0;for(a=3081;3089>a;a++)g[a]=0;for(a=3092;3102>a;a++)g[a]=0;for(a=3106;3139>a;a++)g[a]=0;for(a=3146;3152>a;a++)g[a]=0;for(a=3153;3167>a;a++)g[a]=0;for(a=3168;3173>a;a++)g[a]=0;for(a=3174;3204>a;a++)g[a]=0;for(a=3294;3359>a;a++)g[a]=0;for(a=3367;3404>a;a++)g[a]=0;for(a=3408;3417>a;a++)g[a]=0;for(a=3417;3439>a;a++)g[a]=2;for(a=3441;3447>a;a++)g[a]=2;for(a=3447;3451>
a;a++)g[a]=0;for(a=3451;3460>a;a++)g[a]=2;for(a=3460;3479>a;a++)g[a]=0;for(a=3554;3560>a;a++)g[a]=0;for(a=3560;3571>a;a++)g[a]=2;for(a=3571;3582>a;a++)g[a]=0;for(a=3594;3598>a;a++)g[a]=0;for(a=3601;3605>a;a++)g[a]=0;for(a=3637;3640>a;a++)g[a]=0;for(a=3665;3668>a;a++)g[a]=0;for(a=3693;3696>a;a++)g[a]=0;for(a=3701;3728>a;a++)g[a]=0;for(a=3728;3740>a;a++)g[a]=2;for(a=3740;3752>a;a++)g[a]=0;for(a=3753;3761>a;a++)g[a]=2;for(a=3761;3774>a;a++)g[a]=0;for(a=3775;3778>a;a++)g[a]=0;for(a=3779;3782>a;a++)g[a]=
0;for(a=3783;3786>a;a++)g[a]=0;for(a=3788;3792>a;a++)g[a]=0;for(a=3797;3803>a;a++)g[a]=0;for(a=3814;3817>a;a++)g[a]=0;for(a=3825;3830>a;a++)g[a]=0;for(a=3832;3842>a;a++)g[a]=0;for(a=3844;3853>a;a++)g[a]=0;for(a=3873;3886>a;a++)g[a]=0;for(a=3890;3894>a;a++)g[a]=0;for(a=3907;3913>a;a++)g[a]=0;for(a=3942;3951>a;a++)g[a]=0;for(a=3968;3971>a;a++)g[a]=0;for(a=3973;3977>a;a++)g[a]=0;for(a=3986;3990>a;a++)g[a]=0;for(a=3994;3998>a;a++)g[a]=0;for(a=4048;4052>a;a++)g[a]=0;for(a=4056;4064>a;a++)g[a]=0;for(a=
4093;4097>a;a++)g[a]=0;for(a=4399;4414>a;a++)g[a]=2;for(a=4418;4434>a;a++)g[a]=2;for(a=4455;4458>a;a++)g[a]=2;for(a=4484;4490>a;a++)g[a]=0;for(a=4491;4555>a;a++)g[a]=0;for(a=4568;4590>a;a++)g[a]=0;for(a=4652;4657>a;a++)g[a]=0;for(a=4766;4801>a;a++)g[a]=0;for(a=5014;5017>a;a++)g[a]=0;for(a=5069;5073>a;a++)g[a]=0;for(a=5105;5131>a;a++)g[a]=0;for(a=5173;5189>a;a++)g[a]=0;for(a=5253;5260>a;a++)g[a]=0;for(a=5269;5276>a;a++)g[a]=0;for(a=5292;5312>a;a++)g[a]=0;for(a=5329;5332>a;a++)g[a]=0;for(a=5343;5350>
a;a++)g[a]=0;for(a=5355;5358>a;a++)g[a]=0;for(a=5387;5390>a;a++)g[a]=0;for(a=5459;5464>a;a++)g[a]=0;for(a=5479;5483>a;a++)g[a]=0;for(a=5518;5521>a;a++)g[a]=0;for(a=5530;5540>a;a++)g[a]=0;for(a=5550;5553>a;a++)g[a]=0;for(a=5562;5584>a;a++)g[a]=0;for(a=5623;5626>a;a++)g[a]=2;for(a=5631;5640>a;a++)g[a]=0;for(a=5649;5654>a;a++)g[a]=0;for(a=5663;5681>a;a++)g[a]=0;for(a=5682;5686>a;a++)g[a]=0;for(a=5875;5878>a;a++)g[a]=0;for(a=5921;5941>a;a++)g[a]=0;for(a=6050;6126>a;a++)g[a]=0;for(a=6244;6276>a;a++)g[a]=
0;for(a=6328;6349>a;a++)g[a]=0;for(a=6350;6355>a;a++)g[a]=0;for(a=20002;20033>a;a++)g[a]=0;for(a=20062;20093>a;a++)g[a]=0;for(a=20135;20139>a;a++)g[a]=0;for(a=20248;20259>a;a++)g[a]=0;for(a=20348;20359>a;a++)g[a]=0;for(a=20436;20441>a;a++)g[a]=0;for(a=20822;20825>a;a++)g[a]=0;for(a=20934;20937>a;a++)g[a]=0;for(a=21035;21038>a;a++)g[a]=0;for(a=21095;21098>a;a++)g[a]=0;for(a=21148;21151>a;a++)g[a]=0;for(a=21413;21424>a;a++)g[a]=0;for(a=21473;21484>a;a++)g[a]=0;for(a=21780;21783>a;a++)g[a]=0;for(a=21891;21895>
a;a++)g[a]=0;for(a=21896;21900>a;a++)g[a]=0;for(a=22171;22178>a;a++)g[a]=0;for(a=22181;22188>a;a++)g[a]=0;for(a=22191;22198>a;a++)g[a]=0;for(a=22234;22237>a;a++)g[a]=0;for(a=22521;22526>a;a++)g[a]=0;for(a=22991;22995>a;a++)g[a]=0;for(a=23028;23039>a;a++)g[a]=0;for(a=23830;23854>a;a++)g[a]=0;for(a=23866;23873>a;a++)g[a]=0;for(a=23877;23885>a;a++)g[a]=0;for(a=23886;23895>a;a++)g[a]=0;for(a=23946;23949>a;a++)g[a]=0;for(a=24311;24314>a;a++)g[a]=0;for(a=24342;24348>a;a++)g[a]=0;for(a=24370;24375>a;a++)g[a]=
10;for(a=24375;24382>a;a++)g[a]=0;for(a=24718;24722>a;a++)g[a]=0;for(a=24817;24822>a;a++)g[a]=0;for(a=24877;24883>a;a++)g[a]=0;for(a=24891;24894>a;a++)g[a]=0;for(a=25391;25396>a;a++)g[a]=0;for(a=25828;25839>a;a++)g[a]=0;for(a=26191;26196>a;a++)g[a]=0;for(a=26391;26394>a;a++)g[a]=0;for(a=26701;26723>a;a++)g[a]=0;for(a=26729;26800>a;a++)g[a]=2;for(a=26801;26804>a;a++)g[a]=2;for(a=26811;26814>a;a++)g[a]=2;for(a=26847;26871>a;a++)g[a]=2;for(a=26891;26900>a;a++)g[a]=0;for(a=26901;26924>a;a++)g[a]=0;for(a=
26929;26947>a;a++)g[a]=0;for(a=26948;26999>a;a++)g[a]=0;for(a=27037;27041>a;a++)g[a]=0;for(a=27205;27233>a;a++)g[a]=0;for(a=27258;27261>a;a++)g[a]=0;for(a=27391;27399>a;a++)g[a]=0;for(a=27561;27565>a;a++)g[a]=0;for(a=27571;27575>a;a++)g[a]=0;for(a=27581;27585>a;a++)g[a]=0;for(a=27591;27595>a;a++)g[a]=0;for(a=28191;28194>a;a++)g[a]=0;for(a=28348;28359>a;a++)g[a]=0;for(a=28402;28433>a;a++)g[a]=0;for(a=28462;28493>a;a++)g[a]=0;for(a=29118;29123>a;a++)g[a]=0;for(a=29168;29173>a;a++)g[a]=0;for(a=29177;29186>
a;a++)g[a]=0;for(a=29187;29196>a;a++)g[a]=0;for(a=29900;29904>a;a++)g[a]=0;for(a=30161;30180>a;a++)g[a]=0;for(a=30491;30495>a;a++)g[a]=0;for(a=30729;30733>a;a++)g[a]=0;for(a=31251;31260>a;a++)g[a]=0;for(a=31265;31269>a;a++)g[a]=0;for(a=31275;31280>a;a++)g[a]=0;for(a=31281;31298>a;a++)g[a]=0;for(a=31461;31470>a;a++)g[a]=0;for(a=31491;31496>a;a++)g[a]=0;for(a=31917;31923>a;a++)g[a]=0;for(a=31965;32001>a;a++)g[a]=0;for(a=32001;32004>a;a++)g[a]=2;for(a=32005;32032>a;a++)g[a]=2;for(a=32033;32061>a;a++)g[a]=
2;for(a=32064;32068>a;a++)g[a]=2;for(a=32074;32078>a;a++)g[a]=2;for(a=32081;32087>a;a++)g[a]=0;for(a=32107;32131>a;a++)g[a]=0;for(a=32133;32159>a;a++)g[a]=0;for(a=32164;32168>a;a++)g[a]=2;for(a=32180;32200>a;a++)g[a]=0;for(a=32201;32261>a;a++)g[a]=0;for(a=32301;32361>a;a++)g[a]=0;for(a=32601;32663>a;a++)g[a]=0;for(a=32664;32668>a;a++)g[a]=2;for(a=32701;32762>a;a++)g[a]=0;for(a=53001;53005>a;a++)g[a]=0;for(a=53008;53020>a;a++)g[a]=0;for(a=53021;53033>a;a++)g[a]=0;for(a=53042;53047>a;a++)g[a]=0;for(a=
54001;54005>a;a++)g[a]=0;for(a=54008;54020>a;a++)g[a]=0;for(a=54021;54033>a;a++)g[a]=0;for(a=54042;54047>a;a++)g[a]=0;for(a=54048;54054>a;a++)g[a]=0;for(a=102001;102041>a;a++)g[a]=0;for(a=102042;102064>a;a++)g[a]=0;for(a=102065;102068>a;a++)g[a]=0;for(a=102070;102118>a;a++)g[a]=0;for(a=102122;102217>a;a++)g[a]=0;for(a=102221;102378>a;a++)g[a]=0;for(a=102382;102389>a;a++)g[a]=0;for(a=102389;102399>a;a++)g[a]=2;for(a=102401;102445>a;a++)g[a]=0;for(a=102445;102448>a;a++)g[a]=2;for(a=102450;102453>a;a++)g[a]=
0;for(a=102461;102469>a;a++)g[a]=2;for(a=102469;102497>a;a++)g[a]=0;for(a=102500;102520>a;a++)g[a]=1;for(a=102520;102525>a;a++)g[a]=0;for(a=102525;102530>a;a++)g[a]=2;for(a=102530;102550>a;a++)g[a]=0;for(a=102570;102589>a;a++)g[a]=0;for(a=102590;102599>a;a++)g[a]=0;for(a=102601;102604>a;a++)g[a]=0;for(a=102605;102629>a;a++)g[a]=0;for(a=102629;102647>a;a++)g[a]=2;for(a=102648;102701>a;a++)g[a]=2;for(a=102701;102704>a;a++)g[a]=0;for(a=102707;102731>a;a++)g[a]=2;for(a=102733;102759>a;a++)g[a]=2;for(a=
102767;102799>a;a++)g[a]=0;for(a=102962;102970>a;a++)g[a]=0;for(a=102971;102974>a;a++)g[a]=0;for(a=102975;102990>a;a++)g[a]=0;for(a=102990;102993>a;a++)g[a]=1;for(a=102997;103003>a;a++)g[a]=0;for(a=103003;103009>a;a++)g[a]=2;for(a=103009;103012>a;a++)g[a]=0;for(a=103012;103015>a;a++)g[a]=2;for(a=103019;103022>a;a++)g[a]=0;for(a=103022;103025>a;a++)g[a]=2;for(a=103029;103032>a;a++)g[a]=0;for(a=103032;103035>a;a++)g[a]=2;for(a=103065;103069>a;a++)g[a]=0;for(a=103074;103077>a;a++)g[a]=0;for(a=103077;103080>
a;a++)g[a]=1;for(a=103080;103083>a;a++)g[a]=0;for(a=103083;103086>a;a++)g[a]=2;for(a=103090;103094>a;a++)g[a]=0;for(a=103097;103100>a;a++)g[a]=0;for(a=103100;103103>a;a++)g[a]=2;for(a=103107;103110>a;a++)g[a]=0;for(a=103110;103113>a;a++)g[a]=2;for(a=103113;103117>a;a++)g[a]=0;for(a=103117;103121>a;a++)g[a]=2;for(a=103153;103158>a;a++)g[a]=0;for(a=103158;103163>a;a++)g[a]=2;for(a=103163;103166>a;a++)g[a]=0;for(a=103166;103169>a;a++)g[a]=1;for(a=103169;103172>a;a++)g[a]=2;for(a=103186;103189>a;a++)g[a]=
0;for(a=103189;103192>a;a++)g[a]=2;for(a=103192;103196>a;a++)g[a]=0;for(a=103196;103200>a;a++)g[a]=2;for(a=103200;103225>a;a++)g[a]=0;for(a=103225;103228>a;a++)g[a]=1;for(a=103232;103238>a;a++)g[a]=0;for(a=103238;103244>a;a++)g[a]=2;for(a=103244;103247>a;a++)g[a]=0;for(a=103247;103250>a;a++)g[a]=2;for(a=103254;103257>a;a++)g[a]=0;for(a=103257;103260>a;a++)g[a]=2;for(a=103264;103267>a;a++)g[a]=0;for(a=103267;103270>a;a++)g[a]=2;for(a=103300;103376>a;a++)g[a]=0;for(a=103381;103384>a;a++)g[a]=0;for(a=
103384;103387>a;a++)g[a]=1;for(a=103387;103390>a;a++)g[a]=0;for(a=103390;103393>a;a++)g[a]=2;for(a=103397;103400>a;a++)g[a]=0;for(a=103400;103472>a;a++)g[a]=2;for(a=103476;103479>a;a++)g[a]=0;for(a=103479;103482>a;a++)g[a]=2;for(a=103486;103489>a;a++)g[a]=0;for(a=103489;103492>a;a++)g[a]=2;for(a=103492;103496>a;a++)g[a]=0;for(a=103496;103500>a;a++)g[a]=2;for(a=103528;103544>a;a++)g[a]=0;for(a=103544;103549>a;a++)g[a]=2;for(a=103549;103552>a;a++)g[a]=0;for(a=103552;103555>a;a++)g[a]=1;for(a=103555;103558>
a;a++)g[a]=2;for(a=103558;103561>a;a++)g[a]=0;for(a=103571;103574>a;a++)g[a]=0;for(a=103574;103577>a;a++)g[a]=2;for(a=103577;103581>a;a++)g[a]=0;for(a=103581;103584>a;a++)g[a]=2;for(a=103600;103695>a;a++)g[a]=0;for(a=103700;103794>a;a++)g[a]=2;for(a=103794;103872>a;a++)g[a]=0;for(a=103900;103972>a;a++)g[a]=2;return g})},"esri/geometry/screenUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/sniff ../kernel ./Point ./ScreenPoint ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(l,
n,a,g,q,h,m,f,d,c){var e=function(){return 9>a("ie")?function(a,c,d,e,f,h,g,m,l){var q=[],n=Math.round,w,A=g.length,B,D,E,C,F,K;for(w=0;w<A;w++)if(B=g[w],C=m?m(B[0][0],B[0][1],l):B[0],1<(E=B.length)){F=n((C[0]-a)*d+f);K=n((c-C[1])*e+h);C=m?m(B[1][0],B[1][1],l):B[1];D=n((C[0]-a)*d+f);C=n((c-C[1])*e+h);q.push("M",F+","+K,"L",D+","+C);for(D=2;D<E;D++)C=m?m(B[D][0],B[D][1],l):B[D],F=n((C[0]-a)*d+f),K=n((c-C[1])*e+h),q.push(F+","+K)}else F=n((C[0]-a)*d+f),K=n((c-C[1])*e+h),q.push("M",F+","+K);return q}:
function(a,c,d,e,f,h,g,m,l){var q=[],n,w,A,B,D,E,C=Math.round;n=0;for(A=g?g.length:0;n<A;n++){D=g[n];q.push("M");w=0;for(B=D?D.length:0;w<B;w++)E=m?m(D[w][0],D[w][1],l):D[w],q.push(C((E[0]-a)*d+f)+","+C((c-E[1])*e+h))}return q}}();return{toScreenPoint:function(a,c,d,e,f){var g=a.spatialReference,m=e.spatialReference,l=e.x;e=e.y;g&&m&&(!g.equals(m)&&g._canProject(m))&&(g=g.isWebMercator()?q.lngLatToXY(l,e):q.xyToLngLat(l,e,!0),l=g[0],e=g[1]);l=(l-a.xmin)*(c/a.getWidth());e=(a.ymax-e)*(d/a.getHeight());
f||(l=Math.round(l),e=Math.round(e));return new h(l,e)},toScreenGeometry:function(a,e,h,p){var g=a.xmin,t=a.ymax,n=e/a.getWidth(),y=h/a.getHeight(),u=l.forEach,z=Math.round;if(p instanceof q)return new q(z((p.x-g)*n),z((t-p.y)*y));if(p instanceof d){a=new d;var v=a.points;u(p.points,function(a,b){v[b]=[z((a[0]-g)*n),z((t-a[1])*y)]});return a}if(p instanceof c)return new c(z((p.xmin-g)*n),z((t-p.ymin)*y),z((p.xmax-g)*n),z((t-p.ymax)*n));if(p instanceof m){a=new m;var w=a.paths,A;u(p.paths,function(a,
b){A=w[b]=[];u(a,function(a,b){A[b]=[z((a[0]-g)*n),z((t-a[1])*y)]})});return a}if(p instanceof f){a=new f;var B=a.rings,D;u(p.rings,function(a,b){D=B[b]=[];u(a,function(a,b){D[b]=[z((a[0]-g)*n),z((t-a[1])*y)]})});return a}},_toScreenPath:function(a,c,d,f,h,g){var l=f instanceof m,n=a.spatialReference,u=f.spatialReference,z,v;n&&u&&(!n.equals(u)&&n._canProject(u))&&(n.isWebMercator()?z=q.lngLatToXY:(z=q.xyToLngLat,v=!0));return e(a.xmin,a.ymax,c/a.getWidth(),d/a.getHeight(),h,g,l?f.paths:f.rings,z,
v)},toMapPoint:function(a,c,d,e){return new q(a.xmin+e.x/(c/a.getWidth()),a.ymax-e.y/(d/a.getHeight()),a.spatialReference)},toMapGeometry:function(a,e,h,p){var g=a.xmin,t=a.ymax,n=a.spatialReference,y=e/a.getWidth(),u=h/a.getHeight(),z=l.forEach;if(p instanceof q)return new q(g+p.x/y,t-p.y/u,n);if(p instanceof d){a=new d(n);var v=a.points;z(p.points,function(a,b){v[b]=[g+a[0]/y,t-a[1]/u]});return a}if(p instanceof c)return new c(g+p.xmin/y,t-p.ymin/u,g+p.xmax/y,t-p.ymax/u,n);if(p instanceof m){a=
new m(n);var w=a.paths,A;z(p.paths,function(a,b){A=w[b]=[];z(a,function(a,b){A[b]=[g+a[0]/y,t-a[1]/u]})});return a}if(p instanceof f){a=new f(n);var B=a.rings,D;z(p.rings,function(a,b){D=B[b]=[];z(a,function(a,b){D[b]=[g+a[0]/y,t-a[1]/u]})});return a}}}})},"esri/geometry/Polyline":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(l,n,a,g,q,h,m,f,d,c,e){var b={type:"polyline",
paths:null};l=l(f,{declaredClass:"esri.geometry.Polyline",constructor:function(c){a.mixin(this,b);this.paths=[];this._path=0;c&&(a.isArray(c)?this.paths=a.isArray(c[0][0])?c:[c]:c.paths?a.mixin(this,c):this.spatialReference=c,this.spatialReference&&(this.spatialReference=e.createSpatialReference(this.spatialReference)));this.verifySR()},addPath:function(b){this.clearCache();this._path=this.paths.length;this.paths[this._path]=[];a.isArray(b[0])?n.forEach(b,this._addPointArr,this):n.forEach(b,this._addPoint,
this);return this},_addPointArr:function(a){this.paths[this._path].push(a)},_addPoint:function(a){this.paths[this._path].push([a.x,a.y])},_insertPoints:function(a,b){this.clearCache();this._path=b;this.paths[this._path]||(this.paths[this._path]=[]);n.forEach(a,this._addPoint,this)},_validateInputs:function(a,b){return null!==a&&void 0!==a&&(0>a||a>=this.paths.length)||null!==b&&void 0!==a&&(0>b||b>=this.paths[a].length)?!1:!0},getPoint:function(a,b){if(this._validateInputs(a,b))return new d(this.paths[a][b],
this.spatialReference)},setPoint:function(a,b,c){if(this._validateInputs(a,b))return this.clearCache(),this.paths[a][b]=[c.x,c.y],this},insertPoint:function(a,b,c){if(this._validateInputs(a)&&h.isDefined(b)&&0<=b&&b<=this.paths[a].length)return this.clearCache(),this.paths[a].splice(b,0,[c.x,c.y]),this},removePath:function(a){if(this._validateInputs(a,null)){this.clearCache();a=this.paths.splice(a,1)[0];var b,c=a.length,e=this.spatialReference;for(b=0;b<c;b++)a[b]=new d(a[b],e);return a}},removePoint:function(a,
b){if(this._validateInputs(a,b))return this.clearCache(),new d(this.paths[a].splice(b,1)[0],this.spatialReference)},getExtent:function(){var a;a=this.getCacheValue("_extent");var b=this.getCacheValue("_partwise");if(a)return a=new c(a),a._partwise=b,a;a=this.paths;var d=a.length;if(d&&a[0].length){var e,f,h,g,m,l,q,n,A=g=a[0][0][0],B=m=a[0][0][1],D=Math.min,E=Math.max,C=this.spatialReference,b=[],F,K,I,G;for(l=0;l<d;l++){e=a[l];F=K=e[0]&&e[0][0];I=G=e[0]&&e[0][1];n=e.length;for(q=0;q<n;q++)f=e[q],
h=f[0],f=f[1],A=D(A,h),B=D(B,f),g=E(g,h),m=E(m,f),F=D(F,h),I=D(I,f),K=E(K,h),G=E(G,f);b.push(new c({xmin:F,ymin:I,xmax:K,ymax:G,spatialReference:C?C.toJson():null}))}a={xmin:A,ymin:B,xmax:g,ymax:m,spatialReference:C?C.toJson():null};b=1<b.length?b:null;this.setCacheValue("_extent",a);this.setCacheValue("_partwise",b);a=new c(a);a._partwise=b;return a}},toJson:function(){var b={paths:a.clone(this.paths)},c=this.spatialReference;c&&(b.spatialReference=c.toJson());return b}});l.defaultProps=b;return l})},
"esri/geometry/Polygon":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ./mathUtils ../srUtils".split(" "),function(l,n,a,g,q,h,m,f,d,c,e,b){var k={type:"polygon",rings:null},s=l(f,{declaredClass:"esri.geometry.Polygon",constructor:function(c){a.mixin(this,k);this.rings=[];this._ring=0;c&&(a.isArray(c)?this.rings=a.isArray(c[0][0])?c:[c]:c.rings?a.mixin(this,c):this.spatialReference=c,this.spatialReference&&
(this.spatialReference=b.createSpatialReference(this.spatialReference)));this.verifySR()},addRing:function(b){this.clearCache();this._ring=this.rings.length;this.rings[this._ring]=[];a.isArray(b[0])?n.forEach(b,this._addPointArr,this):n.forEach(b,this._addPoint,this);return this},_addPointArr:function(a){this.rings[this._ring].push(a)},_addPoint:function(a){this.rings[this._ring].push([a.x,a.y])},_insertPoints:function(a,b){this.clearCache();this._ring=b;this.rings[this._ring]||(this.rings[this._ring]=
[]);n.forEach(a,this._addPoint,this)},_validateInputs:function(a,b){return null!==a&&void 0!==a&&(0>a||a>=this.rings.length)||null!==b&&void 0!==a&&(0>b||b>=this.rings[a].length)?!1:!0},getPoint:function(a,b){if(this._validateInputs(a,b))return new d(this.rings[a][b],this.spatialReference)},setPoint:function(a,b,c){if(this._validateInputs(a,b))return this.clearCache(),this.rings[a][b]=[c.x,c.y],this},insertPoint:function(a,b,c){if(this._validateInputs(a)&&h.isDefined(b)&&0<=b&&b<=this.rings[a].length)return this.clearCache(),
this.rings[a].splice(b,0,[c.x,c.y]),this},removeRing:function(a){if(this._validateInputs(a,null)){this.clearCache();a=this.rings.splice(a,1)[0];var b,c=a.length,e=this.spatialReference;for(b=0;b<c;b++)a[b]=new d(a[b],e);return a}},removePoint:function(a,b){if(this._validateInputs(a,b))return this.clearCache(),new d(this.rings[a].splice(b,1)[0],this.spatialReference)},getExtent:function(){var a;a=this.getCacheValue("_extent");var b=this.getCacheValue("_partwise");if(a)return a=new c(a),a._partwise=
b,a;a=this.rings;var d=a.length;if(d&&a[0].length){var e,k,f,h,g,m,l,s,q=h=a[0][0][0],n=g=a[0][0][1],C=Math.min,F=Math.max,K=this.spatialReference,b=[],I,G,J,H;for(m=0;m<d;m++){e=a[m];I=G=e[0]&&e[0][0];J=H=e[0]&&e[0][1];s=e.length;for(l=0;l<s;l++)k=e[l],f=k[0],k=k[1],q=C(q,f),n=C(n,k),h=F(h,f),g=F(g,k),I=C(I,f),J=C(J,k),G=F(G,f),H=F(H,k);b.push(new c({xmin:I,ymin:J,xmax:G,ymax:H,spatialReference:K?K.toJson():null}))}a={xmin:q,ymin:n,xmax:h,ymax:g,spatialReference:K?K.toJson():null};b=1<b.length?b:
null;this.setCacheValue("_extent",a);this.setCacheValue("_partwise",b);a=new c(a);a._partwise=b;return a}},contains:function(a){var b=this.rings,c,e=!1,k,f,h,g,m,l,s=b.length;c=this.spatialReference;k=a.spatialReference;var q=a.x;a=a.y;c&&k&&(!c.equals(k)&&c._canProject(k))&&(a=c.isWebMercator()?d.lngLatToXY(q,a):d.xyToLngLat(q,a,!0),q=a[0],a=a[1]);for(l=0;l<s;l++){c=b[l];h=c.length;for(m=g=0;m<h;m++)if(g++,g===h&&(g=0),k=c[m],f=c[g],(k[1]<a&&f[1]>=a||f[1]<a&&k[1]>=a)&&k[0]+(a-k[1])/(f[1]-k[1])*(f[0]-
k[0])<q)e=!e}return e},getCentroid:function(){var a=this.getCacheValue("_centroid");if(void 0!==a)return a;var a=this.rings,b,c,e,k=[],f,h;n.forEach(a,function(a){b=c=e=0;n.forEach(a,function(d,k){k<a.length-1&&(f=a[k+1],h=d[0]*f[1]-f[0]*d[1],b+=(d[0]+f[0])*h,c+=(d[1]+f[1])*h,e+=h)});0<e&&(e*=-1);e&&k.push([b,c,e/2])});k.sort(function(a,b){return a[2]-b[2]});b=c=void 0;if(k[0])a=6*k[0][2],b=k[0][0]/a,c=k[0][1]/a;else if(a=a[0]&&a[0].length?this._getLineCentroid(a[0]):null)b=a.x,c=a.y;a=isNaN(b)||
isNaN(c)?null:new d(b,c,this.spatialReference);this.setCacheValue("_centroid",a);return a},_getLineCentroid:function(a){var b,c=0,d=0,k=0,f,h,g={x:0,y:0},m={x:0,y:0},l,s=a.length,q;for(l=0;l<s-1;l++)f=a[l],h=a[l+1],f&&h&&(g.x=f[0],g.y=f[1],m.x=h[0],m.y=h[1],b=e.getLength(g,m),0<b&&(c+=b,f=e.getMidpoint(f,h),d+=b*f[0],k+=b*f[1]));0<c?q={x:d/c,y:k/c}:a[0]&&(q={x:a[0][0],y:a[0][1]});return q},isClockwise:function(b){var c=0,d,e=b.length,k=a.isArray(b[0])?function(a,b){return a[0]*b[1]-b[0]*a[1]}:function(a,
b){return a.x*b.y-b.x*a.y};for(d=0;d<e;d++)c+=k(b[d],b[(d+1)%e]);return 0>=c/2},isSelfIntersecting:function(a){a=a||this;var b,c,d,k,f,h,g,m=a.rings.length,l;for(d=0;d<m;d++){for(b=0;b<a.rings[d].length-1;b++){f=[[a.rings[d][b][0],a.rings[d][b][1]],[a.rings[d][b+1][0],a.rings[d][b+1][1]]];for(c=d+1;c<m;c++)for(k=0;k<a.rings[c].length-1;k++)if(h=[[a.rings[c][k][0],a.rings[c][k][1]],[a.rings[c][k+1][0],a.rings[c][k+1][1]]],(g=e._getLineIntersection2(f,h))&&!(g[0]===f[0][0]&&g[1]===f[0][1]||g[0]===h[0][0]&&
g[1]===h[0][1]||g[0]===f[1][0]&&g[1]===f[1][1]||g[0]===h[1][0]&&g[1]===h[1][1]))return!0}k=a.rings[d].length;if(!(4>=k))for(b=0;b<k-3;b++){l=k-1;0===b&&(l=k-2);f=[[a.rings[d][b][0],a.rings[d][b][1]],[a.rings[d][b+1][0],a.rings[d][b+1][1]]];for(c=b+2;c<l;c++)if(h=[[a.rings[d][c][0],a.rings[d][c][1]],[a.rings[d][c+1][0],a.rings[d][c+1][1]]],(g=e._getLineIntersection2(f,h))&&!(g[0]===f[0][0]&&g[1]===f[0][1]||g[0]===h[0][0]&&g[1]===h[0][1]||g[0]===f[1][0]&&g[1]===f[1][1]||g[0]===h[1][0]&&g[1]===h[1][1]))return!0}}return!1},
toJson:function(){var b={rings:a.clone(this.rings)},c=this.spatialReference;c&&(b.spatialReference=c.toJson());return b}});s.defaultProps=k;s.createEllipse=function(a){var b=a.center.x,c=a.center.y,d=a.longAxis,e=a.shortAxis,k=a.numberOfPoints,f=a.map,h,g,m;a=[];var l=2*Math.PI/k;for(g=0;g<k;g++)h=Math.cos(g*l),m=Math.sin(g*l),h=f.toMap({x:d*h+b,y:e*m+c}),a.push(h);a.push(a[0]);b=new s(f.spatialReference);b.addRing(a);return b};s.createCircle=function(a){return s.createEllipse({center:a.center,longAxis:a.r,
shortAxis:a.r,numberOfPoints:a.numberOfPoints,map:a.map})};s.fromExtent=function(a){var b=a.normalize();a=a.spatialReference;return new s({rings:n.map(b,function(a){return[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]}),spatialReference:a?a.toJson():null})};return s})},"esri/geometry/Multipoint":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(l,n,a,g,q,h,m,f,
d){var c={type:"multipoint",points:null};l=l(h,{declaredClass:"esri.geometry.Multipoint",constructor:function(a){n.mixin(this,c);this.points=[];a&&(a.points?n.mixin(this,a):this.spatialReference=a,this.spatialReference&&(this.spatialReference=d.createSpatialReference(this.spatialReference)));this.verifySR()},addPoint:function(a){this.clearCache();n.isArray(a)?this.points.push(a):this.points.push([a.x,a.y]);return this},removePoint:function(a){if(this._validateInputs(a))return this.clearCache(),new m(this.points.splice(a,
1)[0],this.spatialReference)},getExtent:function(){var a=this.getCacheValue("_extent");if(a)return new f(a);var a=this.points,b=a.length;if(b){var c=a[0],d,h,g=d=c[0],m=h=c[1],l=Math.min,q=Math.max,n=this.spatialReference,z,v;for(v=0;v<b;v++)c=a[v],z=c[0],c=c[1],g=l(g,z),m=l(m,c),d=q(d,z),h=q(h,c);a={xmin:g,ymin:m,xmax:d,ymax:h,spatialReference:n?n.toJson():null};this.setCacheValue("_extent",a);return new f(a)}},_validateInputs:function(a){return null===a||0>a||a>=this.points.length?!1:!0},getPoint:function(a){if(this._validateInputs(a))return a=
this.points[a],new m(a[0],a[1],this.spatialReference)},setPoint:function(a,b){if(this._validateInputs(a))return this.clearCache(),this.points[a]=[b.x,b.y],this},toJson:function(){var a={points:n.clone(this.points)},b=this.spatialReference;b&&(a.spatialReference=b.toJson());return a}});l.defaultProps=c;return l})},"esri/layers/GraphicsLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-attr dojo/dom-construct dojo/dom-style dojox/gfx dojox/gfx/matrix ./layer ../kernel ../lang ../sniff ../Color ../domUtils ../symbols/MarkerSymbol ../symbols/SimpleMarkerSymbol ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/mathUtils ../geometry/screenUtils ../PluginTarget".split(" "),
function(l,n,a,g,q,h,m,f,d,c,e,b,k,s,p,r,t,x,y,u,z,v,w){var A,B=-1!==f.renderer.toLowerCase().indexOf("svg"),D=-1!==f.renderer.toLowerCase().indexOf("canvas"),E=9>k("ie"),C=k("esri-touch");r=l(null,{declaredClass:"esri.layers._GraphicsContainer",_setMap:function(a,b){var c,d=this._connects=[];this._map=a;D?(c=h.create("div",{style:"overflow: visible; position: absolute;"},b),this._surface={getEventSource:function(){return c}},d.push(n.connect(c,"onmousedown",this,this._canvasDownHandler)),d.push(n.connect(c,
"onmouseup",this,this._canvasUpHandler)),d.push(n.connect(c,"onclick",this,this._canvasClickHandler)),A.prototype._canvas=!0):(c=(this._surface=f.createSurface(b,a.width,a.height)).getEventSource(),m.set(c=E?c.parentNode:c,{overflow:"visible",position:"absolute"}));d.push(n.connect(a,"onResize",this,"_onResizeHandler"));return c},_onResizeHandler:function(a,b,c){a=this._surface.getEventSource();var d=this._map,e;E&&m.set(a=a.parentNode,{width:b+"px",height:c+"px",clip:"rect(0px "+b+"px "+c+"px 0px)"});
q.set(a,"width",b);q.set(a,"height",c);this._surface.declaredClass||g.forEach(a.childNodes,function(a){q.set(a,"width",b);q.set(a,"height",c)});d.loaded&&(d.graphics.suspended||(d.graphics._resized=!0),g.forEach(d.graphicsLayerIds,function(a){e=d.getLayer(a);e.suspended||(e._resized=!0)}))},_cleanUp:function(){g.forEach(this._connects,n.disconnect,n);this._map=this._surface=null},_processEvent:function(a){var b=this._map;a.screenPoint=new y(a.pageX-b.position.x,a.pageY-b.position.y);a.mapPoint=b.toMap(a.screenPoint)},
_canvasDownHandler:function(a){this._processEvent(a);this._downPt=a.screenPoint.x+","+a.screenPoint.y},_canvasUpHandler:function(a){this._processEvent(a);this._upPt=a.screenPoint.x+","+a.screenPoint.y},_tolerance:15,_isPrimaryMatch:function(a,b,c,d){if(!a.visible||!b)return!1;var e=b.getTransformedBoundingBox(),k;return e?(k=new u(e[0].x,e[0].y,e[2].x,e[2].y),delete k.spatialReference,C?k.intersects(c):k.contains(d)):g.some(b.children||[],function(a){e=a.getTransformedBoundingBox();k=new u(e[0].x,
e[0].y,e[2].x,e[2].y);delete k.spatialReference;return C?k.intersects(c):k.contains(d)})},_canvasClickHandler:function(a){if(this._downPt&&this._upPt&&this._downPt===this._upPt){this._processEvent(a);var c=this._map,d=g.map(c.graphicsLayerIds,function(a){return c.getLayer(a)});d.push(c.graphics);d.reverse();var d=g.filter(d,function(a){return a.loaded&&a._mouseEvents&&!a.suspended&&(!b.isDefined(a.opacity)||0<a.opacity)}),e=a.screenPoint,k=this._tolerance,f=e.x-k,h=e.y+k,p=e.x+k,k=e.y-k,m=new u(f,
k,p,h),f=c.toMap(new y(f,h)),p=c.toMap(new y(p,k)),h=f.spatialReference._getInfo(),r=new u(u.prototype._normalizeX(f.x,h).x,f.y,u.prototype._normalizeX(p.x,h).x,p.y,f.spatialReference),l;delete m.spatialReference;g.some(d,function(a){a=g.filter(a.graphics,function(a){return this._isPrimaryMatch(a,a.getDojoShape(),m,e)||!(!a._bgShape||!this._isPrimaryMatch(a,a._bgShape,m,e))},this);a.reverse();if(0<a.length){var b;g.some(a,function(a){return a.geometry&&r.intersects(a.geometry)?(b=a,!0):!1});if(b)return l=
b,!0}return!1},this);if(l&&(d=l.getLayer()))a.graphic=l,d.onClick(a)}}});A=l(c,{declaredClass:"esri.layers._GraphicsLayer",managedSuspension:!0,surfaceType:D?"canvas-2d":f.renderer,_eventMap:{"graphic-add":["graphic"],"graphic-remove":["graphic"],"renderer-change":["renderer"]},constructor:function(b,c){if(b&&(a.isString(b)||a.isObject(b)&&(b.layerDefinition||b.query)))b=c;this._params=a.mixin({displayOnPan:!0,drawMode:!0,styling:!0},b||{});var d=this._params.dataAttributes;"string"===typeof d&&(d=
[d]);this.styling=B?this._params.styling:!0;this.dataAttributes=d;this.infoTemplate=b&&b.infoTemplate;this.graphics=[];this._draw=a.hitch(this,this._draw);this._refresh=a.hitch(this,this._refresh);this.registerConnectEvents()},getNode:function(){return this._div&&this._div.getEventSource()},setDrawMode:function(a){this._params.drawMode=a},renderer:null,_setMap:function(c,d){this.inherited(arguments);this._map=c;this._wrap=c.wrapAround180;this._srInfo=c.spatialReference._getInfo();this._canvas?(d=
f.createSurface(d.getEventSource(),c.width,c.height),m.set(d.rawNode,"position","absolute"),this._div=d.createGroup(),this._renderProto=this._div.constructor.prototype._render,this._div._render=a.hitch(this,this._canvasRender)):this._div=d.createGroup();this._bgGroup=this._div.createGroup();this._div.getEventSource().id=this.id+"_layer";var e=this.opacity;b.isDefined(e)&&1>e&&this.setOpacity(e,!0);return this._div},_unsetMap:function(a,b){g.forEach(this.graphics,function(a){a._shape=null});this._canvas?
(b=this._div.getParent(),b._parent={},h.destroy(b.rawNode),b.destroy()):(this._div.clear(),b.remove(this._div),h.destroy(this._div.getEventSource()));this._map=this._div=null;clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();this.inherited(arguments)},_onZoomStartHandler:function(){p.hide(this._div.getEventSource())},_onExtentChangeHandler:function(a,b,c,e){clearTimeout(this._wakeTimer);this._wakeTimer=null;c?(a=this._map.__visibleRect,b=this._div,this._evalSDRenderer(),
this._refresh(!0),b.setTransform(d.translate({x:a.x,y:a.y})),this._renderProto&&b.surface.pendingRender?this._dirty=!0:this.suspended||p.show(b.getEventSource())):this._resized&&(this._refresh(!1),this._resized=!1);if(0<this.graphics.length)this.onUpdate()},_canvasRender:function(){var a=this._div;this._dirty&&(delete this._dirty,this.suspended||p.show(a.getEventSource()));return this._renderProto.apply(a,arguments)},_refresh:function(a){var b=this.graphics,c=b.length,d,e=this._draw;for(d=0;d<c;d++)e(b[d],
a)},refresh:function(){this._refresh(!0)},redraw:function(){this._refresh(!0)},_onPanHandler:function(a,b){this._panDx=b.x;this._panDy=b.y;var c=this._map.__visibleRect;this._div.setTransform(d.translate({x:c.x+b.x,y:c.y+b.y}))},_onPanEndUpdateHandler:function(a,b){if(!this._params._child&&(b.x!==this._panDx||b.y!==this._panDy)){var c=this._map.__visibleRect;this._div.setTransform(d.translate({x:c.x,y:c.y}))}this._refresh(!1);if(this.graphics.length)this.onUpdate()},_onPanStartHandler:function(){p.hide(this._div.getEventSource())},
_onPanEndHandler:function(){var a=this._map.__visibleRect,b=this._div;b.setTransform(d.translate({x:a.x,y:a.y}));this._refresh(!1);this._renderProto&&b.surface.pendingRender?this._dirty=!0:p.show(b.getEventSource());if(this.graphics.length)this.onUpdate()},onSuspend:function(){this.inherited(arguments);p.hide(this._div.getEventSource());clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors()},onResume:function(b){this.inherited(arguments);b.firstOccurrence&&this._evalSDRenderer();
this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(a.hitch(this,function(){this.suspended||this._onExtentChangeHandler(null,null,!0)}),0)},_enableDrawConnectors:function(){var a=this._map,b=n.connect;this._disableDrawConnectors();this._params.displayOnPan?(this._params._child||(this._onPanHandler_connect=b(a,"onPan",this,"_onPanHandler")),this._onPanEndHandler_connect=b(a,"onPanEnd",this,"_onPanEndUpdateHandler")):(this._onPanStartHandler_connect=b(a,"onPanStart",this,"_onPanStartHandler"),
this._onPanEndHandler_connect=b(a,"onPanEnd",this,"_onPanEndHandler"));this._onZoomStartHandler_connect=b(a,"onZoomStart",this,"_onZoomStartHandler");this._onExtentChangeHandler_connect=b(a,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var a=n.disconnect;a(this._onExtentChangeHandler_connect);a(this._onZoomStartHandler_connect);a(this._onPanHandler_connect);a(this._onPanStartHandler_connect);a(this._onPanEndHandler_connect);this._onExtentChangeHandler_connect=
this._onZoomStartHandler_connect=this._onPanHandler_connect=this._onPanStartHandler_connect=this._onPanEndHandler_connect=null},_updateExtent:function(a){var b=a.geometry;if(b){if(!(a._extent=b.getExtent())){var c,d;if("esri.geometry.Point"===b.declaredClass)c=b.x,d=b.y;else if("esri.geometry.Multipoint"===b.declaredClass)c=b.points[0][0],d=b.points[0][1];else{a._extent=null;return}a._extent=new u(c,d,c,d,b.spatialReference)}}else a._extent=null},_intersects:function(a,b,c){var d=a.spatialReference,
e=b.spatialReference,k=d&&e&&!d.equals(e)&&d._canProject(e)&&4326===e.wkid;if(this._wrap&&!c){c=[];var d=a._getFrameWidth(),f=this._srInfo,h=a._clip?a._getAvailExtent():a.extent,p,m,r,l,t=[];p=b._partwise;k&&(h=a.geographicExtent,f=e._getInfo());a=h._getParts(f);if(p&&p.length){b=[];e=0;for(k=p.length;e<k;e++)b=b.concat(p[e]._getParts(f))}else b=b._getParts(f);e=0;for(k=b.length;e<k;e++){r=b[e];f=0;for(h=a.length;f<h;f++)if(l=a[f],l.extent.intersects(r.extent)){p=0;for(m=r.frameIds.length;p<m;p++)c.push((l.frameIds[0]-
r.frameIds[p])*d)}}e=0;for(k=c.length;e<k;e++)p=c[e],g.indexOf(c,p)===e&&t.push(p);return t.length?t:null}return(k?a.geographicExtent:a.extent).intersects(b)?[0]:null},_defaultMarker:{type:"simplemarkersymbol",style:"square",size:1,xoffset:0,yoffset:0,angle:0},_draw:function(a,b){if(this._params.drawMode&&this._map&&!this.suspended)try{var c=a._extent,d,e,k=!B||this.styling,f=B&&this.dataAttributes,h=a.getDojoShape(),p;if(a.visible&&c&&(d=this._intersects(this._map,c,a.geometry._originOnly))&&(e=
k?this._getSymbol(a):this._defaultMarker)){if(!a._offsets||a._offsets.join(",")!==d.join(",")?a._offsets=d:p=!0,!h||b||!p){var g=a.geometry.type,c={graphic:a},m=a._bgShape,r=k&&!a.symbol?this._getRenderer(a):null,l=r&&r.backgroundFillSymbol;if("point"===g)this._isInvalidShape(e,h)&&this._removeShape(a),a._shape=this._drawPoint(this._div,a.geometry,e,a.getDojoShape(),d,r,a),k&&this._symbolizePoint(a.getDojoShape(),e,r,a);else if("multipoint"===g)this._drawMarkers(a,e,d,r),k&&this._symbolizeMarkers(a,
e,r);else{var t,g=e,s,q;k&&(g=(t="simplemarkersymbol"===e.type||"picturemarkersymbol"===e.type||"textsymbol"===e.type?e:null)?l:e);g&&g===l&&(s=this._bgGroup);m&&!s&&this._removeBgShape(a);g&&(!s&&this._isInvalidShape(g,a._shape)&&this._removeShape(a,!1),q=this._drawShape(a,d,s||this._div,s?m:a.getDojoShape()),k&&this._symbolizeShape(q,g,r,!!l,a),a[s?"_bgShape":"_shape"]=q);if(t){this._isInvalidShape(t,a._shape)&&this._removeShape(a,!1);var n=a.geometry.getCentroid();(q=n&&this._drawPoint(this._div,
n,t,a._shape,d,r,a))&&this._symbolizePoint(q,t,r,a);a._shape=q}}D||(a._bgShape&&this._initNode(a,a._bgShape,a._bgShape!==m,c,f),a._shape&&this._initNode(a,a._shape,a._shape!==h,c,f));c.node=a.getNode();this.onGraphicDraw(c)}}else h&&this._removeShape(a)}catch(w){this._errorHandler(w,a)}},_initNode:function(a,b,c,d,e){if(b=b&&b.getNode())b.e_graphic=a,this._addDataAttrs(a,e,b),c&&(d.node=b,this.onGraphicNodeAdd(d))},_removeShape:function(a,b){var c=a.getDojoShape(),d=c&&c.getNode();c&&(c.removeShape(),
c.destroy());a._shape=a._offsets=null;!1!==b&&this._removeBgShape(a);if(d&&(d.e_graphic=null,!D))this.onGraphicNodeRemove({graphic:a,node:d})},_removeBgShape:function(a){var b=a._bgShape,c=b&&b.getNode();b&&(b.removeShape(),b.destroy(),a._bgShape=null);if(c&&(c.e_graphic=null,!D))this.onGraphicNodeRemove({graphic:a,node:c})},_addDataAttrs:function(a,b,c){var d=a.attributes,e,k=b?b.length:0,f=this._getRenderer(a);if(c&&d){for(e=0;e<k;e++)(c=b[e])&&a.attr("data-"+c,d[c]);!this.styling&&f&&(f.getBreakIndex?
(b=f.getBreakIndex(a),a.attr("data-class-break",-1!==b?b:null)):f.getUniqueValueInfo&&(b=f.getUniqueValueInfo(a),a.attr("data-unique-value",b?b.value:null)))}},_drawShape:function(a,b,c,d){a=a.geometry;var e=a.type,k=this._map,f=k.extent,h=k.width,p=k.height,k=k.__visibleRect,g=[],r,m;r="extent"===e;if("rect"===e||r)g={x:0,y:0,spatialReference:a.spatialReference},g.x=r?a.xmin:a.x,g.y=r?a.ymax:a.y,e=v.toScreenPoint(f,h,p,g),g.x=r?a.xmax:a.x+a.width,g.y=r?a.ymin:a.y+a.height,a=v.toScreenPoint(f,h,p,
g),b={x:e.x-k.x+b[0],y:e.y-k.y,width:Math.abs(a.x-e.x),height:Math.abs(a.y-e.y)},0===b.width&&(b.width=1),0===b.height&&(b.height=1),d=this._drawRect(c,d,b);else if("polyline"===e||"polygon"===e){r=0;for(m=b.length;r<m;r++)g=g.concat(v._toScreenPath(f,h,p,a,-k.x+b[r],-k.y));d=this._drawPath(c,d,g);this._rendererLimits&&("polyline"===e?this._clipPolyline(d,a):this._clipPolygon(d,a))}return d},_drawRect:function(a,b,c){return b?b.setShape(c):a.createRect(c)},_drawImage:function(a,b,c){return b?b.setShape(c):
a.createImage(c)},_drawCircle:function(a,b,c){return b?b.setShape(c):a.createCircle(c)},_drawPath:function(){return E?function(a,b,c,d){c=d?c:c.join(" ");if(b)return b.setShape(c);b=a.createObject(d?f.Path:f.EsriPath,c);a._overrideSize(b.getEventSource());return b}:function(a,b,c,d){c=d?c:c.join(" ");return b?b.setShape(c):a.createPath(c)}}(),_drawText:function(a,b,c){return b?b.setShape(c):a.createText(c)},_evalSDRenderer:function(a){var b=this._map,c=this.renderer,d,e=this._rndForScale;b&&b.loaded&&
(c&&c.getRendererInfo)&&(d="zoom"===c.rangeType?c.getRendererInfoByZoom(b.getZoom()):c.getRendererInfoByScale(b.getScale()));this._rndForScale=d&&d.renderer;!a&&this._rndForScale!=e&&this.emit("renderer-change",{renderer:this._rndForScale})},_getRenderer:function(a){var b=this._rndForScale||this.renderer;a&&b&&b.getObservationRenderer&&(b=b.getObservationRenderer(a));return b},_getSymbol:function(a){var b=this._getRenderer();return a.symbol||b&&b.getSymbol(a)},_getVariable:function(a,b,c){var d;a&&
(d=(a=a.getVisualVariablesForType(b,c))&&a[0]);return d},_applyOpacity:function(a,b,c,d){b=b.getOpacity(d,{opacityInfo:c});null!=b&&(a=new s(a),a.a=b);return a},_symbolizeShape:function(b,c,d,e,k){var f=c.getStroke(),h=c.getFill(),p=c.type,g,r,m=this._getVariable(d,"sizeInfo",!1),l=this._getVariable(d,"colorInfo",!1),t=this._getVariable(d,"opacityInfo",!1),s=-1!==p.indexOf("linesymbol");c=s?"none"!==c.style:c.outline&&"none"!==c.outline.style;var q=s?null:this._getVariable(d,"sizeInfo","outline"),
m=(m=e?q:q||m)?d.getSize(k,{sizeInfo:m,resolution:this._map.getResolutionInMeters(),scale:this._map.getScale()}):null;e&&(l=t=null);if((l||t)&&"picturefillsymbol"!==p)s?(g=f&&f.color,l&&(g=d.getColor(k,{colorInfo:l})||g),g&&t&&(g=this._applyOpacity(g,d,t,k))):h&&h.toCss&&(r=h,l&&(r=d.getColor(k,{colorInfo:l})||r),r&&t&&(r=this._applyOpacity(r,d,t,k)));b.setStroke(!c||null==m&&!g?f:a.mixin({},f,null!=m?{width:m}:null,g&&{color:g})).setFill(r||h)},_smsToPath:function(){return E?function(a,b,c,d,e,k,
f,h,p){switch(b){case a.STYLE_SQUARE:return["M",e+","+f,"L",k+","+f,k+","+h,e+","+h,"X","E"];case a.STYLE_CROSS:return["M",c+","+f,"L",c+","+h,"M",e+","+d,"L",k+","+d,"E"];case a.STYLE_X:return["M",e+","+f,"L",k+","+h,"M",e+","+h,"L",k+","+f,"E"];case a.STYLE_DIAMOND:return["M",c+","+f,"L",k+","+d,c+","+h,e+","+d,"X","E"];case a.STYLE_TARGET:return["M",e+","+f,"L",k+","+f,k+","+h,e+","+h,e+","+f,"M",e-p+","+d,"L",e+","+d,"M",c+","+(f-p),"L",c+","+f,"M",k+p+","+d,"L",k+","+d,"M",c+","+(h+p),"L",c+
","+h,"E"]}}:function(a,b,c,d,e,k,f,h,p){switch(b){case a.STYLE_SQUARE:return["M",e+","+f,k+","+f,k+","+h,e+","+h,"Z"];case a.STYLE_CROSS:return["M",c+","+f,c+","+h,"M",e+","+d,k+","+d];case a.STYLE_X:return["M",e+","+f,k+","+h,"M",e+","+h,k+","+f];case a.STYLE_DIAMOND:return["M",c+","+f,k+","+d,c+","+h,e+","+d,"Z"];case a.STYLE_TARGET:return["M",e+","+f,k+","+f,k+","+h,e+","+h,e+","+f,"M",e-p+","+d,e+","+d,"M",c+","+(f-p),c+","+f,"M",k+p+","+d,k+","+d,"M",c+","+(h+p),c+","+h]}}}(),_pathStyles:{square:1,
cross:1,x:1,diamond:1,target:1},_typeMaps:{picturemarkersymbol:"image",picturefillsymbol:"path",simplefillsymbol:"path",simplelinesymbol:"path",cartographiclinesymbol:"path",textsymbol:"text"},_isInvalidShape:function(a,b){var c=b&&b.shape&&b.shape.type,d=a&&a.type,e=a&&a.style;"rect"===c&&(c="path");d&&(e=this._typeMaps[d]||e);this._pathStyles[e]&&(e="path");return"shieldlabelsymbol"===d?!0:!(!c||!(e&&c!==e))},_drawPoint:function(a,b,c,e,k,f,h){var p=c.type,g=this._map,r=g.__visibleRect,m=v.toScreenPoint(g.extent,
g.width,g.height,b).offset(-r.x+k[0],-r.y),r=m.x,l=m.y,s;b=[];var q,n=f&&f.rotationInfo?f.getRotationAngle(h):null,w=this._getVariable(f,"sizeInfo",!1),g=w?f.getSize(h,{sizeInfo:w,shape:c.style,resolution:g.getResolutionInMeters(),scale:g.getScale()}):null;n&&b.push(d.rotategAt(n,m));if(0!==c.xoffset||0!==c.yoffset)q=d.translate(c.xoffset,-c.yoffset),b.push(q);0!==c.angle&&b.push(d.rotategAt(c.angle,m));if("simplemarkersymbol"===p)switch(s=c.style,f=Math.round,g=null!=g?g:c.size,s){case t.STYLE_SQUARE:case t.STYLE_CROSS:case t.STYLE_X:case t.STYLE_DIAMOND:c=
isNaN(g)?16:g/2;s=this._drawPath(a,e,this._smsToPath(t,s,r,l,f(r-c),f(r+c),f(l-c),f(l+c)));break;case t.STYLE_TARGET:h=c._targetWidth/2;m=c._targetHeight/2;s=this._drawPath(a,e,this._smsToPath(t,s,r,l,f(r-h),f(r+h),f(l-m),f(l+m),c._spikeSize));break;case t.STYLE_PATH:s=this._drawPath(a,e,c.path,!0);c=s.getBoundingBox();a=this._getScaleMatrix(c,g);(1!==a.xx||1!==a.yy)&&b.push(d.scaleAt(a.xx,a.yy,m));b.push(d.translate(-(c.x+c.width/2)+r,-(c.y+c.height/2)+l));break;default:c=isNaN(g)?16:g/2,s=this._drawCircle(a,
e,{cx:r,cy:l,r:c})}else if("shieldlabelsymbol"===p)s=c.width,m=c.height,e=a.createGroup(),s=a.createImage({x:r-s/2,y:l-m/2,width:s,height:m,src:c.url}),e.add(s),null!=c.font&&(l+=0.2*c.getHeight(),a=a.createText({type:"text",text:c.text,x:r,y:l,align:"middle",decoration:c.decoration,rotated:c.rotated,kerning:c.kerning}),a.setFont(c.font),a.setFill(c.color),e.add(a)),s=e;else if("picturemarkersymbol"===p){if(null==g?(s=c.width,m=c.height):(m=g,s=m*(c.width/c.height),q&&(null!=q.dx&&(q.dx=s*(q.dx/c.width)),
null!=q.dy&&(q.dy=m*(q.dy/c.height)))),s=this._drawImage(a,e,{x:r-s/2,y:l-m/2,width:s,height:m,src:c.url}),B&&(a=s.getNode()))c=(c=this._getVariable(f,"opacityInfo",!1))?f.getOpacity(h,{opacityInfo:c}):null,null!=c?a.setAttribute("opacity",c):a.setAttribute("opacity",1)}else"textsymbol"===p&&(f=c.font,null!=g&&f&&(f=new f.constructor(f.toJson()),f.setSize(g)),s=this._drawText(a,e,{type:"text",text:c.text,x:r,y:l,align:c.getSVGAlign(),decoration:c.decoration||f&&f.decoration,rotated:c.rotated,kerning:c.kerning}),
f&&s.setFont(f),B&&(a=s.getNode(),r=c.getSVGBaseline(),c=c.getSVGBaselineShift(),a&&(a.setAttribute("dominant-baseline",r),c&&a.setAttribute("baseline-shift",c))));s.setTransform(d.multiply(b));s._wrapOffsets=k;return s},_getScaleMatrix:function(a,b){var c=a.width/a.height,d=1,e=1;isNaN(b)||(1<c?(d=b/a.width,e=b/c/a.height):(e=b/a.height,d=b*c/a.width));return{xx:d,yy:e}},_symbolizePoint:function(b,c,d,e){var k=c.type,f=c.style;if(!("shieldlabelsymbol"===k||"picturemarkersymbol"===k)){var h=c.getStroke();
c=c.getFill();var f=f===t.STYLE_X||f===t.STYLE_CROSS,g=h&&h.color,p=f?g:c;if(d){var r=this._getVariable(d,"colorInfo",!1),m=this._getVariable(d,"opacityInfo",!1);r&&(p=d.getColor(e,{colorInfo:r})||p);p&&m&&(p=this._applyOpacity(p,d,m,e));p&&(f?p!==g&&(h=h?a.mixin({},h):{},h.color=p):p!==c&&(c=p))}"textsymbol"===k?b.setFill(c):"simplemarkersymbol"===k&&b.setFill(c).setStroke(h)}},_drawMarkers:function(a,b,c,d){var e=a.geometry,k=e.points,f=a.getDojoShape()||this._div.createGroup(),h,p,g=k.length,r=
[],m=0,l,t=c?c.length:0;f.children[0]&&this._isInvalidShape(b,f.children[0])&&f.clear();for(p=0;p<g;p++){h=k[p];for(l=0;l<t;l++)r[0]=c[l],this._drawPoint(f,{x:h[0],y:h[1],spatialReference:e.spatialReference},b,f.children[m++],r,d,a)}b=f.children.length;if(g*c.length<b)for(p=b-1;p>=g*c.length;p--)f.children[p].removeShape();a._shape=f},_symbolizeMarkers:function(a,b,c){var d=a.getDojoShape().children,e,k=d.length;for(e=0;e<k;e++)this._symbolizePoint(d[e],b,c,a)},_errorHandler:function(a,b){a.message=
b?"Unable to draw graphic (geometry:"+(b.geometry?b.geometry.declaredClass:null)+", symbol:"+(b.symbol?b.symbol.declaredClass:null)+"): "+a.message:"Unable to draw graphic (null): "+a.message;this.inherited(arguments)},_rendererLimits:function(){var a,b,c;k("ff")?(a=16125,b=-32250,c=32250):E?(a=1E5,b=-1E5,c=1E5):k("chrome")&&6>k("chrome")&&(a=8150,b=-1E4,c=1E4);if(a)return{clipLimit:a,rangeMin:b,rangeMax:c,clipBBox:[-a,-a,a,a],clipSegments:[[[-a,-a],[a,-a]],[[a,-a],[a,a]],[[a,a],[-a,a]],[[-a,a],[-a,
-a]]]}}(),_clipPolyline:function(a,b){var c=this._getCorners(a,b),d=c.br,e=this._rendererLimits,k=e.rangeMin,f=e.rangeMax,h=e.clipBBox,p=e.clipSegments,e=this._isPointWithinRange,r=this._isPointWithinBBox,m=this._getClipperIntersection,l=this._getPlaneIndex;if(!e(c.tl,k,f)||!e(d,k,f)){E&&this._createSegments(a);var t=[];g.forEach(a.segments,function(a){a=a.args;var b=a.length,c=[],d;for(d=0;d<b;d+=2){var e=[a[d],a[d+1]],k=[a[d+2],a[d+3]],f=r(e,h),g=r(k,h);if(f^g){if(g=m([e,k],p))f?(d?c.push(g[1]):
c.push(e,g[1]),t.push(c),c=[]):c.push(g[1],k)}else f?d?c.push(k):c.push(e,k):(g=l(e,h),f=l(k,h),-1===g||-1===f||g===f||(e=m([e,k],p,!0),0<e.length&&(e[g]||(g=e[g[0]]?g[0]:g[1]),e[f]||(f=e[f[0]]?f[0]:f[1]),k=e[g],e=e[f],k&&c.push(k),e&&(c.push(e),t.push(c),c=[]))))}t.push(c)});a.setShape(this._getPathStringFromPaths(t))}},_clipPolygon:function(b,c){var d=this._getCorners(b,c),e=d.br,k=this._rendererLimits,f=k.clipLimit,h=k.rangeMin,p=k.rangeMax,r=k.clipBBox,m=k.clipSegments,k=this._isPointWithinRange,
l=this._isPointWithinBBox,t=this._getClipperIntersection,s=this._getPlaneIndex,q=z._pointLineDistance;if(!k(d.tl,h,p)||!k(e,h,p))E&&this._createSegments(b),d=g.map(b.segments,function(b){var c=b.args,d=c.length,e=[];b=[];var k;for(k=0;k<d;k+=2){var h=[c[k],c[k+1]],p=[c[k+2],c[k+3]];if(k===d-2){e.push(h);break}var n=l(h,r),w=l(p,r);e.push(h);if(n^w){if(w=t([h,p],m))h=w[1],h[n?"inOut":"outIn"]=!0,e.push(h),b.push([n?"INOUT":"OUTIN",e.length-1,w[0]])}else if(!n){var n=s(h,r),v=s(p,r);-1===n||-1===v||
n===v||(w=t([h,p],m,!0),0<w.length?(w[n]||(n=w[n[0]]?n[0]:n[1]),w[v]||(v=w[v[0]]?v[0]:v[1]),h=w[n],p=w[v],h&&(h.outIn=!0,e.push(h),b.push(["OUTIN",e.length-1,n])),p&&(p.inOut=!0,e.push(p),b.push(["INOUT",e.length-1,v]))):a.isArray(n)&&a.isArray(v)&&(w=n.concat(v),w.sort(),"0123"===w.join("")&&(w=[],3===n[0]+n[1]?w.push([f,-f],[-f,f]):w.push([-f,-f],[f,f]),n=q(w[0],[h,p]),h=q(w[1],[h,p]),e.push(n<h?w[0]:w[1]))))}}var u=r[0],x=r[1],B=r[2],C=r[3];g.forEach(e,function(a){a[0]<u&&(a[1]>=x&&a[1]<=C?a[0]=
u:(a[0]=u,a[1]=a[1]<x?x:C))});g.forEach(e,function(a){a[1]<x&&(a[0]>=u&&a[0]<=B?a[1]=x:(a[1]=x,a[0]=a[0]<u?u:B))});g.forEach(e,function(a){a[0]>B&&(a[1]>=x&&a[1]<=C?a[0]=B:(a[0]=B,a[1]=a[1]<x?x:C))});g.forEach(e,function(a){a[1]>C&&(a[0]>=u&&a[0]<=B?a[1]=C:(a[1]=C,a[0]=a[0]<u?u:B))});c=0;d=b.length;if(0<d){do{p=b[c];k=b[(c+1)%d];if(p[2]===k[2]&&"INOUT"===p[0]&&"OUTIN"===k[0])if(h=p[1],k=k[1],h<k)for(h+=1;h<k;h++)e[h][2]=!0;else if(h>k){for(h+=1;h<e.length;h++)e[h][2]=!0;for(h=0;h<k;h++)e[h][2]=!0}c=
(c+1)%d}while(0!==c)}d=e[0];c=e[e.length-1];d[2]&&(c[2]=!0,g.some(b,function(b){return 1===b[1]?(e.splice(e.length-1,0,a.clone(e[1])),!0):!1}));e=g.filter(e,function(a){return a[2]?!1:!0});for(c=0;c<e.length-1;c++)if(d=e[c],(k=e[c+1])&&!(d[0]!==k[0]||d[1]!==k[1]))k.outIn?d.outIn=!0:k.inOut&&(d.inOut=!0),e.splice(c+1,1);d=Math.abs;b=[];for(c=0;c<e.length-1;c++){p=e[c];h=p[0];p=p[1];n=d(h)===f;w=d(p)===f;k=e[c+1];v=k[0];k=k[1];var y=d(v)===f,A=d(k)===f;n&&A?b.push([c+1,[h,k]]):w&&y&&b.push([c+1,[v,
p]])}for(c=b.length-1;0<=c;c--)k=b[c],h=e[k[0]-1],d=e[k[0]],!h.outIn&&!h.inOut&&(!d.outIn&&!d.inOut)&&e.splice(k[0],0,k[1]);d=e[0];c=e[e.length-1];(d[0]!==c[0]||d[1]!==c[1])&&e.push(d);return e}),b.setShape(this._getPathStringFromPaths(d))},_getCorners:function(a,b){if(E){var c=this._map,d=b.getExtent(),e=d.spatialReference,k=c.toScreen(new x(d.xmin,d.ymax,e)),c=c.toScreen(new x(d.xmax,d.ymin,e));return{tl:k,br:c}}k=a.getTransformedBoundingBox();return{tl:k[0],br:k[2]}},_createSegments:function(a){a.shape.path=
a.vmlPath;a.segmented=!1;a._confirmSegmented();var b=a.segments;1<b.length&&(a.segments=g.filter(b,function(a,b,c){b=c[b+1];return"M"===a.action&&b&&"L"===b.action?(a.args=a.args.concat(b.args),!0):!1}))},_getPathStringFromPaths:function(a){E?(a=g.map(a,function(a){return"m "+g.map(a,function(a,b){return(1===b?"l ":"")+a.join(",")}).join(" ")}),a.push("e")):a=g.map(a,function(a){return"M "+g.map(a,function(a){return a.join(",")}).join(" ")});return a.join(" ")},_isPointWithinBBox:function(a,b){var c=
b[1],d=b[2],e=b[3],k=a[0],f=a[1];return k>b[0]&&k<d&&f>c&&f<e?!0:!1},_isPointWithinRange:function(a,b,c){var d=a.x;a=a.y;return d<b||a<b||d>c||a>c?!1:!0},_getClipperIntersection:function(a,b,c){var d,e=z._getLineIntersection2,k=Math.round,f={length:0};for(d=0;4>d;d++){var h=e(a,b[d]);if(h)if(h[0]=k(h[0]),h[1]=k(h[1]),c)f[d]=h,f.length++;else return[d,h]}return c?f:null},_getPlaneIndex:function(a,b){var c=a[0],d=a[1],e=b[0],k=b[1],f=b[2],h=b[3];return c<=e?d>=k&&d<=h?3:d<k?[0,3]:[2,3]:d<=k?c>=e&&c<=
f?0:c<e?[3,0]:[1,0]:c>=f?d>=k&&d<=h?1:d<k?[0,1]:[2,1]:d>=h?c>=e&&c<=f?2:c<e?[3,2]:[1,2]:-1},onGraphicAdd:function(){},onGraphicRemove:function(){},onGraphicNodeAdd:function(){},onGraphicNodeRemove:function(){},onGraphicDraw:function(){},onGraphicsClear:function(){},onRendererChange:function(){},onOpacityChange:function(){},setInfoTemplate:function(a){this.infoTemplate=a},add:function(a,b){if(a._graphicsLayer===this)return a;b||this.graphics.push(a);a._graphicsLayer=this;a._layer=this;this._updateExtent(a);
this._draw(a);if(!b)this.onGraphicAdd(a);return a},remove:function(a,b){if(!b){var c;if(-1===(c=g.indexOf(this.graphics,a)))return null;a=this.graphics.splice(c,1)[0]}a.getDojoShape()&&this._removeShape(a);a._shape=a._graphicsLayer=null;this.onGraphicRemove(a);return a},clear:function(a,b){for(var c=this.graphics;0<c.length;)this.remove(c[0]);if(!b)this.onGraphicsClear()},_setIEOpacity:function(a,b){var c=a&&a.getNode();if(c){var d=a.strokeStyle,e=c.stroke;d&&e&&(e.opacity=d.color.a*b);d=a.fillStyle;
e=c.fill;d&&e&&("tile"===e.type?m.set(c,"opacity",b):e.opacity=d.a*b)}},setOpacity:function(a,b){if(b||this.opacity!=a){var c=this._div;c&&(E?(g.forEach(this.graphics,function(b){this._setIEOpacity(b._shape,a);this._setIEOpacity(b._bgShape,a)},this),c._esriIeOpacity=a,this._bgGroup._esriIeOpacity=a):this._canvas?m.set(c.getEventSource(),"opacity",a):c.getEventSource().setAttribute("opacity",a));this.opacity=a;if(!b)this.onOpacityChange(a)}},setRenderer:function(a){this.renderer=a;this._evalSDRenderer(!0);
this.emit("renderer-change",{renderer:this._rndForScale||a})}});l=l([A,w],{declaredClass:"esri.layers.GraphicsLayer",constructor:function(){this.enableMouseEvents=a.hitch(this,this.enableMouseEvents);this.disableMouseEvents=a.hitch(this,this.disableMouseEvents);this._processEvent=a.hitch(this,this._processEvent);this._initLayer()},_initLayer:function(){this.loaded=!0;this.onLoad(this)},_setMap:function(){var a=this.inherited("_setMap",arguments);this.enableMouseEvents();return a},_unsetMap:function(){this.disableMouseEvents();
this.inherited("_unsetMap",arguments)},_processEvent:function(a){var b=this._map,c=a.target,d;a.screenPoint=new y(a.pageX-b.position.x,a.pageY-b.position.y);for(a.mapPoint=b.toMap(a.screenPoint);c&&!(d=c.e_graphic);)c=c.parentNode;if(d)return a.graphic=d,a},_onMouseOverHandler:function(a){if(this._processEvent(a))this.onMouseOver(a)},_onMouseMoveHandler:function(a){if(this._processEvent(a))this.onMouseMove(a)},_onMouseDragHandler:function(a){if(this._processEvent(a))this.onMouseDrag(a)},_onMouseOutHandler:function(a){if(this._processEvent(a))this.onMouseOut(a)},
_onMouseDownHandler:function(a){this._downGr=this._downPt=null;this._processEvent(a)&&(n.disconnect(this._onmousemove_connect),n.disconnect(this._onmousedrag_connect),this._onmousedrag_connect=n.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseDragHandler"),this._downGr=a.graphic,this._downPt=a.screenPoint.x+","+a.screenPoint.y,this.onMouseDown(a))},_onMouseUpHandler:function(a){this._upGr=this._upPt=null;this._processEvent(a)&&(n.disconnect(this._onmousedrag_connect),n.disconnect(this._onmousemove_connect),
this._onmousemove_connect=n.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseMoveHandler"),this._upGr=a.graphic,this._upPt=a.screenPoint.x+","+a.screenPoint.y,this.onMouseUp(a))},_onClickHandler:function(a){if(this._processEvent(a)){var b=this._downGr,c=this._upGr;b&&c&&(b===c&&this._downPt===this._upPt)&&(E&&(e._ieGraphic=a.graphic),this.onClick(a))}},_onDblClickHandler:function(a){if(this._processEvent(a))this.onDblClick(a)},onMouseOver:function(){},onMouseMove:function(){},onMouseDrag:function(){},
onMouseOut:function(){},onMouseDown:function(){},onMouseUp:function(){},onClick:function(){},onDblClick:function(){},enableMouseEvents:function(){if(!this._mouseEvents){var a=n.connect,b=this._div.getEventSource();D||(this._onmouseover_connect=a(b,"onmouseover",this,"_onMouseOverHandler"),this._onmousemove_connect=a(b,"onmousemove",this,"_onMouseMoveHandler"),this._onmouseout_connect=a(b,"onmouseout",this,"_onMouseOutHandler"),this._onmousedown_connect=a(b,"onmousedown",this,"_onMouseDownHandler"),
this._onmouseup_connect=a(b,"onmouseup",this,"_onMouseUpHandler"),this._onclick_connect=a(b,"onclick",this,"_onClickHandler"),this._ondblclick_connect=a(b,"ondblclick",this,"_onDblClickHandler"));this._mouseEvents=!0}},disableMouseEvents:function(){if(this._mouseEvents){var a=n.disconnect;a(this._onmouseover_connect);a(this._onmousemove_connect);a(this._onmousedrag_connect);a(this._onmouseout_connect);a(this._onmousedown_connect);a(this._onmouseup_connect);a(this._onclick_connect);a(this._ondblclick_connect);
this._mouseEvents=!1}}});l._GraphicsContainer=r;l._GraphicsLayer=A;return l})},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(l,n,a){n.switchTo(a);return n})},"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(l,n,a,g,q){var h=null;a.add("vml",function(a,f,d){d.innerHTML='\x3cv:shape adj\x3d"1"/\x3e';a="adj"in d.firstChild;d.innerHTML="";return a});return{load:function(m,
f,d){function c(){f(["dojox/gfx/"+e],function(a){l.renderer=e;h=a;d(a)})}if(h&&"force"!=m)d(h);else{var e=q.forceGfxRenderer;m=!e&&(n.isString(q.gfxRenderer)?q.gfxRenderer:"svg,vml,canvas,silverlight").split(",");for(var b,k;!e&&m.length;)switch(m.shift()){case "svg":"SVGAngle"in g.global&&(e="svg");break;case "vml":a("vml")&&(e="vml");break;case "silverlight":try{a("ie")?(b=new ActiveXObject("AgControl.AgControl"))&&b.IsVersionSupported("1.0")&&(k=!0):navigator.plugins["Silverlight Plug-In"]&&(k=
!0)}catch(s){k=!1}finally{b=null}k&&(e="silverlight");break;case "canvas":g.global.CanvasRenderingContext2D&&(e="canvas")}"canvas"===e&&!1!==q.canvasEvents&&(e="canvasWithEvents");"svg"==e&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(c):c()}}}})},"esri/layers/layer":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/Deferred dojo/_base/json dojo/has ../Evented ../kernel ../lang ../request ../deferredUtils ../urlUtils ../SpatialReference ../geometry/Extent".split(" "),
function(l,n,a,g,q,h,m,f,d,c,e,b,k,s,p){var r=l([f],{declaredClass:"esri.layers.Layer",_eventMap:{error:["error"],load:["layer"],"opacity-change":["opacity"],"update-end":["error"],"visibility-change":["visible"]},constructor:function(b,d){this._attrs={};if(b&&g.isString(b))this._url=k.urlToObject(this.url=b);else if(this.url=this._url=null,(d=d||b)&&(d.layerDefinition||d.query))d=null;this.spatialReference=new s(4326);this.initialExtent=new p(-180,-90,180,90,new s(4326));this._map=this._div=null;
this.normalization=!0;d&&(d.id&&(this.id=d.id),!1===d.visible&&(this.visible=!1),c.isDefined(d.opacity)&&(this.opacity=d.opacity),c.isDefined(d.minScale)&&this.setMinScale(d.minScale),c.isDefined(d.maxScale)&&this.setMaxScale(d.maxScale),this.attributionDataUrl=d.attributionDataUrl||"",this.hasAttributionData=!!this.attributionDataUrl,c.isDefined(d.showAttribution)&&(this.showAttribution=d.showAttribution),this.className=d.className,this.refreshInterval=d.refreshInterval||0);this._errorHandler=g.hitch(this,
this._errorHandler);this.refresh=g.hitch(this,this.refresh);if(this.managedSuspension){var e=this._setMap;this._setMap=function(b){var c=e.apply(this,arguments);this.evaluateSuspension();if(this.suspended&&!b.loaded)var d=a.connect(b,"onLoad",this,function(){a.disconnect(d);d=null;this.evaluateSuspension()});return c}}this.registerConnectEvents()},id:null,visible:!0,opacity:1,loaded:!1,loadError:null,minScale:0,maxScale:0,visibleAtMapScale:!1,suspended:!0,attributionDataUrl:"",hasAttributionData:!1,
showAttribution:!0,refreshInterval:0,_errorHandler:function(a){this.loaded||(this.loadError=a);this.onError(a)},_setMap:function(b,c,d,e){this._map=b;this._lyrZEHandle=a.connect(b,"onZoomEnd",this,this._processMapScale);if(b.loaded)this.visibleAtMapScale=this._isMapAtVisibleScale();else var k=a.connect(b,"onLoad",this,function(){a.disconnect(k);k=null;this._processMapScale()})},_unsetMap:function(b,c){a.disconnect(this._lyrZEHandle);this._toggleRT();this._map=this._lyrZEHandle=null;this._resumedOnce=
void 0;this.suspended=!0},_cleanUp:function(){this._map=this._div=null},_fireUpdateStart:function(){this.updating||(this.updating=!0,this.attr("data-updating",""),this._toggleRT(),this.onUpdateStart(),this._map&&this._map._incr())},_fireUpdateEnd:function(a,b){this.updating&&(this.updating=!1,this.attr("data-updating"),this._toggleRT(!0),this.onUpdateEnd(a,b),this._map&&this._map._decr())},_getToken:function(){var a=this._url,b=this.credential;return a&&a.query&&a.query.token||b&&b.token||void 0},
_findCredential:function(){this.credential=d.id&&this._url&&d.id.findCredential(this._url.path)},_useSSL:function(){var a=this._url,b=/^http:/i;this.url&&(this.url=this.url.replace(b,"https:"));a&&a.path&&(a.path=a.path.replace(b,"https:"))},refresh:function(){},show:function(){this.setVisibility(!0)},hide:function(){this.setVisibility(!1)},setMinScale:function(a){this.setScaleRange(a)},setMaxScale:function(a){this.setScaleRange(null,a)},setScaleRange:function(a,b){var d=c.isDefined(a),e=c.isDefined(b);
this.loaded||(this._hasMin=this._hasMin||d,this._hasMax=this._hasMax||e);var k=this.minScale,f=this.maxScale;this.minScale=(d?a:this.minScale)||0;this.maxScale=(e?b:this.maxScale)||0;if(k!==this.minScale||f!==this.maxScale)this.onScaleRangeChange(),this._processMapScale()},suspend:function(){this._suspended=!0;this.evaluateSuspension()},resume:function(){this._suspended=!1;this.evaluateSuspension()},canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&this.visibleAtMapScale&&
!this._suspended},evaluateSuspension:function(){this.canResume()?this.suspended&&this._resume():this.suspended||this._suspend()},_suspend:function(){this.suspended=!0;this.attr("data-suspended","");this._toggleRT();this.onSuspend();if(this._map)this._map.onLayerSuspend(this)},_resume:function(){this.suspended=!1;this.attr("data-suspended");var a=void 0===this._resumedOnce,b=this.className,c=this._attrs,d=this.getNode(),e;if(a){this._resumedOnce=!0;if(b&&d){var k=d.getAttribute("class")||"";RegExp("(^|\\s)"+
b+"(\\s|$)","i").test(k)||d.setAttribute("class",k+((k?" ":"")+b))}if(c&&d)for(e in c)c.hasOwnProperty(e)&&d.setAttribute(e,c[e])}this._toggleRT(!0);this.onResume({firstOccurrence:a});if(this._map)this._map.onLayerResume(this)},_processMapScale:function(){var a=this.visibleAtMapScale;this.visibleAtMapScale=this._isMapAtVisibleScale();a!==this.visibleAtMapScale&&(this.onScaleVisibilityChange(),this.evaluateSuspension())},isVisibleAtScale:function(a){return a?r.prototype._isMapAtVisibleScale.apply(this,
arguments):!1},_isMapAtVisibleScale:function(a){if(!a&&(!this._map||!this._map.loaded))return!1;a=a||this._map.getScale();var b=this.minScale,c=this.maxScale,d=!b,e=!c;!d&&a<=b&&(d=!0);!e&&a>=c&&(e=!0);return d&&e},getAttributionData:function(){var a=this.attributionDataUrl,c=new q(b._dfdCanceller);this.hasAttributionData&&a?(c._pendingDfd=e({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),c._pendingDfd.then(function(a){c.callback(a)},function(a){c.errback(a)})):(a=Error("Layer does not have attribution data"),
a.log=n.isDebug,c.errback(a));return c},getResourceInfo:function(){var a=this.resourceInfo;return g.isString(a)?h.fromJson(a):g.clone(a)},getMap:function(){return this._map},getNode:function(){return this._div},attr:function(a,b){var c=this.getNode();if("data-reference"===a&&11>m("ie"))return this;c&&(null==b?c.removeAttribute(a):c.setAttribute(a,b));this._attrs&&(null==b?delete this._attrs[a]:this._attrs[a]=b);return this},setRefreshInterval:function(a){var b=this.refreshInterval;this.refreshInterval=
a;this._toggleRT();a&&!this.updating&&!this.suspended&&this._toggleRT(!0);if(b!==a)this.onRefreshIntervalChange();return this},_toggleRT:function(a){a&&this.refreshInterval?(clearTimeout(this._refreshT),this._refreshT=setTimeout(this.refresh,6E4*this.refreshInterval)):this._refreshT&&(clearTimeout(this._refreshT),this._refreshT=null)},setNormalization:function(a){this.normalization=a},setVisibility:function(a){this.visible!==a&&(this.visible=a,this.onVisibilityChange(this.visible),this.evaluateSuspension());
this.attr("data-hidden",a?null:"")},onLoad:function(){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onRefreshIntervalChange:function(){},onError:function(){}});return r})},"esri/request":function(){define("require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr dojo/io/script dojo/io/iframe dojo/dom-construct dojo/io-query ./kernel ./config ./sniff ./lang ./urlUtils ./deferredUtils".split(" "),
function(l,n,a,g,q,h,m,f,d,c,e,b,k,s,p,r,t){function x(a){a=new h(a);return(a.host+(a.port?":"+a.port:"")).toLowerCase()}function y(k,h,l,t){var w=!1,v=!1,u;p.isDefined(h)&&(q.isObject(h)?(w=!!h.useProxy,v=!!h.usePost,u=h.crossOrigin):w=!!h);k=q.mixin({},k);k._ssl&&(k.url=k.url.replace(/^http:/i,"https:"));h=k.content;var x=k.url,y=l&&k.form,z=B;u=p.isDefined(u)?u:z.useCors;k.load=function(b){var c;b&&(b.error?(c=q.mixin(Error(),b.error),c.log=a.isDebug):"error"===b.status&&(c=q.mixin(Error(),b),
c.log=a.isDebug),c&&!p.isDefined(c.httpCode)&&(c.httpCode=c.code));return c||b};k.error=function(b,c){c&&c.xhr&&c.xhr.abort();b instanceof Error||(b=q.mixin(Error(),b));b.log=a.isDebug;z.errorHandler(b,c);return b};k._token&&(k.content=k.content||{},k.content.token=k._token);var D=0,X;h&&x&&(X=e.objectToQuery(h),D=X.length+x.length+1,s("esri-url-encodes-apostrophe")&&(D=X.replace(/'/g,"%27").length+x.length+1));k.timeout=p.isDefined(k.timeout)?k.timeout:z.timeout;k.handleAs=k.handleAs||"json";try{var W,
U,P=u&&r.canUseXhr(k.url)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(k.url),R=r.hasSameOrigin(k.url,window.location.href)||P,M=v||l||D>z.postLength?!0:!1,O=!R&&-1!==k.handleAs.indexOf("json")&&k.callbackParamName&&!l?!0:!1,S=r.getProxyRule(k.url)||z.alwaysUseProxy||w||(!O||M)&&!R?!0:!1;l&&!s("esri-file-upload")&&(!S&&P)&&(S=!0);if(S)if(W=r.getProxyUrl(x,u),U=W.path,W._xo&&(P=!0),!M&&U.length+1+D>z.postLength&&(M=!0),k.url=U+"?"+x,M)k.content=q.mixin(W.query||{},h);else{var da=e.objectToQuery(q.mixin(W.query||
{},h));da&&(k.url+="?"+da);k.content=null}if(O&&!M)return!p.isDefined(k.isAsync)&&4>s("ff")&&(k.isAsync=!0),f.get(A?A(k):k);var V=k.headers;if(P&&(!V||!V.hasOwnProperty("X-Requested-With")))V=k.headers=V||{},V["X-Requested-With"]=null;if(l){var Z=k.callbackParamName||"callback.html",aa=k.callbackElementName||"textarea",ba,T,$,ca,ea=y.elements?y.elements.length:0,fa;if(h=k.content)for(ba in h)if($=h[ba],p.isDefined($)){T=null;for(ca=0;ca<ea;ca++)if(fa=y.elements[ca],fa.name===ba){T=fa;break}T?T.value=
$:t?y.append(ba,$):y.appendChild(c.create("input",{type:"hidden",name:ba,value:$}))}if(s("esri-file-upload"))n.forEach(y.elements,function(a){a.name===Z&&y.removeChild(a)}),k.contentType=!1,k.postData=t?y:new FormData(y),delete k.form;else{y.enctype="multipart/form-data";9>s("ie")&&(y.encoding="multipart/form-data");y.method="post";n.some(y.elements,function(a){return a.name===Z})||y.appendChild(c.create("input",{type:"hidden",name:Z,value:aa}));if(-1!==x.toLowerCase().indexOf("addattachment")||-1!==
x.toLowerCase().indexOf("updateattachment"))k.url=x+(-1===x.indexOf("?")?"?":"\x26")+Z+"\x3d"+aa,S&&(k.url=U+"?"+k.url);delete k.content}}if(P&&!k.hasOwnProperty("withCredentials")&&"with-credentials"===B.useCors){t=S?U:x;var ja=r.canUseXhr(t,!0),ga=-1<ja?B.corsEnabledServers[ja]:null;if(ga&&ga.hasOwnProperty("withCredentials"))ga.withCredentials&&(k.withCredentials=!0);else if(b.id){var ka=b.id.findServerInfo(t);ka&&ka.webTierAuth&&(k.withCredentials=!0)}}k=A?A(k):k;if(M){if(l&&!s("esri-file-upload"))return d.send(k);
!S&&s("safari")&&(k.url+=(-1===k.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+E++);return m.post(k)}return m.get(k)}catch(ha){return l=new g,l.errback(k.error(ha)),l}}function u(a){var b=B.corsStatus,c=r.canUseXhr(a,!0);-1<c&&B.corsEnabledServers.splice(c,1);b[x(a)]=1;return c}function z(a){var b=B.corsStatus;if(B.corsDetection&&B.useCors)try{var c=x(a);s("esri-cors")&&a&&(-1!==a.toLowerCase().indexOf("/rest/services")&&!r.hasSameOrigin(a,window.location.href)&&!r.canUseXhr(a)&&!b[c])&&
(b[c]=-1,m.get({url:a.substring(0,a.toLowerCase().indexOf("/rest/")+6)+"info",content:{f:"json"},failOk:!0,handleAs:"json",headers:{"X-Requested-With":null}}).then(function(d){d?(b[c]=2,r.canUseXhr(a)||B.corsEnabledServers.push(c)):b[c]=1},function(a){b[c]=1}))}catch(d){}}function v(c,d){function e(k){k._pendingDfd=y(c,d,Y,L);if(!k._pendingDfd){k.ioArgs=k._pendingDfd&&k._pendingDfd.ioArgs;var f=Error("Deferred object is missing");f.log=a.isDebug;c._usrDfd=null;k.errback(f);k._pendingDfd=null;return k}k._pendingDfd.addCallback(function(a){k.ioArgs=
k._pendingDfd&&k._pendingDfd.ioArgs;c._usrDfd=null;k.callback(a);k._pendingDfd=null}).addErrback(function(a){var e,f,g;a&&(e=a.code,f=a.subcode,g=(g=a.messageCode)&&g.toUpperCase());if(a&&403==e&&(4==f||a.message&&-1<a.message.toLowerCase().indexOf("ssl")&&-1===a.message.toLowerCase().indexOf("permission"))){if(!c._ssl){c._ssl=c._sslFromServer=!0;c._usrDfd=k;v(c,d);return}}else if(a&&415==a.status){if(u(c.url),!c._err415){c._err415=1;c._usrDfd=k;v(c,d);return}}else if(b.id&&-1!==n.indexOf(b.id._errorCodes,
e)&&!b.id._isPublic(c.url)&&!h&&(403!=e||-1===n.indexOf(D,g)&&(!p.isDefined(f)||2==f&&c._token))){k._pendingDfd=b.id.getCredential(c.url,{token:c._token,error:a});k._pendingDfd.addCallback(function(a){c._token=a.token;c._usrDfd=k;c._credential=a;c._ssl=c._sslFromServer||a.ssl;v(c,d)}).addErrback(function(a){c._usrDfd=null;k.errback(a);k._pendingDfd=null});return}k.ioArgs=k._pendingDfd&&k._pendingDfd.ioArgs;c._usrDfd=null;k.errback(a);k._pendingDfd=null})}c.url=r.fixUrl(c.url);"file:"!==window.location.protocol&&
(c.url=r.getAbsoluteUrl(c.url));d=d||{};var k,f=c.form,h=d.disableIdentityLookup,q=d._preLookup,A=!1;if(s("esri-workers")&&!1!==B.useWorkers)if(!0===d.useWorkers||!0===B.useWorkers)A=!0;else if(d.workerOptions){var E=d.workerOptions;if(E.callback||E.worker&&E.worker.worker instanceof Worker)A=!0}var L=f&&f.append,Y=f&&(f.elements?n.some(f.elements,function(a){return"file"===a.type}):L),X=-1!==c.url.toLowerCase().indexOf("token\x3d")||c.content&&c.content.token||Y&&n.some(f.elements,function(a){return"token"===
a.name})?1:0;z(c.url);if(c._usrDfd)k=c._usrDfd;else{k=new g(t._dfdCanceller);k.addCallback(function(a){if(/\/sharing\/rest\/accounts\/self/i.test(c.url)&&!X&&!c._token&&a.user&&a.user.username){B.webTierAuthServers.push(x(c.url));a=B.corsEnabledServers;var d=r.canUseXhr(c.url,!0),e={host:x(c.url),withCredentials:!0};if(-1===d)a.push(e);else{var k=a[d];"object"===typeof k?k.withCredentials=!0:a.splice(d,1,e)}}if(a=c._credential)if(d=(d=b.id.findServerInfo(a.server))&&d.owningSystemUrl)d=d.replace(/\/?$/,
"/sharing"),(a=b.id.findCredential(d,a.userId))&&-1===b.id._getIdenticalSvcIdx(d,a)&&a.resources.splice(0,0,d)});k.addBoth(function(a){delete c._credential;if(a&&(!s("ie")||!a.nodeType))a._ssl=c._ssl});var W=c.load,U=c.error;W&&k.addCallback(function(a){var b=k._pendingDfd,b=b&&b.ioArgs;return W.call(b&&b.args,a,b)});U&&k.addErrback(function(a){var b=k._pendingDfd,b=b&&b.ioArgs;return U.call(b&&b.args,a,b)})}if(b.id&&!X&&!c._token&&!b.id._isPublic(c.url)&&(!h||q))if(f=b.id.findCredential(c.url))c._token=
f.token,c._ssl=f.ssl;A?d.workerOptions&&d.workerOptions.worker?(w||(w=m),m=d.workerOptions.worker,e(k)):l(["./workers/RequestClient"],function(a){w||(w=m);if(d.workerOptions){var b=d.workerOptions;m=a.getClient(b.callback,b.cbFunction)}else m=a.getClient();e(k)}):(w&&(m=w,w=null),e(k));return k}var w=null,A,B=k.defaults.io,D=["COM_0056","COM_0057"],E=0;v._request=y;v._disableCors=u;v._detectCors=z;v.setRequestPreCallback=function(a){A=a};return v})},"dojo/_base/url":function(){define(["./kernel"],
function(l){var n=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,a=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,g=function(){for(var l=arguments,h=[l[0]],m=1;m<l.length;m++)if(l[m]){var f=new g(l[m]+""),h=new g(h[0]+"");if(""==f.path&&!f.scheme&&!f.authority&&!f.query)null!=f.fragment&&(h.fragment=f.fragment),f=h;else if(!f.scheme&&(f.scheme=h.scheme,!f.authority&&(f.authority=h.authority,"/"!=f.path.charAt(0)))){for(var h=(h.path.substring(0,h.path.lastIndexOf("/")+
1)+f.path).split("/"),d=0;d<h.length;d++)"."==h[d]?d==h.length-1?h[d]="":(h.splice(d,1),d--):0<d&&(!(1==d&&""==h[0])&&".."==h[d]&&".."!=h[d-1])&&(d==h.length-1?(h.splice(d,1),h[d-1]=""):(h.splice(d-1,2),d-=2));f.path=h.join("/")}h=[];f.scheme&&h.push(f.scheme,":");f.authority&&h.push("//",f.authority);h.push(f.path);f.query&&h.push("?",f.query);f.fragment&&h.push("#",f.fragment)}this.uri=h.join("");l=this.uri.match(n);this.scheme=l[2]||(l[1]?"":null);this.authority=l[4]||(l[3]?"":null);this.path=
l[5];this.query=l[7]||(l[6]?"":null);this.fragment=l[9]||(l[8]?"":null);null!=this.authority&&(l=this.authority.match(a),this.user=l[3]||null,this.password=l[4]||null,this.host=l[6]||l[7],this.port=l[9]||null)};g.prototype.toString=function(){return this.uri};return l._Url=g})},"dojo/io/script":function(){define("../_base/connect ../_base/kernel ../_base/lang ../sniff ../_base/window ../_base/xhr ../dom ../dom-construct ../request/script ../aspect".split(" "),function(l,n,a,g,q,h,m,f,d,c){n.deprecated("dojo/io/script",
"Use dojo/request/script.","2.0");var e={get:function(a){var k,f=this._makeScriptDeferred(a,function(a){k&&k.cancel()}),p=f.ioArgs;h._ioAddQueryToUrl(p);h._ioNotifyStart(f);k=d.get(p.url,{timeout:a.timeout,jsonp:p.jsonp,checkString:a.checkString,ioArgs:p,frameDoc:a.frameDoc,canAttach:function(a){p.requestId=a.id;p.scriptId=a.scriptId;p.canDelete=a.canDelete;return e._canAttach(p)}},!0);c.around(k,"isValid",function(a){return function(b){e._validCheck(f);return a.call(this,b)}});k.then(function(){f.resolve(f)}).otherwise(function(a){f.ioArgs.error=
a;f.reject(a)});return f},attach:d._attach,remove:d._remove,_makeScriptDeferred:function(a,c){var f=h._ioSetArgs(a,c||this._deferredCancel,this._deferredOk,this._deferredError),p=f.ioArgs;p.id=n._scopeName+"IoScript"+this._counter++;p.canDelete=!1;p.jsonp=a.callbackParamName||a.jsonp;p.jsonp&&(p.query=p.query||"",0<p.query.length&&(p.query+="\x26"),p.query+=p.jsonp+"\x3d"+(a.frameDoc?"parent.":"")+n._scopeName+".io.script.jsonp_"+p.id+"._jsonpCallback",p.frameDoc=a.frameDoc,p.canDelete=!0,f._jsonpCallback=
this._jsonpCallback,this["jsonp_"+p.id]=f);f.addBoth(function(a){p.canDelete&&(a instanceof Error?e["jsonp_"+p.id]._jsonpCallback=function(){delete e["jsonp_"+p.id];if(p.requestId)n.global[d._callbacksProperty][p.requestId]()}:e._addDeadScript(p))});return f},_deferredCancel:function(a){a.canceled=!0},_deferredOk:function(a){a=a.ioArgs;return a.json||a.scriptLoaded||a},_deferredError:function(a,c){return a},_deadScripts:[],_counter:1,_addDeadScript:function(a){e._deadScripts.push({id:a.id,frameDoc:a.frameDoc});
a.frameDoc=null},_validCheck:function(a){if((a=e._deadScripts)&&0<a.length){for(var c=0;c<a.length;c++)e.remove(a[c].id,a[c].frameDoc),delete e["jsonp_"+a[c].id],a[c].frameDoc=null;e._deadScripts=[]}return!0},_ioCheck:function(a){a=a.ioArgs;return a.json||a.scriptLoaded&&!a.args.checkString?!0:(a=a.args.checkString)&&eval("typeof("+a+") !\x3d 'undefined'")},_resHandle:function(a){e._ioCheck(a)?a.callback(a):a.errback(Error("inconceivable dojo.io.script._resHandle error"))},_canAttach:function(){return!0},
_jsonpCallback:function(a){this.ioArgs.json=a;if(this.ioArgs.requestId)n.global[d._callbacksProperty][this.ioArgs.requestId](a)}};a.setObject("dojo.io.script",e);return e})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),function(l,n,a,g,q,h,m,f,d,c,e){function b(a,b){a.canDelete&&t._remove(a.id,b.options.frameDoc,!0)}function k(a){w&&w.length&&(q.forEach(w,function(a){t._remove(a.id,
a.frameDoc);a.frameDoc=null}),w=[]);return a.options.jsonp?!a.data:!0}function s(a){return!!this.scriptLoaded}function p(a){return(a=a.options.checkString)&&eval("typeof("+a+') !\x3d\x3d "undefined"')}function r(a,b){if(this.canDelete){var c=this.response.options;w.push({id:this.id,frameDoc:c.ioArgs?c.ioArgs.frameDoc:c.frameDoc});c.ioArgs&&(c.ioArgs.frameDoc=null);c.frameDoc=null}b?this.reject(b):this.resolve(a)}function t(c,d,e){var f=a.parseArgs(c,a.deepCopy({},d));c=f.url;d=f.options;var g=a.deferred(f,
b,k,d.jsonp?null:d.checkString?p:s,r);h.mixin(g,{id:x+y++,canDelete:!1});d.jsonp&&(RegExp("[?\x26]"+d.jsonp+"\x3d").test(c)||(c+=(~c.indexOf("?")?"\x26":"?")+d.jsonp+"\x3d"+(d.frameDoc?"parent.":"")+x+"_callbacks."+g.id),g.canDelete=!0,v[g.id]=function(a){f.data=a;g.handleResponse(f)});a.notify&&a.notify.emit("send",f,g.promise.cancel);if(!d.canAttach||d.canAttach(g)){var l=t._attach(g.id,c,d.frameDoc);if(!d.jsonp&&!d.checkString)var q=m(l,u,function(a){if("load"===a.type||z.test(l.readyState))q.remove(),
g.scriptLoaded=a})}n(g);return e?g:g.promise}c.add("script-readystatechange",function(a,b){return"undefined"!==typeof b.createElement("script").onreadystatechange&&("undefined"===typeof a.opera||"[object Opera]"!==a.opera.toString())});var x=l.id.replace(/[\/\.\-]/g,"_"),y=0,u=c("script-readystatechange")?"readystatechange":"load",z=/complete|loaded/,v=g.global[x+"_callbacks"]={},w=[];t.get=t;t._attach=function(a,b,c){c=c||e.doc;var d=c.createElement("script");d.type="text/javascript";d.src=b;d.id=
a;d.async=!0;d.charset="utf-8";return c.getElementsByTagName("head")[0].appendChild(d)};t._remove=function(a,b,c){d.destroy(f.byId(a,b));v[a]&&(c?v[a]=function(){delete v[a]}:delete v[a])};t._callbacksProperty=x+"_callbacks";return t})},"dojo/io/iframe":function(){define("../_base/config ../_base/json ../_base/kernel ../_base/lang ../_base/xhr ../sniff ../_base/window ../dom ../dom-construct ../query require ../aspect ../request/iframe".split(" "),function(l,n,a,g,q,h,m,f,d,c,e,b,k){a.deprecated("dojo/io/iframe",
"Use dojo/request/iframe.","2.0");h=k._iframeName;h=h.substring(0,h.lastIndexOf("_"));var s=g.delegate(k,{create:function(){return s._frame=k.create.apply(k,arguments)},get:null,post:null,send:function(c){var d,e=q._ioSetArgs(c,function(a){d&&d.cancel()},function(b){var c=null;b=b.ioArgs;try{var e=b.handleAs;"xml"===e||"html"===e?c=d.response.data:(c=d.response.text,"json"===e?c=n.fromJson(c):"javascript"===e&&(c=a.eval(c)))}catch(k){c=k}return c},function(a,b){b.ioArgs._hasError=!0;return a}),h=
e.ioArgs,g="GET",m=f.byId(c.form);c.method&&("POST"===c.method.toUpperCase()&&m)&&(g="POST");c={method:g,handleAs:"json"===c.handleAs||"javascript"===c.handleAs?"text":c.handleAs,form:c.form,query:m?null:c.content,data:m?c.content:null,timeout:c.timeout,ioArgs:h};c.method&&(c.method=c.method.toUpperCase());if(l.ioPublish&&a.publish&&!1!==h.args.ioPublish)var s=b.after(k,"_notifyStart",function(a){a.options.ioArgs===h&&(s.remove(),q._ioNotifyStart(e))},!0);d=k(h.url,c,!0);h._callNext=d._callNext;d.then(function(){e.resolve(e)}).otherwise(function(a){e.ioArgs.error=
a;e.reject(a)});return e},_iframeOnload:m.global[h+"_onload"]});g.setObject("dojo.io.iframe",s);return s})},"dojo/query":function(){define("./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "),function(l,n,a,g,q,h,m,f){function d(b,c){var d=function(d,e){if("string"==typeof e&&(e=a.byId(e),!e))return new c([]);var k="string"==typeof d?b(d,e):d?d.end&&d.on?d:[d]:[];return k.end&&k.on?k:new c(k)};d.matches=b.match||function(a,b,c){return 0<
d.filter([a],b,c).length};d.filter=b.filter||function(a,b,c){return d(b,c).filter(function(b){return-1<q.indexOf(a,b)})};if("function"!=typeof b){var e=b.search;b=function(a,b){return e(b||document,a)}}return d}n.add("array-extensible",function(){return 1==h.delegate([],{length:1}).length&&!n("bug-for-in-skips-shadowed")});var c=Array.prototype,e=c.slice,b=c.concat,k=q.forEach,s=function(a,b,c){b=[0].concat(e.call(b,0));c=c||l.global;return function(d){b[0]=d;return a.apply(c,b)}},p=function(a){var b=
this instanceof r&&n("array-extensible");"number"==typeof a&&(a=Array(a));var c=a&&"length"in a?a:arguments;if(b||!c.sort){for(var d=b?this:[],e=d.length=c.length,k=0;k<e;k++)d[k]=c[k];if(b)return d;c=d}h._mixin(c,t);c._NodeListCtor=function(a){return r(a)};return c},r=p,t=r.prototype=n("array-extensible")?[]:{};r._wrap=t._wrap=function(a,b,c){a=new (c||this._NodeListCtor||r)(a);return b?a._stash(b):a};r._adaptAsMap=function(a,b){return function(){return this.map(s(a,arguments,b))}};r._adaptAsForEach=
function(a,b){return function(){this.forEach(s(a,arguments,b));return this}};r._adaptAsFilter=function(a,b){return function(){return this.filter(s(a,arguments,b))}};r._adaptWithCondition=function(a,b,c){return function(){var d=arguments,e=s(a,d,c);if(b.call(c||l.global,d))return this.map(e);this.forEach(e);return this}};k(["slice","splice"],function(a){var b=c[a];t[a]=function(){return this._wrap(b.apply(this,arguments),"slice"==a?this:null)}});k(["indexOf","lastIndexOf","every","some"],function(a){var b=
q[a];t[a]=function(){return b.apply(l,[this].concat(e.call(arguments,0)))}});h.extend(p,{constructor:r,_NodeListCtor:r,toString:function(){return this.join(",")},_stash:function(a){this._parent=a;return this},on:function(a,b){var c=this.map(function(c){return g(c,a,b)});c.remove=function(){for(var a=0;a<c.length;a++)c[a].remove()};return c},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(a){var c=e.call(this,0),d=q.map(arguments,function(a){return e.call(a,
0)});return this._wrap(b.apply(c,d),this)},map:function(a,b){return this._wrap(q.map(this,a,b),this)},forEach:function(a,b){k(this,a,b);return this},filter:function(a){var b=arguments,c=this,d=0;if("string"==typeof a){c=x._filterResult(this,b[0]);if(1==b.length)return c._stash(this);d=1}return this._wrap(q.filter(c,b[d],b[d+1]),this)},instantiate:function(a,b){var c=h.isFunction(a)?a:h.getObject(a);b=b||{};return this.forEach(function(a){new c(b,a)})},at:function(){var a=new this._NodeListCtor(0);
k(arguments,function(b){0>b&&(b=this.length+b);this[b]&&a.push(this[b])},this);return a._stash(this)}});var x=d(f,p);l.query=d(f,function(a){return p(a)});x.load=function(a,b,c){m.load(a,b,function(a){c(d(a,p))})};l._filterQueryResult=x._filterResult=function(a,b,c){return new p(x.filter(a,b,c))};l.NodeList=x.NodeList=p;return x})},"dojo/selector/acme":function(){define(["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(l,n,a,g,q){var h=g.trim,m=a.forEach,f="BackCompat"==
q.doc.compatMode,d=!1,c=function(){return!0},e=function(a){a=0<="\x3e~+".indexOf(a.slice(-1))?a+" * ":a+" ";for(var b=function(b,c){return h(a.slice(b,c))},c=[],e=-1,k=-1,f=-1,g=-1,p=-1,m=-1,r=-1,l,s="",t="",q,n=0,w=a.length,v=null,x=null,u=function(){0<=m&&(v.id=b(m,n).replace(/\\/g,""),m=-1);if(0<=r){var a=r==n?null:b(r,n);v[0>"\x3e~+".indexOf(a)?"tag":"oper"]=a;r=-1}0<=p&&(v.classes.push(b(p+1,n).replace(/\\/g,"")),p=-1)};s=t,t=a.charAt(n),n<w;n++)if("\\"!=s)if(v||(q=n,v={query:null,pseudos:[],
attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return d?this.otag:this.tag}},r=n),l)t==l&&(l=null);else if("'"==t||'"'==t)l=t;else if(0<=e)if("]"==t){x.attr?x.matchFor=b(f||e+1,n):x.attr=b(e+1,n);if((e=x.matchFor)&&('"'==e.charAt(0)||"'"==e.charAt(0)))x.matchFor=e.slice(1,-1);x.matchFor&&(x.matchFor=x.matchFor.replace(/\\/g,""));v.attrs.push(x);x=null;e=f=-1}else"\x3d"==t&&(f=0<="|~^$*".indexOf(s)?s:"",x.type=f+t,x.attr=b(e+1,n-f.length),f=n+1);else 0<=k?")"==t&&(0<=g&&(x.value=
b(k+1,n)),g=k=-1):"#"==t?(u(),m=n+1):"."==t?(u(),p=n):":"==t?(u(),g=n):"["==t?(u(),e=n,x={}):"("==t?(0<=g&&(x={name:b(g+1,n),value:null},v.pseudos.push(x)),k=n):" "==t&&s!=t&&(u(),0<=g&&v.pseudos.push({name:b(g+1,n)}),v.loops=v.pseudos.length||v.attrs.length||v.classes.length,v.oquery=v.query=b(q,n),v.otag=v.tag=v.oper?null:v.tag||"*",v.tag&&(v.tag=v.tag.toUpperCase()),c.length&&c[c.length-1].oper&&(v.infixOper=c.pop(),v.query=v.infixOper.query+" "+v.query),c.push(v),v=null);return c},b=function(a,
b){return!a?b:!b?a:function(){return a.apply(window,arguments)&&b.apply(window,arguments)}},k=function(a,b){var c=b||[];a&&c.push(a);return c},s=function(a){return 1==a.nodeType},p=function(a,b){return!a?"":"class"==b?a.className||"":"for"==b?a.htmlFor||"":"style"==b?a.style.cssText||"":(d?a.getAttribute(b):a.getAttribute(b,2))||""},r={"*\x3d":function(a,b){return function(c){return 0<=p(c,a).indexOf(b)}},"^\x3d":function(a,b){return function(c){return 0==p(c,a).indexOf(b)}},"$\x3d":function(a,b){return function(c){c=
" "+p(c,a);var d=c.lastIndexOf(b);return-1<d&&d==c.length-b.length}},"~\x3d":function(a,b){var c=" "+b+" ";return function(b){return 0<=(" "+p(b,a)+" ").indexOf(c)}},"|\x3d":function(a,b){var c=b+"-";return function(d){d=p(d,a);return d==b||0==d.indexOf(c)}},"\x3d":function(a,b){return function(c){return p(c,a)==b}}},t="undefined"==typeof q.doc.firstChild.nextElementSibling,x=!t?"nextElementSibling":"nextSibling",y=!t?"previousElementSibling":"previousSibling",u=t?s:c,z=function(a){for(;a=a[y];)if(u(a))return!1;
return!0},v=function(a){for(;a=a[x];)if(u(a))return!1;return!0},w=function(a){var b=a.parentNode,b=7!=b.nodeType?b:b.nextSibling,c=0,d=b.children||b.childNodes,e=a._i||a.getAttribute("_i")||-1,k=b._l||("undefined"!==typeof b.getAttribute?b.getAttribute("_l"):-1);if(!d)return-1;d=d.length;if(k==d&&0<=e&&0<=k)return e;n("ie")&&"undefined"!==typeof b.setAttribute?b.setAttribute("_l",d):b._l=d;e=-1;for(b=b.firstElementChild||b.firstChild;b;b=b[x])u(b)&&(n("ie")?b.setAttribute("_i",++c):b._i=++c,a===b&&
(e=c));return e},A=function(a){return!(w(a)%2)},B=function(a){return w(a)%2},D={checked:function(a,b){return function(a){return!!("checked"in a?a.checked:a.selected)}},disabled:function(a,b){return function(a){return a.disabled}},enabled:function(a,b){return function(a){return!a.disabled}},"first-child":function(){return z},"last-child":function(){return v},"only-child":function(a,b){return function(a){return z(a)&&v(a)}},empty:function(a,b){return function(a){var b=a.childNodes;for(a=a.childNodes.length-
1;0<=a;a--){var c=b[a].nodeType;if(1===c||3==c)return!1}return!0}},contains:function(a,b){var c=b.charAt(0);if('"'==c||"'"==c)b=b.slice(1,-1);return function(a){return 0<=a.innerHTML.indexOf(b)}},not:function(a,b){var c=e(b)[0],d={el:1};"*"!=c.tag&&(d.tag=1);c.classes.length||(d.classes=1);var k=C(c,d);return function(a){return!k(a)}},"nth-child":function(a,b){var c=parseInt;if("odd"==b)return B;if("even"==b)return A;if(-1!=b.indexOf("n")){var d=b.split("n",2),e=d[0]?"-"==d[0]?-1:c(d[0]):1,k=d[1]?
c(d[1]):0,f=0,h=-1;0<e?0>k?k=k%e&&e+k%e:0<k&&(k>=e&&(f=k-k%e),k%=e):0>e&&(e*=-1,0<k&&(h=k,k%=e));if(0<e)return function(a){a=w(a);return a>=f&&(0>h||a<=h)&&a%e==k};b=k}var g=c(b);return function(a){return w(a)==g}}},E=9>n("ie")||9==n("ie")&&n("quirks")?function(a){var b=a.toLowerCase();"class"==b&&(a="className");return function(c){return d?c.getAttribute(a):c[a]||c[b]}}:function(a){return function(b){return b&&b.getAttribute&&b.hasAttribute(a)}},C=function(a,e){if(!a)return c;e=e||{};var k=null;
"el"in e||(k=b(k,s));"tag"in e||"*"!=a.tag&&(k=b(k,function(b){return b&&(d?b.tagName:b.tagName.toUpperCase())==a.getTag()}));"classes"in e||m(a.classes,function(a,c,d){var e=RegExp("(?:^|\\s)"+a+"(?:\\s|$)");k=b(k,function(a){return e.test(a.className)});k.count=c});"pseudos"in e||m(a.pseudos,function(a){var c=a.name;D[c]&&(k=b(k,D[c](c,a.value)))});"attrs"in e||m(a.attrs,function(a){var c,d=a.attr;a.type&&r[a.type]?c=r[a.type](d,a.matchFor):d.length&&(c=E(d));c&&(k=b(k,c))});"id"in e||a.id&&(k=
b(k,function(b){return!!b&&b.id==a.id}));k||"default"in e||(k=c);return k},F=function(a){return function(b,c,d){for(;b=b[x];)if(!t||s(b)){(!d||S(b,d))&&a(b)&&c.push(b);break}return c}},K=function(a){return function(b,c,d){for(b=b[x];b;){if(u(b)){if(d&&!S(b,d))break;a(b)&&c.push(b)}b=b[x]}return c}},I=function(a){a=a||c;return function(b,c,d){for(var e=0,k=b.children||b.childNodes;b=k[e++];)u(b)&&((!d||S(b,d))&&a(b,e))&&c.push(b);return c}},G={},J=function(a){var b=G[a.query];if(b)return b;var d=a.infixOper,
d=d?d.oper:"",e=C(a,{el:1}),h="*"==a.tag,g=q.doc.getElementsByClassName;if(d)g={el:1},h&&(g.tag=1),e=C(a,g),"+"==d?b=F(e):"~"==d?b=K(e):"\x3e"==d&&(b=I(e));else if(a.id)e=!a.loops&&h?c:C(a,{el:1,id:1}),b=function(b,c){var d=l.byId(a.id,b.ownerDocument||b);if(d&&e(d)){if(9==b.nodeType)return k(d,c);for(var f=d.parentNode;f&&f!=b;)f=f.parentNode;if(f)return k(d,c)}};else if(g&&/\{\s*\[native code\]\s*\}/.test(String(g))&&a.classes.length&&!f)var e=C(a,{el:1,classes:1,id:1}),p=a.classes.join(" "),b=
function(a,b,c){b=k(0,b);for(var d,f=0,h=a.getElementsByClassName(p);d=h[f++];)e(d,a)&&S(d,c)&&b.push(d);return b};else!h&&!a.loops?b=function(b,c,d){c=k(0,c);for(var e=0,f=a.getTag(),f=f?b.getElementsByTagName(f):[];b=f[e++];)S(b,d)&&c.push(b);return c}:(e=C(a,{el:1,tag:1,id:1}),b=function(b,c,d){c=k(0,c);for(var f,h=0,g=(f=a.getTag())?b.getElementsByTagName(f):[];f=g[h++];)e(f,b)&&S(f,d)&&c.push(f);return c});return G[a.query]=b},H={},N={},Q=function(a){var b=e(h(a));if(1==b.length){var c=J(b[0]);
return function(a){if(a=c(a,[]))a.nozip=!0;return a}}return function(a){a=k(a);for(var c,d,e=b.length,f,h,g=0;g<e;g++){h=[];c=b[g];d=a.length-1;0<d&&(f={},h.nozip=!0);d=J(c);for(var p=0;c=a[p];p++)d(c,h,f);if(!h.length)break;a=h}return h}},L=n("ie")?"commentStrip":"nozip",Y=!!q.doc.querySelectorAll,X=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,W=function(a,b,c,d){return c?(b?b+" ":"")+c+(d?" "+d:""):a},U=/([^[]*)([^\]]*])?/g,P=function(a,b,c){return b.replace(X,W)+(c||"")},R=function(a,b){a=a.replace(U,
P);if(Y){var c=N[a];if(c&&!b)return c}if(c=H[a])return c;var c=a.charAt(0),d=-1==a.indexOf(" ");0<=a.indexOf("#")&&d&&(b=!0);if(Y&&!b&&-1=="\x3e~+".indexOf(c)&&(!n("ie")||-1==a.indexOf(":"))&&!(f&&0<=a.indexOf("."))&&-1==a.indexOf(":contains")&&-1==a.indexOf(":checked")&&-1==a.indexOf("|\x3d")){var e=0<="\x3e~+".indexOf(a.charAt(a.length-1))?a+" *":a;return N[a]=function(b){try{if(!(9==b.nodeType||d))throw"";var c=b.querySelectorAll(e);c[L]=!0;return c}catch(k){return R(a,!0)(b)}}}var k=a.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);
return H[a]=2>k.length?Q(a):function(a){for(var b=0,c=[],d;d=k[b++];)c=c.concat(Q(d)(a));return c}},M=0,O=n("ie")?function(a){return d?a.getAttribute("_uid")||a.setAttribute("_uid",++M)||M:a.uniqueID}:function(a){return a._uid||(a._uid=++M)},S=function(a,b){if(!b)return 1;var c=O(a);return!b[c]?b[c]=1:0},da=function(a){if(a&&a.nozip)return a;if(!a||!a.length)return[];if(2>a.length)return[a[0]];var b=[];M++;var c,e;if(n("ie")&&d){var k=M+"";for(c=0;c<a.length;c++)if((e=a[c])&&e.getAttribute("_zipIdx")!=
k)b.push(e),e.setAttribute("_zipIdx",k)}else if(n("ie")&&a.commentStrip)try{for(c=0;c<a.length;c++)(e=a[c])&&s(e)&&b.push(e)}catch(f){}else for(c=0;c<a.length;c++)if((e=a[c])&&e._zipIdx!=M)b.push(e),e._zipIdx=M;return b},V=function(a,b){b=b||q.doc;d="div"===(b.ownerDocument||b).createElement("div").tagName;var c=R(a)(b);return c&&c.nozip?c:da(c)};V.filter=function(b,c,d){for(var k=[],f=e(c),f=1==f.length&&!/[^\w#\.]/.test(c)?C(f[0]):function(b){return-1!=a.indexOf(V(c,l.byId(d)),b)},h=0,g;g=b[h];h++)f(g)&&
k.push(g);return k};return V})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom".split(" "),function(l,n,a,g,q,h,m,f,d,c,e,b){function k(a){return!this.isFulfilled()}function s(a){return!!this._finished}function p(a,b){if(!b)try{var c=a.options,d=t.doc(t._frame),e=c.handleAs;if("html"!==e){if("xml"===e)if("html"===d.documentElement.tagName.toLowerCase()){f("a",d.documentElement).orphan();
var k=d.documentElement.innerText,k=k.replace(/>\s+</g,"\x3e\x3c");a.text=h.trim(k)}else a.data=d;else a.text=d.getElementsByTagName("textarea")[0].value;q(a)}else a.data=d}catch(g){b=g}b?this.reject(b):this._finished?this.resolve(a):this.reject(Error("Invalid dojo/request/iframe request state"))}function r(a){this._callNext()}function t(b,c,d){var e=g.parseArgs(b,g.deepCreate(u,c),!0);b=e.url;c=e.options;if("GET"!==c.method&&"POST"!==c.method)throw Error(c.method+" not supported by dojo/request/iframe");
t._frame||(t._frame=t.create(t._iframeName,y+"();"));b=g.deferred(e,null,k,s,p,r);b._callNext=function(){this._calledNext||(this._calledNext=!0,t._currentDfd=null,t._fireNextRequest())};b._legacy=d;t._dfdQueue.push(b);t._fireNextRequest();a(b);return d?b:b.promise}var x=l.id.replace(/[\/\.\-]/g,"_"),y=x+"_onload";b.global[y]||(b.global[y]=function(){var a=t._currentDfd;if(a){var b=c.byId(a.response.options.form)||a._tmpForm;if(b){for(var d=a._contentToClean,k=0;k<d.length;k++)for(var f=d[k],h=0;h<
b.childNodes.length;h++){var g=b.childNodes[h];if(g.name===f){e.destroy(g);break}}a._originalAction&&b.setAttribute("action",a._originalAction);a._originalMethod&&(b.setAttribute("method",a._originalMethod),b.method=a._originalMethod);a._originalTarget&&(b.setAttribute("target",a._originalTarget),b.target=a._originalTarget)}a._tmpForm&&(e.destroy(a._tmpForm),delete a._tmpForm);a._finished=!0}else t._fireNextRequest()});var u={method:"POST"};t.create=function(a,c,k){if(b.global[a])return b.global[a];
if(b.global.frames[a])return b.global.frames[a];k||(d("config-useXDomain")&&d("config-dojoBlankHtmlUrl"),k=d("config-dojoBlankHtmlUrl")||n.toUrl("dojo/resources/blank.html"));c=e.place('\x3ciframe id\x3d"'+a+'" name\x3d"'+a+'" src\x3d"'+k+'" onload\x3d"'+c+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',b.body());return b.global[a]=c};t.doc=function(a){if(a.contentDocument)return a.contentDocument;var c=a.name;if(c){var d=b.doc.getElementsByTagName("iframe");
if(a.document&&d[c].contentWindow&&d[c].contentWindow.document)return d[c].contentWindow.document;if(b.doc.frames[c]&&b.doc.frames[c].document)return b.doc.frames[c].document}return null};t.setSrc=function(a,c,d){a=b.global.frames[a.name];a.contentWindow&&(a=a.contentWindow);try{d?a.location.replace(c):a.location=c}catch(e){}};t._iframeName=x+"_IoIframe";t._notifyStart=function(){};t._dfdQueue=[];t._currentDfd=null;t._fireNextRequest=function(){var a;try{if(!t._currentDfd&&t._dfdQueue.length){do a=
t._currentDfd=t._dfdQueue.shift();while(a&&(a.canceled||a.isCanceled&&a.isCanceled())&&t._dfdQueue.length);if(!a||a.canceled||a.isCanceled&&a.isCanceled())t._currentDfd=null;else{var d=a.response,k=d.options,f=a._contentToClean=[],p=c.byId(k.form),r=g.notify,l=k.data||null,s;!a._legacy&&"POST"===k.method&&!p?p=a._tmpForm=e.create("form",{name:x+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},b.body()):"GET"===k.method&&(p&&-1<d.url.indexOf("?"))&&(s=d.url.slice(d.url.indexOf("?")+
1),l=h.mixin(m.queryToObject(s),l));if(p){if(!a._legacy){var q=p;do q=q.parentNode;while(q&&q!==b.doc.documentElement);q||(p.style.position="absolute",p.style.left="-1000px",p.style.top="-1000px",b.body().appendChild(p));p.name||(p.name=x+"_form")}if(l){var q=function(a,b){e.create("input",{type:"hidden",name:a,value:b},p);f.push(a)},n;for(n in l){var u=l[n];if(h.isArray(u)&&1<u.length)for(s=0;s<u.length;s++)q(n,u[s]);else p[n]?p[n].value=u:q(n,u)}}var y=p.getAttributeNode("action"),J=p.getAttributeNode("method"),
H=p.getAttributeNode("target");d.url&&(a._originalAction=y?y.value:null,y?y.value=d.url:p.setAttribute("action",d.url));if(a._legacy){if(!J||!J.value)J?J.value=k.method:p.setAttribute("method",k.method)}else a._originalMethod=J?J.value:null,J?J.value=k.method:p.setAttribute("method",k.method);a._originalTarget=H?H.value:null;H?H.value=t._iframeName:p.setAttribute("target",t._iframeName);p.target=t._iframeName;r&&r.emit("send",d,a.promise.cancel);t._notifyStart(d);p.submit()}else k="",d.options.data&&
(k=d.options.data,"string"!==typeof k&&(k=m.objectToQuery(k))),q=d.url+(-1<d.url.indexOf("?")?"\x26":"?")+k,r&&r.emit("send",d,a.promise.cancel),t._notifyStart(d),t.setSrc(t._frame,q,!0)}}}catch(N){a.reject(N)}};g.addCommonMethods(t,["GET","POST"]);return t})},"dojo/NodeList-dom":function(){define("./_base/kernel ./query ./_base/array ./_base/lang ./dom-class ./dom-construct ./dom-geometry ./dom-attr ./dom-style".split(" "),function(l,n,a,g,q,h,m,f,d){function c(a){return function(b,c,d){return 2==
arguments.length?a["string"==typeof c?"get":"set"](b,c):a.set(b,c,d)}}var e=function(a){return 1==a.length&&"string"==typeof a[0]},b=function(a){var b=a.parentNode;b&&b.removeChild(a)},k=n.NodeList,s=k._adaptWithCondition,p=k._adaptAsForEach,r=k._adaptAsMap;g.extend(k,{_normalize:function(a,b){var c=!0===a.parse;if("string"==typeof a.template){var d=a.templateFunc||l.string&&l.string.substitute;a=d?d(a.template,a):a}d=typeof a;"string"==d||"number"==d?(a=h.toDom(a,b&&b.ownerDocument),a=11==a.nodeType?
g._toArray(a.childNodes):[a]):g.isArrayLike(a)?g.isArray(a)||(a=g._toArray(a)):a=[a];c&&(a._runParse=!0);return a},_cloneNode:function(a){return a.cloneNode(!0)},_place:function(a,b,c,d){if(!(1!=b.nodeType&&"only"==c))for(var e,k=a.length,f=k-1;0<=f;f--){var g=d?this._cloneNode(a[f]):a[f];if(a._runParse&&l.parser&&l.parser.parse){e||(e=b.ownerDocument.createElement("div"));e.appendChild(g);l.parser.parse(e);for(g=e.firstChild;e.firstChild;)e.removeChild(e.firstChild)}f==k-1?h.place(g,b,c):b.parentNode.insertBefore(g,
b);b=g}},position:r(m.position),attr:s(c(f),e),style:s(c(d),e),addClass:p(q.add),removeClass:p(q.remove),toggleClass:p(q.toggle),replaceClass:p(q.replace),empty:p(h.empty),removeAttr:p(f.remove),marginBox:r(m.getMarginBox),place:function(a,b){var c=n(a)[0];return this.forEach(function(a){h.place(a,c,b)})},orphan:function(a){return(a?n._filterResult(this,a):this).forEach(b)},adopt:function(a,b){return n(a).place(this[0],b)._stash(this)},query:function(a){if(!a)return this;var b=new k;this.map(function(c){n(a,
c).forEach(function(a){void 0!==a&&b.push(a)})});return b._stash(this)},filter:function(b){var c=arguments,d=this,e=0;if("string"==typeof b){d=n._filterResult(this,c[0]);if(1==c.length)return d._stash(this);e=1}return this._wrap(a.filter(d,c[e],c[e+1]),this)},addContent:function(a,b){a=this._normalize(a,this[0]);for(var c=0,d;d=this[c];c++)a.length?this._place(a,d,b,0<c):h.empty(d);return this}});return k})},"esri/urlUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/io-query ./kernel ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),
function(l,n,a,g,q,h,m,f){var d={},c=h.defaults.io,e=window.location.protocol;"file:"===e&&(e="http:");d.urlToObject=function(b){var c={},d=new a(b),e=b.indexOf("?");null===d.query?c={path:b,query:null}:(c.path=b.substring(0,e),c.query=g.queryToObject(d.query));d.fragment&&(c.hash=d.fragment,null===d.query&&(c.path=c.path.substring(0,c.path.length-(d.fragment.length+1))));return c};d.getProxyUrl=function(a,e){var h=l.isString(a)?0===l.trim(a).toLowerCase().indexOf("https:"):a,g=c.proxyUrl,r,m,q=f.io.proxyNotSet;
if(l.isString(a)&&(m=d.getProxyRule(a)))g=m.proxyUrl;if(!g)throw Error(q);h&&!1!==e&&0!==window.location.href.toLowerCase().indexOf("https:")&&(h=g,0!==h.toLowerCase().indexOf("http")&&(h=d.getAbsoluteUrl(h)),h=h.replace(/^http:/i,"https:"),d.canUseXhr(h)&&(g=h,r=1));g=d.urlToObject(g);g._xo=r;return g};d.addProxy=function(a){var e=d.getProxyRule(a),f;e?f=d.urlToObject(e.proxyUrl):c.alwaysUseProxy&&(f=d.getProxyUrl());f&&(e=d.urlToObject(a),a=f.path+"?"+e.path,(f=g.objectToQuery(l.mixin(f.query||
{},e.query)))&&(a+="?"+f));return a};d.addProxyRule=function(a){var e=a.urlPrefix=d.urlToObject(a.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),f=c.proxyRules,h,g=f.length,m,l=g;for(h=0;h<g;h++)if(m=f[h].urlPrefix,0===e.indexOf(m)){if(e.length===m)return-1;l=h;break}else 0===m.indexOf(e)&&(l=h+1);f.splice(l,0,a);return l};d.getProxyRule=function(a){var e=c.proxyRules,f=e.length,h=d.urlToObject(a).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),
g;for(a=0;a<f;a++)if(0===h.indexOf(e[a].urlPrefix)){g=e[a];break}return g};d.hasSameOrigin=function(b,c,d){b=b.toLowerCase();c=c.toLowerCase();var e=window.location.href.toLowerCase();b=0===b.indexOf("http")?new a(b):e=new a(e);c=0===c.indexOf("http")?new a(c):l.isString(e)?new a(e):e;return(d||b.scheme===c.scheme)&&b.host===c.host&&b.port===c.port};d.canUseXhr=function(a,e){var f=m("esri-phonegap")?!0:!1,h=d.hasSameOrigin,g=c.corsEnabledServers,q,x=-1;!f&&m("esri-cors")&&(g&&g.length)&&(f=n.some(g,
function(c,d){var e="object"===typeof c?c.host:c;q=0!==l.trim(e).toLowerCase().indexOf("http");return h(a,q?"http://"+e:e)||q&&h(a,"https://"+e)?(x=d,!0):!1}));return e?x:f};d.getAbsoluteUrl=function(a){return l.isString(a)&&!/^https?:\/\//i.test(a)?0===a.indexOf("//")?e+a:0===a.indexOf("/")?e+"//"+window.location.host+a:q._appBaseUrl+a:a};d.fixUrl=function(a){/^\/\//i.test(a)&&(a=e+a);return a.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")};return d})},"esri/Color":function(){define(["dojo/_base/declare",
"dojo/_base/Color","dojo/has","./kernel"],function(l,n,a,g){l=l([n],{declaredClass:"esri.Color"});l.toJsonColor=function(a){return a&&[a.r,a.g,a.b,1<a.a?a.a:Math.round(255*a.a)]};l.toDojoColor=function(a){return a&&new n([a[0],a[1],a[2],a[3]/255])};g="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(a=0;a<g.length;a++)l[g[a]]=n[g[a]];return l})},"esri/domUtils":function(){define(["./kernel","dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has"],function(l,n,a,g,
q){var h={show:function(a){if(a=h.getNode(a))a.style.display="block"},getNode:function(a){return a&&a.domNode||a},hide:function(a){if(a=h.getNode(a))a.style.display="none"},toggle:function(a){if(a=h.getNode(a))a.style.display="none"===a.style.display?"block":"none"},documentBox:8>=q("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(a){if(a=this.getNode(a)){var f=0,d=0,c=0,e=0,b=0,k=0;return[n.connect(a,
"ontouchstart",function(h){f=h.touches[0].screenX;d=h.touches[0].screenY;c=a.scrollWidth;e=a.scrollHeight;b=a.clientWidth;k=a.clientHeight}),n.connect(a,"ontouchmove",function(h){h.preventDefault();var p=a.firstChild;p instanceof Text&&(p=a.childNodes[1]);var r=p._currentX||0,l=p._currentY||0,r=r+(h.touches[0].screenX-f);0<r?r=0:0>r&&Math.abs(r)+b>c&&(r=-1*(c-b));p._currentX=r;l+=h.touches[0].screenY-d;0<l?l=0:0>l&&Math.abs(l)+k>e&&(l=-1*(e-k));p._currentY=l;g.set(p,{"-webkit-transition-property":"-webkit-transform",
"-webkit-transform":"translate("+r+"px, "+l+"px)"});f=h.touches[0].screenX;d=h.touches[0].screenY})]}}};return h})},"esri/symbols/MarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(l,n,a,g,q,h){return l(h,{declaredClass:"esri.symbol.MarkerSymbol",angle:0,xoffset:0,yoffset:0,size:12,constructor:function(a){a&&n.isObject(a)&&(this.size="auto"===this.size?this.size:g.pt2px(this.size),this.xoffset=g.pt2px(this.xoffset),
this.yoffset=g.pt2px(this.yoffset),this.angle&&(this.angle*=-1))},setAngle:function(a){this.angle=a;return this},setSize:function(a){this.size=a;return this},setOffset:function(a,f){this.xoffset=a;this.yoffset=f;return this},toJson:function(){var a=g.px2pt(this.size),a=isNaN(a)?void 0:a,f=g.px2pt(this.xoffset),f=isNaN(f)?void 0:f,d=g.px2pt(this.yoffset),d=isNaN(d)?void 0:d;return n.mixin(this.inherited("toJson",arguments),{size:"auto"===this.size?this.size:a,angle:this.angle&&-1*this.angle,xoffset:f,
yoffset:d})}})})},"esri/symbols/Symbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../Color".split(" "),function(l,n,a,g,q,h){return l(null,{declaredClass:"esri.symbol.Symbol",color:new h([0,0,0,1]),type:null,constructor:function(a){if(a&&n.isObject(a)&&(n.mixin(this,a),this.color&&q.isDefined(this.color[0])&&(this.color=h.toDojoColor(this.color)),(a=this.type)&&0===a.indexOf("esri")))this.type={esriSMS:"simplemarkersymbol",esriPMS:"picturemarkersymbol",esriSLS:"simplelinesymbol",
esriCLS:"cartographiclinesymbol",esriSFS:"simplefillsymbol",esriPFS:"picturefillsymbol",esriTS:"textsymbol",esriSHD:"shieldlabelsymbol"}[a]},setColor:function(a){this.color=a;return this},toJson:function(){return{color:h.toJsonColor(this.color)}}})})},"esri/symbols/SimpleMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./MarkerSymbol ./SimpleLineSymbol".split(" "),function(l,n,a,g,q,h,m,f,d){var c={STYLE_CIRCLE:"circle",
STYLE_SQUARE:"square",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"},e={style:c.STYLE_CIRCLE,color:[255,255,255,0.25],size:12,angle:0,xoffset:0,yoffset:0};l=l(f,{declaredClass:"esri.symbol.SimpleMarkerSymbol",type:"simplemarkersymbol",_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},constructor:function(b,k,f,h){b?n.isString(b)?(this.style=b,k&&(this.size=k),f&&(this.outline=
f),h&&(this.color=h)):(this.style=m.valueOf(this._styles,this.style),b.outline&&(this.outline=new d(b.outline))):(n.mixin(this,e),this.size=q.pt2px(this.size),this.outline=new d(this.outline),this.color=new a(this.color));this.style||(this.style=c.STYLE_CIRCLE)},setStyle:function(a){this.style=a;return this},setPath:function(a){this.path=a;this.setStyle(c.STYLE_PATH);return this},setOutline:function(a){this.outline=a;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},
getFill:function(){return this.color},_setDim:function(a,c,d){this._targetWidth=a;this._targetHeight=c;this._spikeSize=d},getShapeDescriptors:function(){var a,d,f,h=this.style,g=(this.size||q.pt2px(e.size))/2,m=0-g,l=0+g,n=0-g,u=0+g;switch(h){case c.STYLE_CIRCLE:a={type:"circle",cx:0,cy:0,r:g};d=this.getFill();if(f=this.getStroke())f.style=f.style||"Solid";break;case c.STYLE_CROSS:a={type:"path",path:"M "+m+",0 L "+l+",0 M 0,"+n+" L 0,"+u+" E"};d=null;f=this.getStroke();break;case c.STYLE_DIAMOND:a=
{type:"path",path:"M "+m+",0 L 0,"+n+" L "+l+",0 L 0,"+u+" L "+m+",0 E"};d=this.getFill();f=this.getStroke();break;case c.STYLE_SQUARE:a={type:"path",path:"M "+m+","+u+" L "+m+","+n+" L "+l+","+n+" L "+l+","+u+" L "+m+","+u+" E"};d=this.getFill();f=this.getStroke();break;case c.STYLE_X:a={type:"path",path:"M "+m+","+u+" L "+l+","+n+" M "+m+","+n+" L "+l+","+u+" E"};d=null;f=this.getStroke();break;case c.STYLE_PATH:a={type:"path",path:this.path||""},d=this.getFill(),f=this.getStroke()}return{defaultShape:a,
fill:d,stroke:f}},toJson:function(){var a=n.mixin(this.inherited("toJson",arguments),{type:"esriSMS",style:this._styles[this.style]}),c=this.outline;c&&(a.outline=c.toJson());a.path=this.path;return m.fixJson(a)}});n.mixin(l,c);l.defaultProps=e;return l})},"esri/symbols/SimpleLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./LineSymbol".split(" "),function(l,n,a,g,q,h,m,f){var d={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",
STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot"},c={color:[0,0,0,1],style:d.STYLE_SOLID,width:1};l=l(f,{declaredClass:"esri.symbol.SimpleLineSymbol",type:"simplelinesymbol",_styles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot",dashdot:"esriSLSDashDot",longdashdotdot:"esriSLSDashDotDot",
none:"esriSLSNull",insideframe:"esriSLSInsideFrame",shortdash:"esriSLSShortDash",shortdot:"esriSLSShortDot",shortdashdot:"esriSLSShortDashDot",shortdashdotdot:"esriSLSShortDashDotDot",longdash:"esriSLSLongDash",longdashdot:"esriSLSLongDashDot"},constructor:function(e,b,k){e?n.isString(e)?(this.style=e,b&&(this.color=b),k&&(this.width=k)):this.style=m.valueOf(this._styles,e.style)||d.STYLE_SOLID:(n.mixin(this,c),this.color=new a(this.color),this.width=q.pt2px(this.width))},setStyle:function(a){this.style=
a;return this},getStroke:function(){return this.style===d.STYLE_NULL||0===this.width?null:{color:this.color,style:this.style,width:this.width}},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){return m.fixJson(n.mixin(this.inherited("toJson",arguments),{type:"esriSLS",style:this._styles[this.style]}))}});n.mixin(l,d);l.defaultProps=c;return l})},"esri/symbols/LineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),
function(l,n,a,g,q,h){return l(h,{declaredClass:"esri.symbol.LineSymbol",constructor:function(a){n.isObject(a)?this.width=g.pt2px(this.width):this.width=12},setWidth:function(a){this.width=a;return this},toJson:function(){var a=g.px2pt(this.width),a=isNaN(a)?void 0:a;return n.mixin(this.inherited("toJson",arguments),{width:a})}})})},"esri/layers/TileInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../SpatialReference ../geometry/Point ./LOD".split(" "),
function(l,n,a,g,q,h,m,f,d){return l(null,{declaredClass:"esri.layers.TileInfo",constructor:function(c){n.mixin(this,c);this.width=this.cols;this.height=this.rows;c=this.spatialReference;var e=this.origin;c&&(c=this.spatialReference=new m(c.toJson?c.toJson():c));e&&(this.origin=new f(e.toJson?e.toJson():e),!e.spatialReference&&c&&this.origin.setSpatialReference(new m(c.toJson())));this.lods=a.map(this.lods,function(a){return new d(a)})},toJson:function(){return h.fixJson({rows:this.rows,cols:this.cols,
dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJson(),spatialReference:this.spatialReference&&this.spatialReference.toJson(),lods:this.lods&&a.map(this.lods,function(a){return a.toJson()})})}})})},"esri/layers/LOD":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(l,n,a,g,q){return l(null,{declaredClass:"esri.layers.LOD",constructor:function(a){n.mixin(this,a)},toJson:function(){return q.fixJson({level:this.level,
levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}})})},"esri/layers/ArcGISTiledMapServiceLayer":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has dojo/io-query ../kernel ../urlUtils ../SpatialReference ./TiledMapServiceLayer ./ArcGISMapServiceLayer ./TileInfo ./TimeInfo ./TileMap".split(" "),function(l,n,a,g,q,h,m,f,d,c,e,b,k,s,p){return n([e,b],{declaredClass:"esri.layers.ArcGISTiledMapServiceLayer",_agolAttrs:"Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Elevation/World_Hillshade Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" "),
_isReference:!1,_referenceLayers:"Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Reference Ocean/World_Ocean_Reference Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Reference_Overlay Reference/World_Transportation".split(" "),constructor:function(b,c){c&&(c.roundrobin&&(l.deprecated(this.declaredClass+" : Constructor option 'roundrobin' deprecated. Use option 'tileServers'."),c.tileServers=c.roundrobin),this._setTileServers(c.tileServers),
this._loadCallback=c.loadCallback);this._params=a.mixin({},this._url.query);if(g.some(["servicesdev.arcgisonline.com/arcgis/rest/services","services.arcgisonline.com/arcgis/rest/services","servicesqa.arcgisonline.com/arcgis/rest/services"],function(a){return-1<b.toLowerCase().indexOf(a.toLowerCase())})){if(this.resampling=!(c&&!1===c.resampling))this.tileMap=new p(this)}else this.resampling=c&&null!=c.resampling?c.resampling:void 0;this._initLayer=a.hitch(this,this._initLayer);var d=c&&c.resourceInfo;
d?this._initLayer(d):(this._load=a.hitch(this,this._load),this._load())},_TILE_FORMATS:{PNG:"png",PNG8:"png",PNG24:"png",PNG32:"png",JPG:"jpg",JPEG:"jpg",GIF:"gif"},_setTileServers:function(a){if(a&&0<a.length){this.tileServers=a;var b,c=a.length;for(b=0;b<c;b++)a[b]=d.urlToObject(a[b]).path}},_initLayer:function(a,b){this.inherited(arguments);this.resourceInfo=q.toJson(a);this.tileInfo=new k(a.tileInfo);this.resampling=null==this.resampling?!!a.resampling:this.resampling;!this.spatialReference&&
this.tileInfo.spatialReference&&(this.spatialReference=new c(this.tileInfo.spatialReference.toJson()));this.isPNG32="PNG24"===this.tileInfo.format||"PNG32"===this.tileInfo.format;a.timeInfo&&(this.timeInfo=new s(a.timeInfo));var d=this._url.path,e=this._loadCallback,f="file:"===window.location.protocol?"http:":window.location.protocol,h=d.match(/^https?\:\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i),h=h&&h[2];if(!this.tileServers)if(a.tileServers)this._setTileServers(a.tileServers);
else{var g=-1!==d.search(/^https?\:\/\/server\.arcgisonline\.com/i),p=-1!==d.search(/^https?\:\/\/services\.arcgisonline\.com/i);if(g||p)this._setTileServers([d,d.replace(g?/server\.arcgisonline/i:/services\.arcgisonline/i,g?"services.arcgisonline":"server.arcgisonline")])}if(h){h=h.toLowerCase();for(d=0;d<this._agolAttrs.length;d++)if(g=this._agolAttrs[d],g.toLowerCase()===h){this.hasAttributionData=!0;this.attributionDataUrl=this.attributionDataUrl||f+"//static.arcgis.com/attribution/"+g;break}for(d=
0;d<this._referenceLayers.length;d++)if(g=this._referenceLayers[d],g.toLowerCase()===h){this._isReference=!0;break}}this.loaded=!0;this.onLoad(this);e&&(delete this._loadCallback,e(this))},getTileUrl:function(a,b,c){var e=this.tileServers,k=this._getToken(),f=this._url.query;a=(e?e[b%e.length]:this._url.path)+"/tile/"+a+"/"+b+"/"+c;this.resampling&&!this.tileMap&&(a+="?blankTile\x3dfalse");f&&(a=this.resampling&&!this.tileMap?a+("\x26"+m.objectToQuery(f)):a+("?"+m.objectToQuery(f)));if(k&&(!f||!f.token))a+=
(-1===a.indexOf("?")?"?":"\x26")+"token\x3d"+k;a=this.addTimestampToURL(a);return d.addProxy(a)}})})},"esri/layers/TiledMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/url dojo/dom-construct dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/dom dojox/collections/ArrayList dojox/gfx/matrix ../kernel ../config ../sniff ../domUtils ../tileUtils ../geometry/Point ../geometry/Rect ../geometry/Extent ./layer".split(" "),function(l,
n,a,g,q,h,m,f,d,c,e,b,k,s,p,r,t,x,y,u,z){return l(z,{declaredClass:"esri.layers.TiledMapServiceLayer",constructor:function(b,c){n.connect(this,"onLoad",this,"_initTiledLayer");this._lowestLevel=(this._displayLevels=c?c.displayLevels:null)?this._displayLevels[0]:0;this.resampling=c?c.resampling:void 0;this._resamplingTolerance=c?c.resamplingTolerance:null;this.exclusionAreas=c?c.exclusionAreas:null;var d=a.hitch;this._addImage=d(this,this._addImage);this._tileLoadHandler=d(this,this._tileLoadHandler);
this._tileErrorHandler=d(this,this._tileErrorHandler);this._popTile=d(this,this._popTile);this._cleanUpRemovedImages=d(this,this._cleanUpRemovedImages);this._fireOnUpdateEvent=d(this,this._fireOnUpdateEvent);this._transitionEnd=d(this,this._transitionEnd);this._tileMapCallback=d(this,this._tileMapCallback)},opacity:1,isPNG32:!1,_multiple:1,isResampling:!1,_initTiledLayer:function(){var a=this.tileInfo,b=a.lods;this.resampling=null!=this.resampling?this.resampling:!1;this._tileW=a.width;this._tileH=
a.height;var c=this.scales=[],d=this._displayLevels,e="esri.layers.WMTSLayer"===this.declaredClass&&96!=a.dpi,k=-Infinity,f=Infinity,h=this.fullExtent,m=new x(h.xmin,h.ymax),h=new x(h.xmax,h.ymin),r=t.getContainingTileCoords,l,q,n,s=b.length;for(n=0;n<s;n++)if(q=b[n],e&&(q.scale=96*q.scale/a.dpi),l=r(a,m,q),q.startTileRow=0>l.row?0:l.row,q.startTileCol=0>l.col?0:l.col,l=r(a,h,q),q.endTileRow=l.row,q.endTileCol=l.col,!d||-1!==g.indexOf(d,q.level))c[n]=q.scale,k=q.scale>k?q.scale:k,f=q.scale<f?q.scale:
f;e&&(a.dpi=96);-Infinity!==k&&!this._hasMin&&this.setMinScale(k);Infinity!==f&&!this._hasMax&&this.setMaxScale(f);this.setExclusionAreas(this.exclusionAreas);this._patchIE=6<=p("ie")&&7>p("ie")&&(this.isPNG32||"Mixed"===a.format)},_isMapAtVisibleScale:function(){var a=this.inherited(arguments);if(a){var b;b=this._map;var a=this.scales,c=b.getScale(),d=!1,e=b.width>b.height?b.width:b.height;for(b=0;b<a.length;b++)if(Math.abs(a[b]-c)/a[b]<1/e){d=!0;break}a=d}return a},_setMap:function(a,b,c,e){this.inherited(arguments);
this._map=a;var f=this._div=h.create("div",null,b),g=a.__visibleDelta,p=n.connect,m=k._css.names,r={position:"absolute",width:a.width+"px",height:a.height+"px",overflow:"visible"},l=s.defaults.map.zoomDuration;"css-transforms"===a.navigationMode?(r[m.transform]=k._css.translate(-g.x,-g.y),d.set(f,r),delete r[m.transform],r[m.transition]=m.transformName+" "+l+"ms ease",d.set(this._active=h.create("div",null,f),r),this._active._remove=0,this._passives=[]):(r.left=-g.x+"px",r.top=-g.y+"px",d.set(f,r));
this._onResizeHandler_connect=p(a,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=p(this,"onOpacityChange",this,"_opacityChangeHandler");g=this.tileInfo;p=g.spatialReference;m=p._getInfo();(this._wrap=a.wrapAround180&&p._isWrappable()&&Math.abs(m.origin[0]-g.origin.x)<=m.dx)&&t._addFrameInfo(g,m);this.setExclusionAreas(this.exclusionAreas);this.evaluateSuspension();if(this.suspended&&!a.loaded)var q=n.connect(a,"onLoad",this,function(){n.disconnect(q);q=null;this.setExclusionAreas(this.exclusionAreas);
this.evaluateSuspension()});return f},_unsetMap:function(a,b){this.suspended||this._suspendImpl();h.destroy(this._div);this._map=this._div=null;var c=n.disconnect;c(this._onResizeHandler_connect);c(this._opacityChangeHandler_connect);this.inherited(arguments)},onSuspend:function(){this.inherited(arguments);this._suspendImpl()},_suspendImpl:function(){r.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();var a=this._tiles,b=this._tileIds,c=this._loadingList,
d,e,k=n.disconnect,f=h.destroy;c&&0<c.count&&(c.forEach(function(b){if(d=a[b])k(d._onload_connect),k(d._onerror_connect),k(d._onabort_connect),d._onload_connect=d._onerror_connect=d._onabort_connect=null}),c.clear(),this._fireUpdateEnd());this._removeList.clear();for(c=b.length-1;0<=c;c--)(d=(e=b[c])&&a[e])&&f(d);if("css-transforms"===this._map.navigationMode){b=this._active;e=this._passives;var g;this._noDom=0;for(c=e.length-1;0<=c;c--)g=e[c],g._endHandle&&k(g._endHandle),g._matrix=g._multiply=g._endHandle=
null,g._marked=g._remove=0,e.splice(c,1),f(g);b._matrix=b._multiply=null;b._marked=b._remove=0}this._tileIds=this._tiles=this._tileBounds=this._ct=this._loadingList=this._removeList=this._standby=null},onResume:function(){this.inherited(arguments);this._tileIds=[];this._tiles=[];this._tileBounds=[];this._ct=null;this._removeList=new e;this._loadingList=new e;r.show(this._div);this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(a.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,
null,!0,this._map.__LOD)}),0)},_enableDrawConnectors:function(){var a=this._map,b=n.connect;if("css-transforms"===a.navigationMode){if(this._onScaleHandler_connect=b(a,"onScale",this,this._onScaleHandler),p("esri-mobile")){this._standby=[];var c=this,d=function(){c._noDom=1};this._onPanStartHandler_connect=b(a,"onPanStart",d);this._onZoomStartHandler_connect=b(a,"onZoomStart",d)}}else this._onZoomHandler_connect=b(a,"onZoom",this,"_onZoomHandler");this._onPanHandler_connect=b(a,"onPan",this,"_onPanHandler");
this._onExtentChangeHandler_connect=b(a,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var a=n.disconnect;a(this._onPanHandler_connect);a(this._onZoomHandler_connect);a(this._onScaleHandler_connect);a(this._onExtentChangeHandler_connect);a(this._onPanStartHandler_connect);a(this._onZoomStartHandler_connect);this._onPanHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=this._onExtentChangeHandler_connect=this._onPanStartHandler_connect=this._onZoomStartHandler_connect=
null},_onResizeHandler:function(a,b,c){a={width:b+"px",height:c+"px"};b=d.set;b(this._div,a);if("css-transforms"===this._map.navigationMode){this._active&&b(this._active,a);for(c=this._passives.length-1;0<=c;c--)b(this._passives[c],a)}},_onExtentChangeHandler:function(a,c,e,g){c=this._map;var p=this._standby,m;clearTimeout(this._wakeTimer);this._wakeTimer=null;if(!c._isPanningOrZooming()){if("css-transforms"===c.navigationMode){if(e)for(g=this._passives.length-1;0<=g;g--)m=this._passives[g],d.set(m,
k._css.names.transition,"none"),m._marked?(this._passives.splice(g,1),m.parentNode&&m.parentNode.removeChild(m),h.destroy(m)):0<m.childNodes.length&&(m._multiply=m._multiply?b.multiply(m._matrix,m._multiply):m._matrix);this._noDom=0;if(p&&p.length)for(g=p.length-1;0<=g;g--)m=p[g],d.set(m,"visibility","visible"),this._popTile(m),p.splice(g,1)}this._fireUpdateStart();this._rrIndex=0;g=t.getCandidateTileInfo(c,this.tileInfo,a);a=c.__visibleDelta;if(!this._ct||g.lod.level!==this._ct.lod.level||e){m=g&&
this._ct&&g.lod.level!==this._ct.lod.level;this._ct=g;var r=this._tiles,l=this._tileIds,q=this._tileBounds,n=this._removeList,s,u=l.length;this._cleanUpRemovedImages();for(g=0;g<u;g++)p=l[g],s=r[p],q[p]=l[g]=null,"css-transforms"===c.navigationMode&&m&&(s.parentNode&&c.fadeOnZoom)&&(s._fadeOut=m,s.parentNode._remove++),n.add(s);e&&(this._tileIds=[],this._tiles=[],this._tileBounds=[])}g=a.x;e=a.y;"css-transforms"===c.navigationMode?(p={},p[k._css.names.transform]=k._css.translate(g,e),d.set(this._div,
p)):d.set(this._div,{left:g+"px",top:e+"px"});this.__coords_dx=g;this.__coords_dy=e;this._updateImages(new y(0,0,a.width,a.height));0===this._loadingList.count?(this._cleanUpRemovedImages(),this.onUpdate(),this._fireUpdateEnd()):this._fireOnUpdate=!0;e=this._tileW;r=this._tileH;a=new y(-a.x,-a.y,a.width,a.height);for(g=this._tileIds.length-1;0<=g;g--)(p=this._tileIds[g])?(m=this._tiles[p],l=f.getMarginBox(m),l=new y(l.l,l.t,e,r),"css-transforms"===c.navigationMode&&(l.x=m._left,l.y=m._top),a.intersects(l)?
this._tileBounds[p]=l:(this._loadingList.contains(p)&&this._popTile(m),h.destroy(m),this._tileIds.splice(g,1),delete this._tileBounds[p],delete this._tiles[p])):(this._tileIds.splice(g,1),delete this._tileBounds[p],delete this._tiles[p])}},_onPanHandler:function(a,b){var c=this._map,e=c.__visibleDelta.offset(b.x,b.y);this.__coords_dx=this.__coords_dy=0;"css-transforms"===c.navigationMode?(c={},c[k._css.names.transform]=k._css.translate(e.x,e.y),d.set(this._div,c),p("esri-mobile")||this._updateImages({x:-e.x,
y:-e.y,width:e.width,height:e.height})):(d.set(this._div,{left:e.x+"px",top:e.y+"px"}),this._updateImages({x:-e.x,y:-e.y,width:e.width,height:e.height}));0<this._loadingList.count&&(this._fireUpdateStart(),this._fireOnUpdate=!0)},_onScaleHandler:function(a,c){var e,f={},g=k._css.names,p=this._map,m=s.defaults.map.zoomDuration;for(e=this._passives.length-1;0<=e;e--){var r=this._passives[e];0===r.childNodes.length?(this._passives.splice(e,1),h.destroy(r)):("none"===r.style[g.transition]&&d.set(r,g.transition,
g.transformName+" "+m+"ms ease"),d.set(r,g.transition,c?"none":g.transformName+" "+m+"ms ease"),r._matrix=a,f[g.transform]=k._css.matrix(r._multiply?b.multiply(a,r._multiply):a),d.set(r,f))}this._active&&0===this._active.childNodes.length||(d.set(this._active,g.transition,c?"none":g.transformName+" "+m+"ms ease"),this._active._matrix=a,f[g.transform]=k._css.matrix(this._active._matrix),d.set(this._active,f),this._passives.push(this._active),f={position:"absolute",width:p.width+"px",height:p.height+
"px",overflow:"visible"},f[g.transition]=g.transformName+" "+m+"ms ease",d.set(this._active=h.create("div",null,this._div),f),this._active._remove=0,p.fadeOnZoom&&h.place(this._active,this._div,"first"))},_onZoomHandler:function(a,b,c){a=f.getMarginBox(this._div);c=c.offset(-a.l,-a.t);if(!this._previousScale||1===b)this._previousScale=1;var e,k=this._tileW*b,h=this._tileH*b,m=this._tileBounds,r=this._tiles,l=this._previousScale,q=this._multiple,n=d.set,s,t;if((a=p("ie"))&&8>a)g.forEach(this._tileIds,
function(a){t="";e=m[a];s=r[a].style.margin.split(" ");g.forEach(s,function(a){""!==t&&(t+=" ");a=parseFloat(a);t+=a/l*b+"px"});n(r[a],{left:e.x-(k-e.width)*(c.x-e.x)/e.width+"px",top:e.y-(h-e.height)*(c.y-e.y)/e.height+"px",margin:1!==q&&-1===t.indexOf("NaN")?t:"",zoom:b})});else{var u=k*q,x=h*q,L,y;g.forEach(this._tileIds,function(a){t="";e=m[a];L=e.x-(k-e.width)*(c.x-e.x)/e.width;y=e.y-(h-e.height)*(c.y-e.y)/e.height;s=r[a].style.margin.split(" ");g.forEach(s,function(a){""!==t&&(t+=" ");a=parseFloat(a);
t+=a/l*b+"px"});n(r[a],{left:L+"px",top:y+"px",margin:1!==q&&-1===t.indexOf("NaN")?t:"",width:u+"px",height:x+"px"})})}this._previousScale=b},_updateImages:function(a){if(this._ct){var b,c=this._tileW,d=this._tileH,e=this._ct;b=e.lod;var e=e.tile,k=e.offsets,f=e.coords,h=f.row,f=f.col,p=b.level,m=this.opacity,r=this._tileIds,l=this._loadingList,q=this._addImage,n=this._map.id,s=this.id,t=a.x,u=a.y,x=b.startTileRow,y=b.endTileRow,z=b.startTileCol,P=b.endTileCol,R=g.indexOf,M,O,S=k.x-this.__coords_dx,
da=k.y-this.__coords_dy;O=c-S+-a.x;var V=d-da+-a.y;M=Math.ceil;O=0<O?O%c:c-Math.abs(O)%c;V=0<V?V%d:d-Math.abs(V)%d;t=0<t?Math.floor((t+S)/c):M((t-(c-S))/c);u=0<u?Math.floor((u+da)/d):M((u-(d-da))/d);da=t+M((a.width-O)/c);a=u+M((a.height-V)/d);var Z,aa,ba;this._wrap&&(Z=b._frameInfo,aa=Z[0],ba=Z[1],Z=Z[2]);for(V=t;V<=da;V++)for(t=u;t<=a;t++)M=h+t,O=f+V,this._wrap&&(O<ba?(O%=aa,O=O<ba?O+aa:O):O>Z&&(O%=aa)),!this._isExcluded(p,M,O)&&M>=x&&(M<=y&&O>=z&&O<=P)&&(b=n+"_"+s+"_tile_"+p+"_"+t+"_"+V,-1===R(r,
b)&&(l.add(b),r.push(b),q(p,t,M,V,O,b,c,d,m,e,k)))}},_cleanUpRemovedImages:function(){var a=this._removeList,b=h.destroy,c,e=k._css.names;a.forEach(function(a){a._fadeOut||(a.style.filter="",a.style.zoom=1,b(a))});if("css-transforms"===this._map.navigationMode)for(c=this._passives.length-1;0<=c;c--){var f=this._passives[c];0===f.childNodes.length?(this._passives.splice(c,1),b(f)):this._map.fadeOnZoom&&!f._marked&&f._remove===f.childNodes.length&&(f._marked=1,2048>k._css.getScaleFromMatrix(d.get(f,
e.transform))?(d.set(f,e.transition,"opacity 0.65s"),d.set(f,"opacity",0),n.disconnect(f._endHandle),f._endHandle=n.connect(f,e.endEvent,this._transitionEnd)):this._transitionEnd({propertyName:"opacity",target:f}))}a.clear()},_transitionEnd:function(a){var b=a.target;"opacity"===a.propertyName&&(n.disconnect(b._endHandle),b._endHandle=null,a=g.indexOf(this._passives,b),-1<a&&this._passives.splice(a,1),b.parentNode&&b.parentNode.removeChild(b),h.destroy(b))},_addImage:function(b,c,e,f,g,p,r,l,q,s,
t){if(this._patchIE)s=this._tiles[p]=h.create("div"),s.id=p,m.add(s,"layerTile"),d.set(s,{left:r*f-t.x+"px",top:l*c-t.y+"px",width:r+"px",height:l+"px",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+this.getTileUrl(b,e,g)+"', sizingMethod\x3d'scale')"}),1>q&&d.set(s,"opacity",q),b=s.appendChild(h.create("div")),d.set(b,{opacity:0,width:r+"px",height:l+"px"}),this._div.appendChild(s),this._loadingList.remove(p),this._fireOnUpdateEvent();else{s=this._tiles[p]=h.create("img");var u=
n.connect;s.id=p;m.add(s,"layerTile");f=r*f-t.x;t=l*c-t.y;c=this._map;var x=k._css.names;r={width:r+"px",height:l+"px",visibility:"hidden"};"css-transforms"===c.navigationMode?(r[x.transform]=k._css.translate(f,t),d.set(s,r),s._left=f,s._top=t):(r.left=f+"px",r.top=t+"px",d.set(s,r));1>q&&d.set(s,"opacity",q);s._onload_connect=u(s,"onload",this,"_tileLoadHandler");s._onerror_connect=u(s,"onerror",a.hitch(this,"_tileErrorHandler",e,g));s._onabort_connect=u(s,"onabort",this,"_tileAbortHandler");if(this.tileMap)this.tileMap.getTile(b,
e,g,p,this._tileMapCallback);else if(p=this.getTileUrl(b,e,g,s))this._failedRequests&&this._failedRequests[p]?(d.set(s,this._failedRequests[p].css),s.src=this._failedRequests[p].src,this._multiple=parseInt(this._failedRequests[p].css.width)/this._tileW,this.isResampling=1!==this._multiple):(this._multiple=1,this.isResampling=!1,s.src=p);"css-transforms"===c.navigationMode?this._active.appendChild(s):this._div.appendChild(s)}},_tileMapCallback:function(a,b){var e,k;this.suspended||((k=this._tiles[b.id]||
c.byId(b.id))?(this._multiple=2*(b.level-a.level)||1,this.isResampling=1!==this._multiple,e=this.tileMap.style(a,b),d.set(k,e),k.src=this.getTileUrl(a.level,a.row,a.col)):this._popTile(b))},getTileUrl:function(a,b,c){},_reCheckTS:/[\?\&]_ts=/ig,_reReplaceTS:/([\?\&]_ts=)[0-9]+/ig,addTimestampToURL:function(a){var b=this._refreshTS;b&&(a=this._reCheckTS.test(a)?a.replace(this._reReplaceTS,"$$$1"+b):a+((-1===a.indexOf("?")?"?":"\x26")+"_ts\x3d"+b));return a},refresh:function(){this.suspended||(this._refreshTS=
(new Date).getTime(),this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD))},_popTile:function(a){var b=n.disconnect;b(a._onload_connect);b(a._onerror_connect);b(a._onabort_connect);a._onload_connect=a._onerror_connect=a._onabort_connect=null;this._loadingList.remove(a.id);this._fireOnUpdateEvent()},_tileLoadHandler:function(a){a=a.currentTarget;this._noDom?this._standby.push(a):(d.set(a,"visibility","visible"),this._popTile(a))},_tileAbortHandler:function(a){a=a.currentTarget;this.onError(Error("Unable to load tile: "+
a.src));d.set(a,"visibility","hidden");this._popTile(a)},_tileErrorHandler:function(a,b,c){c=c.currentTarget;var e,k,f=!0;if(this.tileMap||!this.resampling)f=!1;else if(e=new q(c.src),e=e.path.split("/"),e=parseInt(e[e.length-3]),k=this._ct.lod.level-e+1,this._multiple=Math.pow(2,k),e===this._lowestLevel||0===this._resamplingTolerance||this._resamplingTolerance&&Math.log(this._multiple)/Math.LN2>this._resamplingTolerance)f=!1;f?(this.isResampling=!0,this._resample(c,a,b)):(this.onError(Error("Unable to load tile: "+
c.src)),d.set(c,"visibility","hidden"),this._popTile(c))},_resample:function(a,b,c){var e=(new q(a.src)).path.split("/"),k=this._multiple,f=parseInt(e[e.length-3])-1,h=parseInt(b/k),g=parseInt(c/k),e=c%k,m=b%k,h=this.getTileUrl(f,h,g);b=this.getTileUrl(f+Math.log(k)/Math.LN2,b,c);k={width:this._tileW*k+"px",height:this._tileH*k+"px",margin:"-"+this._tileW*m+"px 0 0 "+("-"+this._tileH*e+"px")};this._failedRequests||(this._failedRequests={});this._failedRequests[b]={src:h,css:k};d.set(a,k);p("chrome")&&
a.setAttribute("src",null);a.src=h},_fireOnUpdateEvent:function(){0===this._loadingList.count&&(this._cleanUpRemovedImages(),this._fireOnUpdate&&(this._fireOnUpdate=!1,this.onUpdate(),this._fireUpdateEnd()))},setOpacity:function(a){if(this.opacity!=a)this.onOpacityChange(this.opacity=a)},onOpacityChange:function(){},_opacityChangeHandler:function(a){var b=d.set,c,e,k;if("css-transforms"===this._map.navigationMode){if(this._active){k=this._active.childNodes;for(c=k.length-1;0<=c;c--)b(k[c],"opacity",
a)}for(c=this._passives.length-1;0<=c;c--){k=this._passives[c].childNodes;for(e=k.length-1;0<=e;e--)b(k[e],"opacity",a)}}else{k=this._div.childNodes;for(c=k.length-1;0<=c;c--)b(k[c],"opacity",a)}},setExclusionAreas:function(a){this.exclusionAreas=a;if(this.loaded&&this._map&&this._map.loaded){var b=this._map.spatialReference,c=this.tileInfo,d=c.origin,e=c.lods,k=e[0].level,f=e[e.length-1].level,h,g,p,m,r,l,q,s,n;if(!this.exclusionAreas||!this.exclusionAreas.length)this._exclusionsPerZoom=null;else{this._exclusionsPerZoom=
[];g=0;for(p=a.length;g<p;g++)if(h=a[g],(n=h.geometry)&&"extent"===n.type&&n.xmin<=n.xmax&&n.ymin<=n.ymax){if(!b.equals(n.spatialReference))if(b._canProject(n.spatialReference))b.isWebMercator()?(s=x.lngLatToXY(n.xmin,n.ymin),n=x.lngLatToXY(n.xmax,n.ymax)):(s=x.xyToLngLat(n.xmin,n.ymin,!0),n=x.xyToLngLat(n.xmax,n.ymax,!0)),n=new u(s[0],s[1],n[0],n[1],b);else continue;q=-1;if(h.minZoom&&-1!==h.minZoom)q=h.minZoom;else if(h.minScale&&-1!==h.minScale){m=0;for(r=e.length;m<r;m++)if(e[m].scale<=h.minScale){q=
e[m].level;break}}q=Math.max(q,k);s=-1;if(h.maxZoom&&-1!==h.maxZoom)s=h.maxZoom;else if(h.maxScale&&-1!==h.maxScale){m=0;for(r=e.length;m<r;m++)if(e[m].scale<h.maxScale){s=e[m-1].level;break}else if(e[m].scale===h.maxScale){s=e[m].level;break}}s=-1===s?f:Math.min(s,f);for(h=q;h<=s;h++){m=0;for(r=e.length;m<r;m++)if(e[m].level===h){l=e[m];break}l&&(this._exclusionsPerZoom[h]||(this._exclusionsPerZoom[h]=[]),m=1/l.resolution/c.rows,r=1/l.resolution/c.cols,this._exclusionsPerZoom[h].push({rowFrom:Math.floor((d.y-
n.ymax)*m),rowTo:Math.ceil((d.y-n.ymin)*m),colFrom:Math.floor((n.xmin-d.x)*r),colTo:Math.ceil((n.xmax-d.x)*r)}))}}}this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD)}},_isExcluded:function(a,b,c){var d,e,k;if(!this._exclusionsPerZoom)return!1;d=this._exclusionsPerZoom[a];if(!d)return!1;e=0;for(k=d.length;e<k;e++)if(a=d[e],b>=a.rowFrom&&b<a.rowTo&&c>=a.colFrom&&c<a.colTo)return!0;return!1}})})},"dojox/collections/ArrayList":function(){define(["dojo/_base/kernel",
"dojo/_base/array","./_base"],function(l,n,a){a.ArrayList=function(g){var q=[];g&&(q=q.concat(g));this.count=q.length;this.add=function(a){q.push(a);this.count=q.length};this.addRange=function(a){if(a.getIterator)for(a=a.getIterator();!a.atEnd();)this.add(a.get());else for(var g=0;g<a.length;g++)q.push(a[g]);this.count=q.length};this.clear=function(){q.splice(0,q.length);this.count=0};this.clone=function(){return new a.ArrayList(q)};this.contains=function(a){for(var g=0;g<q.length;g++)if(q[g]==a)return!0;
return!1};this.forEach=function(a,g){l.forEach(q,a,g)};this.getIterator=function(){return new a.Iterator(q)};this.indexOf=function(a){for(var g=0;g<q.length;g++)if(q[g]==a)return g;return-1};this.insert=function(a,g){q.splice(a,0,g);this.count=q.length};this.item=function(a){return q[a]};this.remove=function(a){a=this.indexOf(a);0<=a&&q.splice(a,1);this.count=q.length};this.removeAt=function(a){q.splice(a,1);this.count=q.length};this.reverse=function(){q.reverse()};this.sort=function(a){a?q.sort(a):
q.sort()};this.setByIndex=function(a,g){q[a]=g;this.count=q.length};this.toArray=function(){return[].concat(q)};this.toString=function(a){return q.join(a||",")}};return a.ArrayList})},"dojox/collections/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(l,n,a){l=n.getObject("dojox.collections",!0);l.DictionaryEntry=function(a,l){this.key=a;this.value=l;this.valueOf=function(){return this.value};this.toString=function(){return String(this.value)}};l.Iterator=
function(g){var l=0;this.element=g[l]||null;this.atEnd=function(){return l>=g.length};this.get=function(){return this.atEnd()?null:this.element=g[l++]};this.map=function(h,m){return a.map(g,h,m)};this.reset=function(){l=0;this.element=g[l]}};l.DictionaryIterator=function(g){var l=[],h={},m;for(m in g)h[m]||l.push(g[m]);var f=0;this.element=l[f]||null;this.atEnd=function(){return f>=l.length};this.get=function(){return this.atEnd()?null:this.element=l[f++]};this.map=function(d,c){return a.map(l,d,
c)};this.reset=function(){f=0;this.element=l[f]}};return l})},"esri/layers/ArcGISMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../request ../SpatialReference ../geometry/Extent ./LayerInfo".split(" "),function(l,n,a,g,q,h,m,f,d,c){return l(null,{declaredClass:"esri.layers.ArcGISMapServiceLayer",infoTemplates:null,constructor:function(a,b){this.layerInfos=[];b&&(this.infoTemplates=b.infoTemplates||null);var c=this._params={},d=this._url.query?
this._url.query.token:null;d&&(c.token=d)},setInfoTemplates:function(a){this.infoTemplates=a},_load:function(){m({url:this._url.path,content:n.mixin({f:"json"},this._params),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler})},spatialReference:null,initialExtent:null,fullExtent:null,description:null,units:null,_initLayer:function(e,b){try{this._findCredential();(this.credential&&this.credential.ssl||e&&e._ssl)&&this._useSSL();this.description=e.description;this.copyright=
e.copyrightText;this.spatialReference=e.spatialReference&&new f(e.spatialReference);this.initialExtent=e.initialExtent&&new d(e.initialExtent);this.fullExtent=e.fullExtent&&new d(e.fullExtent);this.units=e.units;this.maxRecordCount=e.maxRecordCount;this.maxImageHeight=e.maxImageHeight;this.maxImageWidth=e.maxImageWidth;this.supportsDynamicLayers=e.supportsDynamicLayers;var k=this.layerInfos=[],g=e.layers,p=this._defaultVisibleLayers=[];a.forEach(g,function(a,b){k[b]=new c(a);a.defaultVisibility&&
p.push(a.id)});this.visibleLayers||(this.visibleLayers=p);(this.version=e.currentVersion)||(this.version="capabilities"in e||"tables"in e?10:"supportedImageFormatTypes"in e?9.31:9.3);this.capabilities=e.capabilities;h.isDefined(e.minScale)&&!this._hasMin&&this.setMinScale(e.minScale);h.isDefined(e.maxScale)&&!this._hasMax&&this.setMaxScale(e.maxScale)}catch(r){this._errorHandler(r)}}})})},"esri/layers/LayerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],
function(l,n,a,g,q){return l(null,{declaredClass:"esri.layers.LayerInfo",constructor:function(a){n.mixin(this,a)},toJson:function(){return q.fixJson({defaultVisibility:this.defaultVisibility,id:this.id,maxScale:this.maxScale,minScale:this.minScale,name:this.name,parentLayerId:this.parentLayerId,subLayerIds:this.subLayerIds})}})})},"esri/layers/TimeInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../TimeExtent ./TimeReference ./LayerTimeOptions".split(" "),function(l,
n,a,g,q,h,m){l=l(null,{declaredClass:"esri.layers.TimeInfo",constructor:function(a){null!==a&&(n.mixin(this,a),a.exportOptions&&(this.exportOptions=new m(a.exportOptions)),this.timeExtent=null,a.timeExtent&&2===a.timeExtent.length&&(this.timeExtent=new q(a.timeExtent)),this.timeReference=new h(a.timeReference))}});n.mixin(l,{UNIT_CENTURIES:"esriTimeUnitsCenturies",UNIT_DAYS:"esriTimeUnitsDays",UNIT_DECADES:"esriTimeUnitsDecades",UNIT_HOURS:"esriTimeUnitsHours",UNIT_MILLISECONDS:"esriTimeUnitsMilliseconds",
UNIT_MINUTES:"esriTimeUnitsMinutes",UNIT_MONTHS:"esriTimeUnitsMonths",UNIT_SECONDS:"esriTimeUnitsSeconds",UNIT_UNKNOWN:"esriTimeUnitsUnknown",UNIT_WEEKS:"esriTimeUnitsWeeks",UNIT_YEARS:"esriTimeUnitsYears"});return l})},"esri/TimeExtent":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel"],function(l,n,a,g){var q=l(null,{declaredClass:"esri.TimeExtent",constructor:function(a){if(1<arguments.length)this._create(arguments[0],arguments[1]);else if(a)if(n.isArray(a)){var g=
a[0],f=a[1];this.startTime=null===g||"null"===g?null:new Date(g);this.endTime=null===f||"null"===f?null:new Date(f)}else a instanceof Date&&this._create(a,null)},offset:function(a,g){var f=new q,d=this.startTime,c=this.endTime;d&&(f.startTime=this._getOffsettedDate(d,a,g));c&&(f.endTime=this._getOffsettedDate(c,a,g));return f},intersection:function(a){return this._intersection(this,a)},toJson:function(){var a=[],g=this.startTime;a.push(g?g.getTime():"null");g=this.endTime;a.push(g?g.getTime():"null");
return a},_create:function(a,g){this.startTime=a?new Date(a.getTime()):null;this.endTime=g?new Date(g.getTime()):null},_refData:{esriTimeUnitsMilliseconds:{getter:"getUTCMilliseconds",setter:"setUTCMilliseconds",multiplier:1},esriTimeUnitsSeconds:{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},esriTimeUnitsMinutes:{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},esriTimeUnitsHours:{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},esriTimeUnitsDays:{getter:"getUTCDate",
setter:"setUTCDate",multiplier:1},esriTimeUnitsWeeks:{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},esriTimeUnitsMonths:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},esriTimeUnitsYears:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},esriTimeUnitsDecades:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:10},esriTimeUnitsCenturies:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}},_intersection:function(a,g){if(a&&g){var f=a.startTime,d=a.endTime,
c=g.startTime,e=g.endTime,f=f?f.getTime():-Infinity,c=c?c.getTime():-Infinity,d=d?d.getTime():Infinity,e=e?e.getTime():Infinity,b,k;c>=f&&c<=d?b=c:f>=c&&f<=e&&(b=f);d>=c&&d<=e?k=d:e>=f&&e<=d&&(k=e);if(!isNaN(b)&&!isNaN(k))return f=new q,f.startTime=-Infinity===b?null:new Date(b),f.endTime=Infinity===k?null:new Date(k),f}return null},_getOffsettedDate:function(a,g,f){var d=this._refData;a=new Date(a.getTime());g&&f&&(d=d[f],a[d.setter](a[d.getter]()+g*d.multiplier));return a}});return q})},"esri/layers/TimeReference":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(l,n,a,g){return l(null,{declaredClass:"esri.layers.TimeReference",constructor:function(a){a&&n.mixin(this,a)}})})},"esri/layers/LayerTimeOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(l,n,a,g,q){return l(null,{declaredClass:"esri.layers.LayerTimeOptions",constructor:function(a){a&&n.mixin(this,a)},toJson:function(){return q.fixJson({timeDataCumulative:this.timeDataCumulative,timeOffset:this.timeOffset,
timeOffsetUnits:this.timeOffsetUnits,useTime:this.useTime})}})})},"esri/layers/TileMap":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/io-query ../request ../urlUtils".split(" "),function(l,n,a,g,q,h,m){return l(null,{declaredClass:"esri.layers.TileMap",constructor:function(a){this.layer=a;this._tileMaps={}},getTile:function(a,d,c,e,b){a={id:e,level:a,row:d,col:c};d=this._getResamplingBudget();0<d?this._process({tile:a,requestedTile:a,callback:b,resamplingBudget:d}):
(b||this.callback).call(this,a,a)},statusOf:function(a,d,c){var e=this._getResamplingBudget();a={level:a,row:d,col:c};if(0===e)return 1;for(;0<=e;){d=this._tileToTileMap(a);if(!this._tileMaps[d.uid])return-1;d=this._tileMaps[d.uid];if(!d.promise.isFulfilled())return-1;if(this._isTileAvailable(a,d))return 1;a=this._parentTile(a);if(!a)break;e--}return 0},style:function(a,d){if(!(a.level===d.level&&a.row===d.row&&a.col===d.col)){for(var c=this.layer.tileInfo,e=c.lods,b=c.cols,c=c.rows,k,g,h=e.length-
1;!k||!g;)!k&&e[h].level===a.level&&(k=e[h]),!g&&e[h].level===d.level&&(g=e[h]),h--;e=Math.round(k.resolution/g.resolution);return{width:b*e+"px",height:c*e+"px",margin:"-"+d.row%e*c+"px 0 0 -"+d.col%e*b+"px","will-change":"transform"}}},_process:function(a){var d=a.tile,c=this._tileToTileMap(d),e=this._parentTile(d);this._getTileMap(c).then(n.hitch(this,function(b){c=b;this._isTileAvailable(d,c)?(a.callback||this.callback).call(this,d,a.requestedTile):0<a.resamplingBudget&&e?(a.resamplingBudget--,
a.tile=e,this._process(a)):(a.callback||this.callback).call(this,a.requestedTile,a.requestedTile)}),n.hitch(this,function(){(a.callback||this.callback).call(this,a.requestedTile,a.requestedTile)}))},_getTileMap:function(a){var d,c,e,b,k=null;this._tileMaps[a.uid]?(a=this._tileMaps[a.uid],d=a.promise):(this._tileMaps[a.uid]=a,c=new g,h({url:this._getTileMapUrl(a.level,a.row,a.col),handleAs:"json",callbackParamName:"callback",timeout:3E3,load:function(d){n.mixin(a,d);if(a.data&&0<a.data.length){b=a.data.length;
if(1===b)k=a.data[0];else{k=a.data[0];for(e=1;e<b;e++)if(a.data[e]!==k){k=null;break}}null!==k&&(delete a.data,a.value=k)}c.resolve(a)},error:function(a){c.reject()}}),d=a.promise=c.promise);return d},_parentTile:function(f){var d=this.layer.tileInfo.lods,c,e,b=null;a.some(d,function(a,b){return f.level===a.level?(c=a,e=b,!0):!1});0<e&&(d=d[e-1],b={id:f.id,level:d.level,row:Math.floor(f.row*c.resolution/d.resolution+0.01),col:Math.floor(f.col*c.resolution/d.resolution+0.01)});return b},_tileToTileMap:function(a){var d=
8*Math.floor(a.row/8),c=8*Math.floor(a.col/8);return{uid:a.level+"_"+d+"_"+c,level:a.level,row:d,col:c}},_isTileAvailable:function(a,d){var c,e;d.valid?void 0!==d.value?c=d.value:(c=d.location.left,e=d.location.top,c=(a.row-e)*d.location.width+(a.col-c),c=c<d.data.length?d.data[c]:0):c=0;return c},_getTileMapUrl:function(a,d,c){var e=this.layer,b=e.tileServers,k=e._getToken(),g=e._url.query;a=(b?b[d%b.length]:e._url.path)+"/tilemap/"+a+"/"+d+"/"+c+"/8/8";g&&(a+="?"+q.objectToQuery(g));if(k&&(!g||
!g.token))a+=(-1===a.indexOf("?")?"?":"\x26")+"token\x3d"+k;a=e.addTimestampToURL(a);return m.addProxy(a)},_getResamplingBudget:function(){var a=this.layer,d=0;if(a.resampling&&(d=a._resamplingTolerance,null===d||void 0===d))d=a.tileInfo.lods.length;return d}})})},"esri/layers/MapImageLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-style ../kernel ../config ../sniff ../domUtils ../geometry/Point ../geometry/webMercatorUtils ./layer".split(" "),
function(l,n,a,g,q,h,m,f,d,c,e,b,k){var s=l([k],{declaredClass:"esri.layers.MapImageLayer","-chains-":{constructor:"manual"},constructor:function(b){this.inherited(arguments,[null,b]);this._mapImages=[];var c=a.hitch;this._panStart=c(this,this._panStart);this._pan=c(this,this._pan);this._extentChange=c(this,this._extentChange);this._zoom=c(this,this._zoom);this._zoomStart=c(this,this._zoomStart);this._scale=c(this,this._scale);this._resize=c(this,this._resize);n.connect(this,"onSuspend",this,this._onSuspend);
n.connect(this,"onResume",this,this._onResume);this.loaded=!0;this.onLoad(this)},opacity:1,addImage:function(a){var b=this._mapImages.push(a),b=b-1;a._idx=b;a._layer=this;this._div&&this._createImage(a,b)},removeImage:function(a){if(a){var b=a._idx,c=this._mapImages;if(c[b]===a){delete c[b];if(b=a._node)this._clearEvents(b),b.e_idx=b.e_bl=b.e_tr=b.e_l=b.e_t=b.e_w=b.e_h=null,b.parentNode&&(b.parentNode.removeChild(b),q.destroy(b));a._node=a._idx=a._layer=null}}},removeAllImages:function(){var a=this._mapImages,
b,c=a.length;for(b=0;b<c;b++){var d=a[b];d&&this.removeImage(d)}this._mapImages=[]},getImages:function(){var a=this._mapImages,b=[],c,d=a.length;for(c=0;c<d;c++)a[c]&&b.push(a[c]);return b},setOpacity:function(a){this.opacity!=a&&(this._opacityChanged(this.opacity=a),this.onOpacityChange())},onOpacityChange:function(){},_opacityChanged:function(a){var b=this._div,c,e;if(b)if(!d("ie")||8<d("ie"))h.set(b,"opacity",a);else{e=b.childNodes;c=e.length;for(b=0;b<c;b++)h.set(e[b],"opacity",a)}},_createImage:function(a,
b){var c=q.create("img");h.set(c,{position:"absolute"});1>a.opacity?h.set(c,"opacity",a.opacity):8>=d("ie")&&h.set(c,"opacity",this.opacity);a.rotation&&!(9>d("ie"))&&h.set(c,m._css.names.transform,m._css.rotate(360-a.rotation));a._node=c;c.e_idx=b;c.e_layer=this;c.e_load=n.connect(c,"onload",s.prototype._imageLoaded);c.e_error=n.connect(c,"onerror",s.prototype._imageError);c.e_abort=n.connect(c,"onabort",s.prototype._imageError);c.src=a.href},_imageLoaded:function(a,b){var c=b||a.target||a.currentTarget,
d=c.e_layer,e=d._mapImages[c.e_idx],k=d._map;k&&(k.__zooming||k.__panning||!d._sr)?d._standby.push(c):(d._clearEvents(c),e&&e._node===c&&k&&d._attach(e))},_imageError:function(a){a=a.target||a.currentTarget;var b=a.e_layer,c=b._mapImages[a.e_idx];b._clearEvents(a);c&&(c._node=null)},_clearEvents:function(a){var b=n.disconnect;b(a.e_load);b(a.e_error);b(a.e_abort);a.e_load=a.e_error=a.e_abort=a.e_layer=null},_attach:function(a){var c=a.extent,d=c.spatialReference,k=this._sr,f=this._div,g=a._node,h=
new e({x:c.xmin,y:c.ymin,spatialReference:d}),c=new e({x:c.xmax,y:c.ymax,spatialReference:d});k.equals(d)||(k.isWebMercator()&&4326===d.wkid?(h=b.geographicToWebMercator(h),c=b.geographicToWebMercator(c)):d.isWebMercator()&&4326===k.wkid&&(h=b.webMercatorToGeographic(h),c=b.webMercatorToGeographic(c)));g.e_bl=h;g.e_tr=c;a.visible&&(this._setPos(g,f._left,f._top),(this._active||f).appendChild(g))},_setPos:function(a,b,c){var d=a.e_bl,e=a.e_tr,k=this._map,d=k.toScreen(d),e=k.toScreen(e);b=d.x-b;c=e.y-
c;var f=Math.abs(e.x-d.x),d=Math.abs(d.y-e.y),e={width:f+"px",height:d+"px"},g=this._mapImages[a.e_idx];"css-transforms"===k.navigationMode?e[m._css.names.transform]=m._css.translate(b,c)+(g.rotation?" "+m._css.rotate(360-g.rotation):""):(e.left=b+"px",e.top=c+"px");h.set(a,e);a.e_l=b;a.e_t=c;a.e_w=f;a.e_h=d},managedSuspension:!0,_setMap:function(a,b){this.inherited(arguments);var e=this._div=q.create("div",null,b),k=m._css.names,f={position:"absolute"},g=a.__visibleDelta;if(!d("ie")||8<d("ie"))f.opacity=
this.opacity;"css-transforms"===a.navigationMode?(f[k.transform]=m._css.translate(g.x,g.y),h.set(e,f),e._left=g.x,e._top=g.y,f={position:"absolute",width:a.width+"px",height:a.height+"px",overflow:"visible"},this._active=q.create("div",null,e),h.set(this._active,f),this._passive=q.create("div",null,e),h.set(this._passive,f)):(e._left=0,e._top=0,h.set(e,f));this._standby=[];k=this._mapImages;g=k.length;for(f=0;f<g;f++){var l=k[f];l._node||this._createImage(l,l._idx)}c.hide(e);return e},_unsetMap:function(a,
b){this._disconnect();var c=this._div;if(c){var d=this._mapImages,e,k=d.length;for(e=0;e<k;e++){var f=d[e];if(f){var g=f._node;g&&(this._clearEvents(g),g.e_idx=g.e_bl=g.e_tr=g.e_l=g.e_t=g.e_w=g.e_h=null);f._node=null}}b.removeChild(c);q.destroy(c)}this._map=this._div=this._sr=this._active=this._passive=this._standby=null;this.inherited(arguments)},_onSuspend:function(){this._disconnect();c.hide(this._div)},_onResume:function(a){a.firstOccurrence&&(this._sr=this._map.spatialReference,this._processStandbyList());
a=this._map;var b=this._div,d=a.__visibleDelta;"css-transforms"===a.navigationMode&&(b._left=d.x,b._top=d.y,h.set(b,m._css.names.transform,m._css.translate(b._left,b._top)));this._redraw("css-transforms"===a.navigationMode);this._connect(a);c.show(b)},_connect:function(a){if(!this._connections){var b=n.connect,c="css-transforms"===a.navigationMode;this._connections=[b(a,"onPanStart",this._panStart),b(a,"onPan",this._pan),b(a,"onExtentChange",this._extentChange),c&&b(a,"onZoomStart",this._zoomStart),
c?b(a,"onScale",this._scale):b(a,"onZoom",this._zoom),c&&b(a,"onResize",this._resize)]}},_disconnect:function(){this._connections&&(g.forEach(this._connections,n.disconnect),this._connections=null)},_panStart:function(){this._panL=this._div._left;this._panT=this._div._top},_pan:function(a,b){var c=this._div;c._left=this._panL+b.x;c._top=this._panT+b.y;"css-transforms"===this._map.navigationMode?h.set(c,m._css.names.transform,m._css.translate(c._left,c._top)):h.set(c,{left:c._left+"px",top:c._top+
"px"})},_extentChange:function(a,b,c){c?this._redraw("css-transforms"===this._map.navigationMode):b&&this._pan(a,b);this._processStandbyList()},_processStandbyList:function(){var a,b=this._standby;if(b&&b.length)for(a=b.length-1;0<=a;a--)this._imageLoaded(null,b[a]),b.splice(a,1)},_redraw:function(a){if(a){a=this._passive;var b=m._css.names;h.set(a,b.transition,"none");this._moveImages(a,this._active);h.set(a,b.transform,"none")}a=this._active||this._div;var b=this._div._left,c=this._div._top,d,e=
a.childNodes.length,k;for(d=0;d<e;d++)k=a.childNodes[d],this._setPos(k,b,c)},_zoom:function(a,b,c){a=this._div;var d=a._left,e=a._top,k,f=a.childNodes.length,g;for(k=0;k<f;k++){g=a.childNodes[k];var m=g.e_w*b,l=g.e_h*b,n=(c.x-d-g.e_l)*(m-g.e_w)/g.e_w,q=(c.y-e-g.e_t)*(l-g.e_h)/g.e_h,n=isNaN(n)?0:n,q=isNaN(q)?0:q;h.set(g,{left:g.e_l-n+"px",top:g.e_t-q+"px",width:m+"px",height:l+"px"})}},_zoomStart:function(){this._moveImages(this._active,this._passive)},_moveImages:function(a,b){var c=a.childNodes,
d;d=c.length;if(0<d)for(d-=1;0<=d;d--)b.appendChild(c[d])},_scale:function(a,b){var c=m._css.names,d=this._passive;h.set(d,c.transition,b?"none":c.transformName+" "+f.defaults.map.zoomDuration+"ms ease");m._css.matrix(a);h.set(d,c.transform,m._css.matrix(a))},_resize:function(a,b,c){h.set(this._active,{width:b+"px",height:c+"px"});h.set(this._passive,{width:b+"px",height:c+"px"})}});return s})},"esri/layers/OpenStreetMapLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../urlUtils ../SpatialReference ../geometry/Extent ./TiledMapServiceLayer ./TileInfo".split(" "),
function(l,n,a,g,q,h,m,f,d){return l(f,{declaredClass:"esri.layers.OpenStreetMapLayer",constructor:function(a){this.spatialReference=new h({wkid:102100});this.tileInfo=new d({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:{wkid:102100},lods:[{level:0,scale:5.91657527591555E8,resolution:156543.033928},{level:1,scale:2.95828763795777E8,resolution:78271.5169639999},{level:2,scale:1.47914381897889E8,resolution:39135.7584820001},
{level:3,scale:7.3957190948944E7,resolution:19567.8792409999},{level:4,scale:3.6978595474472E7,resolution:9783.93962049996},{level:5,scale:1.8489297737236E7,resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,
resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},{level:13,scale:72223.819286,resolution:19.1092570712683},{level:14,scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,scale:2256.994353,resolution:0.597164283559817},{level:19,scale:1128.497176,resolution:0.298582141647617}]});this.fullExtent=
new m({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,spatialReference:{wkid:102100}});this.initialExtent=new m({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,spatialReference:{wkid:102100}});this.tileServers=a&&a.tileServers||["http://a.tile.openstreetmap.org","http://b.tile.openstreetmap.org","http://c.tile.openstreetmap.org"];this.serversLength=this.tileServers.length;this._displayLevels=a?a.displayLevels:null;this.copyright=a&&a.copyright||
"Map data \x26copy; OpenStreetMap contributors, CC-BY-SA";this.loaded=!0;this.onLoad(this);(a=a&&a.loadCallback)&&a(this)},getTileUrl:function(a,d,b){a=this.tileServers[d%this.serversLength]+"/"+a+"/"+b+"/"+d+".png";a=this.addTimestampToURL(a);return q.addProxy(a)}})})},"esri/dijit/Popup":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/kernel dojo/has dojo/window dojo/Stateful dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/registry ../kernel ../lang ../domUtils ../geometry/Polyline ../geometry/Polygon ../InfoWindowBase ../PopupBase dojo/i18n!../nls/jsapi dojo/NodeList-dom require require".split(" "),
function(l,n,a,g,q,h,m,f,d,c,e,b,k,s,p,r,t,x,y,u,z,v,w,A){return l([v,w,f],{declaredClass:"esri.dijit.Popup",offsetX:3,offsetY:3,zoomFactor:4,marginLeft:25,marginTop:25,highlight:!0,pagingControls:!0,pagingInfo:!0,keepHighlightOnHide:!1,popupWindow:!0,titleInBody:!0,anchor:"auto",visibleWhenEmpty:!0,hideDelay:1E3,location:null,constructor:function(a,d){this.initialize();n.mixin(this,a);this.domNode=c.byId(d);var k=this._nls=n.mixin({},A.widgets.popup),f=this.domNode;b.add(f,"esriPopup");(this._isRTL=
!s.isBodyLtr())&&p.set(f,"direction","rtl");e.set(f,"innerHTML","\x3cdiv class\x3d'esriPopupWrapper' style\x3d'position: absolute;'\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'titlePane'\x3e\x3cdiv class\x3d'spinner hidden' title\x3d'"+k.NLS_searching+"...'\x3e\x3c/div\x3e\x3cdiv class\x3d'title'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton prev hidden' title\x3d'"+k.NLS_prevFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton next hidden' title\x3d'"+k.NLS_nextFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton maximize' title\x3d'"+
k.NLS_maximize+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton close' title\x3d'"+k.NLS_close+"'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer content'\x3e\x3cdiv class\x3d'contentPane'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'actionsPane'\x3e\x3cdiv class\x3d'actionList hidden'\x3e\x3ca title\x3d"+k.NLS_zoomTo+" class\x3d'action zoomTo' href\x3d'javascript:void(0);'\x3e\x3cspan\x3e"+k.NLS_zoomTo+"\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'pointer hidden'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'outerPointer hidden'\x3e\x3c/div\x3e");
this._sizers=q.query(".sizer",f);k=q.query(".titlePane",f)[0];c.setSelectable(k,!1);this._title=q.query(".title",k)[0];this._prevFeatureButton=q.query(".prev",k)[0];this._nextFeatureButton=q.query(".next",k)[0];this._maxButton=q.query(".maximize",k)[0];this._spinner=q.query(".spinner",k)[0];this._contentPane=q.query(".contentPane",f)[0];this._positioner=q.query(".esriPopupWrapper",f)[0];this._pointer=q.query(".pointer",f)[0];this._outerPointer=q.query(".outerPointer",f)[0];this._actionList=q.query(".actionsPane .actionList",
f)[0];this._eventConnections=[g.connect(q.query(".close",k)[0],"onclick",this,this.hide),g.connect(this._prevFeatureButton,"onclick",this,this.selectPrevious),g.connect(this._nextFeatureButton,"onclick",this,this.selectNext),g.connect(this._maxButton,"onclick",this,this._toggleSize),g.connect(q.query(".zoomTo",this._actionList)[0],"onclick",this,this._zoomToFeature),g.connect(this,"onClearFeatures",this,this._featuresCleared),g.connect(this,"onSelectionChange",this,this._featureSelected),g.connect(this,
"onDfdComplete",this,this._updateUI)];h("esri-touch")&&(f=y.setScrollable(this._contentPane),this._eventConnections.push(f[0],f[1]));this._toggleVisibility(!1)},onMaximize:function(){},onRestore:function(){},setMap:function(a){this.inherited(arguments);k.place(this.domNode,a.root);this.highlight&&this.enableHighlight(a);this._maxHeight=p.get(this._contentPane,"maxHeight")},unsetMap:function(){this.disableHighlight(this.map);this.inherited(arguments)},setTitle:function(a){if(this.popupWindow){if(!x.isDefined(a)||
""===a)a="\x26nbsp;";this.destroyDijits(this._title);this.place(a,this._title);this.isShowing&&(this.startupDijits(this._title),this.reposition())}},setContent:function(a){if(this.popupWindow){if(!x.isDefined(a)||""===a)a="\x26nbsp;";this.destroyDijits(this._contentPane);this.place(a,this._contentPane);this.isShowing&&(this.startupDijits(this._contentPane),this.reposition())}},show:function(a,b){if(this.popupWindow)if(this._delayHide=!1,a){var c=this.map,d;a.spatialReference?(this.location=a,d=c.toScreen(a)):
(this.location=c.toMap(a),d=a);var e=c._getFrameWidth();if(-1!==e&&(d.x%=e,0>d.x&&(d.x+=e),c.width>e))for(c=(c.width-e)/2;d.x<c;)d.x+=e;this._maximized?this.restore():this._setPosition(d);b&&b.closestFirst&&this.showClosestFirst(this.location);this.isShowing||(this._toggleVisibility(!0),this._followMap(),this.startupDijits(this._title),this.startupDijits(this._contentPane),this.reposition(),this.showHighlight(),this.onShow())}else this._toggleVisibility(!0)},hide:function(){this.isShowing&&(this._toggleVisibility(!1),
this._unfollowMap(),this.keepHighlightOnHide||this.hideHighlight(),this.onHide())},resize:function(a,b){this.popupWindow&&(this._sizers.style({width:a+"px"}),p.set(this._contentPane,"maxHeight",b+"px"),this._maxHeight=b,this.isShowing&&this.reposition())},reposition:function(){this.popupWindow&&this.map&&this.location&&(!this._maximized&&this.isShowing)&&this._setPosition(this.map.toScreen(this.location))},maximize:function(){var a=this.map;if(a&&!this._maximized&&this.popupWindow){this._maximized=
!0;var c=this._maxButton;b.remove(c,"maximize");b.add(c,"restore");e.set(c,"title",this._nls.NLS_restore);var c=this.marginLeft,d=this.marginTop,k=a.width-2*c,a=a.height-2*d;p.set(this.domNode,{left:this._isRTL?null:c+"px",right:this._isRTL?c+"px":null,top:d+"px",bottom:null});p.set(this._positioner,{left:null,right:null,top:null,bottom:null});this._savedWidth=p.get(this._sizers[0],"width");this._savedHeight=p.get(this._contentPane,"maxHeight");this._sizers.style({width:k+"px"});p.set(this._contentPane,
{maxHeight:a-65+"px",height:a-65+"px"});this._showPointer("");this._unfollowMap();b.add(this.domNode,"esriPopupMaximized");this.onMaximize()}},restore:function(){if(this.map&&this._maximized&&this.popupWindow){this._maximized=!1;var a=this._maxButton;b.remove(a,"restore");b.add(a,"maximize");e.set(a,"title",this._nls.NLS_maximize);p.set(this._contentPane,"height",null);this.resize(this._savedWidth,this._savedHeight);this._savedWidth=this._savedHeight=null;this.show(this.location);this._followMap();
b.remove(this.domNode,"esriPopupMaximized");this.onRestore()}},startup:function(){},destroy:function(){this.map&&this.unsetMap();this.cleanup();this.isShowing&&this.hide();this.destroyDijits(this._title);this.destroyDijits(this._content);a.forEach(this._eventConnections,g.disconnect);k.destroy(this.domNode);this._sizers=this._contentPane=this._actionList=this._positioner=this._pointer=this._outerPointer=this._title=this._prevFeatureButton=this._nextFeatureButton=this._spinner=this._eventConnections=
this._pagerScope=this._targetLocation=this._nls=this._maxButton=null},selectNext:function(){this.select(this.selectedIndex+1)},selectPrevious:function(){this.select(this.selectedIndex-1)},setFeatures:function(){this.inherited(arguments);this._updateUI()},postscript:null,_highlightSetter:function(a){var b=this.highlight,c=this.map;this.highlight=a;if(c&&a!==b)if(a){if(this.enableHighlight(c),a=this.features&&this.features[this.selectedIndex])this.updateHighlight(c,a),this.showHighlight()}else this.disableHighlight(c)},
_pagingControlsSetter:function(a){var b=this.pagingControls,c=this.map;this.pagingControls=a;c&&a!==b&&this._updatePagingControls()},_pagingInfoSetter:function(a){var b=this.pagingInfo,c=this.map;this.pagingInfo=a;c&&a!==b&&(this.features&&this.features.length)&&this._updatePagingInfo()},_popupWindowSetter:function(a){var b=this.popupWindow,c=this.map;this.popupWindow=a;c&&a!==b&&(a?(this._updateUI(),this._updateWindow()):(this.hide(),this.showHighlight()))},_anchorSetter:function(a){var b=this.anchor;
this.anchor=a;this.map&&a!==b&&this.reposition()},_featuresCleared:function(){this.setTitle("\x26nbsp;");this.setContent("\x26nbsp;");this._setPagerCallbacks(this);this._updateUI();this.hideHighlight()},_featureSelected:function(){this._updateUI();this._updateWindow()},_updateWindow:function(){var a=this.selectedIndex;if(0<=a){var b=this.features[a].getContent(),c;!this.titleInBody&&b&&n.isString(b.id)&&(c=r.byId(b.id))&&c.set&&/_PopupRenderer/.test(c.declaredClass)&&c.set("showTitle",!1);this.setContent(b);
this.updateHighlight(this.map,this.features[a]);this.showHighlight()}},_toggleVisibility:function(a){this._setVisibility(a);this.isShowing=a},_setVisibility:function(a){p.set(this.domNode,"visibility",a?"visible":"hidden");b.toggle(this.domNode,"esriPopupVisible",a)},_waitAndHide:function(a){var b=this;this._delayHide=!0;setTimeout(function(){b._delayHide&&(b._delayHide=!1,b.hide())},a)},_followMap:function(){this._unfollowMap();var a=this.map;this._handles=[g.connect(a,"onPanStart",this,this._onPanStart),
g.connect(a,"onPan",this,this._onPan),g.connect(a,"onZoomStart",this,this._onZoomStart),g.connect(a,"onExtentChange",this,this._onExtentChange)]},_unfollowMap:function(){var b=this._handles;b&&(a.forEach(b,g.disconnect),this._handles=null)},_onPanStart:function(){var a=this.domNode.style;this._panOrigin={left:a.left,top:a.top,right:a.right,bottom:a.bottom}},_onPan:function(a,b){var c=this._panOrigin,d=b.x,e=b.y,k=c.left,f=c.top,g=c.right,c=c.bottom;k&&(k=parseFloat(k)+d+"px");f&&(f=parseFloat(f)+
e+"px");g&&(g=parseFloat(g)-d+"px");c&&(c=parseFloat(c)-e+"px");p.set(this.domNode,{left:k,top:f,right:g,bottom:c})},_onZoomStart:function(){this._setVisibility(!1)},_onExtentChange:function(a,b,c){c&&(this._setVisibility(!0),this.show(this._targetLocation||this.location));this._targetLocation=null},_toggleSize:function(){this._maximized?this.restore():this.maximize()},_setPosition:function(a){var b=a.x,c=a.y;a=this.offsetX||0;var d=this.offsetY||0,e=0,k=0,f=s.position(this.map.container,!0),g=f.w,
h=f.h,l="Left",r="bottom",n=s.getContentBox(this._positioner),q=n.w/2,t=n.h/2,u=p.get(this._sizers[0],"height")+this._maxHeight+p.get(this._sizers[2],"height"),w=u/2,x=0,P=0,v=b,y=c,z=this.anchor.toLowerCase();if("auto"===z){if(z=m.getBox)z=z(),x=Math.max(z.l,f.x),g=Math.min(z.l+z.w,f.x+f.w),P=Math.max(z.t,f.y),h=Math.min(z.t+z.h,f.y+f.h),v+=f.x,y+=f.y;f=y-P>=u;u=h-y>=u;z=g-v>=n.w;n=v-x>=n.w;y-P>w&&h-y>=w&&(z?(r="",l="Left"):n&&(r="",l="Right"));l&&r&&v-x>q&&g-v>=q&&(f?(l="",r="bottom"):u&&(l="",
r="top"));l&&r&&(z&&f?(l="Left",r="bottom"):z&&u?(l="Left",r="top"):n&&u?(l="Right",r="top"):n&&f&&(l="Right",r="bottom"))}else r=l="",-1!==z.indexOf("top")?r="bottom":-1!==z.indexOf("bottom")&&(r="top"),-1!==z.indexOf("left")?l="Right":-1!==z.indexOf("right")&&(l="Left");w=r+l;switch(w){case "top":case "bottom":k=14;break;case "Left":case "Right":e=13;break;case "topLeft":case "topRight":case "bottomLeft":case "bottomRight":k=14,e=-16}p.set(this.domNode,{left:b+"px",top:c+"px",right:null,bottom:null});
b={left:null,right:null,top:null,bottom:null};l?b[l.toLowerCase()]=e+a+"px":b.left=-q+"px";r?b[r]=k+d+"px":b.top=-t+"px";p.set(this._positioner,b);this._showPointer(w)},_showPointer:function(a){b.remove(this._pointer,"top bottom right left topLeft topRight bottomRight bottomLeft hidden".split(" "));b.remove(this._outerPointer,["right","left","hidden"]);"Right"===a||"Left"===a?(a=a.toLowerCase(),b.add(this._outerPointer,a)):b.add(this._pointer,a)},_setPagerCallbacks:function(a,b,c){if(this.pagingControls&&
!(a===this&&(!this._pagerScope||this._pagerScope===this))&&a!==this._pagerScope){this._pagerScope=a;a===this&&(b=this.selectPrevious,c=this.selectNext);var d=this._eventConnections;g.disconnect(d[1]);g.disconnect(d[2]);b&&(d[1]=g.connect(this._prevFeatureButton,"onclick",a,b));c&&(d[2]=g.connect(this._nextFeatureButton,"onclick",a,c))}},_getLocation:function(b){var c=this.map,d,e,k=0,f;if(b=b&&b.geometry)switch(b.type){case "point":d=b;break;case "multipoint":d=b.getPoint(0);e=b.getExtent();break;
case "polyline":d=b.getPoint(0,0);e=b.getExtent();-1!==c._getFrameWidth()&&(a.forEach(b.paths,function(a){a=(new u({paths:[a,c.spatialReference]})).getExtent();var b=Math.abs(a.ymax-a.ymin),d=Math.abs(a.xmax-a.xmin),b=d>b?d:b;b>k&&(k=b,f=a)}),f.spatialReference=e.spatialReference,e=f);break;case "polygon":d=b.getPoint(0,0),e=b.getExtent(),-1!==c._getFrameWidth()&&(a.forEach(b.rings,function(a){a=(new z({rings:[a,c.spatialReference]})).getExtent();var b=Math.abs(a.ymax-a.ymin),d=Math.abs(a.xmax-a.xmin),
b=d>b?d:b;b>k&&(k=b,f=a)}),f.spatialReference=e.spatialReference,e=f)}return[d,e]},_zoomToFeature:function(a){a.preventDefault();var b=this.features,c=this.selectedIndex;a=this.map;if(b){c=this._getLocation(b[c]);b=c[0];c=c[1];b||(b=this.location);if(!c||!c.intersects(this.location))this.location=b;if(c&&c.getWidth()&&c.getHeight())a.setExtent(c,!0);else{var d=a.getNumLevels(),c=a.getLevel(),e=a.getMaxZoom(),k=this.zoomFactor||1;0<d?c!==e&&(d=c+k,d>e&&(d=e),a.navigationManager._wheelZoom({value:d-
c,mapPoint:b},!0)):a.navigationManager._wheelZoom({value:2*(1/Math.pow(2,k)),mapPoint:b},!0)}}},_updatePagingControls:function(){var a=this._prevFeatureButton,c=this._nextFeatureButton,d=this.selectedIndex,e=this.features?this.features.length:0;this.pagingControls&&1<e?(0===d?b.add(a,"hidden"):b.remove(a,"hidden"),d===e-1?b.add(c,"hidden"):b.remove(c,"hidden")):(b.add(a,"hidden"),b.add(c,"hidden"))},_updatePagingInfo:function(){var a=this.features?this.features.length:0,b=this._nls,c="\x26nbsp;";
this.pagingInfo&&1<a&&b.NLS_pagingInfo&&(c=x.substitute({index:this.selectedIndex+1,total:a},b.NLS_pagingInfo));if(a&&(b=this.getSelectedFeature(),a=b.getInfoTemplate(),b=b.getTitle(),(!a||/esri\.InfoTemplate/.test(a.declaredClass)||!this.titleInBody)&&b))c=b+("\x26nbsp;"===c?"":" "+c);this.setTitle(c)},_updateUI:function(){if(this.popupWindow){var a=this.features,c=this.deferreds,d=a?a.length:0,e=this._spinner,k=this._actionList,f=this._nls;this._updatePagingControls();this._updatePagingInfo();d?
b.remove(k,"hidden"):b.add(k,"hidden");c&&c.length?a?b.remove(e,"hidden"):this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+f.NLS_searching+"...\x3c/div\x3e"):(b.add(e,"hidden"),d||(this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+f.NLS_noInfo+".\x3c/div\x3e"),this.visibleWhenEmpty||this._waitAndHide(this.hideDelay)))}}})})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),function(l,n,a,g,q,h,
m){n.add("rtl-adjust-position-for-verticalScrollBar",function(d,c){var e=a.body(c),b=m.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},e,"last"),k=m.create("div",{style:{overflow:"hidden",direction:"ltr"}},b,"last"),f=0!=q.position(k).x;b.removeChild(k);e.removeChild(b);return f});n.add("position-fixed-support",function(d,c){var e=a.body(c),b=m.create("span",{style:{visibility:"hidden",
position:"fixed",left:"1px",top:"1px"}},e,"last"),k=m.create("span",{style:{position:"fixed",left:"0",top:"0"}},b,"last"),f=q.position(k).x!=q.position(b).x;b.removeChild(k);e.removeChild(b);return f});var f={getBox:function(d){d=d||a.doc;var c="BackCompat"==d.compatMode?a.body(d):d.documentElement,e=q.docScroll(d);if(n("touch")){var b=f.get(d);d=b.innerWidth||c.clientWidth;c=b.innerHeight||c.clientHeight}else d=c.clientWidth,c=c.clientHeight;return{l:e.x,t:e.y,w:d,h:c}},get:function(a){if(n("ie")&&
f!==document.parentWindow){a.parentWindow.execScript("document._parentWindow \x3d window;","Javascript");var c=a._parentWindow;a._parentWindow=null;return c}return a.parentWindow||a.defaultView},scrollIntoView:function(d,c){try{d=g.byId(d);var e=d.ownerDocument||a.doc,b=a.body(e),k=e.documentElement||b.parentNode,f=n("ie"),p=n("webkit");if(!(d==b||d==k))if(!n("mozilla")&&(!f&&!p&&!n("opera")&&!n("trident"))&&"scrollIntoView"in d)d.scrollIntoView(!1);else{var m="BackCompat"==e.compatMode,l=Math.min(b.clientWidth||
k.clientWidth,k.clientWidth||b.clientWidth),x=Math.min(b.clientHeight||k.clientHeight,k.clientHeight||b.clientHeight),e=p||m?b:k,y=c||q.position(d),u=d.parentNode,p=function(a){return 6>=f||7==f&&m?!1:n("position-fixed-support")&&"fixed"==h.get(a,"position").toLowerCase()},z=this,v=function(a,b,c){"BODY"==a.tagName||"HTML"==a.tagName?z.get(a.ownerDocument).scrollBy(b,c):(b&&(a.scrollLeft+=b),c&&(a.scrollTop+=c))};if(!p(d))for(;u;){u==b&&(u=e);var w=q.position(u),A=p(u),B="rtl"==h.getComputedStyle(u).direction.toLowerCase();
if(u==e){w.w=l;w.h=x;if(e==k&&(f||n("trident"))&&B)w.x+=e.offsetWidth-w.w;if(0>w.x||!f||9<=f||n("trident"))w.x=0;if(0>w.y||!f||9<=f||n("trident"))w.y=0}else{var D=q.getPadBorderExtents(u);w.w-=D.w;w.h-=D.h;w.x+=D.l;w.y+=D.t;var E=u.clientWidth,C=w.w-E;0<E&&0<C&&(B&&n("rtl-adjust-position-for-verticalScrollBar")&&(w.x+=C),w.w=E);E=u.clientHeight;C=w.h-E;0<E&&0<C&&(w.h=E)}A&&(0>w.y&&(w.h+=w.y,w.y=0),0>w.x&&(w.w+=w.x,w.x=0),w.y+w.h>x&&(w.h=x-w.y),w.x+w.w>l&&(w.w=l-w.x));var F=y.x-w.x,K=y.y-w.y,I=F+y.w-
w.w,G=K+y.h-w.h,J,H;if(0<I*F&&(u.scrollLeft||u==e||u.scrollWidth>u.offsetHeight)){J=Math[0>F?"max":"min"](F,I);if(B&&(8==f&&!m||9<=f||n("trident")))J=-J;H=u.scrollLeft;v(u,J,0);J=u.scrollLeft-H;y.x-=J}if(0<G*K&&(u.scrollTop||u==e||u.scrollHeight>u.offsetHeight))J=Math.ceil(Math[0>K?"max":"min"](K,G)),H=u.scrollTop,v(u,0,J),J=u.scrollTop-H,y.y-=J;u=u!=e&&!A&&u.parentNode}}}catch(N){d.scrollIntoView(!1)}}};l.setObject("dojo.window",f);return f})},"esri/InfoWindowBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/dom-construct dojo/has dijit/registry ./kernel ./lang ./geometry/ScreenPoint".split(" "),
function(l,n,a,g,q,h,m,f,d,c,e){return l(null,{declaredClass:"esri.InfoWindowBase",constructor:function(){var a=n.hitch;this.__set_title=a(this,this.__set_title);this.__err_title=a(this,this.__err_title);this.__set_content=a(this,this.__set_content);this.__err_content=a(this,this.__err_content)},setMap:function(a){this.map=a},unsetMap:function(a){delete this.map},setTitle:function(){},setContent:function(){},show:function(){},hide:function(){},resize:function(){},onShow:function(){},onHide:function(){},
place:function(a,d){c.isDefined(a)?n.isObject(a)?h.place(a,d,"only"):d.innerHTML=a:d.innerHTML=""},startupDijits:function(a){this._processDijits(a)},destroyDijits:function(a){this._processDijits(a,!0)},_processDijits:function(b,c){if(b&&1===b.children.length){var d=b.children[0];if(d){var e=f.byNode(d),d=e?[e]:f.findWidgets(d);a.forEach(d,function(a){if(c){if(a._started&&!a._destroyed)try{a.destroyRecursive?a.destroyRecursive():a.destroy&&a.destroy()}catch(b){}}else if(!a._started)try{a.startup()}catch(d){}})}}},
__registerMapListeners:function(){this.__unregisterMapListeners();var a=this.map;this.__handles=[g.connect(a,"onPan",this,this.__onMapPan),g.connect(a,"onZoomStart",this,this.__onMapZmStart),g.connect(a,"onExtentChange",this,this.__onMapExtChg)]},__unregisterMapListeners:function(){var b=this.__handles;b&&(a.forEach(b,g.disconnect,g),this.__handles=null)},__onMapPan:function(a,c){this.move(c,!0)},__onMapZmStart:function(){this.__mcoords=this.mapCoords||this.map.toMap(new e(this.coords));this.hide(null,
!0)},__onMapExtChg:function(a,c,d){a=this.map;var e=this.mapCoords;e?this.show(e,null,!0):(c=d?a.toScreen(this.__mcoords):this.coords.offset(c&&c.x||0,c&&c.y||0),this.show(c,null,!0))},__setValue:function(a,d){this[a].innerHTML="";var e="_dfd"+a,f=this[e];f&&-1===f.fired&&(f.cancel(),this[e]=null);c.isDefined(d)&&(d instanceof q?(this[e]=d,d.addCallbacks(this["__set"+a],this["__err"+a])):this.__render(a,d))},__set_title:function(a){this._dfd_title=null;this.__render("_title",a)},__err_title:function(a){this._dfd_title=
null},__set_content:function(a){this._dfd_content=null;this.__render("_content",a)},__err_content:function(a){this._dfd_content=null},__render:function(a,c){var d=this[a];this.place(c,d);this.isShowing&&(this.startupDijits(d),"_title"===a&&this._adjustContentArea&&this._adjustContentArea())}})})},"esri/PopupBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Color dojo/_base/Deferred dojo/has ./kernel ./graphic ./geometry/Point ./geometry/jsonUtils ./geometry/mathUtils ./geometry/webMercatorUtils ./symbols/SimpleMarkerSymbol ./symbols/SimpleLineSymbol ./symbols/CartographicLineSymbol ./symbols/SimpleFillSymbol ./tasks/query ./Evented require".split(" "),
function(l,n,a,g,q,h,m,f,d,c,e,b,k,s,p,r,t,x){function y(a){return"sizeInfo"===a.type}return l(x,{declaredClass:"esri.PopupBase",_featureLayers:{},_updateEndHandles:[],_evtMap:{"set-features":!0,"clear-features":!0,"selection-change":!0,"dfd-complete":!0},onSetFeatures:function(){},onClearFeatures:function(){},onSelectionChange:function(){},onDfdComplete:function(){},initialize:function(){this.count=0;this.selectedIndex=-1;this.on("clear-features",n.hitch(this,this._resetUpdateEndListeners));this.on("dfd-complete",
n.hitch(this,this._processFeatures));this.on("set-features",n.hitch(this,this._processFeatures))},cleanup:function(){this.features=this.deferreds=null;this._resetUpdateEndListeners()},setFeatures:function(b){if(b&&b.length){this.clearFeatures();var c,d;b[0]instanceof q?d=b:c=b;c?this._updateFeatures(null,c):(this.deferreds=d,d=d.slice(0),a.forEach(d,function(a){a.addBoth(n.hitch(this,this._updateFeatures,a))},this))}},clearFeatures:function(){this.features=this.deferreds=this._marked=null;this.count=
0;var a=this.selectedIndex;this.selectedIndex=-1;if(-1<a)this.onSelectionChange();this.onClearFeatures()},getSelectedFeature:function(){var a=this.features;if(a)return a[this.selectedIndex]},select:function(a){0>a||a>=this.count||(this.selectedIndex=a,this.onSelectionChange())},enableHighlight:function(a){this._highlighted=a.graphics.add(new f(new d(0,0,a.spatialReference)));this._highlighted.hide();this.markerSymbol||(a=this.markerSymbol=new k,a.setStyle(k.STYLE_TARGET),a._setDim(16,16,0),a.setOutline(new p(s.STYLE_SOLID,
new g([0,255,255]),2,p.CAP_ROUND,p.JOIN_ROUND)),a.setColor(new g([0,0,0,0])));this.lineSymbol||(this.lineSymbol=new s(s.STYLE_SOLID,new g([0,255,255]),2));this.fillSymbol||(this.fillSymbol=new r(r.STYLE_NULL,new s(s.STYLE_SOLID,new g([0,255,255]),2),new g([0,0,0,0])))},disableHighlight:function(a){var b=this._highlighted;b&&(b.hide(),a.graphics.remove(b),delete this._highlighted);this.markerSymbol=this.lineSymbol=this.fillSymbol=null},showHighlight:function(){var a=this.features&&this.features[this.selectedIndex];
this._highlighted&&a&&a.geometry&&this._highlighted.show()},hideHighlight:function(){this._highlighted&&this._highlighted.hide()},updateHighlight:function(a,b){var d=b.geometry,e=this._highlighted;if(!d||!e)e&&e.hide();else{e.hide();!e._graphicsLayer&&a&&a.graphics.add(e);e.setGeometry(c.fromJson(d.toJson()));var k;switch(d.type){case "point":case "multipoint":var f=b.getLayer(),d=b.symbol||f&&f._getSymbol(b);if(f&&d){var g,h,p=0,m=0,l=0;k=!b.symbol?f._getRenderer(b):null;if(f=this._getSizeInfo(k))g=
h=k.getSize(b,{sizeInfo:f,shape:d.style,resolution:a&&a.getResolutionInMeters&&a.getResolutionInMeters()});else switch(d.type){case "simplemarkersymbol":g=h=d.size||0;break;case "picturemarkersymbol":g=d.width||0,h=d.height||0}p=d.xoffset||0;m=d.yoffset||0;l=d.angle||0;k=this.markerSymbol;k.setOffset(0,0);k.setAngle(0);g&&h&&k._setDim(g+1,h+1,0);k.setOffset(p,m);k.setAngle(l)}break;case "polyline":k=this.lineSymbol;break;case "polygon":k=this.fillSymbol}e.setSymbol(k)}},showClosestFirst:function(a){var c=
this.features;if(c&&c.length){if(1<c.length){var d,k=Infinity,f=-1,g,h=e.getLength,p,m=a.spatialReference,l,r;a=a.normalize();for(d=c.length-1;0<=d;d--)if(g=c[d].geometry){l=g.spatialReference;p=0;try{r="point"===g.type?g:g.getExtent().getCenter(),r=r.normalize(),m&&l&&(!m.equals(l)&&m._canProject(l))&&(r=m.isWebMercator()?b.geographicToWebMercator(r):b.webMercatorToGeographic(r)),p=h(a,r)}catch(n){}0<p&&p<k&&(k=p,f=d)}0<f&&(c.splice(0,0,c.splice(f,1)[0]),this.select(0))}}else this.deferreds&&(this._marked=
a)},_unbind:function(b){b=a.indexOf(this.deferreds,b);if(-1!==b)return this.deferreds.splice(b,1),!this.deferreds.length?(this.deferreds=null,2):1},_fireComplete:function(a){var b=this._marked;b&&(this._marked=null,this.showClosestFirst(b));this.onDfdComplete(a)},_updateFeatures:function(b,c){if(b){if(this.deferreds){var d=this._unbind(b);if(d)if(c&&c instanceof Error){if(this._fireComplete(c),2===d)this.onSetFeatures()}else if(c&&c.length)if(this.features){var e=a.filter(c,function(b){return-1===
a.indexOf(this.features,b)},this);this.features=this.features.concat(e);this.count=this.features.length;this._fireComplete();if(2===d)this.onSetFeatures()}else{this.features=c;this.count=c.length;this.selectedIndex=0;this._fireComplete();if(2===d)this.onSetFeatures();this.select(0)}else if(this._fireComplete(),2===d)this.onSetFeatures()}}else this.features=c,this.count=c.length,this.selectedIndex=0,this.onSetFeatures(),this.select(0)},_getSizeInfo:function(b){return b?b.sizeInfo||a.filter(b.visualVariables,
y)[0]:null},_resetUpdateEndListeners:function(){this._featureLayers={};a.forEach(this._updateEndHandles,function(a){a.remove()});this._updateEndHandles=[]},_processFeatures:function(){a.forEach(this.features,function(a){if((a=a.getLayer())&&!this._featureLayers[a.id]&&(1===a.currentMode||0===a.currentMode&&6===a.mode)&&a.objectIdField&&a.hasXYFootprint&&a.queryFeatures&&("esriGeometryPolygon"===a.geometryType||"esriGeometryPolyline"===a.geometryType||a.hasXYFootprint()))this._featureLayers[a.id]=
a,a=a.on("update-end",n.hitch(this,this._fLyrUpdateEndHandler)),this._updateEndHandles.push(a)},this)},_fLyrUpdateEndHandler:function(b){if(!b.error){var c=this,d=b.target,e=d.getSelectedFeatures(),k=0===d.currentMode&&6===d.mode,f={},g=[];a.forEach(this.features,function(a){if(a.getLayer()===d){var b=a.attributes[d.objectIdField];f[b]=a;g.push(b)}});g.length&&(b=new t,b.objectIds=g,d.queryFeatures(b,function(b){a.forEach(b.features,function(b){var c=f[b.attributes[d.objectIdField]],g=!1;c.geometry!==
b.geometry?(c.setGeometry(b.geometry),g=!0):k&&e&&-1!==a.indexOf(e,b)&&(g=!0);g&&this._highlighted&&c===this.getSelectedFeature()&&this._highlighted.setGeometry(b.geometry)},c)}))}}})})},"esri/graphic":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./domUtils ./lang ./InfoTemplate ./geometry/jsonUtils ./symbols/jsonUtils".split(" "),function(l,n,a,g,q,h,m,f,d){l=l(null,{declaredClass:"esri.Graphic",constructor:function(a,e,b,k){a&&!a.declaredClass?(this.geometry=a.geometry?
f.fromJson(a.geometry):null,this.symbol=a.symbol?d.fromJson(a.symbol):null,this.attributes=a.attributes||null,this.infoTemplate=a.infoTemplate?new m(a.infoTemplate):null):(this.geometry=a,this.symbol=e,this.attributes=b,this.infoTemplate=k)},_shape:null,_graphicsLayer:null,_visible:!0,visible:!0,getDojoShape:function(){return this._shape},getShapes:function(){var a=[];this._shape&&a.push(this._shape);this._bgShape&&a.push(this._bgShape);return a},getNode:function(){var a=this._shape&&this._shape.getNode();
return a&&a.nodeType?a:null},getNodes:function(){var a=this.getShapes(),d,b,k=a.length,f=[];for(b=0;b<k;b++)(d=a[b]&&a[b].getNode())&&d.nodeType&&f.push(d);return f},getLayer:function(){return this._layer},draw:function(){var a=this._graphicsLayer;a&&a._draw(this,!0);return this},setGeometry:function(a){this.geometry=a;if(a=this._graphicsLayer)a._updateExtent(this),a._draw(this,!0);return this},setSymbol:function(a,d){var b=this._graphicsLayer,k=this._shape;this.symbol=a;b&&(d&&k&&b._removeShape(this),
b._draw(this,!0));return this},setAttributes:function(a){this.attributes=a;return this},setInfoTemplate:function(a){this.infoTemplate=a;return this},getInfoTemplate:function(){return this._getEffInfoTemplate()},_getEffInfoTemplate:function(){var a=this.getLayer();return this.infoTemplate||a&&a.infoTemplate},getTitle:function(){var a=this.getInfoTemplate(),d=a&&a.title;if(n.isFunction(d))d=d.call(a,this);else if(n.isString(d))var b=(a=this.getLayer())&&a._getDateOpts,d=h.substitute(this.attributes,
d,{first:!0,dateFormat:b&&b.call(a)});return d},getContent:function(){var a=this.getInfoTemplate(),d=a&&a.content;if(n.isFunction(d))d=d.call(a,this);else if(n.isString(d))var b=(a=this.getLayer())&&a._getDateOpts,d=h.substitute(this.attributes,d,{dateFormat:b&&b.call(a)});return d},attr:function(a,d){var b=this.getNodes(),k,f=b.length;for(k=0;k<f;k++)null==d?b[k].removeAttribute(a):b[k].setAttribute(a,d);return this},show:function(){this.visible=this._visible=!0;var a,d,b;if(this.getShapes().length){a=
this.getNodes();b=a.length;this.attr("data-hidden");for(d=0;d<b;d++)q.show(a[d])}else this._graphicsLayer&&this._graphicsLayer._draw(this,!0);return this},hide:function(){this.visible=this._visible=!1;var a=this._graphicsLayer,d,b;if(a)if("canvas-2d"===a.surfaceType)a._removeShape(this);else if(a=this.getNodes(),b=a.length){this.attr("data-hidden","");for(d=0;d<b;d++)q.hide(a[d])}return this},toJson:function(){var a={};this.geometry&&(a.geometry=this.geometry.toJson());this.attributes&&(a.attributes=
n.mixin({},this.attributes));this.symbol&&(a.symbol=this.symbol.toJson());this.infoTemplate&&(a.infoTemplate=this.infoTemplate.toJson());return a}});l.prototype.getShape=l.prototype.getDojoShape;return l})},"esri/InfoTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(l,n,a,g,q){return l(null,{declaredClass:"esri.InfoTemplate",constructor:function(a,g){a&&n.isObject(a)&&!n.isFunction(a)?n.mixin(this,a):(this.title=a||"${*}",this.content=g||
"${*}")},setTitle:function(a){this.title=a;return this},setContent:function(a){this.content=a;return this},toJson:function(){return q.fixJson({title:this.title,content:this.content})}})})},"esri/geometry/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ./Point ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(l,n,a,g,q,h,m,f){return{fromJson:function(a){if(void 0!==a.x&&void 0!==a.y)return new g(a);if(void 0!==a.paths)return new q(a);if(void 0!==a.rings)return new h(a);
if(void 0!==a.points)return new m(a);if(void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax)return new f(a)},getJsonType:function(a){return a instanceof g?"esriGeometryPoint":a instanceof q?"esriGeometryPolyline":a instanceof h?"esriGeometryPolygon":a instanceof f?"esriGeometryEnvelope":a instanceof m?"esriGeometryMultipoint":null},getGeometryType:function(a){return"esriGeometryPoint"===a?g:"esriGeometryPolyline"===a?q:"esriGeometryPolygon"===a?h:"esriGeometryEnvelope"===a?f:"esriGeometryMultipoint"===
a?m:null}}})},"esri/symbols/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ./SimpleMarkerSymbol ./PictureMarkerSymbol ./SimpleLineSymbol ./CartographicLineSymbol ./SimpleFillSymbol ./PictureFillSymbol ./TextSymbol".split(" "),function(l,n,a,g,q,h,m,f,d,c){return{fromJson:function(a){var b=null;switch(a.type){case "esriSMS":b=new g(a);break;case "esriPMS":b=new q(a);break;case "esriTS":b=new c(a);break;case "esriSLS":b=void 0!==a.cap?new m(a):new h(a);break;case "esriCLS":b=new m(a);
break;case "esriSFS":b=new f(a);break;case "esriPFS":b=new d(a)}return b},getShapeDescriptors:function(a){return a&&a.getShapeDescriptors?a.getShapeDescriptors():{defaultShape:null,fill:null,stroke:null}}}})},"esri/symbols/PictureMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol".split(" "),function(l,n,a,g,q,h,m,f){var d={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};l=l(f,{declaredClass:"esri.symbol.PictureMarkerSymbol",
type:"picturemarkersymbol",constructor:function(c,e,b){c?n.isString(c)?(this.url=c,e&&(this.width=e),b&&(this.height=b)):(this.width=g.pt2px(c.width),this.height=g.pt2px(c.height),e=c.imageData,!(9>a("ie"))&&e&&(b=this.url,this.url="data:"+(c.contentType||"image")+";base64,"+e,this.imageData=b)):(n.mixin(this,d),this.width=g.pt2px(this.width),this.height=g.pt2px(this.height))},getStroke:function(){return null},getFill:function(){return null},setWidth:function(a){this.width=a;return this},setHeight:function(a){this.height=
a;return this},setUrl:function(a){a!==this.url&&(delete this.imageData,delete this.contentType);this.url=a;return this},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,stroke:null}},toJson:function(){var a=this.url,d=this.imageData;if(0===a.indexOf("data:"))var b=a,a=d,d=b.indexOf(";base64,")+8,d=b.substr(d);if(n.isString(a)&&(0===a.indexOf("/")||0===a.indexOf("//")||
0===a.indexOf("./")||0===a.indexOf("../")))a=m.getAbsoluteUrl(a);var b=g.px2pt(this.width),b=isNaN(b)?void 0:b,k=g.px2pt(this.height),k=isNaN(k)?void 0:k,a=h.fixJson(n.mixin(this.inherited("toJson",arguments),{type:"esriPMS",url:a,imageData:d,contentType:this.contentType,width:b,height:k}));delete a.color;delete a.size;a.imageData||delete a.imageData;return a}});l.defaultProps=d;return l})},"esri/symbols/CartographicLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./SimpleLineSymbol".split(" "),
function(l,n,a,g,q,h,m,f){var d={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"insideframe",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},c={color:[0,
0,0,1],style:d.STYLE_SOLID,width:1,cap:d.CAP_BUTT,join:d.JOIN_MITER,miterLimit:10};l=l(f,{declaredClass:"esri.symbol.CartographicLineSymbol",type:"cartographiclinesymbol",_caps:{butt:"esriLCSButt",round:"esriLCSRound",square:"esriLCSSquare"},_joins:{miter:"esriLJSMiter",round:"esriLJSRound",bevel:"esriLJSBevel"},constructor:function(d,b,k,f,g,h){d?n.isString(d)?(this.style=d,b&&(this.color=b),void 0!==k&&(this.width=k),f&&(this.cap=f),g&&(this.join=g),void 0!==h&&(this.miterLimit=h)):(this.cap=m.valueOf(this._caps,
d.cap),this.join=m.valueOf(this._joins,d.join),this.width=q.pt2px(d.width),this.miterLimit=q.pt2px(d.miterLimit)):(n.mixin(this,c),this.color=new a(this.color),this.width=q.pt2px(this.width),this.miterLimit=q.pt2px(this.miterLimit))},setCap:function(a){this.cap=a;return this},setJoin:function(a){this.join=a;return this},setMiterLimit:function(a){this.miterLimit=a;return this},getStroke:function(){return n.mixin(this.inherited("getStroke",arguments),{cap:this.cap,join:this.join===d.JOIN_MITER?this.miterLimit:
this.join})},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){var a=q.px2pt(this.miterLimit),a=isNaN(a)?void 0:a;return m.fixJson(n.mixin(this.inherited("toJson",arguments),{type:"esriCLS",cap:this._caps[this.cap],join:this._joins[this.join],miterLimit:a}))}});n.mixin(l,d);l.defaultProps=c;return l})},"esri/symbols/SimpleFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./FillSymbol ./SimpleLineSymbol require".split(" "),
function(l,n,a,g,q,h,m,f,d,c){var e={STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forwarddiagonal",STYLE_BACKWARD_DIAGONAL:"backwarddiagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonalcross",STYLE_FORWARDDIAGONAL:"forwarddiagonal",STYLE_BACKWARDDIAGONAL:"backwarddiagonal",STYLE_DIAGONALCROSS:"diagonalcross"},b={style:e.STYLE_SOLID,color:[0,0,0,0.25]};l=l(f,{declaredClass:"esri.symbol.SimpleFillSymbol",type:"simplefillsymbol",
_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical",forwarddiagonal:"esriSFSForwardDiagonal",backwarddiagonal:"esriSFSBackwardDiagonal",cross:"esriSFSCross",diagonalcross:"esriSFSDiagonalCross"},constructor:function(c,e,f){c?n.isString(c)?(this.style=c,void 0!==e&&(this.outline=e),void 0!==f&&(this.color=f)):this.style=m.valueOf(this._styles,c.style):(n.mixin(this,b),this.outline=new d(this.outline),this.color=new a(this.color))},setStyle:function(a){this.style=
a;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){var a=this.style;return a===e.STYLE_NULL?null:a===e.STYLE_SOLID?this.color:n.mixin({},q.defaultPattern,{src:c.toUrl("../images/symbol/sfs/"+a+".png"),width:10,height:10})},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 E"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){return m.fixJson(n.mixin(this.inherited("toJson",
arguments),{type:"esriSFS",style:this._styles[this.style]}))}});n.mixin(l,e);l.defaultProps=b;return l})},"esri/symbols/FillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Symbol ./SimpleLineSymbol".split(" "),function(l,n,a,g,q,h){return l(q,{declaredClass:"esri.symbol.FillSymbol",constructor:function(a){a&&n.isObject(a)&&a.outline&&(this.outline=new h(a.outline))},setOutline:function(a){this.outline=a;return this},toJson:function(){var a=this.inherited("toJson",
arguments);this.outline&&(a.outline=this.outline.toJson());return a}})})},"esri/symbols/PictureFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./FillSymbol".split(" "),function(l,n,a,g,q,h,m,f){var d={xoffset:0,yoffset:0,width:12,height:12};l=l(f,{declaredClass:"esri.symbol.PictureFillSymbol",type:"picturefillsymbol",xscale:1,yscale:1,xoffset:0,yoffset:0,constructor:function(c,e,b,k){c?n.isString(c)?(this.url=c,void 0!==e&&
(this.outline=e),void 0!==b&&(this.width=b),void 0!==k&&(this.height=k)):(this.xoffset=g.pt2px(c.xoffset),this.yoffset=g.pt2px(c.yoffset),this.width=g.pt2px(c.width),this.height=g.pt2px(c.height),e=c.imageData,!(9>a("ie"))&&e&&(b=this.url,this.url="data:"+(c.contentType||"image")+";base64,"+e,this.imageData=b)):(n.mixin(this,d),this.width=g.pt2px(this.width),this.height=g.pt2px(this.height))},setWidth:function(a){this.width=a;return this},setHeight:function(a){this.height=a;return this},setOffset:function(a,
d){this.xoffset=a;this.yoffset=d;return this},setUrl:function(a){a!==this.url&&(delete this.imageData,delete this.contentType);this.url=a;return this},setXScale:function(a){this.xscale=a;return this},setYScale:function(a){this.yscale=a;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return n.mixin({},g.defaultPattern,{src:this.url,width:this.width*this.xscale,height:this.height*this.yscale,x:this.xoffset,y:this.yoffset})},getShapeDescriptors:function(){return{defaultShape:{type:"path",
path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 E"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var a=this.url,d=this.imageData;if(0===a.indexOf("data:"))var b=a,a=d,d=b.indexOf(";base64,")+8,d=b.substr(d);if(n.isString(a)&&(0===a.indexOf("/")||0===a.indexOf("//")||0===a.indexOf("./")||0===a.indexOf("../")))a=m.getAbsoluteUrl(a);var b=g.px2pt(this.width),b=isNaN(b)?void 0:b,k=g.px2pt(this.height),k=isNaN(k)?void 0:k,f=g.px2pt(this.xoffset),f=isNaN(f)?void 0:f,p=g.px2pt(this.yoffset),
p=isNaN(p)?void 0:p,a=h.fixJson(n.mixin(this.inherited("toJson",arguments),{type:"esriPFS",url:a,imageData:d,contentType:this.contentType,width:b,height:k,xoffset:f,yoffset:p,xscale:this.xscale,yscale:this.yscale}));a.imageData||delete a.imageData;return a}});l.defaultProps=d;return l})},"esri/symbols/TextSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Symbol ./Font".split(" "),function(l,n,a,g,q,h,m,f,d){var c={type:"textsymbol",
x:0,y:0,text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:g.defaultFont,angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},e={start:"left",middle:"center",end:"right"},b={left:"start",center:"middle",right:"end",justify:"start"},k={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},s=document.createElement("canvas");l=l(f,{declaredClass:"esri.symbol.TextSymbol",angle:0,xoffset:0,yoffset:0,constructor:function(a,b,e){n.mixin(this,c);this.font=new d(this.font);
this.color=new m(this.color);a&&(n.isObject(a)?(n.mixin(this,a),this.color&&h.isDefined(this.color[0])&&(this.color=m.toDojoColor(this.color)),this.type="textsymbol",this.font=new d(this.font),this.xoffset=g.pt2px(this.xoffset),this.yoffset=g.pt2px(this.yoffset),this.angle&&(this.angle*=-1)):(this.text=a,b&&(this.font=b),e&&(this.color=e)));this.setAlign(this.align||this.getSVGAlign())},setFont:function(a){this.font=a;return this},setSize:function(a){this.font.size=a;return this},setAngle:function(a){this.angle=
a;return this},setOffset:function(a,b){this.xoffset=a;this.yoffset=b;return this},setAlign:function(a){this.align=a;this.setHorizontalAlignment(a&&e[a.toLowerCase()]||"center");return this},setHorizontalAlignment:function(a){this.horizontalAlignment=a;return this},getSVGAlign:function(){var a=this.horizontalAlignment;return a&&b[a.toLowerCase()]||"middle"},setVerticalAlignment:function(a){this.verticalAlignment=a;return this},getSVGBaseline:function(){var a=this.verticalAlignment;return a&&k[a.toLowerCase()]||
"alphabetic"},getSVGBaselineShift:function(){return"bottom"===this.verticalAlignment?"super":null},setDecoration:function(a){this.decoration=a;this.font||this.setFont(new d);this.font.setDecoration(a);return this},setRotated:function(a){this.rotated=a;return this},setKerning:function(a){this.kerning=a;return this},setText:function(a){this.text=a;return this},getStroke:function(){return null},getFill:function(){return this.color},getWidth:function(){var a=s&&s.getContext&&s.getContext("2d");if(a){var b=
this.font;a.font=(b.style?b.style:g.defaultFont.style)+" "+(b.weight?b.weight:g.defaultFont.weight)+" "+(b.size?b.size:g.defaultFont.size)+"px "+(b.family?b.family:g.defaultFont.family);return a.measureText(this.text).width}var a=this.getHeight(),b=0,c,d;for(c=0;c<this.text.length;c++)d=this.text.charAt(c),b=d==d.toUpperCase()?b+0.7*a:b+0.5*a;return b},getHeight:function(){return g.normalizedLength(this.font.size)},getShapeDescriptors:function(){var a=this.font,b;a&&(b={},a.size&&(b.size=a.size),
a.style&&(b.style=a.style),a.variant&&(b.variant=a.variant),a.decoration&&(b.decoration=a.decoration),a.weight&&(b.weight=a.weight),a.family&&(b.family=a.family));return{defaultShape:{type:"text",text:this.text,x:0,y:this.getHeight()/4,align:"middle",decoration:this.decoration||a&&a.decoration,rotated:this.rotated,kerning:this.kerning},font:b,fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var a=g.px2pt(this.xoffset),b=g.px2pt(this.yoffset),a=isNaN(a)?void 0:a,b=isNaN(b)?void 0:b;
return h.fixJson(n.mixin(this.inherited("toJson",arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,borderLineSize:this.borderLineSize,haloSize:this.haloSize,haloColor:this.haloColor,verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle&&-1*this.angle,xoffset:a,yoffset:b,text:this.text,rotated:this.rotated,kerning:this.kerning,font:this.font.toJson()}))}});
n.mixin(l,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});l.defaultProps=c;return l})},"esri/symbols/Font":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang".split(" "),function(l,n,a,g,q,h){l=l(null,{declaredClass:"esri.symbol.Font",constructor:function(h,f,d,c,e){h?n.isObject(h)?n.mixin(this,h):(this.size=h,parseFloat(this.size)==
this.size&&(this.size+="px"),void 0!==f&&(this.style=f),void 0!==d&&(this.variant=d),void 0!==c&&(this.weight=c),void 0!==e&&(this.family=e)):n.mixin(this,g.defaultFont);parseFloat(this.size)==this.size&&(this.size+="pt");9>a("ie")&&this.size&&(n.isString(this.size)&&-1<this.size.indexOf("em"))&&(this.size=g.pt2px(12*parseFloat(this.size))+"px");this.size=this._convert2PxSize(this.size)},setSize:function(a){this.size=this._convert2PxSize(a);return this},_convert2PxSize:function(a){var f;parseFloat(a)==
a?f=a:n.isString(a)&&(-1<a.indexOf("pt")?f=g.pt2px(parseFloat(a)):-1<a.indexOf("px")?f=parseFloat(a):-1<a.indexOf("em")?f=g.pt2px(12*parseFloat(a)):-1<a.indexOf("%")&&(f=g.pt2px(0.12*parseFloat(a))));return f},setStyle:function(a){this.style=a;return this},setVariant:function(a){this.variant=a;return this},setWeight:function(a){this.weight=a;return this},setFamily:function(a){this.family=a;return this},setDecoration:function(a){this.decoration=a;return this},toJson:function(){return h.fixJson({size:g.px2pt(this.size),
style:this.style,variant:this.variant,decoration:this.decoration,weight:this.weight,family:this.family})}});n.mixin(l,{STYLE_NORMAL:"normal",STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});return l})},"esri/tasks/query":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../geometry/jsonUtils ./SpatialRelationship require require require".split(" "),
function(l,n,a,g,q,h,m,f){var d=l(null,{declaredClass:"esri.tasks.Query",constructor:function(){this.spatialRelationship=d.SPATIAL_REL_INTERSECTS},text:null,where:"",geometry:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:!1,returnDistinctValues:!1,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,distance:null,units:null,resultOffset:null,resultRecordCount:null,quantizationParameters:null,_units:{meters:"esriSRUnit_Meter",
kilometers:"esriSRUnit_Kilometer",feet:"esriSRUnit_Foot",miles:"esriSRUnit_StatuteMile","nautical-miles":"esriSRUnit_NauticalMile","us-nautical-miles":"esriSRUnit_USNauticalMile"},toJson:function(c){var e={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},b=c&&c.geometry||this.geometry,k=this.objectIds,f=this.outFields,h=this.outSpatialReference,l=this.groupByFieldsForStatistics,
n=this.orderByFields,q=this.outStatistics;c=this.distance;b&&(e.geometry=b,e.geometryType=m.getJsonType(b),e.inSR=b.spatialReference.wkid||g.toJson(b.spatialReference.toJson()));k&&(e.objectIds=k.join(","));f&&(e.outFields=f.join(","));this.returnDistinctValues&&(e.returnDistinctValues=!0);l&&(e.groupByFieldsForStatistics=l.join(","));n&&(e.orderByFields=n.join(","));if(q){var y=[];a.forEach(q,function(a){y.push(a.toJson())});e.outStatistics=g.toJson(y)}h?e.outSR=h.wkid||g.toJson(h.toJson()):b&&(e.outSR=
b.spatialReference.wkid||g.toJson(b.spatialReference.toJson()));b=this.timeExtent;e.time=b?b.toJson().join(","):null;if((b=this.relationParam)&&this.spatialRelationship===d.SPATIAL_REL_RELATION)e.relationParam=b;c&&(e.distance=this.distance,this.hasOwnProperty("units")?e.units=this._units[this.units]||this._units.meters:e.units=this._units.meters);this.hasOwnProperty("start")&&(e.resultOffset=this.start,e.resultRecordCount=10,""===e.where&&(e.where="1\x3d1"));this.hasOwnProperty("num")&&(e.resultRecordCount=
this.num);e.pixelSize=this.pixelSize?g.toJson(this.pixelSize.toJson()):null;e.multipatchOption=this.multipatchOption;this.quantizationParameters&&(e.quantizationParameters=g.toJson(this.quantizationParameters));e._ts=this._ts;return e}});n.mixin(d,f);return d})},"esri/tasks/SpatialRelationship":function(){define(["dojo/_base/lang","dojo/has","../kernel"],function(l,n,a){return{SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",SPATIAL_REL_CONTAINS:"esriSpatialRelContains",SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",
SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"}})},"esri/plugins/popupManager":function(){define(["../PopupManager"],function(l){return{add:function(n,a){n.popupManager||(n.popupManager=new l(a),n.popupManager.setMap(n))},remove:function(l){var a=
l.popupManager;a&&(a.unsetMap(),l.popupManager=void 0)}}})},"esri/PopupManager":function(){define("./geometry/Extent ./geometry/ScreenPoint ./kernel ./layerUtils ./tasks/query dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/_base/lang dojo/has dojo/on dojo/promise/all dojo/Stateful require".split(" "),function(l,n,a,g,q,h,m,f,d,c,e,b,k,s,p){var r;return f(s,{declaredClass:"esri.PopupManager",enabled:!1,map:null,_mapClickHandle:null,_featureLayersCache:{},constructor:function(a){this._mapClickHandler=
c.hitch(this,this._mapClickHandler)},setMap:function(a){if(this.map)if(a!==this.map)this.unsetMap();else return;this.map=a;this._setupClickHandler()},unsetMap:function(){this.map&&(this.map=null);this._mapClickHandle&&(this._mapClickHandle.remove(),this._mapClickHandle=null)},getMapLayer:function(a){var b;if(a&&(b=a.getLayer()))if(a=b.id,this._featureLayersCache[a]){var c=a.lastIndexOf("_");-1<c&&(a=a.substring(0,c),b=this.map.getLayer(a))}return b},_enabledSetter:function(a){this.enabled=a;this._setupClickHandler()},
_setupClickHandler:function(){this._mapClickHandle&&(this._mapClickHandle.remove(),this._mapClickHandle=null);this.enabled&&this.map&&(this._mapClickHandle=this.map.on("click",this._mapClickHandler))},_mapClickHandler:function(a){var b=this.map.infoWindow,c=a.graphic;b&&this.map.loaded&&(b.clearFeatures&&b.setFeatures?this._showPopup(a):c&&c.getInfoTemplate()&&this._showInfoWindow(c,a.mapPoint))},_showPopup:function(a){var b=this.map,c=b.infoWindow,e=this,k=[],f=[b.graphics].concat(m.map(b.graphicsLayerIds,
b.getLayer,b));m.forEach(f,function(a){a&&a.loaded&&(a.infoTemplate&&!a.suspended)&&k.push(a)});var g=[];m.forEach(b.layerIds,function(a){(a=b.getLayer(a))&&a.loaded&&!a.suspended&&(e._isImageServiceLayer(a)&&a.infoTemplate?k.push(a):("esri.layers.ArcGISDynamicMapServiceLayer"===a.declaredClass||"esri.layers.ArcGISTiledMapServiceLayer"===a.declaredClass)&&a.infoTemplates&&g.push(a))});this._getSubLayerFeatureLayers(g).then(function(f){k=k.concat(f);f=null;a.graphic&&a.graphic.getInfoTemplate()&&!e._isImageServiceLayer(a.graphic._layer)&&
(f=a.graphic);if(k.length||f){var g=e._calculateClickTolerance(k),h=a.screenPoint,p=b.toMap(new n(h.x-g,h.y+g)),g=b.toMap(new n(h.x+g,h.y-g)),r=new l(p.x,p.y,g.x,g.y,b.spatialReference);if(r=r.intersects(b.extent)){var s=new q,w=!!f,v=!0,p=m.map(k,function(c){var k;s.timeExtent=c.useMapTime?b.timeExtent:null;if(e._isImageServiceLayer(c))s.geometry=a.mapPoint,v=!1,k=c.queryVisibleRasters(s,{rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0}),k.addCallback(function(){var a=c.getVisibleRasters();
w=w||0<a.length;return a});else if(e._featureLayersCache[c.id]||"function"===typeof c.queryFeatures&&(0===c.currentMode||1===c.currentMode))s.geometry=r,k=c.queryFeatures(s),k.addCallback(function(a){a=a.features;w=w||0<a.length;return a});else{k=new d;var f=m.filter(c.graphics,function(a){return a&&a.visible&&r.intersects(a.geometry)});w=w||0<f.length;k.resolve(f)}return k});f&&(g=new d,g.resolve([f]),p.unshift(g));!m.some(p,function(a){return!a.isFulfilled()})&&!w?(c.hide(),c.clearFeatures()):(c.setFeatures(p),
c.show(a.mapPoint,{closestFirst:v}))}}})},_getSubLayerFeatureLayers:function(a,c){var e=c||new d,f=[],h=a.length,l=Math.floor(this.map.extent.getWidth()/this.map.width),n=this.map.getScale(),q=!1,s=this,D=0;a:for(;D<h;D++){var E=a[D],C=E.dynamicLayerInfos||E.layerInfos;if(C){var F=null;if(E._params&&(E._params.layers||E._params.dynamicLayers))F=E.visibleLayers;for(var F=g._getVisibleLayers(C,F),K=g._getLayersForScale(n,C),I=C.length,G=0;G<I;G++){var J=C[G],H=J.id,N=E.infoTemplates[H];if(!J.subLayerIds&&
N&&N.infoTemplate&&-1<m.indexOf(F,H)&&-1<m.indexOf(K,H)){if(!r){q=!0;break a}var Q=E.id+"_"+H,L=this._featureLayersCache[Q];if(!L||!L.loadError)L||((L=N.layerUrl)||(L=J.source?this._getLayerUrl(E.url,"/dynamicLayer"):this._getLayerUrl(E.url,H)),L=new r(L,{id:Q,drawMode:!1,mode:r.MODE_SELECTION,outFields:this._getOutFields(N.infoTemplate),resourceInfo:N.resourceInfo,source:J.source}),this._featureLayersCache[Q]=L),L.setDefinitionExpression(E.layerDefinitions&&E.layerDefinitions[H]),L.setGDBVersion(E.gdbVersion),
L.setInfoTemplate(N.infoTemplate),L.setMaxAllowableOffset(l),L.setUseMapTime(!!E.useMapTime),E.layerDrawingOptions&&E.layerDrawingOptions[H]&&E.layerDrawingOptions[H].renderer&&L.setRenderer(E.layerDrawingOptions[H].renderer),f.push(L)}}}}if(q){var Y=new d;p(["./layers/FeatureLayer"],function(a){r=a;Y.resolve()});Y.then(function(){s._getSubLayerFeatureLayers(a,e)})}else{var X=[];m.forEach(f,function(a){if(!a.loaded){var c=new d;b.once(a,"load, error",function(){c.resolve()});X.push(c.promise)}});
X.length?k(X).then(function(){f=m.filter(f,function(a){return!a.loadError&&a.isVisibleAtScale(n)});e.resolve(f)}):(f=m.filter(f,function(a){return a.isVisibleAtScale(n)}),e.resolve(f))}return e.promise},_getLayerUrl:function(a,b){var c=a.indexOf("?");return-1===c?a+"/"+b:a.substring(0,c)+"/"+b+a.substring(c)},_getOutFields:function(a){var b;a.info&&"esri.dijit.PopupTemplate"===a.declaredClass?(b=[],m.forEach(a.info.fieldInfos,function(a){var c=a.fieldName&&a.fieldName.toLowerCase();c&&"shape"!==c&&
0!==c.indexOf("relationships/")&&b.push(a.fieldName)})):b=["*"];return b},_calculateClickTolerance:function(a){var b=6,c,d;m.forEach(a,function(a){if(c=a.renderer)"esri.renderer.SimpleRenderer"===c.declaredClass?((d=c.symbol)&&d.xoffset&&(b=Math.max(b,Math.abs(d.xoffset))),d&&d.yoffset&&(b=Math.max(b,Math.abs(d.yoffset)))):("esri.renderer.UniqueValueRenderer"===c.declaredClass||"esri.renderer.ClassBreaksRenderer"===c.declaredClass)&&m.forEach(c.infos,function(a){(d=a.symbol)&&d.xoffset&&(b=Math.max(b,
Math.abs(d.xoffset)));d&&d.yoffset&&(b=Math.max(b,Math.abs(d.yoffset)))})});return b},_showInfoWindow:function(a,b){var d=this.map.infoWindow,e=a.geometry,e=e&&"point"===e.type?e:b,k=a.getContent();d.setTitle(a.getTitle());if(k&&c.isString(k.id)){var f=h.byId(k.id);f&&f.set&&/_PopupRenderer/.test(f.declaredClass)&&f.set("showTitle",!1)}d.setContent(k);d.show(e)},_isImageServiceLayer:function(a){return"esri.layers.ArcGISImageServiceLayer"===a.declaredClass||"esri.layers.ArcGISImageServiceVectorLayer"===
a.declaredClass}})})},"esri/layerUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","./kernel"],function(l,n,a,g,q){return{_serializeLayerDefinitions:function(g){var l=[],f=!1,d=/[:;]/;if(g&&(n.forEach(g,function(a,b){a&&(l.push([b,a]),!f&&d.test(a)&&(f=!0))}),0<l.length)){var c;f?(c={},n.forEach(l,function(a){c[a[0]]=a[1]}),c=a.toJson(c)):(c=[],n.forEach(l,function(a){c.push(a[0]+":"+a[1])}),c=c.join(";"));return c}return null},_serializeTimeOptions:function(g,
l){if(g){var f=[];n.forEach(g,function(d,c){if(d){var e=d.toJson();l&&-1!==n.indexOf(l,c)&&(e.useTime=!1);f.push('"'+c+'":'+a.toJson(e))}});if(f.length)return"{"+f.join(",")+"}"}},_getVisibleLayers:function(a,g){var f=[],d,c,e;if(!a)return f;if(g){f=g.concat();for(e=0;e<a.length;e++)d=a[e],c=n.indexOf(a,d.id),d.subLayerIds&&-1<c&&(f.splice(c,1),f=f.concat(d.subLayerIds))}else f=this._getDefaultVisibleLayers(a);return f},_getDefaultVisibleLayers:function(a){var g=[],f;if(!a)return g;for(f=0;f<a.length;f++)0<=
a[f].parentLayerId&&-1===n.indexOf(g,a[f].parentLayerId)&&n.some(a,function(d){return d.id===a[f].parentLayerId})||a[f].defaultVisibility&&g.push(a[f].id);return g},_getLayersForScale:function(a,g){var f=[];if(0<a&&g){var d;for(d=0;d<g.length;d++)if(!(0<=g[d].parentLayerId&&-1===n.indexOf(f,g[d].parentLayerId)&&n.some(g,function(a){return a.id===g[d].parentLayerId}))&&0<=g[d].id){var c=!0,e=g[d].maxScale,b=g[d].minScale;if(0<e||0<b)0<e&&0<b?c=e<=a&&a<=b:0<e?c=e<=a:0<b&&(c=a<=b);c&&f.push(g[d].id)}}return f}}})},
"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(l,n,a){var g=l.some;return function(l){var h,m;l instanceof Array?m=l:l&&"object"===typeof l&&(h=l);var f,d=[];if(h){m=[];for(var c in h)Object.hasOwnProperty.call(h,c)&&(d.push(c),m.push(h[c]));f={}}else m&&(f=[]);if(!m||!m.length)return(new n).resolve(f);var e=new n;e.promise.always(function(){f=d=null});var b=m.length;g(m,function(c,g){h||d.push(g);a(c,function(a){e.isFulfilled()||(f[d[g]]=a,0===--b&&e.resolve(f))},
e.reject);return e.isFulfilled()});return e.promise}})},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(l,n,a,g,q){var h=q.doc.documentElement;q=g("ie");var m=g("opera"),f=Math.floor,d=g("ff"),c=l.boxModel.replace(/-/,""),m={dj_quirks:g("quirks"),dj_opera:m,dj_khtml:g("khtml"),dj_webkit:g("webkit"),dj_safari:g("safari"),dj_chrome:g("chrome"),dj_gecko:g("mozilla"),dj_ios:g("ios"),dj_android:g("android")};q&&(m.dj_ie=!0,m["dj_ie"+f(q)]=
!0,m.dj_iequirks=g("quirks"));d&&(m["dj_ff"+f(d)]=!0);m["dj_"+c]=!0;var e="",b;for(b in m)m[b]&&(e+=b+" ");h.className=n.trim(h.className+" "+e);a(function(){if(!l.isBodyLtr()){var a="dj_rtl dijitRtl "+e.replace(/ /g,"-rtl ");h.className=n.trim(h.className+" "+a+"dj_rtl dijitRtl "+e.replace(/ /g,"-rtl "))}});return g})},"esri/MapNavigationManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/event dojo/mouse dojo/keys ./kernel ./MouseEvents ./TouchEvents ./PointerEvents ./config ./sniff ./lang ./fx ./graphic ./tileUtils ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./symbols/SimpleFillSymbol".split(" "),
function(l,n,a,g,q,h,m,f,d,c,e,b,k,s,p,r,t,x,y,u,z,v){var w=g.connect,A=g.disconnect,B=k("chrome"),D=k("safari"),E=[m.NUMPAD_PLUS,61,187,m.NUMPAD_MINUS,173,189,m.UP_ARROW,m.NUMPAD_8,m.RIGHT_ARROW,m.NUMPAD_6,m.DOWN_ARROW,m.NUMPAD_2,m.LEFT_ARROW,m.NUMPAD_4,m.PAGE_UP,m.NUMPAD_9,m.PAGE_DOWN,m.NUMPAD_3,m.END,m.NUMPAD_1,m.HOME,m.NUMPAD_7];return l(null,{declaredClass:"esri.MapNavigationManager",eventModel:"",constructor:function(a,f){this.map=a;n.mixin(this,f);var g=a.__container;k("esri-pointer")?(this.pointerEvents=
new e(g,{map:a}),this.eventModel="pointer"):k("esri-touch")?(k("ios")||(this.mouseEvents=new d(g,{map:a})),this.touchEvents=new c(g,{map:a,mouseEvents:this.mouseEvents}),this.eventModel="touch"):(this.mouseEvents=new d(g,{map:a}),this.eventModel="mouse");this._zoomRect=new r(null,new v(b.defaults.map.zoomSymbol));this._keyDx=this._keyDy=0;this._adjustPinch=n.hitch(this,this._adjustPinch);this._adjustPinchEnd=n.hitch(this,this._adjustPinchEnd)},_panInit:function(a){var b=this.mouseEvents;h.isLeft(a)&&
this.map.isPan&&!a.shiftKey&&(this._dragOrigin=new x(0,0),n.mixin(this._dragOrigin,a.screenPoint),this._panStartHandle=w(b,"onMouseDragStart",this,this._panStart),this._panHandle=w(b,"onMouseDrag",this,this._pan),this._panEndHandle=w(b,"onMouseUp",this,this._panEnd),(B||D)&&a.preventDefault())},_panStart:function(a){this.map.setCursor("move");this.map.__panStart(a.screenPoint.x,a.screenPoint.y)},_pan:function(a){this.map.__pan(a.screenPoint.x-this._dragOrigin.x,a.screenPoint.y-this._dragOrigin.y)},
_panEnd:function(a){A(this._panStartHandle);A(this._panHandle);A(this._panEndHandle);this._panStartHandle=this._panHandle=this._panEndHandle=null;var b=this.map;b.__panning&&(b.__panEnd(a.screenPoint.x-this._dragOrigin.x,a.screenPoint.y-this._dragOrigin.y),b.resetMapCursor())},_zoomInit:function(a){var b=this.map,c=this.pointerEvents||this.mouseEvents;if((h.isLeft(a)||a.pointerType)&&b.isRubberBandZoom&&a.shiftKey)b.setCursor("crosshair"),this._dragOrigin=n.mixin({},a.screenPoint),this._zoomDir=a.ctrlKey||
a.metaKey?-1:1,this.pointerEvents?(this._zoomHandle=w(c,"onSwipeMove",this,this._zoom),this._zoomEndHandle=w(c,"onSwipeEnd",this,this._zoomEnd)):(this._zoomHandle=w(c,"onMouseDrag",this,this._zoom),this._zoomEndHandle=w(c,"onMouseUp",this,this._zoomEnd)),B&&a.preventDefault()},_zoom:function(a){var b=this.map,c=this._normalizeRect(a).offset(b.__visibleRect.x,b.__visibleRect.y);a=b.graphics;var d=this._zoomRect;d.geometry||b.setCursor("crosshair");d.geometry&&a.remove(d,!0);var e=b.toMap(new x(c.x,
c.y)),c=b.toMap(new x(c.x+c.width,c.y+c.height)),c=new u(e.x,e.y,c.x-e.x,e.y-c.y,b.spatialReference);c._originOnly=!0;d.setGeometry(c);a.add(d,!0)},_zoomEnd:function(a){var b=this._zoomRect,c=this.map,d=c.extent,e=c.spatialReference;A(this._zoomHandle);A(this._zoomEndHandle);this._zoomHandle=this._zoomEndHandle=null;if(c._canZoom(this._zoomDir)&&b.getDojoShape()){c.graphics.remove(b);b.geometry=null;a=this._normalizeRect(a);a.x+=c.__visibleRect.x;a.y+=c.__visibleRect.y;if(-1===this._zoomDir){var k=
d.getWidth();a=(k*c.width/a.width-k)/2;e=new y(d.xmin-a,d.ymin-a,d.xmax+a,d.ymax+a,e)}else d=c.toMap({x:a.x,y:a.y+a.height}),a=c.toMap({x:a.x+a.width,y:a.y}),e=new y(d.x,d.y,a.x,a.y,e);c._extentUtil(null,null,e)}b.getDojoShape()&&c.graphics.remove(b,!0);this._zoomDir=0;c.resetMapCursor()},_wheelZoom:function(a,b){var c=this.map;if(!b){if(c.smartNavigation&&!a.shiftKey&&!c._isPanningOrZooming()){c.disableScrollWheelZoom();this._setScrollWheelPan(!0);this._wheelPan(a);return}var d=a.timeStamp;if(!s.isDefined(d)||
0>=d)d=(new Date).getTime();if(100>(this._mwts?d-this._mwts:d))return;this._mwts=d}c._canZoom(a.value)&&c._extentUtil({numLevels:a.value,mapAnchor:a.mapPoint,screenAnchor:a.screenPoint})},_wheelPan:function(a){var b=this.map;if(a.shiftKey&&!b._isPanningOrZooming())this._setScrollWheelPan(!1),b.enableScrollWheelZoom(),this._wheelZoom(a);else{var c=0,d=0;k("ff")?a.axis===a.HORIZONTAL_AXIS?c=-a.detail:d=-a.detail:(c=a.wheelDeltaX,d=a.wheelDeltaY);b.translate(c,d)}},_setScrollWheelPan:function(a){this.map.isScrollWheelPan=
a;this.mouseEvents.enableMouseWheel(a);A(this._mwMacHandle);this._mwMacHandle=null;a&&(this._mwMacHandle=w(this.mouseEvents,"onMouseWheel",this,this._wheelPan))},_recenter:function(a){a.shiftKey&&!this.map._isPanningOrZooming()&&this.map.centerAt(a.mapPoint)},_recenterZoom:function(a){a.shiftKey&&!this.map._isPanningOrZooming()&&(a.value=a.ctrlKey||a.metaKey?-1:1,this._wheelZoom(a,!0))},_dblClickZoom:function(a){this.map._isPanningOrZooming()||(a.value=1,this._wheelZoom(a,!0))},_twoFingerTap:function(a){this.map._isPanningOrZooming()||
(a.value=-1,this._wheelZoom(a,!0))},_keyDown:function(b){var c=b.keyCode,d=this.map;if(-1!==a.indexOf(E,c)){if(c===m.NUMPAD_PLUS||61===c||187===c)d._extentUtil({numLevels:1});else if(c===m.NUMPAD_MINUS||173===c||189===c)d._extentUtil({numLevels:-1});else{d.__panning||d.__panStart(0,0);switch(c){case m.UP_ARROW:case m.NUMPAD_8:this._keyDy+=10;break;case m.RIGHT_ARROW:case m.NUMPAD_6:this._keyDx-=10;break;case m.DOWN_ARROW:case m.NUMPAD_2:this._keyDy-=10;break;case m.LEFT_ARROW:case m.NUMPAD_4:this._keyDx+=
10;break;case m.PAGE_UP:case m.NUMPAD_9:this._keyDx-=10;this._keyDy+=10;break;case m.PAGE_DOWN:case m.NUMPAD_3:this._keyDx-=10;this._keyDy-=10;break;case m.END:case m.NUMPAD_1:this._keyDx+=10;this._keyDy-=10;break;case m.HOME:case m.NUMPAD_7:this._keyDx+=10;this._keyDy+=10;break;default:return}d.__pan(this._keyDx,this._keyDy)}q.stop(b)}},_keyEnd:function(a){var b=this.map;b.__panning&&a.keyCode!==m.SHIFT&&(b.__panEnd(this._keyDx,this._keyDy),this._keyDx=this._keyDy=0)},_swipeInit:function(a){var b=
this.map,b=b._zoomAnim||b._panAnim;if(a.shiftKey)return!1;b&&b._active&&(b.stop(),b._fire("onEnd",[b.node]));this._dragOrigin=new x(0,0);n.mixin(this._dragOrigin,a.screenPoint);A(this._swipeHandle);A(this._swipeEndHandle);this._swipeHandle=w(this.touchEvents||this.pointerEvents,"onSwipeMove",this,this._swipe);this._swipeEndHandle=w(this.touchEvents||this.pointerEvents,"onSwipeEnd",this,this._swipeEnd)},_swipe:function(a){var b=this.map;b.__panning?(this._panX=a.screenPoint.x,this._panY=a.screenPoint.y,
b.__pan(a.screenPoint.x-this._dragOrigin.x,a.screenPoint.y-this._dragOrigin.y)):(b.setCursor("move"),b.__panStart(a.screenPoint.x,a.screenPoint.y))},_swipeEnd:function(a){A(this._swipeHandle);A(this._swipeEndHandle);this._swipeHandle=this._swipeEndHandle=null;var b=this.map;b.__panning&&(b.resetMapCursor(),b.__panEnd(a.screenPoint.x-this._dragOrigin.x,a.screenPoint.y-this._dragOrigin.y))},_pinchInit:function(a){var b=this.map,c=b._zoomAnim||b._panAnim;c&&c._active?(c.stop(),c._fire("onEnd",[c.node])):
b.__panning&&(a.screenPoint=new x(this._panX,this._panY),a.mapPoint=b.toMap(a.screenPoint),this._swipeEnd(a));A(this._pinchHandle);A(this._pinchEndHandle);this._pinchHandle=w(this.touchEvents||this.pointerEvents,"onPinchMove",this,this._pinch);this._pinchEndHandle=w(this.touchEvents||this.pointerEvents,"onPinchEnd",this,this._pinchEnd)},_pinch:function(a){var b=this.map;a.screenPoints&&(this.currLength=z.getLength(a.screenPoints[0],a.screenPoints[1]),b.__zooming?(a=this.currLength/this._length,this._zoomStartExtent=
this.__scaleExtent(b.extent,a,this._dragOrigin),b.__zoom(this._zoomStartExtent,a,this._dragOrigin)):(this._dragOrigin=new x((a.screenPoints[0].x+a.screenPoints[1].x)/2,(a.screenPoints[0].y+a.screenPoints[1].y)/2),this._length=this.currLength,b.__zoomStart(b.extent,this._dragOrigin)),b._fireOnScale(this.currLength/this._length,this._dragOrigin,!0))},_pinchEnd:function(a){a=this.map;A(this._pinchHandle);A(this._pinchEndHandle);this._pinchHandle=this._pinchEndHandle=null;if(a.__zooming&&null===a._zoomAnim){var c=
this.currLength/this._length,d=a.extent.getWidth();this._zoomAnimAnchor=a.toMap(this._dragOrigin);this._zoomStartExtent=this.__scaleExtent(a.extent,1/c,this._zoomAnimAnchor);if(a.__tileInfo){var e=t.getCandidateTileInfo(a,a.__tileInfo,this._zoomStartExtent),k=a.__getExtentForLevel(e.lod.level,this._zoomAnimAnchor),f=a.getMinZoom(),g=a.getMaxZoom(),h=k.extent,k=k.lod,l=d/h.getWidth(),m=e.lod.level;1>c?l>c&&m--:l<c&&m++;m<f?m=f:m>g&&(m=g);m!==e.lod.level&&(k=a.__getExtentForLevel(m,this._zoomAnimAnchor),
h=k.extent,k=k.lod);this._zoomEndExtent=h;this._zoomEndLod=k;a._zoomAnim=p.animateRange({range:{start:d/this._zoomStartExtent.getWidth(),end:l},duration:b.defaults.map.zoomDuration,rate:b.defaults.map.zoomRate,onAnimate:this._adjustPinch,onEnd:this._adjustPinchEnd});a._zoomAnim.play();a._fireOnScale(a.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin)}else this._zoomEndExtent=this._zoomStartExtent,a._fireOnScale(a.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin),
this._adjustPinchEnd()}},_adjustPinch:function(a){var b=this.__scaleExtent(this.map.extent,a,this._zoomAnimAnchor);this.map.__zoom(b,a,this._dragOrigin)},_adjustPinchEnd:function(){var a=this.map,b=a.extent.getWidth()/this._zoomEndExtent.getWidth(),c=this.__scaleExtent(a.extent,1/b,this._zoomAnimAnchor),d=this._dragOrigin,e=this._zoomEndLod;this._zoomStartExtent=this._zoomEndExtent=this._zoomEndLod=this._dragOrigin=a._zoomAnim=this._zoomAnimAnchor=null;a.__zoomEnd(c,b,d,e,!0)},__scaleExtent:function(a,
b,c){c=c||a.getCenter();b=a.expand(b);var d=a.xmin-(b.getWidth()-a.getWidth())*(c.x-a.xmin)/a.getWidth();c=a.ymax-(b.getHeight()-a.getHeight())*(c.y-a.ymax)/a.getHeight();return new y(d,c-b.getHeight(),d+b.getWidth(),c,a.spatialReference)},_normalizeRect:function(a){a=a.screenPoint;var b=this._dragOrigin.x,c=this._dragOrigin.y;a=new u((a.x<b?a.x:b)-this.map.__visibleRect.x,(a.y<c?a.y:c)-this.map.__visibleRect.y,Math.abs(a.x-b),Math.abs(a.y-c));delete a.spatialReference;0===a.width&&(a.width=1);0===
a.height&&(a.height=1);return a},setImmediateClick:function(a){switch(this.eventModel){case "mouse":this.mouseEvents.setImmediateClick(a);break;case "touch":this.touchEvents.setImmediateTap(a);this.mouseEvents&&this.mouseEvents.setImmediateClick(a);break;case "pointer":this.pointerEvents.setImmediateTap(a)}},enablePan:function(){this.disablePan();switch(this.eventModel){case "mouse":this._panInitHandle=w(this.mouseEvents,"onMouseDown",this,this._panInit);break;case "touch":this._panInitHandle=w(this.mouseEvents,
"onMouseDown",this,this._panInit);this._swipeInitHandle=w(this.touchEvents,"onSwipeStart",this,this._swipeInit);break;case "pointer":this._swipeInitHandle=w(this.pointerEvents,"onSwipeStart",this,this._swipeInit)}},disablePan:function(){A(this._panInitHandle);this._panInitHandle=null;A(this._swipeInitHandle);this._swipeInitHandle=null},enableRubberBandZoom:function(){this.disableRubberBandZoom();this._zoomInitHandle=this.pointerEvents?w(this.pointerEvents,"onSwipeStart",this,this._zoomInit):w(this.mouseEvents,
"onMouseDown",this,this._zoomInit)},disableRubberBandZoom:function(){A(this._zoomInitHandle);this._zoomInitHandle=null},enablePinchZoom:function(){this.disablePinchZoom();if("touch"===this.eventModel||"pointer"===this.eventModel)this._pinchInitHandle=w(this.touchEvents||this.pointerEvents,"onPinchStart",this,this._pinchInit)},disablePinchZoom:function(){A(this._pinchInitHandle);this._pinchInitHandle=null},enableScrollWheelZoom:function(){this.disableScrollWheelZoom();this._wheelHandle=w(this.mouseEvents||
this.pointerEvents,"onMouseWheel",this,this._wheelZoom)},disableScrollWheelZoom:function(){A(this._wheelHandle);this._wheelHandle=null},enableDoubleClickZoom:function(){this.disableDoubleClickZoom();switch(this.eventModel){case "mouse":this._dblClickHandle=w(this.mouseEvents,"onDblClick",this,this._dblClickZoom);break;case "touch":this._dblClickHandle=w(this.mouseEvents,"onDblClick",this,this._dblClickZoom);this._dblTapHandle=w(this.touchEvents,"onDoubleTap",this,this._dblClickZoom);this._zoomOutHandle=
w(this.touchEvents,"onTwoFingerTap",this,this._twoFingerTap);break;case "pointer":this._dblTapHandle=w(this.pointerEvents,"onDoubleTap",this,this._dblClickZoom),this._zoomOutHandle=w(this.pointerEvents,"onTwoFingerTap",this,this._twoFingerTap)}},disableDoubleClickZoom:function(){A(this._dblClickHandle);A(this._zoomOutHandle);this._dblTapHandle&&A(this._dblTapHandle);this._dblClickHandle=this._zoomOutHandle=this._dblTapHandle=null},enableShiftDoubleClickZoom:function(){this.disableShiftDoubleClickZoom();
this._sDblClickHandle=w(this.pointerEvents||this.mouseEvents,"onDblClick",this,this._recenterZoom)},disableShiftDoubleClickZoom:function(){A(this._sDblClickHandle);this._sDblClickHandle=null},enableClickRecenter:function(){this.disableClickRecenter();this._recenterHandle=w(this.pointerEvents||this.mouseEvents,"onClick",this,this._recenter)},disableClickRecenter:function(){A(this._recenterHandle);this._recenterHandle=null},enableKeyboardNavigation:function(){this.disableKeyboardNavigation();this._keyHandle=
w(this.pointerEvents||this.mouseEvents,"onKeyDown",this,this._keyDown);this._keyEndHandle=w(this.pointerEvents||this.mouseEvents,"onKeyUp",this,this._keyEnd)},disableKeyboardNavigation:function(){A(this._keyHandle);A(this._keyEndHandle);this._keyHandle=this._keyEndHandle=null},enableNavigation:function(){var a=this.map;a&&a.loaded&&(a.enableDoubleClickZoom(),a.enableClickRecenter(),a.enablePan(),a.enableRubberBandZoom(),this.enablePinchZoom(),a.enableKeyboardNavigation(),a.smartNavigation?this._setScrollWheelPan(!0):
a.enableScrollWheelZoom())},disableNavigation:function(){var a=this.map;a&&a.loaded&&(a.disableDoubleClickZoom(),a.disableClickRecenter(),a.disablePan(),a.disableRubberBandZoom(),this.disablePinchZoom(),a.disableKeyboardNavigation(),a.disableScrollWheelZoom(),a.smartNavigation&&this._setScrollWheelPan(!1))},destroy:function(){this.touchEvents&&this.touchEvents.destroy();this.mouseEvents&&this.mouseEvents.destroy();this.pointerEvents&&this.pointerEvents.destroy();var a,b=[this._panInitHandle,this._panStartHandle,
this._panHandle,this._panEndHandle,this._zoomInitHandle,this._zoomHandle,this._zoomEndHandle,this._wheelHandle,this._mwMacHandle,this._dblClickHandle,this._zoomOutHandle,this._recenterHandle,this._sDblClickHandle,this._dblTapHandle,this._keyHandle,this._keyEndHandle,this._swipeInitHandle,this._swipeHandle,this._swipeEndHandle,this._pinchInitHandle,this._pinchHandle,this._pinchEndHandle];for(a=0;a<b.length;a++)A(b[a]);this.map=this.touchEvents=this.mouseEvents=this.eventModel=this.pointerEvents=this._zoomRect=
this._dragOrigin=this._panInitHandle=this._panStartHandle=this._panHandle=this._panEndHandle=this._zoomInitHandle=this._zoomHandle=this._zoomEndHandle=this._wheelHandle=this._mwMacHandle=this._dblClickHandle=this._zoomOutHandle=this._recenterHandle=this._sDblClickHandle=this._dblTapHandle=this._keyHandle=this._keyEndHandle=this._swipeInitHandle=this._swipeHandle=this._swipeEndHandle=this._pinchInitHandle=this._pinchHandle=this._pinchEndHandle=null}})})},"esri/MouseEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/_base/connect dojo/_base/event ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),
function(l,n,a,g,q,h,m,f,d,c){var e=q.connect,b=q.disconnect;return l([f],{declaredClass:"esri.MouseEvents",doubleClickDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==g("mac")?1:3,wheelDivisor:2>g("chrome")?360:120,preventPageScroll:!0,map:null,constructor:function(b,c){this.node=b;a.mixin(this,c);var d=function(a){h.stop(a);return!1};g("mozilla")&&n.style(b,"MozUserSelect","none");this._handles=[e(b,"onselectstart",d),e(b,"ondragstart",d),e(b,"onmouseenter",this,this._onMouseEnterHandler),
e(b,"onmouseleave",this,this._onMouseLeaveHandler),e(b,"onmousedown",this,this._onMouseDownHandler),e(b,"onclick",this,this._onClickHandler),e(b,"ondblclick",this,this._onDblClickHandler)];this._onMouseMoveHandler_connect=e(b,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=e(b,"onmouseup",this,this._onMouseUpHandler);this._fireClickEvent=a.hitch(this,this._fireClickEvent);this._initialDuration=this.doubleClickDuration;this.preventPageScroll=(d=this.map)?d.isScrollWheelZoom||
d.isScrollWheelPan:this.preventPageScroll;this.enableMouseWheel(!1)},_fire:function(a,b){if(!this._preventClick||!("onClick"===a||"onDblClick"===a)){if(this[a])this[a](b);if(this.map&&this.map[a])this.map[a](b)}},_processEvent:function(a){a=h.fix(a,a.target);var b=this.map,e=b&&b.position;e&&("DOMMouseScroll"===a.type&&3>g("ff")?a.screenPoint=new c(window.scrollX+a.screenX-e.x,window.scrollY+a.screenY-e.y):a.screenPoint=new c(a.pageX-e.x,a.pageY-e.y),a.mapPoint=b.extent?b.toMap(a.screenPoint):new d);
a.numPoints=0;return a},_onMouseEnterHandler:function(a){b(this._onKeyDown_connect);b(this._onKeyUp_connect);this._onKeyDown_connect=e(document,"onkeydown",this,this._onKeyDownHandler);this._onKeyUp_connect=e(document,"onkeyup",this,this._onKeyUpHandler);this._fire("onMouseOver",this._processEvent(a))},_onMouseLeaveHandler:function(a){b(this._onKeyDown_connect);b(this._onKeyUp_connect);this._onKeyDown_connect=this._onKeyUp_connect=null;this._fire("onMouseOut",this._processEvent(a))},_onMouseMoveHandler:function(a){this._dragEnd?
this._dragEnd=!1:this._fire("onMouseMove",this._processEvent(a))},_onMouseDownHandler:function(a){b(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=null;this.node.setCapture&&this.node.setCapture(!1);b(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=e(document,"onmousemove",this,this._onMouseDragHandler);this._startX=a.pageX;this._startY=a.pageY;this._fire("onMouseDown",this._processEvent(a))},_onMouseUpHandler:function(a){var c=this.node;c.releaseCapture&&c.releaseCapture();
b(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=null;b(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=e(c,"onmousemove",this,this._onMouseMoveHandler);this._fire("onMouseUp",this._processEvent(a))},_onMouseDragHandler:function(a){b(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=e(document,"onmousemove",this,this._onMouseDraggingHandler);b(this._onMouseUpHandler_connect);this._onMouseUpHandler_connect=e(document,"onmouseup",this,this._onDragMouseUpHandler);
this._docLeaveConnect=e(document,"onmouseout",this,this._onDocMouseOut);this._fire("onMouseDragStart",this._processEvent(a))},_onMouseDraggingHandler:function(a){h.stop(a);this._fire("onMouseDrag",this._processEvent(a))},_onDragMouseUpHandler:function(a){var c=this.node;c.releaseCapture&&c.releaseCapture();this._dragEnd=!0;b(this._docLeaveConnect);b(this._onMouseDragHandler_connect);b(this._onMouseUpHandler_connect);this._docLeaveConnect=this._onMouseDragHandler_connect=null;this._onMouseMoveHandler_connect=
e(c,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=e(c,"onmouseup",this,this._onMouseUpHandler);a=this._processEvent(a);this._fire("onMouseDragEnd",a);this._fire("onMouseUp",a)},_onDocMouseOut:function(a){var b=9>g("ie")?a.toElement:a.relatedTarget,c=b&&b.nodeName.toLowerCase();(!b||g("chrome")&&"html"===c)&&this._onDragMouseUpHandler(a)},_onClickHandler:function(b){b=this._processEvent(b);b.pageX!==this._startX||b.pageY!==this._startY||(clearTimeout(this._clickTimer),
this._clickEvent=a.mixin({},b),this._clickTimer=setTimeout(this._fireClickEvent,this.doubleClickDuration))},_fireClickEvent:function(){clearTimeout(this._clickTimer);9>g("ie")&&(this._clickEvent.graphic=m._ieGraphic,delete m._ieGraphic);this._fire("onClick",this._clickEvent)},_onDblClickHandler:function(a){clearTimeout(this._clickTimer);this._fire("onDblClick",this._processEvent(a))},_onMouseWheelHandler:function(a){var b=this.map;(b?b.isScrollWheelZoom||b.isScrollWheelPan:this.preventPageScroll)&&
h.stop(a);var b=g("ff")||g("mozilla")?-a.detail/this.mozWheelDivisor:a.wheelDelta/this.wheelDivisor,c=Math.abs(b),c=c<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;a.value=0>b?-c:c;this._fire("onMouseWheel",this._processEvent(a))},_onKeyDownHandler:function(a){this._fire("onKeyDown",a)},_onKeyUpHandler:function(a){this._fire("onKeyUp",a)},enableMouseWheel:function(a){b(this._scrollHandle);this._scrollHandle=e(this.node,g("ff")||g("mozilla")?a?"MozMousePixelScroll":"DOMMouseScroll":"onmousewheel",
this,this._onMouseWheelHandler)},setImmediateClick:function(a){this.doubleClickDuration=a?0:this._initialDuration},preventClickEvents:function(a){this._preventClick=a},destroy:function(){var a=this._handles.concat([this._onMouseMoveHandler_connect,this._onMouseUpHandler_connect,this._onMouseDragHandler_connect,this._scrollHandle,this._onKeyDown_connect,this._onKeyUp_connect,this._docLeaveConnect]),c;for(c=0;c<a.length;c++)b(a[c]);clearTimeout(this._clickTimer);this.node=this.map=this._handles=this._clickEvent=
this._onMouseMoveHandler_connect=this._onMouseUpHandler_connect=this._onMouseDragHandler_connect=this._scrollHandle=this._onKeyDown_connect=this._onKeyUp_connect=this._docLeaveConnect=null}})})},"dojo/_base/html":function(){define("./kernel ../dom ../dom-style ../dom-attr ../dom-prop ../dom-class ../dom-construct ../dom-geometry".split(" "),function(l,n,a,g,q,h,m,f){l.byId=n.byId;l.isDescendant=n.isDescendant;l.setSelectable=n.setSelectable;l.getAttr=g.get;l.setAttr=g.set;l.hasAttr=g.has;l.removeAttr=
g.remove;l.getNodeProp=g.getNodeProp;l.attr=function(a,c,e){return 2==arguments.length?g["string"==typeof c?"get":"set"](a,c):g.set(a,c,e)};l.hasClass=h.contains;l.addClass=h.add;l.removeClass=h.remove;l.toggleClass=h.toggle;l.replaceClass=h.replace;l._toDom=l.toDom=m.toDom;l.place=m.place;l.create=m.create;l.empty=function(a){m.empty(a)};l._destroyElement=l.destroy=function(a){m.destroy(a)};l._getPadExtents=l.getPadExtents=f.getPadExtents;l._getBorderExtents=l.getBorderExtents=f.getBorderExtents;
l._getPadBorderExtents=l.getPadBorderExtents=f.getPadBorderExtents;l._getMarginExtents=l.getMarginExtents=f.getMarginExtents;l._getMarginSize=l.getMarginSize=f.getMarginSize;l._getMarginBox=l.getMarginBox=f.getMarginBox;l.setMarginBox=f.setMarginBox;l._getContentBox=l.getContentBox=f.getContentBox;l.setContentSize=f.setContentSize;l._isBodyLtr=l.isBodyLtr=f.isBodyLtr;l._docScroll=l.docScroll=f.docScroll;l._getIeDocumentElementOffset=l.getIeDocumentElementOffset=f.getIeDocumentElementOffset;l._fixIeBiDiScrollLeft=
l.fixIeBiDiScrollLeft=f.fixIeBiDiScrollLeft;l.position=f.position;l.marginBox=function(a,c){return c?f.setMarginBox(a,c):f.getMarginBox(a)};l.contentBox=function(a,c){return c?f.setContentSize(a,c):f.getContentBox(a)};l.coords=function(d,c){l.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");d=n.byId(d);var e=a.getComputedStyle(d),e=f.getMarginBox(d,e),b=f.position(d,c);e.x=b.x;e.y=b.y;return e};l.getProp=q.get;l.setProp=q.set;l.prop=function(a,c,e){return 2==arguments.length?
q["string"==typeof c?"get":"set"](a,c):q.set(a,c,e)};l.getStyle=a.get;l.setStyle=a.set;l.getComputedStyle=a.getComputedStyle;l.__toPixelValue=l.toPixelValue=a.toPixelValue;l.style=function(d,c,e){switch(arguments.length){case 1:return a.get(d);case 2:return a["string"==typeof c?"get":"set"](d,c)}return a.set(d,c,e)};return l})},"esri/TouchEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/dom ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),
function(l,n,a,g,q,h,m,f,d){return l([m],{declaredClass:"esri.TouchEvents",tapRadius:8,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,map:null,constructor:function(c,d){this.node=c;a.mixin(this,d);n.setSelectable(c,!1);this._touchStart=a.hitch(this,this._touchStart);this._touchMove=a.hitch(this,this._touchMove);this._touchEnd=a.hitch(this,this._touchEnd);this._touchCancel=a.hitch(this,this._touchCancel);c.addEventListener("touchstart",this._touchStart,!1);c.addEventListener("touchmove",
this._touchMove,!1);c.addEventListener("touchend",this._touchEnd,!1);c.addEventListener("touchcancel",this._touchCancel,!1);this.map&&g("ios")&&(this._mouseOver=a.hitch(this,this._mouseOver),this._mouseOut=a.hitch(this,this._mouseOut),this._mouseDown=a.hitch(this,this._mouseDown),this._mouseUp=a.hitch(this,this._mouseUp),this._mouseClick=a.hitch(this,this._mouseClick),c.addEventListener("mouseover",this._mouseOver,!1),c.addEventListener("mouseout",this._mouseOut,!1),c.addEventListener("mousedown",
this._mouseDown,!1),c.addEventListener("mouseup",this._mouseUp,!1),c.addEventListener("click",this._mouseClick,!1));this._numTouches=0;this._nodeTouches=[];this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_touchStart:function(a){var d=this._touches,b,k=a.changedTouches.length,f,h,l,m,n=(new Date).getTime();if(!g("android")||!g("safari")||!(1===a.targetTouches.length&&a.touches.length===a.targetTouches.length&&a.targetTouches.length===a.changedTouches.length&&0===a.changedTouches[0].identifier&&
d[a.changedTouches[0].identifier])){this._addTouch(a);for(b=0;b<k;b++)f=a.changedTouches[b],h=d[f.identifier]={},h.startX=f.pageX,h.startY=f.pageY,h.startTS=n,-1===this._touchIds.indexOf(f.identifier)&&this._touchIds.push(f.identifier);this._swipeActive&&(l=this._nodeTouches[0]);this._pinchActive&&(m=this._nodeTouches[1]);1===this._numTouches?this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(a,l))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",
this._processTouchEvent(a,[l,m]))):2===this._numTouches?this._swipeActive&&(l&&(h=d[this._touchIds[0]],h.startX=l.pageX,h.startY=l.pageY,h.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(a,l))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(a,l))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(a,[l,m])))}},_touchMove:function(a){a.preventDefault();this._updateTouch(a);var d=this._touches,
b,k=a.changedTouches.length,f,h,l,m;if(!g("android")||!g("safari")||!(1===a.targetTouches.length&&a.touches.length===a.targetTouches.length&&a.targetTouches.length===a.changedTouches.length&&0===a.changedTouches[0].identifier&&d[a.changedTouches[0].identifier]&&1<this._touchIds.length)){for(b=0;b<k;b++)if(f=a.changedTouches[b],h=d[f.identifier]){l=Math.abs(f.pageX-h.startX);f=Math.abs(f.pageY-h.startY);if(!h.moved&&(l>=this.tapRadius||f>=this.tapRadius))h.moved=h.absMoved=!0;m=m?m:h.moved}1===this._numTouches?
(b=a.changedTouches[0],this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(a,b)):m&&(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(a,b)))):2===this._numTouches&&(b=this._nodeTouches[0],k=this._nodeTouches[1],this._pinchActive?this._fire("onPinchMove",this._processTouchEvent(a,[b,k])):m&&(m=d[b.identifier],h=d[k.identifier],d=Math.abs(m.startX-h.startX),m=Math.abs(m.startY-h.startY),d=Math.sqrt(d*d+m*m),m=Math.abs(b.pageX-k.pageX),h=Math.abs(b.pageY-k.pageY),
m=Math.sqrt(m*m+h*h),Math.abs(m-d)>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(a,[b,k])))))}},_touchEnd:function(a){this._removeTouch(a);var d=this._touches,b=a.changedTouches,f,g=b.length,h,l,m=(new Date).getTime(),n=this._touchIds;for(f=0;f<g;f++)if(l=d[b[f].identifier])l.absMoved&&(h=!0),l.pageX=b[f].pageX,l.pageY=b[f].pageY,l.endTS=m;if(0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=!1,this._fire("onSwipeEnd",
this._processTouchEvent(a,b[0]));else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(a,b));else{if(!h){g=Infinity;h=-Infinity;var m=Infinity,q=-Infinity,u=this.tapStartTolerance,z=[],v=!0;for(f=0;f<n.length;f++)l=d[n[f]],z.push(l),l.startTS<g&&(g=l.startTS),l.startTS>h&&(h=l.startTS),l.endTS<m&&(m=l.endTS),l.endTS>q&&(q=l.endTS),delete d[n[f]];if(1===z.length&&b[0]&&(d=Math.abs(b[0].pageX-z[0].startX),b=Math.abs(b[0].pageY-z[0].startY),d>=this.tapRadius||
b>=this.tapRadius))v=!1;v&&Math.abs(h-g)<=u&&Math.abs(q-m)<=u&&this._basicTap(a,z)}}else 1===this._numTouches&&this._pinchActive&&(f=this._nodeTouches[0],l=d[f.identifier],l.startX=f.pageX,l.startY=f.pageY,this._pinchActive=l.moved=!1,this._fire("onPinchEnd",this._processTouchEvent(a,[b[0],f])))},_touchCancel:function(a){this._numTouches&&this._touchEnd(a)},_basicTap:function(a,d){var b=(new Date).getTime(),f=this;a=this._processTouchEvent(a,d);this._taps.push({touchInfos:d,ts:b,event:a});2<this._taps.length&&
this._taps.shift();this._fire("onBasicTap",a);clearTimeout(this._tapTimer);this._immediate?this._analyzeTap(!0):this._tapTimer=setTimeout(function(){var a=f;f=null;clearTimeout(a._tapTimer);a._analyzeTap()},2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration)},_analyzeTap:function(a){var d=this._taps,b=d[0],f=d[1],g=b.touchInfos,h=f&&f.touchInfos;d.length&&(a||(this._taps=[]),b&&f?g.length===h.length?f.ts-b.ts<=this.doubleTapDuration?(1===g.length?(a=Math.abs(g[0].startX-h[0].startX),
g=Math.abs(g[0].startY-h[0].startY),g=a<=this.doubleTapRadius&&g<=this.doubleTapRadius):g=!0,g?this._processedDoubleTap(d):this._processedTap(f)):this._processedTap(f):this._processedTap(f):this._processedTap(b||f))},_processedTap:function(a){var d=a.event;this._fire("onProcessedTap",d);1===a.touchInfos.length?this._fire("onTap",this._fixEvent(d)):2===a.touchInfos.length&&this._fire("onTwoFingerTap",d)},_processedDoubleTap:function(a){var d=1===a[1].touchInfos.length,b;d&&(b=[this._fixEvent(a[0].event),
this._fixEvent(a[1].event)],b[1].relatedEvents=b);a=[a[0].event,a[1].event];a[1].relatedEvents=a;this._fire("onProcessedDoubleTap",a[1]);d&&(this._fire("onDoubleTap",b[1]),this._fire("onDblClick",b[1]))},_addTouch:function(a){var d=a.changedTouches,b=this._nodeTouches,f,g,h;this._numTouches+=d.length;for(a=0;a<d.length;a++){g=b.length;h=!1;for(f=0;f<g&&!(h=b[f].identifier===d[a].identifier);f++);h?this._numTouches--:b.push(d[a])}for(a=b.length-1;0<=a;a--)q.isDescendant(b[a].target,document.body)||
(b.splice(a,1),this._numTouches--);0>this._numTouches&&(this._numTouches=0)},_removeTouch:function(a){var d=[],b=[],f=a.changedTouches,g=this._nodeTouches;this._numTouches-=f.length;0>this._numTouches&&(this._numTouches=0);for(a=0;a<f.length;a++)d.push(f[a].identifier);for(a=g.length-1;0<=a;a--)-1!==d.indexOf(g[a].identifier)&&b.push(g.splice(a,1)[0]);return b},_updateTouch:function(a){var d=[],b,f=a.changedTouches,g=this._nodeTouches;for(a=0;a<f.length;a++)d.push(f[a].identifier);for(a=0;a<g.length;a++)b=
d.indexOf(g[a].identifier),-1!==b&&g.splice(a,1,f[b])},_mouseOver:function(a){this._fire("onMouseOver",this._processMouseEvent(a))},_mouseOut:function(a){this._fire("onMouseOut",this._processMouseEvent(a))},_mouseDown:function(a){this._fire("onMouseDown",this._processMouseEvent(a))},_mouseUp:function(a){this._fire("onMouseUp",this._processMouseEvent(a))},_mouseClick:function(a){this._fire("onClick",this._processMouseEvent(a))},_fire:function(a,d){if("onDblClick"===a&&this.mouseEvents){this.mouseEvents.preventClickEvents(!0);
var b=this;setTimeout(function(){b.mouseEvents.preventClickEvents(!1)},350)}if(this[a])this[a](d);if(this.map&&this.map[a])this.map[a](d)},_fixEvent:function(a){var d={},b;for(b in a)d[b]=a[b];this.map&&(d.screenPoint=d.screenPoints[0],d.mapPoint=d.mapPoints[0]);return d},_processTouchEvent:function(c,e){var b=this.map,k=b&&b.position,g=0;if(k&&e)if(a.isArray(e)){var h,l;c.screenPoints=[];c.mapPoints=[];for(h=0;h<e.length;h++)e[h]?(l=new d(e[h].pageX-k.x,e[h].pageY-k.y),c.screenPoints.push(l),c.mapPoints.push(b.extent?
b.toMap(l):new f)):g++}else c.screenPoint=new d(e.pageX-k.x,e.pageY-k.y),c.mapPoint=b.extent?b.toMap(c.screenPoint):new f;c.numPoints=e?a.isArray(e)?e.length-g:1:0;return c},_processMouseEvent:function(a){var e=this.map,b=e&&e.position;b&&(a.screenPoint=new d(a.pageX-b.x,a.pageY-b.y),a.mapPoint=e.extent?e.toMap(a.screenPoint):new f);return a},setImmediateTap:function(a){this._immediate=a},destroy:function(){var a=this.node;a.removeEventListener("touchstart",this._touchStart,!1);a.removeEventListener("touchmove",
this._touchMove,!1);a.removeEventListener("touchend",this._touchEnd,!1);a.removeEventListener("touchcancel",this._touchCancel,!1);this.map&&(a.removeEventListener("mouseover",this._mouseOver,!1),a.removeEventListener("mouseout",this._mouseOut,!1),a.removeEventListener("mousedown",this._mouseDown,!1),a.removeEventListener("mouseup",this._mouseUp,!1),a.removeEventListener("click",this._mouseClick,!1));n.setSelectable(a,!0);clearTimeout(this._tapTimer);this.node=this.map=this._numTouches=this._nodeTouches=
this._touches=this._touchIds=this._taps=null}})})},"esri/PointerEvents":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),function(l,n,a,g,q,h,m,f){return l([h],{declaredClass:"esri.PointerEvents",tapRadius:8,clickRadius:2,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==g("mac")?1:3,wheelDivisor:120,preventPageScroll:!0,_dragging:!1,
constructor:function(a,c){this.node=a;n.mixin(this,c);void 0!==a.style.msTouchAction?a.style.msTouchAction="none":void 0!==a.style.touchAction&&(a.style.touchAction="none");var e=navigator.msPointerEnabled,b=function(a){a.preventDefault()};a.addEventListener("selectstart",b,!1);a.addEventListener("dragstart",b,!1);this._pointerDown=n.hitch(this,this._pointerDown);this._pointerMove=n.hitch(this,this._pointerMove);this._pointerUp=n.hitch(this,this._pointerUp);this._pointerCancel=n.hitch(this,this._pointerCancel);
a.addEventListener(e?"MSPointerDown":"pointerdown",this._pointerDown,!1);a.addEventListener(e?"MSPointerMove":"pointermove",this._pointerMove,!1);a.addEventListener(e?"MSPointerUp":"pointerup",this._pointerUp,!1);a.addEventListener(e?"MSPointerCancel":"pointercancel",this._pointerCancel,!1);this.map&&(this._mouseOver=n.hitch(this,this._mouseOver),this._mouseOut=n.hitch(this,this._mouseOut),this._mouseLeave=n.hitch(this,this._mouseLeave),this._mouseDown=n.hitch(this,this._mouseDown),this._mouseUp=
n.hitch(this,this._mouseUp),this._mouseClick=n.hitch(this,this._mouseClick),this._mouseWheel=n.hitch(this,this._mouseWheel),this._mouseMove=n.hitch(this,this._mouseMove),this._mouseEnter=n.hitch(this,this._mouseEnter),this._onKeyDown=n.hitch(this,this._onKeyDown),this._onKeyUp=n.hitch(this,this._onKeyUp),a.addEventListener("mouseover",this._mouseOver,!1),a.addEventListener("mouseout",this._mouseOut,!1),a.addEventListener("mouseleave",this._mouseLeave,!1),a.addEventListener("mousedown",this._mouseDown,
!1),a.addEventListener("mouseup",this._mouseUp,!1),a.addEventListener("click",this._mouseClick,!1),a.addEventListener("mousewheel",this._mouseWheel,!1),a.addEventListener("mousemove",this._mouseMove,!1),a.addEventListener("mouseenter",this._mouseEnter,!1));this._numTouches=0;this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_pointerDown:function(d){if(-1<a.indexOf(this._touchIds,d.pointerId))this._pointerUp(d);else{var c=this._touches,e=d.target,b=d.pointerId,f=this._touchIds,g,
h=(new Date).getTime();g=c[b]={};g.pointerId=b;g.startX=g.pageX=d.pageX;g.startY=g.pageY=d.pageY;g.startTS=h;f.push(b);this._numTouches++;e.setPointerCapture?e.setPointerCapture(b):e.msSetPointerCapture&&e.msSetPointerCapture(b);e=c[f[0]];c=c[f[1]];1!==this._numTouches&&(2===this._numTouches?this._swipeActive&&(e&&(e.startX=e.pageX,e.startY=e.pageY,e.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(d,e))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",
this._processTouchEvent(d,e))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(d,[e,c]))))}},_pointerMove:function(a){var c=this._touches,e=this._touchIds,b,f,g;if((b=c[a.pointerId])&&!(b.pageX===a.pageX&&b.pageY===a.pageY)){b.pageX=a.pageX;b.pageY=a.pageY;f=Math.abs(b.pageX-b.startX);g=Math.abs(b.pageY-b.startY);if(!b.moved&&(f>=this.tapRadius||g>=this.tapRadius))b.moved=b.absMoved=!0;if(1===this._numTouches)this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(a,
a)):b.moved&&(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(a,a)));else if(2===this._numTouches)if(b=c[e[0]],c=c[e[1]],this._pinchActive)this._fire("onPinchMove",this._processTouchEvent(a,[b,c]));else if(b.moved||c.moved)e=Math.abs(b.startX-c.startX),f=Math.abs(b.startY-c.startY),e=Math.sqrt(e*e+f*f),f=Math.abs(b.pageX-c.pageX),g=Math.abs(b.pageY-c.pageY),f=Math.sqrt(f*f+g*g),Math.abs(f-e)>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(a,
[b,c])))}},_pointerUp:function(d){var c=this._touches,e,b=this.node,f=d.target,g=d.pointerId,h=this._touchIds,l=h.slice(0),m=a.map(l,function(a){return c[a]}),n=(new Date).getTime();if(e=c[g])if(e.pageX=d.pageX,e.pageY=d.pageY,e.endTS=n,this._numTouches--,f.releasePointerCapture?f.releasePointerCapture(g):f.msReleasePointerCapture&&f.msReleasePointerCapture(g),0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(d,
d));else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(d,d));else{if(!e.absMoved){var f=Infinity,g=-Infinity,h=Infinity,n=-Infinity,q=this.tapStartTolerance,u;for(u=0;u<l.length;u++)e=m[u],e.startTS<f&&(f=e.startTS),e.startTS>g&&(g=e.startTS),e.endTS<h&&(h=e.endTS),e.endTS>n&&(n=e.endTS);Math.abs(g-f)<=q&&Math.abs(n-h)<=q&&this._basicTap(d,m)}}else 1===this._numTouches&&this._pinchActive&&(h.splice(a.indexOf(h,d.pointerId),1),delete c[d.pointerId],e=c[h[0]],
e.startX=e.pageX,e.startY=e.pageY,e.moved=!1,document.msElementsFromPoint&&(l=document.msElementsFromPoint(e.pageX,e.pageY),a.some(l,function(a){return a===b})||(this._touches={},this._touchIds=[],this._numTouches=0)),this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(d,[d,e])))},_pointerCancel:function(a){this._numTouches&&this._pointerUp(a)},_basicTap:function(a,c){var e=(new Date).getTime(),b=this,f=this._immediate;a=this._processTouchEvent(a,c);this._taps.push({touchInfos:c,
ts:e,event:a});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",a);clearTimeout(this._tapTimer);e=2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration;this._tapTimer=setTimeout(function(){var a=b;b=null;clearTimeout(a._tapTimer);a._analyzeTap(f)},f?0:e)},_analyzeTap:function(a){var c=this._taps,e=c[0],b=c[1],f=e.touchInfos,g=b&&b.touchInfos;c.length&&(a||(this._taps=[]),e&&b?f.length===g.length?b.ts-e.ts<=this.doubleTapDuration?(1===f.length?(a=Math.abs(f[0].startX-
g[0].startX),f=Math.abs(f[0].startY-g[0].startY),f=a<=this.doubleTapRadius&&f<=this.doubleTapRadius):f=!0,f?this._processedDoubleTap(c):this._processedTap(b)):this._processedTap(b):this._processedTap(b):this._processedTap(e||b))},_processedTap:function(a){var c=a.event;this._fire("onProcessedTap",c);1===a.touchInfos.length?this._fire("onTap",this._fixEvent(c)):2===a.touchInfos.length&&this._fire("onTwoFingerTap",c)},_processedDoubleTap:function(a){var c=1===a[1].touchInfos.length,e;c&&(e=[this._fixEvent(a[0].event),
this._fixEvent(a[1].event)],e[1].relatedEvents=e);a=[a[0].event,a[1].event];a[1].relatedEvents=a;this._fire("onProcessedDoubleTap",a[1]);c&&(this._fire("onDoubleTap",e[1]),this._fire("onDblClick",e[1]))},_mouseOver:function(a){this._fire("onMouseOver",this._processMouseEvent(a))},_mouseMove:function(a){this._dragging?this._fire("onMouseDrag",this._processMouseEvent(a)):this._fire("onMouseMove",this._processMouseEvent(a))},_mouseOut:function(a){this._fire("onMouseOut",this._processMouseEvent(a))},
_mouseLeave:function(a){document.removeEventListener("keydown",this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseOut",this._processMouseEvent(event))},_mouseDown:function(a){this._downX=a.pageX;this._downY=a.pageY;this._fire("onMouseDown",this._processMouseEvent(a));0===a.button&&(this._dragging=!0,this._fire("onMouseDragStart",this._processMouseEvent(a)))},_mouseUp:function(a){this._dragging&&(this._dragging=!1,this._fire("onMouseDragEnd",this._processMouseEvent(a)));
this._fire("onMouseUp",this._processMouseEvent(a))},_mouseClick:function(a){Math.abs(a.pageX-this._downX)<=this.clickRadius&&Math.abs(a.pageY-this._downY)<=this.clickRadius&&this._fire("onClick",this._processMouseEvent(a))},_mouseWheel:function(a){var c=this.map;(c?c.isScrollWheelZoom||c.isScrollWheelPan:this.preventPageScroll)&&a.preventDefault();var c=a.wheelDelta?a.wheelDelta/this.wheelDivisor:-a.detail/this.mozWheelDivisor,e=Math.abs(c),e=e<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;
a.value=0>c?-e:e;this._fire("onMouseWheel",this._processMouseEvent(a))},_mouseEnter:function(a){document.removeEventListener("keydown",this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);document.addEventListener("keydown",this._onKeyDown,!1);document.addEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseEnter",this._processMouseEvent(a))},_onKeyDown:function(a){this._fire("onKeyDown",a)},_onKeyUp:function(a){this._fire("onKeyUp",a)},_fire:function(a,c){if(this[a])this[a](c);
if(this.map&&this.map[a])this.map[a](c)},_fixEvent:function(a){var c={},e;for(e in a)c[e]=a[e];c.preventDefault=function(){a.preventDefault()};c.stopPropagation=function(){a.stopPropagation()};this.map&&(c.screenPoint=c.screenPoints[0],c.mapPoint=c.mapPoints[0]);return c},_processTouchEvent:function(a,c){var e=this.map,b=e&&e.position,k=0;if(b&&c)if(n.isArray(c)){var g,h;a.screenPoints=[];a.mapPoints=[];for(g=0;g<c.length;g++)c[g]?(h=new f(c[g].pageX-b.x,c[g].pageY-b.y),a.screenPoints.push(h),a.mapPoints.push(e.extent?
e.toMap(h):new m)):k++}else a.screenPoint=new f(c.pageX-b.x,c.pageY-b.y),a.mapPoint=e.extent?e.toMap(a.screenPoint):new m;a.numPoints=c?n.isArray(c)?c.length-k:1:0;return a},_processMouseEvent:function(a){var c=this.map,e=c&&c.position;e&&(a.screenPoint=new f(a.pageX-e.x,a.pageY-e.y),a.mapPoint=c.extent?c.toMap(a.screenPoint):new m);return a},setImmediateTap:function(a){this._immediate=a},destroy:function(){var a=this.node;a.removeEventListener("MSPointerDown",this._pointerDown,!1);a.removeEventListener("MSPointerMove",
this._pointerMove,!1);a.removeEventListener("MSPointerUp",this._pointerUp,!1);a.removeEventListener("MSPointerCancel",this._pointerCancel,!1);this.map&&(a.removeEventListener("mouseover",this._mouseOver,!1),a.removeEventListener("mousemove",this._mouseMove,!1),a.removeEventListener("mouseout",this._mouseOut,!1),a.removeEventListener("mouseleave",this._mouseLeave,!1),a.removeEventListener("mousedown",this._mouseDown,!1),a.removeEventListener("mouseup",this._mouseUp,!1),a.removeEventListener("click",
this._mouseClick,!1),a.removeEventListener("mouseenter",this._mouseEnter,!1));clearTimeout(this._tapTimer);this.node=this.map=this._numTouches=this._touches=this._touchIds=this._taps=null}})})},"app/components/legend/View":function(){define("exports module dojo/_base/declare dojo/topic dijit/_WidgetBase dijit/_TemplatedMixin esri/dijit/Legend dojo/text!./templates/Legend.html".split(" "),function(l,n,a,g,q,h,m,f){function d(a){return a&&a.__esModule?a:{"default":a}}l=d(a);var c=d(g);g=d(q);h=d(h);
var e=d(m);m=d(f);n.exports=(0,l["default"])([g["default"],h["default"]],{baseClass:"lgnd-node",templateString:m["default"],postCreate:function(){c["default"].subscribe("map-ready",this.onMapReady.bind(this));c["default"].subscribe("map-change",this.onMapChange.bind(this))},onMapReady:function(a){a=new e["default"]({map:a.map},this.lgndContainer);a.startup();this.set("legend",a)},onMapChange:function(a){var c=this.get("legend");c.set("map",a.map);c.refresh()}})})},"esri/dijit/Legend":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/json dojo/_base/Color dojo/has dojo/sniff dojo/DeferredList dojo/json dojo/dom dojo/dom-construct dojo/dom-style dijit/_Widget dojox/gfx dojox/gfx/matrix dojox/html/entities ../kernel ../config ../request ../lang ../numberUtils ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/ClassBreaksRenderer ../renderers/ScaleDependentRenderer ../renderers/DotDensityRenderer ../renderers/TemporalRenderer ../renderers/VectorFieldRenderer ../renderers/HeatmapRenderer ../symbols/PictureFillSymbol ../symbols/jsonUtils ./_EventedWidget dojo/i18n!../nls/jsapi".split(" "),
function(l,n,a,g,q,h,m,f,d,c,e,b,k,s,p,r,t,x,y,u,z,v,w,A,B,D,E,C,F,K,I,G,J,H,N){var Q=n([H,p],{declaredClass:"esri.dijit.Legend",widgetsInTemplate:!1,layers:null,alignRight:!1,hoverLabelShowing:!1,dotDensitySwatchSize:26,dotCoverage:75,gradientHeight:30,defaultText:"Aa",gradientWidth:34,colorRampBorder:"1px solid",_specialChars:{lt:"\x3c",gt:"\x3e"},_ieTimer:100,_isRightToLeft:!1,_align:null,_legendAlign:null,constructor:function(b,c){a.mixin(this,N.widgets.legend);this._i18n=N.widgets.legend;b=b||
{};b.map&&c&&(this.map=b.map,this.layerInfos=b.layerInfos,this._respectCurrentMapScale=!1===b.respectCurrentMapScale?!1:!0,this._respectVisibility=!1===b.respectVisibility?!1:!0,this.arrangement=b.arrangement===Q.ALIGN_RIGHT?Q.ALIGN_RIGHT:Q.ALIGN_LEFT,this.arrangement===Q.ALIGN_RIGHT&&(this.alignRight=!0),this.autoUpdate=!1===b.autoUpdate?!1:!0,this._surfaceItems=[],this.hideLayersInLegend={})},postMixInProperties:function(){this.inherited(arguments);var a=["ar","he"],b,c;for(b=0;b<a.length;b+=1)c=
a[b],l.locale&&-1!==l.locale.indexOf(c)&&(-1!==l.locale.indexOf("-")?-1!==l.locale.indexOf(c+"-")&&(this._isRightToLeft=!0):this._isRightToLeft=!0);this._isRightToLeft?(this._align=this.alignRight?"left":"right",this._legendAlign=this.alignRight?"esriLegendLeft":"esriLegendRight"):(this._align=this.alignRight?"right":"left",this._legendAlign=this.alignRight?"esriLegendRight":"esriLegendLeft")},startup:function(){this.inherited(arguments);this._initialize();9>f("ie")&&(this._repaintItems=a.hitch(this,
this._repaintItems),setTimeout(this._repaintItems,this._ieTimer))},destroy:function(){this._deactivate();this._removeHoverHandlers();this.inherited(arguments)},refresh:function(a){if(this.domNode){a?(this.layerInfos=a,this.layers=[],g.forEach(this.layerInfos,function(a){this._isSupportedLayerType(a.layer)&&(a.title&&(a.layer._titleForLegend=a.title),a.layer._hideDefaultSymbol=!1===a.defaultSymbol?!0:!1,a.hideLayers?(this.hideLayersInLegend[a.layer.id]=a.hideLayers,this._addSubLayersToHide(a)):this.hideLayersInLegend[a.layer.id]=
[],a.hoverLabel&&(a.layer._hoverLabel=a.hoverLabel),a.hoverLabels&&(a.layer._hoverLabels=a.hoverLabels),this.layers.push(a.layer))},this)):this.useAllMapLayers&&(this.layers=this.layerInfos=null);for(a=this.domNode.children.length-1;0<=a;a--)k.destroy(this.domNode.children[a]);this._removeHoverHandlers();this.startup()}},_legendUrl:"http://utility.arcgis.com/sharing/tools/legend",_initialize:function(){this.layerInfos&&(this.layers=[],g.forEach(this.layerInfos,function(a){this._isSupportedLayerType(a.layer)&&
(a.title&&(a.layer._titleForLegend=a.title),a.layer._hideDefaultSymbol=!1===a.defaultSymbol?!0:!1,a.hideLayers?(this.hideLayersInLegend[a.layer.id]=a.hideLayers,this._addSubLayersToHide(a)):this.hideLayersInLegend[a.layer.id]=[],a.hoverLabel&&(a.layer._hoverLabel=a.hoverLabel),a.hoverLabels&&(a.layer._hoverLabels=a.hoverLabels),this.layers.push(a.layer))},this));this.useAllMapLayers=!1;if(!this.layers){this.useAllMapLayers=!0;this.layers=[];var a=[],b=[];g.forEach(this.map.layerIds,function(c){c=
this.map.getLayer(c);var d;this._isSupportedLayerType(c)&&(c.arcgisProps&&c.arcgisProps.title&&(c._titleForLegend=c.arcgisProps.title),this.layers.push(c));"esri.layers.KMLLayer"==c.declaredClass&&(d=c.getLayers(),g.forEach(d,function(b){a.push(b.id)},this));"esri.layers.GeoRSSLayer"==c.declaredClass&&(d=c.getFeatureLayers(),g.forEach(d,function(a){b.push(a.id)},this))},this);g.forEach(this.map.graphicsLayerIds,function(c){var d=this.map.getLayer(c);-1==g.indexOf(a,c)&&-1==g.indexOf(b,c)&&this._isSupportedLayerType(d)&&
(d._params&&d._params.drawMode)&&(d.arcgisProps&&d.arcgisProps.title&&(d._titleForLegend=d.arcgisProps.title),this.layers.push(d))},this)}this._createLegend()},_activate:function(){this._deactivate();this.autoUpdate&&(this._respectCurrentMapScale&&(this._ozeConnect=q.connect(this.map,"onZoomEnd",this,"_refreshLayers")),this.useAllMapLayers&&(this._olaConnect=q.connect(this.map,"onLayerAdd",this,"_updateAllMapLayers"),this._olrConnect=q.connect(this.map,"onLayerRemove",this,"_updateAllMapLayers"),
this._olroConnect=q.connect(this.map,"onLayersReordered",this,"_updateAllMapLayers")),g.forEach(this.layers,function(b){b.ovcConnect=q.connect(b,"onVisibilityChange",this,"_refreshLayers");b.oscConnect=q.connect(b,"onScaleRangeChange",this,"_refreshLayers");"esri.layers.ArcGISDynamicMapServiceLayer"===b.declaredClass&&b.supportsDynamicLayers&&(b.odcConnect=q.connect(b,"_onDynamicLayersChange",a.hitch(this,"_updateDynamicLayers",b)));"esri.layers.ArcGISImageServiceLayer"===b.declaredClass&&(b.oirConnect=
q.connect(b,"onRenderingChange",a.partial(this._updateImageServiceLayers,this,b)));"esri.layers.ArcGISImageServiceVectorLayer"===b.declaredClass&&(b.oivrConnect=q.connect(b,"onRendererChange",a.hitch(this,"_refreshLayers")))},this))},_deactivate:function(){this._ozeConnect&&q.disconnect(this._ozeConnect);this._olaConnect&&q.disconnect(this._olaConnect);this._olroConnect&&q.disconnect(this._olroConnect);this._olrConnect&&q.disconnect(this._olrConnect);g.forEach(this.layers,function(a){a.ovcConnect&&
q.disconnect(a.ovcConnect);a.oscConnect&&q.disconnect(a.oscConnect);a.odcConnect&&q.disconnect(a.odcConnect);a.oirConnect&&q.disconnect(a.oirConnect);a.oivrConnect&&q.disconnect(a.oivrConnect)},this)},_updateDynamicLayers:function(a){delete a.legendResponse;this._refreshLayers()},_updateImageServiceLayers:function(a,b){delete b.legendResponse;a._refreshLayers()},_refreshLayers:function(){this.refresh()},_updateAllMapLayers:function(){this.layers=[];g.forEach(this.map.layerIds,function(a){a=this.map.getLayer(a);
this._isSupportedLayerType(a)&&this.layers.push(a)},this);g.forEach(this.map.graphicsLayerIds,function(a){a=this.map.getLayer(a);this._isSupportedLayerType(a)&&a._params&&a._params.drawMode&&this.layers.push(a)},this);this.refresh()},_createLegend:function(){var d=!1;s.set(this.domNode,"position","relative");k.create("div",{id:this.id+"_msg",className:"esriLegendMsg",innerHTML:this.NLS_creatingLegend+"..."},this.domNode);var e=[];g.forEach(this.layers,function(b){if("esri.layers.KMLLayer"==b.declaredClass||
"esri.layers.GeoRSSLayer"==b.declaredClass){var c;b.loaded?("esri.layers.KMLLayer"==b.declaredClass?c=b.getLayers():"esri.layers.GeoRSSLayer"==b.declaredClass&&(c=b.getFeatureLayers(),this.hideLayersInLegend[b.id]&&(c=g.filter(c,function(a){return-1==g.indexOf(this.hideLayersInLegend[b.id],a.id)},this))),g.forEach(c,function(a){"esri.layers.FeatureLayer"==a.declaredClass&&b._titleForLegend&&(a._titleForLegend=b._titleForLegend+" - ","esriGeometryPoint"==a.geometryType?a._titleForLegend+=this.NLS_points:
"esriGeometryPolyline"==a.geometryType?a._titleForLegend+=this.NLS_lines:"esriGeometryPolygon"==a.geometryType&&(a._titleForLegend+=this.NLS_polygons),e.push(a))},this)):q.connect(b,"onLoad",a.hitch(this,function(){this.refresh(this.layerInfos)}))}else if("esri.layers.WMSLayer"===b.declaredClass)if(b.loaded){if((!this._respectVisibility||this._respectVisibility&&b.visible)&&0<b.layerInfos.length&&g.some(b.layerInfos,function(a){return a.legendURL})){var f=!1;g.forEach(b.layerInfos,function(a){a.legendURL&&
-1<g.indexOf(b.visibleLayers,a.name)&&(f||(k.create("div",{innerHTML:"\x3cspan class\x3d'esriLegendServiceLabel'\x3e"+(b._titleForLegend||b.name||b.id)+"\x3c/span\x3e"},this.domNode),f=!0),k.create("div",{innerHTML:"\x3cimg src\x3d'"+a.legendURL+"'/\x3e"},this.domNode),d=!0)},this)}}else q.connect(b,"onLoad",a.hitch(this,function(){this.refresh(this.layerInfos)}));else e.push(b)},this);var f=[];g.forEach(e,function(a){if(a.loaded){if((!this._respectVisibility||this._respectVisibility&&a.visible)&&
(a.layerInfos||a.renderer||"esri.layers.ArcGISImageServiceLayer"==a.declaredClass)){var b=k.create("div",{id:this.id+"_"+a.id,style:{display:"none"},"class":"esriLegendService"});k.create("span",{innerHTML:this._getServiceTitle(a),"class":"esriLegendServiceLabel"},k.create("td",{align:this._align},k.create("tr",{},k.create("tbody",{},k.create("table",{width:"95%"},b)))));k.place(b,this.id,"first");a.legendResponse||a.renderer?this._createLegendForLayer(a):f.push(this._legendRequest(a))}}else var c=
q.connect(a,"onLoad",this,function(a){q.disconnect(c);c=null;this.refresh()})},this);0===f.length&&!d?(b.byId(this.id+"_msg").innerHTML=this.NLS_noLegend,this._activate()):(new c(f)).addCallback(a.hitch(this,function(a){d?b.byId(this.id+"_msg").innerHTML="":b.byId(this.id+"_msg").innerHTML=this.NLS_noLegend;this._activate()}))},_createLegendForLayer:function(a){if(a.legendResponse||a.renderer){var c=!1;if(a.legendResponse){var d=a.dynamicLayerInfos||a.layerInfos;d&&d.length?g.forEach(d,function(b,
d){if(!this.hideLayersInLegend[a.id]||-1==g.indexOf(this.hideLayersInLegend[a.id],b.id)){var e=this._buildLegendItems(a,b,d);c=c||e}},this):"esri.layers.ArcGISImageServiceLayer"==a.declaredClass&&(c=this._buildLegendItems(a,{id:0,name:null,title:a.name,subLayerIds:null,parentLayerId:-1},0))}else a.renderer&&(d=a.url?a.url.substring(a.url.lastIndexOf("/")+1,a.url.length):"fc_"+a.id,c=this._buildLegendItems(a,{id:d,name:null,subLayerIds:null,parentLayerId:-1},0));c&&(s.set(b.byId(this.id+"_"+a.id),
"display","block"),s.set(b.byId(this.id+"_msg"),"display","none"))}},_legendRequest:function(b){if(b.loaded)return 10.01<=b.version?this._legendRequestServer(b):this._legendRequestTools(b);q.connect(b,"onLoad",a.hitch(this,"_legendRequest"))},_legendRequestServer:function(b){var c=b.url,d=c.indexOf("?"),c=-1<d?c.substring(0,d)+"/legend"+c.substring(d):c+"/legend";(d=b._getToken())&&(c+="?token\x3d"+d);var f=a.hitch(this,"_processLegendResponse"),d={f:"json"};b._params.dynamicLayers&&(d.dynamicLayers=
e.stringify(this._createDynamicLayers(b)),"[{}]"===d.dynamicLayers&&(d.dynamicLayers="[]"));b._params.bandIds&&(d.bandIds=b._params.bandIds);b._params.renderingRule&&(d.renderingRule=b._params.renderingRule);return z({url:c,content:d,callbackParamName:"callback",load:function(a,c){f(b,a,c)},error:u.defaults.io.errorHandler})},_legendRequestTools:function(b){var c=b.url.toLowerCase().indexOf("/rest/"),c=b.url.substring(0,c)+b.url.substring(c+5,b.url.length),c=this._legendUrl+"?soapUrl\x3d"+window.escape(c);
if(!f("ie")||8<f("ie"))c+="\x26returnbytes\x3dtrue";var d=a.hitch(this,"_processLegendResponse");return z({url:c,content:{f:"json"},callbackParamName:"callback",load:function(a,c){d(b,a,c)},error:u.defaults.io.errorHandler})},_processLegendResponse:function(a,c){c&&c.layers&&(a.legendResponse=c,b.byId(this.id+"_"+a.id)&&k.empty(b.byId(this.id+"_"+a.id)),k.create("span",{innerHTML:this._getServiceTitle(a),"class":"esriLegendServiceLabel"},k.create("td",{align:this._align},k.create("tr",{},k.create("tbody",
{},k.create("table",{width:"95%"},b.byId(this.id+"_"+a.id)))))),this._createLegendForLayer(a))},_buildLegendItems:function(a,c,d){var e=!1,f=b.byId(this.id+"_"+a.id),g=c.parentLayerId;if(c.subLayerIds)a=k.create("div",{id:this.id+"_"+a.id+"_"+c.id+"_group",style:{display:"none"},"class":-1==g?0<d?"esriLegendGroupLayer":"":this._legendAlign},-1==g?f:b.byId(this.id+"_"+a.id+"_"+g+"_group")),k.create("td",{innerHTML:x.encode(c.name),align:this._align},k.create("tr",{},k.create("tbody",{},k.create("table",
{width:"95%","class":"esriLegendLayerLabel"},a))));else{if(this._respectVisibility&&a.visibleLayers&&-1==(","+a.visibleLayers+",").indexOf(","+c.id+","))return e;d=k.create("div",{id:this.id+"_"+a.id+"_"+c.id,style:{display:"none"},"class":-1<g?this._legendAlign:""},-1==g?f:b.byId(this.id+"_"+a.id+"_"+g+"_group"));k.create("td",{innerHTML:x.encode(c.name)||"",align:this._align},k.create("tr",{},k.create("tbody",{},k.create("table",{width:"95%","class":"esriLegendLayerLabel"},d))));a.legendResponse?
e=e||this._buildLegendItems_Tools(a,c,d):a.renderer&&(e=e||this._buildLegendItems_Renderer(a,c,d))}return e},_buildLegendItems_Tools:function(a,c,d){var e=c.parentLayerId,f=this.map.getScale(),h=!1,l=function(a,b){var c,d;for(c=0;c<a.length;c++)if(b.dynamicLayerInfos)for(d=0;d<b.dynamicLayerInfos[d].length;d++){if(b.dynamicLayerInfos[d].mapLayerId==a[c].layerId)return a[c]}else if(b.id==a[c].layerId)return a[c];return{}};if(!this._respectCurrentMapScale||this._respectCurrentMapScale&&this._isLayerInScale(a,
c,f)){var p=!0;if(this._respectCurrentMapScale&&("esri.layers.ArcGISDynamicMapServiceLayer"===a.declaredClass||"esri.layers.ArcGISMapServiceLayer"===a.declaredClass)){var m=this._getEffectiveScale(a,c);if(m.minScale&&m.minScale<f||m.maxScale&&m.maxScale>f)p=!1}if(p){var f=l(a.legendResponse.layers,c),r=f.legendType,n=f.legend;if(n){"esri.layers.ArcGISImageServiceLayer"!==a.declaredClass&&this._sanitizeLegendResponse(a,f,c);d=k.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},
d);var q=k.create("tbody",{},d);(a._hoverLabel||a._hoverLabels)&&this._createHoverAction(d,a,c);g.forEach(n,function(b){if(!(10.1<=a.version&&!b.values&&1<n.length&&(a._hideDefaultSymbol||"\x3call other values\x3e"===b.label||!b.label&&!("esri.layers.ArcGISImageServiceLayer"===a.declaredClass&&10.3<=a.version))))if(b.url&&0===b.url.indexOf("http")||b.imageData&&0<b.imageData.length)h=!0,this._buildRow_Tools(b,q,a,c.id,r)},this)}}}h&&(s.set(b.byId(this.id+"_"+a.id+"_"+c.id),"display","block"),-1<e&&
(s.set(b.byId(this.id+"_"+a.id+"_"+e+"_group"),"display","block"),this._findParentGroup(a.id,a,e)));return h},_sanitizeLegendResponse:function(b,c,d){var e=c.legend;if(10.1<=b.version&&1<e.length&&!c._sanitized){b=a.getObject("layerDefinition.drawingInfo.renderer",!1,d);var f,k;b||(b=a.getObject("drawingInfo.renderer",!1,d));g.some(e,function(a){if(a.values)return!0})&&g.some(e,function(a,b){a.values||(k=b,f=a);return!!f});b?"uniqueValue"===b.type?f&&(e.splice(k,1),e.push(f)):"classBreaks"===b.type&&
(f&&e.splice(k,1),e.reverse(),f&&e.push(f)):f&&(e.splice(k,1),e.push(f));c._sanitized=!0}},_buildRow_Tools:function(a,b,c,d,e){var g=k.create("tr",{},b),h;this.alignRight?(b=k.create("td",{align:this._isRightToLeft?"left":"right"},g),h=k.create("td",{align:this._isRightToLeft?"left":"right",width:35},g)):(h=k.create("td",{width:35,align:"center"},g),b=k.create("td",{},g));g=a.url;(!f("ie")||9<=f("ie")||9>f("ie")&&"esri.layers.ArcGISImageServiceLayer"===c.declaredClass)&&a.imageData&&0<a.imageData.length?
g="data:image/png;base64,"+a.imageData:0!==a.url.indexOf("http")&&(g=c.url+"/"+d+"/images/"+a.url,(d=c._getToken())&&(g+="?token\x3d"+d));d=k.create("img",{src:g,border:0,style:"opacity:"+c.opacity},h);a=k.create("td",{innerHTML:x.encode(a.label),align:this._align},k.create("tr",{},k.create("tbody",{},k.create("table",{width:"95%",dir:"ltr"},b))));e&&"Stretched"===e&&(10.3<=c.version&&"esri.layers.ArcGISImageServiceLayer"===c.declaredClass)&&(a.style.verticalAlign="top",a.style.lineHeight="1",d.style.marginBottom=
"-1px",d.style.display="block",b.style.verticalAlign="top");9>f("ie")&&(d.style.filter="alpha(opacity\x3d"+100*c.opacity+")")},_getVariable:function(a,b,c){var d;a&&(d=(a=a.getVisualVariablesForType(b,c))&&a[0]);return d},_getFieldAlias:function(b,c){var d=c.infoTemplate,d=d&&d.getFieldInfo&&d.getFieldInfo(b),e=a.isFunction(b)?null:c.getField(b),f=d||e,k="";f&&(k=d&&d.label||e&&e.alias||f.name||f.fieldName);return k},_getDefaultHoverLabel:function(a,b){var c;if(a){var d=this._getVariable(a,"colorInfo",
!1),e=this._getVariable(a,"opacityInfo",!1),f=this._getVariable(a,"sizeInfo",!1),d=d||f||e,k,g,h,l,p;a instanceof I?k=a.field:a instanceof B&&!a.attributeField2&&!a.attributeField3?(k=a.attributeField,d&&(h=d.field,l=d.normalizationField)):a instanceof D?d?(k=d.field,g=d.normalizationField):(k=a.attributeField,g=a.normalizationField,p="percent-of-total"===a.normalizationType):a instanceof A&&d&&(k=d.field,g=d.normalizationField);(p=l&&"showOpNormField"||h&&"showOpField"||g&&"showNormField"||(p?"showNormPct":
null)||k&&"showField"||null)&&(c=v.substitute({field:k&&this._getFieldAlias(k,b),normField:g&&this._getFieldAlias(g,b),opField:h&&this._getFieldAlias(h,b),opNormField:l&&this._getFieldAlias(l,b)},this._i18n[p]))}return c},_buildLegendItems_Renderer:function(c,d,e){var f=d.parentLayerId,h=this.map,l=h.getScale(),p=!1;if(!this._respectCurrentMapScale||this._isLayerInScale(c,d,l)){var m,r,n="esri.layers.ArcGISImageServiceVectorLayer"===c.declaredClass?c.renderer.renderer:c.renderer,q,t,w,u,v,y;if(n instanceof
E&&(n=(h="zoom"===n.rangeType?n.getRendererInfoByZoom(h.getZoom()):n.getRendererInfoByScale(l))&&h.renderer,!n))return!1;var h=this._getVariable(n,"colorInfo",!1),l=this._getVariable(n,"opacityInfo",!1),$=this._getVariable(n,"sizeInfo",!1),z=this._getDefaultHoverLabel(n,c);h?(q=this._getMedianColor(n,h),h.field&&(w=a.isFunction(h.field)?null:c.getField(h.field))):l&&(v=a.isFunction(l.field)?null:c.getField(l.field),y=l.normalizationField);$&&$.field&&(u=a.isFunction($.field)?null:c.getField($.field));
if(n instanceof I)p=!0,this._showHeatRamp(c,d,n,e,z);else if(n instanceof C)p=!0,this._showDotDensityLegend(c,d,n,e);else if(n instanceof F)p=!0,r=k.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},e),m=k.create("tbody",{},r),(c._hoverLabel||c._hoverLabels)&&this._createHoverAction(r,c,d),n.latestObservationRenderer&&n.latestObservationRenderer instanceof A&&this._buildRow_Renderer(c,n.latestObservationRenderer.symbol,q,x.encode(n.latestObservationRenderer.label)||
this.NLS_currentObservations,null,m),n.observationRenderer&&n.observationRenderer instanceof A&&this._buildRow_Renderer(c,n.observationRenderer.symbol,q,x.encode(n.observationRenderer.label)||this.NLS_previousObservations,null,m);else if(n instanceof B){if(n.infos&&0<n.infos.length){p=!0;r=k.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},e);m=k.create("tbody",{},r);(c._hoverLabel||c._hoverLabels||z)&&this._createHoverAction(r,c,d,z);var ea=[];g.forEach(n.infos,
function(a){var b=null;c._editable&&c.types&&(b=this._getTemplateFromTypes(c.types,a.value));var d=a.label;null==d&&(d=a.value);-1===g.indexOf(ea,d)&&(ea.push(d),this._buildRow_Renderer(c,a.symbol,q,x.encode(d),b,m))},this)}}else if(n instanceof D){if(n.infos&&0<n.infos.length||"esri.layers.ArcGISImageServiceVectorLayer"===c.declaredClass){p=!0;y=w||u||v;if(!y||!this._isSmartRenderer(n,y.name))r=k.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},e),m=k.create("tbody",
{},r),y=(n.normalizationField||"percent-of-total"===n.normalizationType)&&z?z:this._getFieldAlias(n.attributeField,c),this._buildRow_Renderer(c,null,q,x.encode(y),null,m);r=k.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},e);m=k.create("tbody",{},r);(c._hoverLabel||c._hoverLabels||z)&&this._createHoverAction(r,c,d,z);y=n.infos.slice(0).reverse();g.forEach(y,function(a){var b=a.label;null==b&&(b=(b=w||u||v)&&this._isSmartRenderer(n,b.name)?n.normalizationField&&
z?z:this._getFieldAlias(b.name,c):a.minValue+" - "+a.maxValue);this._buildRow_Renderer(c,a.symbol,q,x.encode(b),null,m)},this);if("esri.layers.ArcGISImageServiceVectorLayer"===c.declaredClass&&(c.renderer.style===K.STYLE_SCALAR||c.renderer.style===K.STYLE_SINGLE_ARROW))this._buildRow_Renderer(c,n.defaultSymbol,null,"",null,m),c._hideDefaultSymbol=!0}}else n instanceof A&&(p=!0,r=k.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},e),m=k.create("tbody",{},r),(c._hoverLabel||
c._hoverLabels||z)&&this._createHoverAction(r,c,d,z),t=null,c._editable&&c.templates&&0<c.templates.length&&(t=c.templates[0]),r=(w||v)&&u?null:w||v||u,this._buildRow_Renderer(c,n.symbol,q,x.encode(y&&z?z:r?this._getFieldAlias(r.name,c):n.label),t,m),t=n.symbol&&n.symbol.color,r&&(w=v=u=null));p&&(h&&h.field?(w&&this._isSmartRenderer(n,w.name)&&(w=null),this._showColorRamp(c,d,n,null,e,h,w,z)):l&&t&&this._showColorRamp(c,d,n,t,e,l,v,z),$&&$.field&&(u&&this._isSmartRenderer(n,u.name)&&(u=null),this._showSizeLegend(c,
d,n,$,q,e,u,z)));!c._hideDefaultSymbol&&n.defaultSymbol&&(p=!0,r=k.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},e),m=k.create("tbody",{},r),this._buildRow_Renderer(c,n.defaultSymbol,null,x.encode(n.defaultLabel)||"others",null,m))}p&&(s.set(b.byId(this.id+"_"+c.id+"_"+d.id),"display","block"),-1<f&&(s.set(b.byId(this.id+"_"+c.id+"_"+f+"_group"),"display","block"),this._findParentGroup(c.id,f)));return p},_isSmartRenderer:function(a,b){return a instanceof D&&a.infos&&
1===a.infos.length&&a.attributeField===b},_showColorRamp:function(a,b,c,d,e,f,g,h){var l;l=k.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},e);e=k.create("tbody",{},l);(a._hoverLabel||a._hoverLabels||h)&&this._createHoverAction(l,a,b,h);g&&this._addSubHeader(e,this._getFieldAlias(g.name,a));b=this._getRampStops(c,f,d);b.length&&this._drawColorRamp(e,b,!0,a,this._getRampBorderColor(c))},_getMedianColor:function(a,b){var c,d;b.colors?(c=b.minDataValue,d=b.maxDataValue):
b.stops&&(c=b.stops[0].value,d=b.stops[b.stops.length-1].value);return a.getColor(c+(d-c)/2,{colorInfo:b})},_getRampStops:function(a,b,c){var d,e,f,k,h=!1;b.colors||b.opacityValues?(e=b.maxDataValue-b.minDataValue,d=g.map([0,0.25,0.5,0.75,1],function(a){f=b.minDataValue+a*e;return Number(f.toFixed(6))}),this._checkPrecision(0,4,d)):b.stops&&(d=g.map(b.stops,function(a){return a.value}),(h=g.some(b.stops,function(a){return!!a.label}))&&(k=g.map(b.stops,function(a){return a.label})));var l=d[0],p,r,
n;e=d[d.length-1]-l;return g.map(d,function(f,g){c?(p=new m(c.toRgba()),r=a.getOpacity(f,{opacityInfo:b}),null!=r&&(p.a=r)):p=a.getColor(f,{colorInfo:b});n="";0===g?n=this._specialChars.lt+" ":g===d.length-1&&(n=this._specialChars.gt+" ");return{value:f,color:p,offset:1-(f-l)/e,label:h?k[g]:n+w.format(f)}},this).reverse()},_checkPrecision:function(a,b,c){var d=a+(b-a)/2,e=c[a],f=c[d],k=c[b],g=Math.floor(e),h=Math.floor(f),l=Math.floor(k);g===e&&l===k&&(h!==f&&g!==h&&l!==h)&&(c[d]=h);a+1!==d&&this._checkPrecision(a,
d,c);d+1!==b&&this._checkPrecision(d,b,c)},_getRampBorderColor:function(a){var b;if(a instanceof A)b=a.symbol;else if(a instanceof B||a instanceof D)b=a.infos[0].symbol;return(a=b&&-1===b.type.indexOf("linesymbol")?b.getStroke():null)&&a.color},_drawColorRamp:function(a,b,c,d,e){var h=k.create("tr",{},a),l,p,n,q,t,w=b.length-1,u;q=0;this.alignRight?(a=k.create("td",{align:this._isRightToLeft?"left":"right"},h),l=k.create("td",{align:this._isRightToLeft?"left":"right",width:this.gradientWidth},h)):
(l=k.create("td",{width:this.gradientWidth,align:"center"},h),a=k.create("td",{},h));var v=e&&0<e.a&&!(240<=e.r&&240<=e.g&&240<=e.b);p=k.create("div",{"class":v?"":"esriLegendBorderLessColorRamp",style:"position: relative; width:"+this.gradientWidth+"px;"},l);h=k.create("div",{"class":"esriLegendColorRamp"},p);l=s.get(h,"width");v&&(e=9>f("ie")?e.toHex():"rgba("+e.toRgba().join(",")+")",s.set(h,"border",this.colorRampBorder+" "+e));c?(e=this.gradientHeight*w,s.set(h,"height",e+"px")):e=s.get(h,"height");
s.set(p,"height",e+"px");h=r.createSurface(h,l,e);9>f("ie")&&(q=h.getEventSource(),s.set(q,"position","relative"),s.set(q.parentNode,"position","relative"),q=1);try{c&&g.forEach(b,function(a,b){a.offset=b/w}),t=h.createRect({x:-q,y:-q,width:l+q,height:e+q}),t.setFill({type:"linear",x1:0,y1:0,x2:0,y2:e,colors:b}).setStroke(null),h.createRect({width:l,height:e}).setFill(new m([255,255,255,1-d.opacity])).setStroke(null),this._surfaceItems.push(h)}catch(y){h.clear(),h.destroy()}g.forEach(b,function(a,
c){if(a.label){u="top:"+100*a.offset+"%;";var d="";0===c&&(d+=" esriLegendColorRampTickFirst");c===b.length-1&&(d+=" esriLegendColorRampTickLast");k.create("div",{"class":"esriLegendColorRampTick"+d,innerHTML:"\x26nbsp;",style:u},p)}});n=k.create("div",{"class":"esriLegendColorRampLabels",style:{height:e+this.gradientHeight+"px"}},a);c?g.forEach(b,function(a){k.create("div",{"class":"esriLegendColorRampLabel",innerHTML:x.encode(a.label)||"\x26nbsp;"},n)}):(k.create("div",{"class":"esriLegendColorRampLabel",
innerHTML:this._i18n.high},n),k.create("div",{"class":"esriLegendColorRampLabel",innerHTML:this._i18n.low,style:"top: "+(e+this.gradientHeight-2*this.gradientHeight)+"px;"},n))},_showHeatRamp:function(a,b,c,d,e){var f,g=c.field;f=k.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},d);d=k.create("tbody",{},f);(a._hoverLabel||a._hoverLabels||e)&&this._createHoverAction(f,a,b,e);(g=g&&a.getField(g))&&this._addSubHeader(d,this._getFieldAlias(g.name,a));b=this._getHeatmapStops(c);
b.length&&this._drawColorRamp(d,b,!1,a)},_getHeatmapStops:function(a){var b=a.colorStops;a=a.colors;var c,d,e,f;if(b&&b[0])if(c=b.length-1,a=b[0]&&null!=b[0].ratio){if((a=b[c])&&1!==a.ratio)b=b.slice(0),b.push({ratio:1,color:a.color}),c++}else d=b[0].value,e=b[c].value-d,b=g.map(b,function(a){return{color:a.color,ratio:(a.value-d)/e}});else a&&a[0]&&(c=a.length-1,f=1/(a.length-1),b=g.map(a,function(a,b){return{color:a,ratio:b*f}}));b=g.map(b,function(a,b){var d="";0===b?d="Low":b===c&&(d="High");
return{color:a.color,label:d,offset:1-a.ratio}});return b.reverse()},_showDotDensityLegend:function(b,c,d,e){var f=d.legendOptions,h,l,p,m,r,n,q,s=this.dotDensitySwatchSize,t=Math.round(s/2);f&&(l=f.backgroundColor,p=f.outline,m=f.valueUnit,r=f.dotCoverage);r=(r||this.dotCoverage)/100;q=Math.round(s*s/Math.pow(d.dotSize,2)*r);e=k.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},e);n=k.create("tbody",{},e);(b._hoverLabel||b._hoverLabels)&&this._createHoverAction(e,
b,c);this._addSubHeader(n,v.substitute({value:d.dotValue,unit:m||""},this.NLS_dotValue));g.forEach(d.fields,function(c){c=a.mixin({},c);c.numPoints=q;h=new G(d._generateImageSrc(s,s,[c],{x:0,y:0},{x:s,y:s},l),p||d.outline,s,s);c=b.getField(c.name)||c;this._buildRow_Renderer(b,h,null,x.encode(this._getFieldAlias(c.name,b)),null,n,{type:"path",path:"M "+-t+","+-t+" L "+t+","+-t+" L "+t+","+t+" L "+-t+","+t+" L "+-t+","+-t+" E"})},this)},_showSizeLegend:function(a,b,c,d,e,f,h,l){var p=d.legendOptions,
p=p&&p.customValues,m,r,n=this._getSizeSymbol(c,e);"unknown"!==d.valueUnit||!n||!p&&(null==d.minSize||null==d.maxSize)||(e=k.create("table",{cellpadding:0,cellspacing:0,width:"95%","class":"esriLegendLayer"},f),m=k.create("tbody",{},e),(a._hoverLabel||a._hoverLabels||l)&&this._createHoverAction(e,a,b,l),h&&this._addSubHeader(m,this._getFieldAlias(h.name,a)),r=p||this._getDataValues(c,n,d),r.reverse(),g.forEach(r,function(b,e){n=J.fromJson(n.toJson());this._applySize(n,c,d,b);b=w.format(b);var f="";
0===e?f=this._specialChars.gt+" ":e===r.length-1&&(f=this._specialChars.lt+" ");f="\x3cspan class\x3d'esriLegendSizeRampLabel'\x3e"+x.encode(f+b)+"\x3c/span\x3e";this._buildRow_Renderer(a,n,null,f,null,m)},this))},_getSizeSymbol:function(a,b){var c;if(a instanceof A)c=a.symbol;else if(a instanceof K)c=a.defaultSymbol;else if(a instanceof B||a instanceof D)c=a.infos[0].symbol;if(c=-1!==c.type.indexOf("fillsymbol")?null:c)c=J.fromJson(c.toJson()),b&&c.setColor(new m(b.toRgba()));return c},_getDataValues:function(a,
b,c,d,e){d=null==d?5:d;e=null==e?20:e;var f=a.getSizeRangeAtScale(c,this.map.getScale());d=this._interpolateSizeRange(f,d);var k=g.map(d,function(a){return this._getDataValueFromSize(a,c,f)},this),h,l,k=w.round(k);for(h=1;h<k.length-1;h++)if(l=this._roundDataValue(a,b,c,k[h],k[h-1],e))k[h]=l[0],d[h]=l[1];return k},_interpolateSizeRange:function(a,b){var c=a.minSize,d=(a.maxSize-c)/(b-1),e,f=[];for(e=0;e<b;e++)f.push(c+d*e);return f},_getDataValueFromSize:function(a,b,c){var d=c.minSize;c=c.maxSize;
var e=b.minDataValue;b=b.maxDataValue;return a<=d?e:a>=c?b:(a-d)/(c-d)*(b-e)+e},_roundDataValue:function(a,b,c,d,e,f){var k=this._getSize(b,a,c,d);e=this._getSize(b,a,c,e);var g,h=w.getDigits(d),l=h.integer,h=h.fractional,p,m,r,n,q,s,t,u,x,v,y;0<d&&1>d&&(g=Math.pow(10,h),d*=g,l=w.getDigits(d).integer);for(l-=1;0<=l&&!(p=Math.pow(10,l),h=Math.floor(d/p)*p,p*=Math.ceil(d/p),null!=g&&(h/=g,p/=g),m=(h+p)/2,m=w.round([h,m,p],{indexes:[1]})[1],r=this._getSize(b,a,c,h),n=this._getSize(b,a,c,p),q=this._getSize(b,
a,c,m),s=w.getPctChange(k,r,e,null),t=w.getPctChange(k,n,e,null),u=w.getPctChange(k,q,e,null),x=s.prev<=f,v=t.prev<=f,x&&v&&(s.prev<=t.prev?(x=!0,v=!1):(v=!0,x=!1)),x?y=[h,r]:v?y=[p,n]:u.prev<=f&&(y=[m,q]),y);l--);return y},_applySize:function(a,b,c,d){var e=a.type;b=this._getSize(a,b,c,d);switch(e){case "simplemarkersymbol":a.setSize(b);break;case "picturemarkersymbol":e=a.width;c=a.height;a.setHeight(b);a.setWidth(b*(e/c));break;case "simplelinesymbol":case "cartographiclinesymbol":a.setWidth(b);
break;case "textsymbol":a.font&&a.font.setSize(b)}},_getSize:function(a,b,c,d){return b.getSize(d,{sizeInfo:c,scale:this.map.getScale(),shape:-1!==a.type.indexOf("markersymbol")?a.style:null})},_buildRow_Renderer:function(a,b,c,d,e,f,g){var h=k.create("tr",{},f),l;this.alignRight?(f=k.create("td",{align:this._isRightToLeft?"left":"right"},h),b&&(l=k.create("td",{align:this._isRightToLeft?"left":"right",width:35},h))):(b&&(l=k.create("td",{width:35,align:"center"},h)),f=k.create("td",{},h));var p=
h=30;if(b){if("simplemarkersymbol"==b.type)h=Math.min(Math.max(h,b.size+12),125),p=Math.min(Math.max(p,b.size+12),125);else if("picturemarkersymbol"==b.type)h=Math.min(Math.max(h,b.width),125),p=Math.min(b.height||p,125);else if("textsymbol"==b.type){var m,r;b.text||(m=b.text,r=!0,b.setText(this.defaultText));h=Math.min(Math.max(h,b.getWidth()+12),125);p=Math.min(Math.max(p,b.getHeight()+12),125);r&&b.setText(m)}var n=k.create("div",{style:"width:"+h+"px;height:"+p+"px;"},l)}v.isDefined(d)&&"number"===
typeof d&&(d=""+d);k.create("td",{innerHTML:d||"",align:this._align},k.create("tr",{},k.create("tbody",{},k.create("table",{width:"95%"},f))));b&&(a=this._drawSymbol(n,b,c,h,p,e,a,g),this._surfaceItems.push(a))},_addSubHeader:function(a,b){var c=k.create("tr",{},a),c=k.create("td",{align:this._align,colspan:2},c);k.create("td",{innerHTML:x.encode(b)||"",align:this._align},k.create("tr",{},k.create("tbody",{},k.create("table",{width:"95%"},c))))},_drawSymbol:function(b,c,d,e,k,g,h,l){c=J.fromJson(c.toJson());
var p=h.opacity;d&&c.setColor(new m(d.toRgba()));if("simplelinesymbol"===c.type||"cartographiclinesymbol"===c.type||"textsymbol"===c.type){if(!c.color)return;d=c.color.toRgba();d[3]*=p;c.color.setColor(d)}else"simplemarkersymbol"===c.type||"simplefillsymbol"===c.type?(c.color&&(d=c.color.toRgba(),d[3]*=p,c.color.setColor(d)),c.outline&&c.outline.color&&(d=c.outline.color.toRgba(),d[3]*=p,c.outline.color.setColor(d))):"picturemarkersymbol"===c.type&&(b.style.opacity=p,b.style.filter="alpha(opacity\x3d("+
100*p+"))");b=r.createSurface(b,e,k);9>f("ie")&&(d=b.getEventSource(),s.set(d,"position","relative"),s.set(d.parentNode,"position","relative"));g=this._getDrawingToolShape(c,g)||J.getShapeDescriptors(c);var n,p=(d=g.defaultShape)&&"text"===d.type;try{p&&!d.text&&(d.text=this.defaultText),n=b.createShape(l||d).setFill(g.fill).setStroke(g.stroke),p&&n.setFont(g.font)}catch(q){b.clear();b.destroy();return}var w=n.getBoundingBox();l=w.width;g=w.height;var p=-(w.x+l/2),u=-(w.y+g/2);d=b.getDimensions();
p={dx:p+d.width/2,dy:u+d.height/2};if("simplemarkersymbol"===c.type&&"path"===c.style)e=h._getScaleMatrix(w,c.size),n.applyTransform(t.scaleAt(e.xx,e.yy,{x:d.width/2,y:d.height/2}));else if(l>e||g>k)h=l/e>g/k,e=((h?e:k)-5)/(h?l:g),a.mixin(p,{xx:e,yy:e});n.applyTransform(p);return b},_getDrawingToolShape:function(a,b){var c;switch(b?b.drawingTool||null:null){case "esriFeatureEditToolArrow":c={type:"path",path:"M 10,1 L 3,8 L 3,5 L -15,5 L -15,-2 L 3,-2 L 3,-5 L 10,1 E"};break;case "esriFeatureEditToolTriangle":c=
{type:"path",path:"M -10,14 L 2,-10 L 14,14 L -10,14 E"};break;case "esriFeatureEditToolRectangle":c={type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 E"};break;case "esriFeatureEditToolCircle":c={type:"circle",cx:0,cy:0,r:10};break;case "esriFeatureEditToolEllipse":c={type:"ellipse",cx:0,cy:0,rx:10,ry:5};break;default:return null}return{defaultShape:c,fill:a.getFill(),stroke:a.getStroke()}},_repaintItems:function(){g.forEach(this._surfaceItems,function(a){this._repaint(a)},this)},
_repaint:function(b){if(b){b.getStroke&&b.setStroke&&b.setStroke(b.getStroke());try{b.getFill&&b.setFill&&b.setFill(b.getFill())}catch(c){}b.children&&a.isArray(b.children)&&g.forEach(b.children,this._repaint,this)}},_createHoverAction:function(c,d,e,f){if(f=d._hoverLabel||d._hoverLabels&&d._hoverLabels[e.id]||f)f=x.encode(f),d.mouseMoveHandler=d.mouseMoveHandler||{},d.mouseMoveHandler[e.id]=q.connect(c,"onmousemove",a.hitch(this,function(c,d){this.mouseX=d.clientX;this.mouseY=d.clientY;this.hoverLabelShowing&&
(this.hoverLabelShowing=!1,s.set(b.byId(this.id+"_hoverLabel"),"display","none"));setTimeout(a.hitch(this,function(a,c,d){if(a==this.mouseX&&c==this.mouseY&&!this.hoverLabelShowing)if(this.hoverLabelShowing=!0,b.byId(this.id+"_hoverLabel")){var e=b.byId(this.id+"_hoverLabel");e.innerHTML="\x3cspan\x3e"+d+"\x3c/span\x3e";s.set(e,"top",c+"px");s.set(e,"left",a+15+"px");s.set(e,"display","")}else k.create("div",{innerHTML:"\x3cspan\x3e"+d+"\x3c/span\x3e",id:this.id+"_hoverLabel","class":"esriLegendHoverLabel",
style:{top:c+"px",left:a+15+"px"}},document.body)},d.clientX,d.clientY,c),500)},f)),d.mouseOutHandler=d.mouseOutHandler||{},d.mouseOutHandler[e.id]=q.connect(c,"onmouseout",a.hitch(this,function(a){this.mouseY=this.mouseX=-1;this.hoverLabelShowing&&(this.hoverLabelShowing=!1,s.set(b.byId(this.id+"_hoverLabel"),"display","none"))}))},_removeHoverHandlers:function(){var a;g.forEach(this.layers,function(b){if(b.mouseMoveHandler)for(a in b.mouseMoveHandler)q.disconnect(b.mouseMoveHandler[a]);if(b.mouseOutHandler)for(a in b.mouseOutHandler)q.disconnect(b.mouseOutHandler[a])})},
_createDynamicLayers:function(a){var b=[],c;g.forEach(a.dynamicLayerInfos||a.layerInfos,function(d){c={id:d.id};c.source=d.source&&d.source.toJson();var e;a.layerDefinitions&&a.layerDefinitions[d.id]&&(e=a.layerDefinitions[d.id]);e&&(c.definitionExpression=e);var f;a.layerDrawingOptions&&a.layerDrawingOptions[d.id]&&(f=a.layerDrawingOptions[d.id]);f&&(c.drawingInfo=f.toJson());c.minScale=d.minScale||0;c.maxScale=d.maxScale||0;b.push(c)});return b},_getTemplateFromTypes:function(a,b){var c;for(c=0;c<
a.length;c++)if(a[c].id==b&&a[c].templates&&0<a[c].templates.length)return a[c].templates[0];return null},_findParentGroup:function(a,c,d){var e,f=c.dynamicLayerInfos||c.layerInfos;for(e=0;e<f.length;e++)if(d==f[e].id){-1<f[e].parentLayerId&&(s.set(b.byId(this.id+"_"+a+"_"+f[e].parentLayerId+"_group"),"display","block"),this._findParentGroup(a,c,f[e].parentLayerId));break}},_addSubLayersToHide:function(a){function b(c,d){var e=a.layer.dynamicLayerInfos||a.layer.layerInfos,f,k;for(f=0;f<e.length;f++)if(e[f].id===
c&&e[f].subLayerIds)for(k=0;k<e[f].subLayerIds.length;k++){var h=e[f].subLayerIds[k];-1===g.indexOf(d,h)&&(d.push(h),b(h,d))}}a.layer.layerInfos&&g.forEach(this.hideLayersInLegend[a.layer.id],function(c){b(c,this.hideLayersInLegend[a.layer.id])},this)},_isLayerInScale:function(a,b,c){var d,e=!0;if(a.legendResponse&&a.legendResponse.layers)for(d=0;d<a.legendResponse.layers.length;d++){var f=a.legendResponse.layers[d];if(b.id==f.layerId){var k,g;!a.minScale&&0!==a.minScale||!a.maxScale&&0!==a.maxScale?
(0==f.minScale&&a.tileInfo&&(k=a.tileInfo.lods[0].scale),0==f.maxScale&&a.tileInfo&&(g=a.tileInfo.lods[a.tileInfo.lods.length-1].scale)):(k=Math.min(a.minScale,f.minScale)||a.minScale||f.minScale,g=Math.max(a.maxScale,f.maxScale));if(0<k&&k<c||g>c)e=!1;break}}else if(a.minScale||a.maxScale)if(a.minScale&&a.minScale<c||a.maxScale&&a.maxScale>c)e=!1;return e},_getServiceTitle:function(a){var b=a._titleForLegend;b||((b=a.url)?-1<a.url.indexOf("/MapServer")?(b=a.url.substring(0,a.url.indexOf("/MapServer")),
b=b.substring(b.lastIndexOf("/")+1,b.length)):-1<a.url.indexOf("/ImageServer")?(b=a.url.substring(0,a.url.indexOf("/ImageServer")),b=b.substring(b.lastIndexOf("/")+1,b.length)):-1<a.url.indexOf("/FeatureServer")&&(b=a.url.substring(0,a.url.indexOf("/FeatureServer")),b=b.substring(b.lastIndexOf("/")+1,b.length)):b="",a.name&&(b=0<b.length?b+(" - "+a.name):a.name));"esri.layers.ArcGISImageServiceVectorLayer"===a.declaredClass&&a.vectorFieldPixelFilter&&(a=a.vectorFieldPixelFilter.outputUnit?this["NLS_"+
a.vectorFieldPixelFilter.outputUnit]:this["NLS_"+a.vectorFieldPixelFilter.inputUnit],v.isDefined(a)&&(b+=" ("+a+")"));return x.encode(b)},_getEffectiveScale:function(a,b){var c=b.minScale,d=b.maxScale;if(v.isDefined(b.parentLayerId)){var e=a.layerInfos,f=b.parentLayerId,k;for(k=e.length-1;0<=k;k--)if(e[k].id==f)if(0==c&&0<e[k].minScale?c=e[k].minScale:0<c&&0==e[k].minScale||0<c&&0<e[k].minScale&&(c=Math.min(c,e[k].minScale)),d=Math.max(d||0,e[k].maxScale||0),-1<e[k].parentLayerId)f=e[k].parentLayerId;
else break}return{minScale:c,maxScale:d}},_isSupportedLayerType:function(a){return a&&("esri.layers.ArcGISDynamicMapServiceLayer"===a.declaredClass||"esri.layers.ArcGISImageServiceLayer"===a.declaredClass&&10.2<=a.version||"esri.layers.ArcGISImageServiceVectorLayer"===a.declaredClass||"esri.layers.ArcGISTiledMapServiceLayer"===a.declaredClass||"esri.layers.FeatureLayer"===a.declaredClass||"esri.layers.StreamLayer"===a.declaredClass||"esri.layers.KMLLayer"===a.declaredClass||"esri.layers.GeoRSSLayer"===
a.declaredClass||"esri.layers.WMSLayer"===a.declaredClass||"esri.layers.CSVLayer"===a.declaredClass)?!0:!1}});a.mixin(Q,{ALIGN_LEFT:0,ALIGN_RIGHT:1});return Q})},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(l,n,a){l.DeferredList=function(g,l,h,m,f){var d=[];n.call(this);var c=this;0===g.length&&!l&&this.resolve([0,[]]);var e=0;a.forEach(g,function(a,f){function n(a,b){d[f]=[a,b];e++;e===g.length&&c.resolve(d)}a.then(function(a){l?c.resolve([f,
a]):n(!0,a)},function(a){h?c.reject(a):n(!1,a);if(m)return null;throw a;})})};l.DeferredList.prototype=new n;l.DeferredList.prototype.gatherResults=function(g){g=new l.DeferredList(g,!1,!0,!1);g.addCallback(function(g){var h=[];a.forEach(g,function(a){h.push(a[1])});return h});return g};return l.DeferredList})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),
function(l,n,a,g,q,h,m,f,d,c,e,b,k){function s(){}function p(b){return function(c,d,e,f){return c&&"string"==typeof d&&c[d]==s?c.on(d.substring(2).toLowerCase(),m.hitch(e,f)):b.apply(a,arguments)}}l.around(a,"connect",p);h.connect&&l.around(h,"connect",p);l=g("dijit._Widget",[e,b,k],{onClick:s,onDblClick:s,onKeyDown:s,onKeyPress:s,onKeyUp:s,onMouseDown:s,onMouseMove:s,onMouseOut:s,onMouseOver:s,onMouseLeave:s,onMouseEnter:s,onMouseUp:s,constructor:function(a){this._toConnect={};for(var b in a)this[b]===
s&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=a[b],delete a[b])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(b,c){return this[this._onMap(b)]===s?a.connect(this.domNode,b.toLowerCase(),this,c):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,b){h.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.",
"","2.0");this.set(a,b)},attr:function(a,b){return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){h.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?f("[widgetId]",this.containerNode).map(c.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});q("dijit-legacy-requires")&&d(0,function(){require(["dijit/_base"])});
return l})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(l,n,a,g,q,h){l=g("dijit._OnDijitClickMixin",null,{connect:function(a,f,d){return this.inherited(arguments,[a,"ondijitclick"==f?h:f,d])}});l.a11yclick=h;return l})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(l,n,a,g){function q(a){if((a.keyCode===l.ENTER||a.keyCode===l.SPACE)&&!/input|button|textarea/i.test(a.target.nodeName))for(a=
a.target;a;a=a.parentNode)if(a.dojoClick)return!0}var h;a(document,"keydown",function(a){q(a)?(h=a.target,a.preventDefault()):h=null});a(document,"keyup",function(f){q(f)&&f.target==h&&(h=null,a.emit(f.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:f.ctrlKey,shiftKey:f.shiftKey,metaKey:f.metaKey,altKey:f.altKey,_origType:f.type}))});var m=function(f,d){f.dojoClick=!0;return a(f,"click",d)};m.click=m;m.press=function(f,d){var c=a(f,g.press,function(a){("mousedown"!=a.type||n.isLeft(a))&&d(a)}),e=
a(f,"keydown",function(a){(a.keyCode===l.ENTER||a.keyCode===l.SPACE)&&d(a)});return{remove:function(){c.remove();e.remove()}}};m.release=function(f,d){var c=a(f,g.release,function(a){("mouseup"!=a.type||n.isLeft(a))&&d(a)}),e=a(f,"keyup",function(a){(a.keyCode===l.ENTER||a.keyCode===l.SPACE)&&d(a)});return{remove:function(){c.remove();e.remove()}}};m.move=g.move;return m})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(l,n,a,g){g.extend(n,
{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return a("dijit._FocusMixin",null,{_focusManager:l})})},"dijit/focus":function(){define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),function(l,n,a,g,q,h,m,f,d,c,e,b,k,s,p,r,t){var x,y,u=new (n([b,
m],{curNode:null,activeStack:[],constructor:function(){var b=f.hitch(this,function(b){a.isDescendant(this.curNode,b)&&this.set("curNode",null);a.isDescendant(this.prevNode,b)&&this.set("prevNode",null)});l.before(h,"empty",b);l.before(h,"destroy",b)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,b){var c=this,f=a.document&&a.document.body;if(f){var k=e("pointer-events")?"pointerdown":e("MSPointer")?"MSPointerDown":e("touch-events")?"mousedown, touchstart":
"mousedown",g=d(a.document,k,function(a){if(!a||!(a.target&&null==a.target.parentNode))c._onTouchNode(b||a.target,"mouse")}),h=d(f,"focusin",function(a){if(a.target.tagName){var d=a.target.tagName.toLowerCase();"#document"==d||"body"==d||(p.isFocusable(a.target)?c._onFocusNode(b||a.target):c._onTouchNode(b||a.target))}}),l=d(f,"focusout",function(a){c._onBlurNode(b||a.target)});return{remove:function(){g.remove();h.remove();l.remove();f=g=h=l=null}}}},_onBlurNode:function(a){a=(new Date).getTime();
a<x+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(f.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),a<y+100||(this._clearActiveWidgetsTimer=setTimeout(f.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)))},_onTouchNode:function(a,b){y=(new Date).getTime();this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),
delete this._clearActiveWidgetsTimer);q.contains(a,"dijitPopup")&&(a=a.firstChild);var c=[];try{for(;a;){var d=g.get(a,"dijitPopupParent");if(d)a=r.byId(d).domNode;else if(a.tagName&&"body"==a.tagName.toLowerCase()){if(a===k.body())break;a=s.get(a.ownerDocument).frameElement}else{var e=a.getAttribute&&a.getAttribute("widgetId"),f=e&&r.byId(e);f&&!("mouse"==b&&f.get("disabled"))&&c.unshift(e);a=a.parentNode}}}catch(h){}this._setStack(c,b)},_onFocusNode:function(a){a&&9!=a.nodeType&&(x=(new Date).getTime(),
this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,b){var c=this.activeStack,d=c.length-1,e=a.length-1;if(a[e]!=c[d]){this.set("activeStack",a);var f;for(f=d;0<=f&&c[f]!=a[f];f--)if(d=r.byId(c[f]))d._hasBeenBlurred=!0,d.set("focused",!1),d._focusManager==this&&d._onBlur(b),this.emit("widget-blur",d,b);for(f++;f<=e;f++)if(d=r.byId(a[f]))d.set("focused",
!0),d._focusManager==this&&d._onFocus(b),this.emit("widget-focus",d,b)}},focus:function(a){if(a)try{a.focus()}catch(b){}}}));c(function(){var a=u.registerWin(s.get(document));e("ie")&&d(window,"unload",function(){a&&(a.remove(),a=null)})});t.focus=function(a){u.focus(a)};for(var z in u)/^_/.test(z)||(t.focus[z]="function"==typeof u[z]?f.hitch(u,z):u[z]);u.watch(function(a,b,c){t.focus[a]=c});return u})},"dijit/a11y":function(){define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),
function(l,n,a,g,q,h,m){var f={_isElementShown:function(d){var c=g.get(d);return"hidden"!=c.visibility&&"collapsed"!=c.visibility&&"none"!=c.display&&"hidden"!=a.get(d,"type")},hasDefaultTabStop:function(d){switch(d.nodeName.toLowerCase()){case "a":return a.has(d,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var c;try{var e=d.contentDocument;if("designMode"in e&&"on"==e.designMode)return!0;c=e.body}catch(b){try{c=d.contentWindow.document.body}catch(f){return!1}}return c&&
("true"==c.contentEditable||c.firstChild&&"true"==c.firstChild.contentEditable);default:return"true"==d.contentEditable}},effectiveTabIndex:function(d){return a.get(d,"disabled")?void 0:a.has(d,"tabIndex")?+a.get(d,"tabIndex"):f.hasDefaultTabStop(d)?0:void 0},isTabNavigable:function(a){return 0<=f.effectiveTabIndex(a)},isFocusable:function(a){return-1<=f.effectiveTabIndex(a)},_getTabNavigable:function(d){function c(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&
a.name&&a.name.toLowerCase()}var e,b,k,g,l,m,n={},q=f._isElementShown,y=f.effectiveTabIndex,u=function(d){for(d=d.firstChild;d;d=d.nextSibling)if(!(1!=d.nodeType||9>=h("ie")&&"HTML"!==d.scopeName||!q(d))){var f=y(d);if(0<=f){if(0==f)e||(e=d),b=d;else if(0<f){if(!k||f<g)g=f,k=d;if(!l||f>=m)m=f,l=d}f=c(d);a.get(d,"checked")&&f&&(n[f]=d)}"SELECT"!=d.nodeName.toUpperCase()&&u(d)}};q(d)&&u(d);return{first:n[c(e)]||e,last:n[c(b)]||b,lowest:n[c(k)]||k,highest:n[c(l)]||l}},getFirstInTabbingOrder:function(a,
c){var e=f._getTabNavigable(n.byId(a,c));return e.lowest?e.lowest:e.first},getLastInTabbingOrder:function(a,c){var e=f._getTabNavigable(n.byId(a,c));return e.last?e.last:e.highest}};q.mixin(m,f);return f})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(l,n,a,g){a(function(){n("highcontrast")&&l.add(g.body(),"dijit_a11y")});return n})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),
function(l,n,a,g,q,h,m){q.add("highcontrast",function(){var a=m.doc.createElement("div");a.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(n.blankGif||l.toUrl("./resources/blank.gif"))+'");';m.body().appendChild(a);var d=g.getComputedStyle(a),c=d.backgroundImage,d=d.borderTopColor==d.borderRightColor||c&&("none"==c||"url(invalid-url:)"==c);8>=q("ie")?a.outerHTML="":m.body().removeChild(a);return d});h(function(){q("highcontrast")&&
a.add(m.body(),"dj_a11y")});return q})},"dojox/html/entities":function(){define(["dojo/_base/lang"],function(l){var n=l.getObject("dojox.html.entities",!0),a=function(a,g){var l,f;if(g._encCache&&g._encCache.regexp&&g._encCache.mapper&&g.length==g._encCache.length)l=g._encCache.mapper,f=g._encCache.regexp;else{l={};f=["["];var d;for(d=0;d<g.length;d++)l[g[d][0]]="\x26"+g[d][1]+";",f.push(g[d][0]);f.push("]");f=RegExp(f.join(""),"g");g._encCache={mapper:l,regexp:f,length:g.length}}return a=a.replace(f,
function(a){return l[a]})},g=function(a,g){var l,f;if(g._decCache&&g._decCache.regexp&&g._decCache.mapper&&g.length==g._decCache.length)l=g._decCache.mapper,f=g._decCache.regexp;else{l={};f=["("];var d;for(d=0;d<g.length;d++){var c="\x26"+g[d][1]+";";d&&f.push("|");l[c]=g[d][0];f.push(c)}f.push(")");f=RegExp(f.join(""),"g");g._decCache={mapper:l,regexp:f,length:g.length}}return a=a.replace(f,function(a){return l[a]})};n.html=[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"],["\u00a0","nbsp"]];
n.latin=[["\u00a1","iexcl"],["\u00a2","cent"],["\u00a3","pound"],["\u20ac","euro"],["\u00a4","curren"],["\u00a5","yen"],["\u00a6","brvbar"],["\u00a7","sect"],["\u00a8","uml"],["\u00a9","copy"],["\u00aa","ordf"],["\u00ab","laquo"],["\u00ac","not"],["\u00ad","shy"],["\u00ae","reg"],["\u00af","macr"],["\u00b0","deg"],["\u00b1","plusmn"],["\u00b2","sup2"],["\u00b3","sup3"],["\u00b4","acute"],["\u00b5","micro"],["\u00b6","para"],["\u00b7","middot"],["\u00b8","cedil"],["\u00b9","sup1"],["\u00ba","ordm"],
["\u00bb","raquo"],["\u00bc","frac14"],["\u00bd","frac12"],["\u00be","frac34"],["\u00bf","iquest"],["\u00c0","Agrave"],["\u00c1","Aacute"],["\u00c2","Acirc"],["\u00c3","Atilde"],["\u00c4","Auml"],["\u00c5","Aring"],["\u00c6","AElig"],["\u00c7","Ccedil"],["\u00c8","Egrave"],["\u00c9","Eacute"],["\u00ca","Ecirc"],["\u00cb","Euml"],["\u00cc","Igrave"],["\u00cd","Iacute"],["\u00ce","Icirc"],["\u00cf","Iuml"],["\u00d0","ETH"],["\u00d1","Ntilde"],["\u00d2","Ograve"],["\u00d3","Oacute"],["\u00d4","Ocirc"],
["\u00d5","Otilde"],["\u00d6","Ouml"],["\u00d7","times"],["\u00d8","Oslash"],["\u00d9","Ugrave"],["\u00da","Uacute"],["\u00db","Ucirc"],["\u00dc","Uuml"],["\u00dd","Yacute"],["\u00de","THORN"],["\u00df","szlig"],["\u00e0","agrave"],["\u00e1","aacute"],["\u00e2","acirc"],["\u00e3","atilde"],["\u00e4","auml"],["\u00e5","aring"],["\u00e6","aelig"],["\u00e7","ccedil"],["\u00e8","egrave"],["\u00e9","eacute"],["\u00ea","ecirc"],["\u00eb","euml"],["\u00ec","igrave"],["\u00ed","iacute"],["\u00ee","icirc"],
["\u00ef","iuml"],["\u00f0","eth"],["\u00f1","ntilde"],["\u00f2","ograve"],["\u00f3","oacute"],["\u00f4","ocirc"],["\u00f5","otilde"],["\u00f6","ouml"],["\u00f7","divide"],["\u00f8","oslash"],["\u00f9","ugrave"],["\u00fa","uacute"],["\u00fb","ucirc"],["\u00fc","uuml"],["\u00fd","yacute"],["\u00fe","thorn"],["\u00ff","yuml"],["\u0192","fnof"],["\u0391","Alpha"],["\u0392","Beta"],["\u0393","Gamma"],["\u0394","Delta"],["\u0395","Epsilon"],["\u0396","Zeta"],["\u0397","Eta"],["\u0398","Theta"],["\u0399",
"Iota"],["\u039a","Kappa"],["\u039b","Lambda"],["\u039c","Mu"],["\u039d","Nu"],["\u039e","Xi"],["\u039f","Omicron"],["\u03a0","Pi"],["\u03a1","Rho"],["\u03a3","Sigma"],["\u03a4","Tau"],["\u03a5","Upsilon"],["\u03a6","Phi"],["\u03a7","Chi"],["\u03a8","Psi"],["\u03a9","Omega"],["\u03b1","alpha"],["\u03b2","beta"],["\u03b3","gamma"],["\u03b4","delta"],["\u03b5","epsilon"],["\u03b6","zeta"],["\u03b7","eta"],["\u03b8","theta"],["\u03b9","iota"],["\u03ba","kappa"],["\u03bb","lambda"],["\u03bc","mu"],["\u03bd",
"nu"],["\u03be","xi"],["\u03bf","omicron"],["\u03c0","pi"],["\u03c1","rho"],["\u03c2","sigmaf"],["\u03c3","sigma"],["\u03c4","tau"],["\u03c5","upsilon"],["\u03c6","phi"],["\u03c7","chi"],["\u03c8","psi"],["\u03c9","omega"],["\u03d1","thetasym"],["\u03d2","upsih"],["\u03d6","piv"],["\u2022","bull"],["\u2026","hellip"],["\u2032","prime"],["\u2033","Prime"],["\u203e","oline"],["\u2044","frasl"],["\u2118","weierp"],["\u2111","image"],["\u211c","real"],["\u2122","trade"],["\u2135","alefsym"],["\u2190",
"larr"],["\u2191","uarr"],["\u2192","rarr"],["\u2193","darr"],["\u2194","harr"],["\u21b5","crarr"],["\u21d0","lArr"],["\u21d1","uArr"],["\u21d2","rArr"],["\u21d3","dArr"],["\u21d4","hArr"],["\u2200","forall"],["\u2202","part"],["\u2203","exist"],["\u2205","empty"],["\u2207","nabla"],["\u2208","isin"],["\u2209","notin"],["\u220b","ni"],["\u220f","prod"],["\u2211","sum"],["\u2212","minus"],["\u2217","lowast"],["\u221a","radic"],["\u221d","prop"],["\u221e","infin"],["\u2220","ang"],["\u2227","and"],
["\u2228","or"],["\u2229","cap"],["\u222a","cup"],["\u222b","int"],["\u2234","there4"],["\u223c","sim"],["\u2245","cong"],["\u2248","asymp"],["\u2260","ne"],["\u2261","equiv"],["\u2264","le"],["\u2265","ge"],["\u2282","sub"],["\u2283","sup"],["\u2284","nsub"],["\u2286","sube"],["\u2287","supe"],["\u2295","oplus"],["\u2297","otimes"],["\u22a5","perp"],["\u22c5","sdot"],["\u2308","lceil"],["\u2309","rceil"],["\u230a","lfloor"],["\u230b","rfloor"],["\u2329","lang"],["\u232a","rang"],["\u25ca","loz"],
["\u2660","spades"],["\u2663","clubs"],["\u2665","hearts"],["\u2666","diams"],["\u0152","OElig"],["\u0153","oelig"],["\u0160","Scaron"],["\u0161","scaron"],["\u0178","Yuml"],["\u02c6","circ"],["\u02dc","tilde"],["\u2002","ensp"],["\u2003","emsp"],["\u2009","thinsp"],["\u200c","zwnj"],["\u200d","zwj"],["\u200e","lrm"],["\u200f","rlm"],["\u2013","ndash"],["\u2014","mdash"],["\u2018","lsquo"],["\u2019","rsquo"],["\u201a","sbquo"],["\u201c","ldquo"],["\u201d","rdquo"],["\u201e","bdquo"],["\u2020","dagger"],
["\u2021","Dagger"],["\u2030","permil"],["\u2039","lsaquo"],["\u203a","rsaquo"]];n.encode=function(g,h){g&&(h?g=a(g,h):(g=a(g,n.html),g=a(g,n.latin)));return g};n.decode=function(a,h){a&&(h?a=g(a,h):(a=g(a,n.html),a=g(a,n.latin)));return a};return n})},"esri/numberUtils":function(){define(["dojo/has","dojo/number","dojo/i18n!dojo/cldr/nls/number","./kernel"],function(l,n,a,g){var q=function(a,f){return a-f},h={_reNumber:/^-?(\d+)(\.(\d+))?$/i,getDigits:function(a){var f=String(a),d=f.match(h._reNumber);
a={integer:0,fractional:0};d&&d[1]?(a.integer=d[1].split("").length,a.fractional=d[3]?d[3].split("").length:0):-1<f.toLowerCase().indexOf("e")&&(d=f.split("e"),f=d[0],d=d[1],f&&d&&(f=Number(f),d=Number(d),(a=0<d)||(d=Math.abs(d)),f=h.getDigits(f),a?(f.integer+=d,f.fractional=d>f.fractional?0:f.fractional-d):(f.fractional+=d,f.integer=d>f.integer?1:f.integer-d),a=f));return a},getFixedNumbers:function(a,f){var d,c;d=Number(a.toFixed(f));c=d<a?d+1/Math.pow(10,f):d-1/Math.pow(10,f);return[d,c]},getPctChange:function(a,
f,d,c){var e={prev:null,next:null},b;null!=d&&(b=a-d,d=f-d-b,e.prev=Math.floor(Math.abs(100*d/b)));null!=c&&(b=c-a,d=c-f-b,e.next=Math.floor(Math.abs(100*d/b)));return e},round:function(a,f){var d=a.slice(0),c,e,b,k,g,l,n,t,x,y=!f||null==f.tolerance?2:f.tolerance,u=f&&f.indexes;if(u)u.sort(q);else{u=[];for(l=0;l<d.length;l++)u.push(l)}for(l=0;l<u.length;l++)if(x=u[l],c=d[x],e=0===x?null:d[x-1],b=x===d.length-1?null:d[x+1],k=h.getDigits(c),k=k.fractional){n=0;for(t=!1;n<=k&&!t;)g=h.getFixedNumbers(c,
n),g=g[0],t=h.hasMinimalChange(c,g,e,b,y),n++;t&&(d[x]=g)}return d},hasMinimalChange:function(a,f,d,c,e){a=h.getPctChange(a,f,d,c);f=null==a.prev||a.prev<=e;d=null==a.next||a.next<=e;return f&&d||a.prev+a.next<=2*e},_reAllZeros:RegExp("\\"+a.decimal+"0+$","g"),_reSomeZeros:RegExp("(\\d)0*$","g"),format:function(a,f){f=f||{places:20,round:-1};var d=n.format(a,f);d&&(d=d.replace(h._reSomeZeros,"$1").replace(h._reAllZeros,""));return d}};return h})},"esri/renderers/SimpleRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer".split(" "),
function(l,n,a,g,q,h,m){return l(m,{declaredClass:"esri.renderer.SimpleRenderer",constructor:function(a){if(a&&!a.declaredClass){var d=a;this.symbol=(a=d.symbol)&&(a.declaredClass?a:h.fromJson(a));this.label=d.label;this.description=d.description}else this.symbol=a},getSymbol:function(a){return this.symbol},toJson:function(){var a=n.mixin(this.inherited(arguments),{type:"simple",label:this.label,description:this.description,symbol:this.symbol&&this.symbol.toJson()});return q.fixJson(a)}})})},"esri/renderers/Renderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojox/gfx/_base ../kernel ../Color".split(" "),
function(l,n,a,g,q,h,m){var f=Math.PI;return l(null,{declaredClass:"esri.renderer.Renderer",constructor:function(a){this._ipDataCache={};if(a&&!a.declaredClass){this.rotationInfo=a.rotationInfo;if(!this.rotationInfo){var c=a.rotationType,e=a.rotationExpression;if(c||e)this.rotationInfo={type:c,expression:e}}this.setRotationInfo(this.rotationInfo);this.setSizeInfo(this._readSizeInfo(a.sizeInfo));this.setColorInfo(this._readColorInfo(a.colorInfo));this.setOpacityInfo(this._readOpacityInfo(a.transparencyInfo));
this.setVisualVariables(this._readVariables(a.visualVariables));this.setAuthoringInfo(a.authoringInfo)}this.getSymbol=n.hitch(this,this.getSymbol)},getSymbol:function(a){},_readSizeInfo:function(a){if(a){var c=a.minSize,e=a.maxSize;c&&"number"===typeof c&&(a.minSize=q.pt2px(c));e&&"number"===typeof e&&(a.maxSize=q.pt2px(e))}return a},_readColorInfo:function(d){d&&(a.forEach(d.colors,function(a,e){n.isArray(a)&&(d.colors[e]=m.toDojoColor(a))}),a.forEach(d.stops,function(a,e){a.color&&n.isArray(a.color)&&
(d.stops[e].color=m.toDojoColor(a.color))}));return d},_readOpacityInfo:function(d){var c;d&&(c=n.mixin({},d),c.transparencyValues&&(c.opacityValues=a.map(c.transparencyValues,function(a){return 1-a/100}),delete c.transparencyValues),c.stops&&(c.stops=a.map(c.stops,function(a){a=n.mixin({},a);a.opacity=1-a.transparency/100;delete a.transparency;return a})));return c},_readVariables:function(d){d&&(d=a.map(d,function(a){"sizeInfo"===a.type?a=this._readSizeInfo(a):"colorInfo"===a.type?a=this._readColorInfo(a):
"transparencyInfo"===a.type&&(a=this._readOpacityInfo(a),a.type="opacityInfo");return a},this));return d},setAuthoringInfo:function(a){this.authoringInfo=a},setRotationInfo:function(a){if((a=this.rotationInfo="string"===typeof a?{field:a}:a)&&a.expression&&!n.isFunction(a.expression)&&!a.field){var c=a.expression.match(this.rotationRE);c&&c[1]&&(a.field=c[1])}return this},rotationRE:/^\[([^\]]+)\]$/i,getRotationAngle:function(a){var c=this.rotationInfo,e="arithmetic"===c.type,c=c.field,b=a.attributes,
f=0;c&&(n.isFunction(c)?f=c.apply(this,arguments):b&&(f=b[c]||0),f=(f+(e?-90:0))*(e?-1:1));return f},setVisualVariables:function(d){var c=this._ipDataCache;a.forEach(this.visualVariables,function(a,b){c.hasOwnProperty(b)&&(c[b]=null)},this);this.visualVariables=d;a.some(d,function(a){return!!a.target})&&d.sort(function(a,b){return a.target===b.target?0:a.target?1:-1});a.forEach(d,function(a,b){"colorInfo"===a.type?c[b]=this._processColorInfo(a):"opacityInfo"===a.type?c[b]=this._processOpacityInfo(a):
"sizeInfo"===a.type&&(c[b]=this._processSizeInfo(a))},this);return this},getVisualVariableValues:function(d){var c=this.visualVariables,e;c&&(e=a.map(c,function(a){var c;switch(a.type){case "sizeInfo":c=this.getSize(d,{sizeInfo:a});break;case "colorInfo":c=this.getColor(d,{colorInfo:a});break;case "opacityInfo":c=this.getOpacity(d,{opacityInfo:a})}return{variable:a,value:c}},this));return e},hasVisualVariables:function(a){return!(!this.getVisualVariablesForType("sizeInfo",a)&&!this.getVisualVariablesForType("colorInfo",
a)&&!this.getVisualVariablesForType("opacityInfo",a))},getVisualVariablesForType:function(d,c){var e=this.visualVariables,b;!c&&this[d]?b=[this[d]]:e&&(b=a.filter(e,function(a){return a.type===d&&("string"===typeof c?a.target===c:!1===c?!a.target:!0)}))&&0===b.length&&(b=void 0);return b},setSizeInfo:function(a){this.sizeInfo=this.proportionalSymbolInfo=a;this._ipDataCache.sizeInfo=this._processSizeInfo(a);return this},_processSizeInfo:function(a){return a&&{root:this._interpolateData(a),minSize:this._interpolateData(a.minSize),
maxSize:this._interpolateData(a.maxSize)}},_getVarInfo:function(d,c){var e;d&&d.type===c?(e=a.indexOf(this.visualVariables,d),d=this.visualVariables[e]):(e=c,d=this[c]);return{variable:d,cacheKey:e}},setProportionalSymbolInfo:function(a){this.setSizeInfo(a);return this},getSize:function(a,c){var e=this._getVarInfo(c&&c.sizeInfo,"sizeInfo"),b=e.variable,e=this._ipDataCache[e.cacheKey],f=null;if(b)var g=b.minSize,f=b.maxSize,g="object"===typeof g&&g?this._getSize(a,g,e&&e.minSize,c):g,f="object"===
typeof f&&f?this._getSize(a,f,e&&e.maxSize,c):f,f=this._getSize(a,b,e&&e.root,c,[g,f]);return f},_getSize:function(a,c,e,b,k){var g=a.attributes,h=c.field,l=c.expression,m=c.stops,q=0,y="number"===typeof a,u=y?a:null;if(h||l){var z=b&&b.scale,v=k?k[0]:c.minSize,w=k?k[1]:c.maxSize,A=c.minDataValue,B=c.maxDataValue,D=c.valueUnit||"unknown",E=c.valueRepresentation,C=c.scaleBy,F=c.normalizationField,K=g?parseFloat(g[F]):void 0,I=b&&b.shape;l?u="view.scale"===l.toLowerCase()?z:null:"number"!==typeof u&&
(n.isFunction(h)?u=h.apply(this,arguments):g&&(u=g[h]));if(null==u||F&&!y&&(isNaN(K)||0===K))return null;!isNaN(K)&&!y&&(u/=K);if(m)w=this._lookupData(u,e),u=w[0],v=w[1],u===v?q=m[u].size:(u=m[u].size,m=m[v].size,q=u+(m-u)*w[2]);else if(null!=v&&null!=w&&null!=A&&null!=B)u<=A?q=v:u>=B?q=w:(m=(u-A)/(B-A),"area"===C&&I?(v=(u="circle"===I)?f*Math.pow(v/2,2):v*v,w=u?f*Math.pow(w/2,2):w*w,m=v+m*(w-v),q=u?2*Math.sqrt(m/f):Math.sqrt(m)):q=v+m*(w-v));else if("unknown"===D)null!=v&&null!=A&&(v&&A?(m=u/A,q=
"circle"===I?2*Math.sqrt(m*Math.pow(v/2,2)):"square"===I||"diamond"===I||"image"===I?Math.sqrt(m*Math.pow(v,2)):m*v):q=u+(v||A),q=q<v?v:q,null!=w&&q>w&&(q=w));else{m=(b&&b.resolution?b.resolution:1)*this._meterIn[D];if("area"===E)q=Math.sqrt(u/f)/m,q*=2;else if(q=u/m,"radius"===E||"distance"===E)q*=2;null!=v&&q<v&&(q=v);null!=w&&q>w&&(q=w)}}else q=m&&m[0]&&m[0].size,null==q&&(q=c.minSize);return isNaN(q)?0:q},getSizeRangeAtScale:function(a,c){var e,b=this._getVarInfo(a,"sizeInfo"),f=this._ipDataCache[b.cacheKey],
g={scale:c};if((a=b.variable)&&c){var h=a.minSize,b=a.maxSize,h="object"===typeof h&&h?this._getSize({},h,f&&f.minSize,g):h,f="object"===typeof b&&b?this._getSize({},b,f&&f.maxSize,g):b;if(null!=h||null!=f)e={minSize:h,maxSize:f}}return e},setColorInfo:function(a){this.colorInfo=a;this._ipDataCache.colorInfo=this._processColorInfo(a);return this},_processColorInfo:function(d){d&&(a.forEach(d.colors,function(a,e){n.isArray(a)&&(d.colors[e]=new m(a))}),a.forEach(d.stops,function(a,e){a.color&&n.isArray(a.color)&&
(d.stops[e].color=new m(a.color))}));return this._interpolateData(d)},getColor:function(a,c){var e=this._getVarInfo(c&&c.colorInfo,"colorInfo");return this._getColorComponent(a,e.variable,this._ipDataCache[e.cacheKey])},setOpacityInfo:function(a){this.opacityInfo=a;this._ipDataCache.opacityInfo=this._processOpacityInfo(a);return this},_processOpacityInfo:function(a){return this._interpolateData(a)},getOpacity:function(a,c){var e=this._getVarInfo(c&&c.opacityInfo,"opacityInfo");return this._getColorComponent(a,
e.variable,this._ipDataCache[e.cacheKey],!0)},_getColorComponent:function(a,c,e,b,f){var g=a.attributes,h=c&&c.field,l="number"===typeof a,m=l?a:null,q;if(h){var y=c.normalizationField,u=g?parseFloat(g[y]):void 0;"number"!==typeof m&&(n.isFunction(h)?m=h.apply(this,arguments):g&&(m=g[h]));if(null!=m&&(!y||l||!isNaN(u)&&0!==u))!isNaN(u)&&!l&&(m/=u),q=b?this._getOpacity(m,c,e):this._getColor(m,c,e)}else c&&(g=c.stops,b?(q=g&&g[0]&&g[0].opacity,null==q&&(q=c.opacityValues&&c.opacityValues[0])):q=g&&
g[0]&&g[0].color||c.colors&&c.colors[0]);f&&(f.data=m,f.value=q);return f||q},_interpolateData:function(d){var c;if(d)if(d.colors||d.opacityValues){var e=(d.colors||d.opacityValues).length,b=d.minDataValue,f=(d.maxDataValue-b)/(e-1);c=[];for(d=0;d<e;d++)c[d]=b+d*f}else d.stops&&(c=a.map(d.stops,function(a){return a.value}));return c},_getOpacity:function(a,c,e){a=this._lookupData(a,e);var b;c=c||this.opacityInfo;a&&(e=a[0],b=a[1],e===b?b=this._getOpacValue(c,e):(e=this._getOpacValue(c,e),c=this._getOpacValue(c,
b),b=e+(c-e)*a[2]));return b},_getOpacValue:function(a,c){return a.opacityValues?a.opacityValues[c]:a.stops[c].opacity},_getColor:function(a,c,e){a=this._lookupData(a,e);var b;c=c||this.colorInfo;a&&(b=a[0],e=a[1],b=b===e?this._getColorObj(c,b):m.blendColors(this._getColorObj(c,b),this._getColorObj(c,e),a[2]));return b},_getColorObj:function(a,c){return a.colors?a.colors[c]:a.stops[c].color},_lookupData:function(d,c){var e;if(c){var b=0,f=c.length-1;a.some(c,function(a,c){if(d<a)return f=c,!0;b=c;
return!1});e=[b,f,(d-c[b])/(c[f]-c[b])]}return e},_meterIn:{inches:39.3701,feet:3.28084,yards:1.09361,miles:6.21371E-4,"nautical-miles":5.39957E-4,millimeters:1E3,centimeters:100,decimeters:10,meters:1,kilometers:0.0010,"decimal-degrees":180/20015077},_writeSizeInfo:function(a){if(a){a=n.mixin({},a);var c=a.minSize,e=a.maxSize;c&&(a.minSize="number"===typeof c?q.px2pt(c):n.clone(c));e&&(a.maxSize="number"===typeof e?q.px2pt(e):n.clone(e));if(c=a.legendOptions)if(a.legendOptions=n.mixin({},c),c=c.customValues)a.legendOptions.customValues=
c.slice(0)}return a},_writeColorInfo:function(d){d&&(d=n.mixin({},d),d.colors&&(d.colors=a.map(d.colors,function(a){return m.toJsonColor(a)})),d.stops&&(d.stops=a.map(d.stops,function(a){a=n.mixin({},a);a.color&&(a.color=m.toJsonColor(a.color));return a})));return d},_writeOpacityInfo:function(d){var c;d&&(c=n.mixin({},d),c.opacityValues&&(c.transparencyValues=a.map(c.opacityValues,function(a){return 100*(1-a)}),delete c.opacityValues),c.stops&&(c.stops=a.map(c.stops,function(a){a=n.mixin({},a);a.transparency=
100*(1-a.opacity);delete a.opacity;return a})));return c},toJson:function(){var d=this.visualVariables,c=this.rotationInfo,e=c&&c.field,b=n.clone(this.authoringInfo),e=c&&(c.expression||e&&(n.isFunction(e)?e:"["+e+"]"));d&&(d=a.map(d,function(a){"sizeInfo"===a.type?a=this._writeSizeInfo(a):"colorInfo"===a.type?a=this._writeColorInfo(a):"opacityInfo"===a.type&&(a=this._writeOpacityInfo(a),a.type="transparencyInfo");return a},this));b&&a.forEach(b.visualVariables,function(a){"opacityInfo"===a.type&&
(a.type="transparencyInfo")});return{rotationType:e&&(c.type||"geographic"),rotationExpression:e,colorInfo:this._writeColorInfo(this.colorInfo),transparencyInfo:this._writeOpacityInfo(this.opacityInfo),sizeInfo:this._writeSizeInfo(this.sizeInfo),visualVariables:d,authoringInfo:b}}})})},"esri/renderers/UniqueValueRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer".split(" "),function(l,n,a,g,q,h,m,f){return l(f,
{declaredClass:"esri.renderer.UniqueValueRenderer",constructor:function(a,c,e,b,f){this.values=[];this._symbols={};this.infos=[];a&&!a.declaredClass?(c=a,this.defaultSymbol=(a=c.defaultSymbol)&&(a.declaredClass?a:m.fromJson(a)),this.attributeField=c.field1,this.attributeField2=c.field2,this.attributeField3=c.field3,this.fieldDelimiter=c.fieldDelimiter,this.defaultLabel=c.defaultLabel,n.forEach(c.uniqueValueInfos,this._addValueInfo,this)):(this.defaultSymbol=a,this.attributeField=c,this.attributeField2=
e,this.attributeField3=b,this.fieldDelimiter=f);this._multiple=!!this.attributeField2},addValue:function(d,c){var e=a.isObject(d)?d:{value:d,symbol:c};this._addValueInfo(e)},removeValue:function(a){var c=n.indexOf(this.values,a);-1!==c&&(this.values.splice(c,1),delete this._symbols[a],this.infos.splice(c,1))},getUniqueValueInfo:function(d){var c=this.attributeField,e=d.attributes,b,f;this._multiple?(d=this.attributeField2,b=this.attributeField3,f=[],c&&f.push(e[c]),d&&f.push(e[d]),b&&f.push(e[b]),
c=f.join(this.fieldDelimiter||"")):c=a.isFunction(c)?c(d):e[c];return this._symbols[c]},getSymbol:function(a){return(a=this.getUniqueValueInfo(a))&&a.symbol||this.defaultSymbol},_addValueInfo:function(a){var c=a.value;this.values.push(c);this.infos.push(a);var e=a.symbol;e&&!e.declaredClass&&(a.symbol=m.fromJson(e));this._symbols[c]=a},toJson:function(){var d=h.fixJson,c=a.mixin(this.inherited(arguments),{type:"uniqueValue",field1:this.attributeField,field2:this.attributeField2,field3:this.attributeField3,
fieldDelimiter:this.fieldDelimiter,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),defaultLabel:this.defaultLabel,uniqueValueInfos:n.map(this.infos||[],function(c){c=a.mixin({},c);c.symbol=c.symbol&&c.symbol.toJson();c.value+="";return d(c)})});return d(c)}})})},"esri/renderers/ClassBreaksRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer".split(" "),function(l,n,a,g,q,h,m,f){return l(f,{declaredClass:"esri.renderer.ClassBreaksRenderer",
constructor:function(a,c){this.breaks=[];this._symbols={};this.infos=[];this.isMaxInclusive=!0;if(a&&!a.declaredClass){var e=a;this.attributeField=e.field;this.defaultSymbol=(a=e.defaultSymbol)&&(a.declaredClass?a:m.fromJson(a));this.backgroundFillSymbol=(a=e.backgroundFillSymbol)&&(a.declaredClass?a:m.fromJson(a));this._copy(["defaultLabel","classificationMethod:rest","normalizationType:rest","normalizationField","normalizationTotal"],e,this);var b=e.minValue;(e=e.classBreakInfos)&&e[0]&&h.isDefined(e[0].classMaxValue)&&
n.forEach(e,function(a){var c=a.classMaxValue;a.minValue=b;b=a.maxValue=c},this);n.forEach(e,this._addBreakInfo,this)}else this.defaultSymbol=a,this.attributeField=c},addBreak:function(d,c,e){d=a.isObject(d)?d:{minValue:d,maxValue:c,symbol:e};this._addBreakInfo(d)},removeBreak:function(a,c){var e,b=this.breaks,f,g=b.length,h=this._symbols;for(f=0;f<g;f++)if(e=b[f],e[0]==a&&e[1]==c){b.splice(f,1);delete h[a+"-"+c];this.infos.splice(f,1);break}},clearBreaks:function(){this.breaks=[];this._symbols={};
this.infos=[]},getBreakIndex:function(d){var c=this.attributeField,e=d.attributes,b=this.breaks,f=b.length,g=this.isMaxInclusive;if(a.isFunction(c))d=c(d);else{d=parseFloat(e[c]);var c=this.normalizationType,h;c&&(h=parseFloat(this.normalizationTotal),e=parseFloat(e[this.normalizationField]),"log"===c?d=Math.log(d)*Math.LOG10E:"percent-of-total"===c&&!isNaN(h)?d=100*(d/h):"field"===c&&!isNaN(e)&&(d/=e))}for(e=0;e<f;e++)if(c=b[e],c[0]<=d&&(g?d<=c[1]:d<c[1]))return e;return-1},getBreakInfo:function(a){a=
this.getBreakIndex(a);return-1!==a?this.infos[a]:null},getSymbol:function(a){return(a=this.breaks[this.getBreakIndex(a)])?this._symbols[a[0]+"-"+a[1]]:this.defaultSymbol},setMaxInclusive:function(a){this.isMaxInclusive=a},_normalizationTypeEnums:[["field","esriNormalizeByField"],["log","esriNormalizeByLog"],["percent-of-total","esriNormalizeByPercentOfTotal"]],_classificationMethodEnums:[["natural-breaks","esriClassifyNaturalBreaks"],["equal-interval","esriClassifyEqualInterval"],["quantile","esriClassifyQuantile"],
["standard-deviation","esriClassifyStandardDeviation"],["geometrical-interval","esriClassifyGeometricalInterval"]],_copy:function(a,c,e){n.forEach(a,function(a){var d=a.split(":"),f,g,h;1<d.length&&(a=d[0],f=this["_"+a+"Enums"],"rest"===d[1]?(g="1",h="0"):"sdk"===d[1]&&(g="0",h="1"));d=c[a];if(void 0!==d&&(e[a]=d,f&&g)){var l,m=f.length;for(l=0;l<m;l++)if(f[l][g]===d){e[a]=f[l][h];break}}},this)},_addBreakInfo:function(a){var c=a.minValue,e=a.maxValue;this.breaks.push([c,e]);this.infos.push(a);var b=
a.symbol;b&&!b.declaredClass&&(a.symbol=m.fromJson(b));this._symbols[c+"-"+e]=a.symbol},toJson:function(){var d=this.infos||[],c=h.fixJson,e=d[0]&&d[0].minValue,b=this.backgroundFillSymbol,d=a.mixin(this.inherited(arguments),{type:"classBreaks",field:this.attributeField,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),backgroundFillSymbol:b&&b.toJson(),minValue:-Infinity===e?-Number.MAX_VALUE:e,classBreakInfos:n.map(d,function(b){b=a.mixin({},b);b.symbol=b.symbol&&b.symbol.toJson();b.classMaxValue=
Infinity===b.maxValue?Number.MAX_VALUE:b.maxValue;delete b.minValue;delete b.maxValue;return c(b)})});this._copy(["defaultLabel","classificationMethod:sdk","normalizationType:sdk","normalizationField","normalizationTotal"],this,d);d.hasOwnProperty("normalizationType")&&!d.normalizationType&&delete d.normalizationType;d.hasOwnProperty("classificationMethod")&&!d.classificationMethod&&delete d.classificationMethod;return c(d)}})})},"esri/renderers/ScaleDependentRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ./Renderer".split(" "),
function(l,n,a,g,q,h,m){return l(m,{declaredClass:"esri.renderer.ScaleDependentRenderer",constructor:function(a){this.setRendererInfos(a&&a.rendererInfos||[])},setRendererInfos:function(a){this.rendererInfos=a;this._setRangeType();return this},getSymbol:function(a){var d=this.getRendererInfo(a);return d&&d.renderer&&d.renderer.getSymbol(a)},getRendererInfo:function(a){a=a.getLayer().getMap();return"zoom"===this.rangeType?this.getRendererInfoByZoom(a.getZoom()):this.getRendererInfoByScale(a.getScale())},
getRendererInfoByZoom:function(a){var d,c=this.rendererInfos,e,b=0;do d=c[b],a>=d.minZoom&&a<=d.maxZoom&&(e=d),b++;while(!e&&b<c.length);return e},getRendererInfoByScale:function(a){var d,c=this.rendererInfos,e,b=0,g,h,l,m;do d=c[b],g=d.minScale,h=d.maxScale,l=!g,m=!h,!l&&a<=g&&(l=!0),!m&&a>=h&&(m=!0),l&&m&&(e=d),b++;while(!e&&b<c.length);return e},addRendererInfo:function(a){var d,c=0,e,b=this.rendererInfos,g=a.hasOwnProperty("minZoom")?"minZoom":"minScale",h=b.length;do{e=b[c];if(h===c||a[g]<e[g])b.splice(c,
0,a),this._setRangeType(),d=!0;c++}while(!d&&c<h);return this},_setRangeType:function(){var a=this.rendererInfos;if(a=a&&a[0])this.rangeType=a.hasOwnProperty("minZoom")?"zoom":a.hasOwnProperty("minScale")?"scale":""},toJson:function(){if("zoom"===this.rangeType)return null;var f=this.rendererInfos||[],d=f[0]&&f[0].minScale,f=a.mixin(this.inherited(arguments),{type:"scaleDependent",minScale:0<d?d:0,rendererInfos:n.map(f,function(a){return h.fixJson({maxScale:0<a.maxScale?a.maxScale:0,renderer:a.renderer&&
a.renderer.toJson()})})});return h.fixJson(f)}})})},"esri/renderers/DotDensityRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Renderer ../symbols/PictureFillSymbol ../geometry/ScreenPoint ../geometry/Point".split(" "),function(l,n,a,g,q,h,m,f,d,c,e,b,k){return l(c,{declaredClass:"esri.renderer.DotDensityRenderer",constructor:function(a){this.dotSize=a.dotSize||3;this.dotValue=a.dotValue;this.fields=
a.fields;this.outline=a.outline;this.backgroundColor=a.backgroundColor;this.exactCount=a.exactCount||!0;this.dotShape=a.dotShape||"square";this.legendOptions=a.legendOptions;this._exactCountMinArea=1E4;this._currentMapScale=this._map=this._canvas=null;this._symbolMap={};this._currentGraphic=this._currentResolution=this._objectIdField=null;this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1},getSymbol:function(a){var b,c;this._currentGraphic=a;if(!this._supportsCanvas)return null;this._map||
(this._map=a.getLayer()._map,this._objectIdField=a.getLayer().objectIdField,this._currentMapScale=this._map.getScale(),this._currentResolution=this._map.extent.getWidth()/this._map.width,this._map.on("zoom-end",n.hitch(this,function(a){this._currentMapScale=this._map.getScale();this._currentResolution=a.extent.getWidth()/this._map.width;this._symbolMap[this._currentMapScale]={}})));if(this._symbolMap[this._currentMapScale]&&this._symbolMap[this._currentMapScale][a.attributes[this._objectIdField]])return b=
this._symbolMap[this._currentMapScale][a.attributes[this._objectIdField]],c=this._getShapeProperties(a),b.setOffset(c.dx,c.dy),b;b=this._generateFieldsCount(this.fields,a.attributes,this.dotValue);c=this._getShapeProperties(a);b=new e(this._generateImageSrc(c.width,c.height,b,c.minXY,c.maxXY),this.outline,c.width,c.height);b.setOffset(c.dx,c.dy);this._symbolMap[this._currentMapScale]||(this._symbolMap[this._currentMapScale]={});return this._symbolMap[this._currentMapScale][a.attributes[this._objectIdField]]=
b},_generateFieldsCount:function(a,b,c){var d,e;for(e=a.length-1;0<=e;e--)d=b[a[e].name]/c,a[e].numPoints=Math.round(d);return a},_getShapeProperties:function(a){var b,c,d,e;b=a.geometry.getExtent();b.contains(this._map.extent)&&(b=this._map.extent);d=Math.ceil(b.getWidth()/this._currentResolution);e=Math.ceil(b.getHeight()/this._currentResolution);c=this._map.toScreen(new k(b.xmin,b.ymin,b.spatialReference));b=this._map.toScreen(new k(b.xmax,b.ymax,b.spatialReference));a=a.getLayer().getNode().getCTM();
return{minXY:c,maxXY:b,dx:(c.x-a.e)%d,dy:(b.y-a.f)%e,width:d,height:e}},_generateImageSrc:function(a,b,c,d,e,f){var g=this.dotSize,k,h,l;this._canvas?(this._canvas.width=a,this._canvas.height=b):this._canvas=this._initCanvas(a,b);k=this._canvas.getContext("2d");if(f=f||this.backgroundColor)k.fillStyle=f.toCss(!0),k.fillRect(0,0,a,b),k.fill();for(f=c.length-1;0<=f;f--){k.fillStyle=c[f].color.toCss(!0);for(h=c[f].numPoints-1;0<=h;h--)l=this._getRandomPoint(a,b,d,e),"square"===this.dotShape?k.fillRect(l.x,
l.y,g,g):"circle"===this.dotShape&&(k.beginPath(),k.arc(l.x,l.y,g/2,0,2*Math.PI,!0)),k.fill()}return this._canvas.toDataURL()},_initCanvas:function(a,b){var c=g.create("canvas",{id:"canvas",width:a+"px",height:b+"px",style:"position: absolute; left: -10000px; top: 0px;"},null);document.body.appendChild(c);return c},_getRandomInt:function(a,b){return Math.floor(Math.random()*(b-a+1)+a)},_getRandomPoint:function(a,c,d,e){var f={},g=this.outline&&this.outline.width?this.outline.width:0;if(!0===this.exactCount&&
a*c>this._exactCountMinArea){do f.x=this._getRandomInt(d.x,e.x),f.y=this._getRandomInt(e.y,d.y),a=new b(f.x,f.y),a=this._checkPointShapeBounds(a,this.dotSize+g,this._currentGraphic.geometry),!0===a&&(f.x-=d.x,f.y-=e.y);while(!1===a)}else f.x=this._getRandomInt(0,a),f.y=this._getRandomInt(0,c);return f},_checkPointShapeBounds:function(a,b,c){var d=null,e=!0,f=0;do{switch(f){case 1:a.x+=b;break;case 2:a.y+=b;break;case 3:a.x-=b}d=this._map.toMap(a);d=c.contains(d);!1===d&&(e=!1);f+=1}while(3>=f&&!0===
e);return d},setDotSize:function(a){0<a&&(this.dotSize=a)},setDotValue:function(a){0<a&&(this.dotValue=a)},setOutline:function(a){this.outline=a},setBackgroundColor:function(a){this.backgroundColor=a},toJson:function(){var b=n.mixin(this.inherited(arguments),{type:"dotDensity",backgroundColor:d.toJsonColor(this.backgroundColor),dotShape:this.dotShape,dotSize:0<this.dotSize?h.px2pt(this.dotSize):0,dotValue:this.dotValue,fields:a.map(this.fields,function(a){return f.fixJson({color:d.toJsonColor(a.color),
name:a.name})}),legendOptions:this.legendOptions&&f.fixJson({backgroundColor:d.toJsonColor(this.legendOptions.backgroundColor),dotCoverage:this.legendOptions.dotCoverage,outline:this.legendOptions.outline&&this.legendOptions.outline.toJson(),valueUnit:this.legendOptions.valueUnit}),outline:this.outline&&this.outline.toJson()});return f.fixJson(b)}})})},"esri/renderers/TemporalRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Renderer"],function(l,n,a,g,
q){return l(q,{declaredClass:"esri.renderer.TemporalRenderer",constructor:function(a,g,f,d){this.observationRenderer=a;this.latestObservationRenderer=g;this.trackRenderer=f;this.observationAger=d},getSymbol:function(a){var g=a.getLayer(),f=this.getObservationRenderer(a),d=f&&f.getSymbol(a),c=this.observationAger;g.timeInfo&&g._map.timeExtent&&(f===this.observationRenderer&&c&&d)&&(d=c.getAgedSymbol(d,a));return d},getObservationRenderer:function(a){return 0===a.getLayer()._getKind(a)?this.observationRenderer:
this.latestObservationRenderer||this.observationRenderer},toJson:function(){var a={type:"temporal"};a.observationRenderer=this.observationRenderer.toJson();this.latestObservationRenderer&&(a.latestObservationRenderer=this.latestObservationRenderer.toJson());this.trackRenderer&&(a.trackRenderer=this.trackRenderer.toJson());this.observationAger&&(a.observationAger=this.observationAger.toJson());return a}})})},"esri/renderers/VectorFieldRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/_base/array ../kernel ../lang ../Color ./Renderer ./ClassBreaksRenderer ../symbols/SimpleMarkerSymbol ../symbols/PictureMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/jsonUtils require".split(" "),
function(l,n,a,g,q,h,m,f,d,c,e,b,k,s){var p=l(f,{declaredClass:"esri.renderer.VectorFieldRenderer",iconFolderPath:"../images/symbol/sfs/",constructor:function(a){h.isDefined(a)||(a={});a.attributeField=a.attributeField||"Magnitude";a.rotationInfo=a.rotationInfo||this._getRotationInfo(a);l.safeMixin(this,a);this.style=this.style||p.STYLE_SINGLE_ARROW;this.singleArrowSymbol&&(this.singleArrowSymbol=this.singleArrowSymbol.declaredClass?this.singleArrowSymbol:k.fromJson(this.singleArrowSymbol));this.renderer=
new d(this._getDefaultSymbol(),a.attributeField);this._updateRenderer(this.style);this.flowRepresentation=this.flowRepresentation||this.FLOW_FROM},getSymbol:function(a){return this.renderer&&this.renderer.getSymbol(a)},setVisualVariables:function(a){a=g.filter(a,function(a){if("sizeInfo"===a.type)return h.isDefined(this._updateSizeInfo(a))},this);this.inherited(arguments);return this},setSizeInfo:function(a){this._updateSizeInfo(a);this.inherited(arguments);return this},setProportionalSymbolInfo:function(a){this.setSizeInfo(a);
return this},setColorInfo:function(a){return this},_updateRenderer:function(a){return!h.isDefined(this.renderer)?Error("Invalid Renderer!"):a===p.STYLE_SINGLE_ARROW?this._createSingleArrowRenderer():a===p.STYLE_BEAUFORT_KN?this._createBeaufortKnotsRenderer():a===p.STYLE_BEAUFORT_METER?this._createBeaufortMeterRenderer():a===p.STYLE_BEAUFORT_FEET?this._createBeaufortFeetRenderer():a===p.STYLE_BEAUFORT_MILE?this._createBeaufortMilesRenderer():a===p.STYLE_BEAUFORT_KM?this._createBeaufortKilometersRenderer():
a===p.STYLE_OCEAN_CURRENT_M?this._createCurrentMeterRenderer():a===p.STYLE_OCEAN_CURRENT_KN?this._createCurrentKnotsRenderer():a===p.STYLE_SCALAR?this._createSimpleScalarRenderer():a===p.STYLE_WIND_BARBS?this._createWindBarbsRenderer():this._createClassifiedArrowRenderer()},_updateSizeInfo:function(a){return a&&h.isDefined(a.minSize)&&h.isDefined(a.maxSize)&&h.isDefined(a.minDataValue)&&h.isDefined(a.maxDataValue)?(this.style===p.STYLE_WIND_BARBS&&(a.minSize=a.maxSize),a.field=a.field||"Magnitude",
a.type="sizeInfo",a):null},_createClassifiedArrowRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new m([56,168,0]));var a=[0,1E-6,3.5,7,10.5,14];if(h.isDefined(this.minDataValue)&&h.isDefined(this.maxDataValue)){var b=(this.maxDataValue-this.minDataValue)/5,a=[],c,d;d=this.minDataValue;for(c=0;6>c;c++)a[c]=d,d+=b}this._addBreaks(a,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]])},_createSingleArrowRenderer:function(){this.renderer.defaultSymbol=this.singleArrowSymbol||
this._getDefaultSymbol()},_createBeaufortMeterRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new m([214,47,39]));this._addBreaks([0,0.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new m([214,47,39]));this._addBreaks([0,
1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]])},_createBeaufortFeetRenderer:function(){var a=[0,0.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];g.forEach(a,function(b,c){a[c]*=3.28084});this.renderer.defaultSymbol=this._getDefaultSymbol(new m([214,47,39]));this._addBreaks(a,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],
[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortMilesRenderer:function(){var a=[0,0.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];g.forEach(a,function(b,c){a[c]*=2.23694});this.renderer.defaultSymbol=this._getDefaultSymbol(new m([214,47,39]));this._addBreaks(a,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKilometersRenderer:function(){var a=
[0,0.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];g.forEach(a,function(b,c){a[c]*=3.6});this.renderer.defaultSymbol=this._getDefaultSymbol(new m([214,47,39]));this._addBreaks(a,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createCurrentMeterRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new m([177,177,177]));this._addBreaks([0,0.5,1,1.5,2],[[78,
26,153],[179,27,26],[202,128,26],[177,177,177]])},_createCurrentKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new m([177,177,177]));this._addBreaks([0,0.25,0.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]])},_createSimpleScalarRenderer:function(){this.renderer.defaultSymbol=new e({url:s.toUrl(this.iconFolderPath+"scalar.png"),height:20,width:20,type:"esriPMS",angle:0})},_createWindBarbsRenderer:function(){var a=
[],d,f;for(d=0;150>=d;d+=5)a.push(d);f="M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20;M25 0 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40;M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35;M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15 M25 10 M25 5 L17.5 7.5".split(";");
var g=new e({url:s.toUrl(this.iconFolderPath+"windbarb.png"),height:20,width:20,type:"esriPMS",angle:0});this.renderer.defaultSymbol=g;for(d=0;d<a.length-1;d++)0==d?this.renderer.addBreak({minValue:a[d],maxValue:a[d+1],symbol:g}):this.renderer.addBreak({minValue:a[d],maxValue:a[d+1],symbol:(new c).setPath(f[d]).setOutline((new b).setWidth(1.5)).setSize(20).setColor(new m([0,0,0,255]))})},_getDefaultSymbol:function(a){return(new c).setPath("M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z").setOutline((new b).setWidth(0)).setSize(20).setColor(a||
new m([0,92,230]))},_getRotationInfo:function(a){var b=a&&a.flowRepresentation||p.FLOW_FROM,c=a&&a.rotationField||"Direction",d=p.FLOW_FROM;return{field:function(a){a=a.attributes[c];return b===d?a:a+180},type:"geographic"}},_addBreaks:function(a,b){if(!h.isDefined(this.renderer))return Error("Invalid Renderer!");if(!a||!b||!a.length||!b.length||!(a.length>=b.length))return Error("AddBreaks: Input arguments break values and colors not valid");var c;for(c=0;c<b.length;c++)this.renderer.addBreak({minValue:a[c],
maxValue:a[c+1],symbol:this._getDefaultSymbol(new m(b[c]))})},toJson:function(){var a=n.mixin(this.inherited(arguments),{type:"vectorField",style:this.style,attributeField:this.attributeField,flowRepresentation:this.flowRepresentation});this.renderer&&this.renderer.defaultSymbol&&this.style===p.STYLE_SINGLE_ARROW&&(a.singleArrowSymbol=this.renderer.defaultSymbol.toJson());return h.fixJson(a)}});n.mixin(p,{STYLE_WIND_BARBS:"wind_speed",STYLE_SINGLE_ARROW:"single_arrow",STYLE_CLASSIFIED_ARROW:"classified_arrow",
STYLE_BEAUFORT_KN:"beaufort_kn",STYLE_BEAUFORT_METER:"beaufort_m",STYLE_BEAUFORT_MILE:"beaufort_mi",STYLE_BEAUFORT_FEET:"beaufort_ft",STYLE_BEAUFORT_KM:"beaufort_km",STYLE_OCEAN_CURRENT_M:"ocean_current_m",STYLE_OCEAN_CURRENT_KN:"ocean_current_kn",STYLE_SCALAR:"simple_scalar"},{FLOW_FROM:"flow_from",FLOW_TO:"flow_to"});return p})},"esri/renderers/HeatmapRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct ../sniff ../kernel ../lang ../symbols/PictureMarkerSymbol ../Color ./Renderer".split(" "),
function(l,n,a,g,q,h,m,f,d,c){return l([c],{declaredClass:"esri.renderer.HeatmapRenderer",colors:null,blurRadius:10,maxPixelIntensity:100,minPixelIntensity:0,field:null,fieldOffset:null,colorStops:null,constructor:function(a){(this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1)&&("string"==typeof a&&(a=JSON.parse(a)),n.mixin(this,a),this._canvas=null,!this.colors&&!this.colorStops&&(this.colorStops=[{ratio:0,color:"rgba(255, 140, 0, 0)"},{ratio:0.75,color:"rgba(255, 140, 0, 1)"},{ratio:0.9,
color:"rgba(255, 0,   0, 1)"}]),this.gradient=this._generateGradient(this.colorStops||this.colors))},getSymbol:function(a){if(!this._supportsCanvas)return!1;var b=a.attributes.imageData;a=a.attributes.size;if(!a)return null;var c=this._getContext(a[0],a[1]),d=c.getImageData(0,0,a[0],a[1]);window.ArrayBuffer&&b instanceof ArrayBuffer?b=window.Uint8ClampedArray?new Uint8ClampedArray(b):new Uint8Array(b):b.BYTES_PER_ELEMENT&&1!==b.BYTES_PER_ELEMENT&&(b=window.Uint8ClampedArray?new Uint8ClampedArray(b.buffer):
new Uint8Array(b.buffer));if(window.CanvasPixelArray&&d.data instanceof window.CanvasPixelArray)for(var g=d.data,h=g.length;h--;)g[h]=b[h];else d.data.set(b);c.putImageData(d,0,0);return new f(c.canvas.toDataURL(),a[0],a[1])},setColors:function(a){if(a&&(a instanceof Array||a.colors))this.gradient=this._generateGradient(a.colors||a),this.colors=a;return this},setColorStops:function(a){if(a&&(a instanceof Array||a.colorStops))this.gradient=this._generateGradient(a.colorStops||a),this.colorStops=a;
return this},setMaxPixelIntensity:function(a){this.maxPixelIntensity=a;return this},setMinPixelIntensity:function(a){this.minPixelIntensity=a;return this},setField:function(a){this.field=a;return this},setFieldOffset:function(a){this.fieldOffset=a;return this},setBlurRadius:function(a){this.blurRadius=a;return this},getStats:function(){},getHistogramData:function(){},toJson:function(){var c=n.mixin(this.inherited(arguments),{type:"heatmap",blurRadius:this.blurRadius,colorStops:this._colorsToStops(this.colorStops||
this.colors),maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity,field:this.field});null!=this.fieldOffset&&(c.fieldOffset=this.fieldOffset);a.forEach(c.colorStops,function(a){a.color=d.toJsonColor(a.color)});return m.fixJson(c)},_getContext:function(a,b){this._canvas?(this._canvas.width=a,this._canvas.height=b):this._canvas=this._initCanvas(a,b);return this._canvas.getContext("2d")},_initCanvas:function(a,b){var c=g.create("canvas",{id:"hm_canvas-"+Math.floor(1E3*Math.random()),
style:"position: absolute; left: -10000px; top: 0px;"},null);c.width=a;c.height=b;document.body.appendChild(c);return c},_generateGradient:function(a,b){b||(b=512);for(var c=this._colorsToStops(a),d=this._getContext(1,b||512),f=d.createLinearGradient(0,0,0,b),g=0,h;g<c.length;g++)h=c[g],f.addColorStop(h.ratio,h.color.toCss(!0));d.fillStyle=f;d.fillRect(0,0,1,b);return d.getImageData(0,0,1,b).data},_colorsToStops:function(c){var b=[];if(!c[0])return b;if(null!=c[0].ratio)b=a.map(c,function(a){return{ratio:a.ratio,
color:this._toColor(a.color)}},this);else if(null!=c[0].value){var d=Infinity,b=-Infinity,f=0,g;for(g=0;g<c.length;g++){var h=c[g].value;h<d&&(d=h);h>b&&(b=h)}f=b-d;this.maxPixelIntensity=b;this.minPixelIntensity=d;b=a.map(c,function(a){var b=a.value;a=this._toColor(a.color);return{value:b,ratio:(b-d)/f,color:a}},this)}else var l=c.length-1,b=a.map(c,function(a,b){return{color:this._toColor(a),ratio:b/l}},this);return b},_toColor:function(a){!a.toRgba&&!a.declaredClass&&(a=new d(a));return a}})})},
"esri/dijit/_EventedWidget":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on ../Evented dijit/_WidgetBase".split(" "),function(l,n,a,g,q,h){return l([h,q],{_onMap:function(a){var f=this.constructor._onMap,d;if(!f||!f.FINAL)delete this.constructor._onMap,f=this.registerConnectEvents(),f.FINAL=!0;a=a.toLowerCase();f[a]?d=this[f[a].method]:(a=this._onCamelCase(a),this[a]&&(d=a));return d},on:function(a,f){var d=this._onMap(a),c=a.replace(/\-/g,""),e="on"+c in this.domNode;return d||
!e?this.inherited(arguments):this.own(g(this.domNode,c,f))[0]},emit:function(a,f,d){var c,e,b,g=a.toLowerCase(),h=this.constructor._onMap||this.registerConnectEvents();e=this[this._onMap(g)];f=f||{};f.target||(f.target=this);e&&h&&h[g]&&(this._onObj2Arr(function(){c=Array.prototype.slice.call(arguments)},h[g].argKeys)(f),b=n.mixin({},arguments),b[2]=c,b[0]=h[g].name.replace(/^on/,""));return this.inherited(b||arguments)}})})},"app/router":function(){define("exports module dojo/_base/declare dojo/Evented dojo/topic dojo/router esri/urlUtils".split(" "),
function(l,n,a,g,q,h,m){function f(a){return a&&a.__esModule?a:{"default":a}}l=f(a);g=f(g);var d=f(q),c=f(h),e=f(m);q=(0,l["default"])([g["default"]],{start:function(){var a=e["default"].urlToObject(location.href);this.emit("query-params",a.query);c["default"].register("/webmap/:mapid",function(a){d["default"].publish("web-map-update",a.params)});c["default"].startup()}});n.exports=q})},"dojo/router":function(){define(["./router/RouterBase"],function(l){return new l({})})},"dojo/router/RouterBase":function(){define(["dojo/_base/declare",
"dojo/hash","dojo/topic"],function(l,n,a){function g(a,g,f){var d,c,e,b;d=this.callbackQueue;e=c=!1;g=[{stopImmediatePropagation:function(){c=!0},preventDefault:function(){e=!0},oldPath:g,newPath:f,params:a}];if(a instanceof Array)g=g.concat(a);else for(b in a)g.push(a[b]);a=0;for(b=d.length;a<b;++a)c||d[a].apply(null,g);return!e}var q;q=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};return l(null,{_routes:null,_routeIndex:null,_started:!1,
_currentPath:"",idMatch:/:(\w[\w\d]*)/g,idReplacement:"([^\\/]+)",globMatch:/\*(\w[\w\d]*)/,globReplacement:"(.+)",constructor:function(a){this._routes=[];this._routeIndex={};for(var g in a)a.hasOwnProperty(g)&&(this[g]=a[g])},register:function(a,g){return this._registerRoute(a,g)},registerBefore:function(a,g){return this._registerRoute(a,g,!0)},go:function(a,g){var f;if("string"!==typeof a)return!1;a=q(a);(f=this._handlePathChange(a))&&n(a,g);return f},startup:function(g){if(!this._started){var l=
this,f=n();this._started=!0;this._hashchangeHandle=a.subscribe("/dojo/hashchange",function(){l._handlePathChange.apply(l,arguments)});f?this._handlePathChange(f):this.go(g,!0)}},destroy:function(){this._hashchangeHandle&&this._hashchangeHandle.remove();this._routeIndex=this._routes=null},_handlePathChange:function(a){var g,f,d,c,e,b,k,l,p=this._routes,n=this._currentPath;if(!this._started||a===n)return f;f=!0;g=0;for(d=p.length;g<d;++g)if(e=p[g],b=e.route.exec(a)){if(e.parameterNames){k=e.parameterNames;
l={};f=0;for(c=k.length;f<c;++f)l[k[f]]=b[f+1]}else l=b.slice(1);f=e.fire(l,n,a)}f&&(this._currentPath=a);return f},_convertRouteToRegExp:function(a){a=a.replace(this.idMatch,this.idReplacement);a=a.replace(this.globMatch,this.globReplacement);return RegExp("^"+a+"$")},_getParameterNames:function(a){var g=this.idMatch,f=this.globMatch,d=[],c;for(g.lastIndex=0;null!==(c=g.exec(a));)d.push(c[1]);null!==(c=f.exec(a))&&d.push(c[1]);return 0<d.length?d:null},_indexRoutes:function(){var a,g,f,d,c=this._routes;
d=this._routeIndex={};a=0;for(g=c.length;a<g;++a)f=c[a],d[f.route]=a},_registerRoute:function(a,l,f){var d,c,e,b,k,n=this,p=this._routes,q=this._routeIndex;d=this._routeIndex[a];(c="undefined"!==typeof d)&&(e=p[d]);e||(e={route:a,callbackQueue:[],fire:g});b=e.callbackQueue;"string"==typeof a&&(e.parameterNames=this._getParameterNames(a),e.route=this._convertRouteToRegExp(a));f?b.unshift(l):b.push(l);c||(d=p.length,q[a]=d,p.push(e));k=!1;return{remove:function(){var a,c;if(!k){a=0;for(c=b.length;a<
c;++a)b[a]===l&&b.splice(a,1);0===b.length&&(p.splice(d,1),n._indexRoutes());k=!0}},register:function(b,c){return n.register(a,b,c)}}}})})},"dojo/hash":function(){define("./_base/kernel require ./_base/config ./aspect ./_base/lang ./topic ./domReady ./sniff".split(" "),function(l,n,a,g,q,h,m,f){function d(a,b){var c=a.indexOf(b);return 0<=c?a.substring(c+1):""}function c(){return d(location.href,"#")}function e(){h.publish("/dojo/hashchange",c())}function b(){c()!==p&&(p=c(),e())}function k(a){if(r)if(r.isTransitioning())setTimeout(q.hitch(null,
k,a),x);else{var c=r.iframe.location.href,d=c.indexOf("?");r.iframe.location.replace(c.substring(0,d)+"?"+a)}else location.replace("#"+a),!t&&b()}function s(){function b(){p=c();k=s?p:d(t.href,"?");h=!1;m=null}var f=document.createElement("iframe"),g=a.dojoBlankHtmlUrl||n.toUrl("./resources/blank.html");f.id="dojo-hash-iframe";f.src=g+"?"+c();f.style.display="none";document.body.appendChild(f);this.iframe=l.global["dojo-hash-iframe"];var k,h,m,r,s,t=this.iframe.location;this.isTransitioning=function(){return h};
this.pollLocation=function(){if(!s)try{var a=d(t.href,"?");document.title!=r&&(r=this.iframe.document.title=document.title)}catch(l){s=!0}var n=c();if(h&&p===n)if(s||a===m)b(),e();else{setTimeout(q.hitch(this,this.pollLocation),0);return}else if(!(p===n&&(s||k===a))){if(p!==n){p=n;h=!0;m=n;f.src=g+"?"+m;s=!1;setTimeout(q.hitch(this,this.pollLocation),0);return}s||(location.href="#"+t.search.substring(1),b(),e())}setTimeout(q.hitch(this,this.pollLocation),x)};b();setTimeout(q.hitch(this,this.pollLocation),
x)}l.hash=function(a,b){if(!arguments.length)return c();"#"==a.charAt(0)&&(a=a.substring(1));b?k(a):location.href="#"+a;return a};var p,r,t,x=a.hashPollFrequency||100;m(function(){"onhashchange"in l.global&&(!f("ie")||8<=f("ie")&&"BackCompat"!=document.compatMode)?t=g.after(l.global,"onhashchange",e,!0):document.addEventListener?(p=c(),setInterval(b,x)):document.attachEvent&&(r=new s)});return l.hash})},"app/config":function(){define(["exports","module"],function(l,n){n.exports={mapOptions:{center:[-122.3,
47.62],zoom:12,basemap:"topo"}}})},"dojox/gfx/path":function(){define(["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(l,n,a,g,q){q=a("dojox.gfx.path.Path",q.Shape,{constructor:function(a){this.shape=n.clone(l.defaultPath);this.segments=[];this.tbbox=null;this.absolute=!0;this.last={};this.rawNode=a;this.segmented=!1},setAbsoluteMode:function(a){this._confirmSegmented();this.absolute="string"==typeof a?"absolute"==a:a;return this},getAbsoluteMode:function(){this._confirmSegmented();
return this.absolute},getBoundingBox:function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;var a=this.bbox,g=this._getRealMatrix();this.bbox=null;for(var f=0,d=this.segments.length;f<d;++f)this._updateWithSegment(this.segments[f],g);g=this.bbox;this.bbox=a;return this.tbbox=g?[{x:g.l,y:g.t},{x:g.r,y:g.t},{x:g.r,
y:g.b},{x:g.l,y:g.b}]:null},getLastPosition:function(){this._confirmSegmented();return"x"in this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(a,l,f){f&&(l=g.multiplyPoint(f,a,l),a=l.x,l=l.y);this.bbox&&"l"in this.bbox?(this.bbox.l>a&&(this.bbox.l=a),this.bbox.r<a&&(this.bbox.r=a),this.bbox.t>l&&(this.bbox.t=l),this.bbox.b<l&&(this.bbox.b=l)):this.bbox={l:a,b:l,r:a,t:l}},_updateWithSegment:function(a,g){var f=a.args,d=f.length,
c;switch(a.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(c=0;c<d;c+=2)this._updateBBox(f[c],f[c+1],g);this.last.x=f[d-2];this.last.y=f[d-1];this.absolute=!0;break;case "H":for(c=0;c<d;++c)this._updateBBox(f[c],this.last.y,g);this.last.x=f[d-1];this.absolute=!0;break;case "V":for(c=0;c<d;++c)this._updateBBox(this.last.x,f[c],g);this.last.y=f[d-1];this.absolute=!0;break;case "m":c=0;"x"in this.last||(this._updateBBox(this.last.x=f[0],this.last.y=f[1],g),c=2);for(;c<d;c+=2)this._updateBBox(this.last.x+=
f[c],this.last.y+=f[c+1],g);this.absolute=!1;break;case "l":case "t":for(c=0;c<d;c+=2)this._updateBBox(this.last.x+=f[c],this.last.y+=f[c+1],g);this.absolute=!1;break;case "h":for(c=0;c<d;++c)this._updateBBox(this.last.x+=f[c],this.last.y,g);this.absolute=!1;break;case "v":for(c=0;c<d;++c)this._updateBBox(this.last.x,this.last.y+=f[c],g);this.absolute=!1;break;case "c":for(c=0;c<d;c+=6)this._updateBBox(this.last.x+f[c],this.last.y+f[c+1],g),this._updateBBox(this.last.x+f[c+2],this.last.y+f[c+3],g),
this._updateBBox(this.last.x+=f[c+4],this.last.y+=f[c+5],g);this.absolute=!1;break;case "s":case "q":for(c=0;c<d;c+=4)this._updateBBox(this.last.x+f[c],this.last.y+f[c+1],g),this._updateBBox(this.last.x+=f[c+2],this.last.y+=f[c+3],g);this.absolute=!1;break;case "A":for(c=0;c<d;c+=7)this._updateBBox(f[c+5],f[c+6],g);this.last.x=f[d-2];this.last.y=f[d-1];this.absolute=!0;break;case "a":for(c=0;c<d;c+=7)this._updateBBox(this.last.x+=f[c+5],this.last.y+=f[c+6],g);this.absolute=!1}var e=[a.action];for(c=
0;c<d;++c)e.push(l.formatNumber(f[c],!0));if("string"==typeof this.shape.path)this.shape.path+=e.join("");else{c=0;for(d=e.length;c<d;++c)this.shape.path.push(e[c])}},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(a,g){this.tbbox=null;var f=this._validSegments[a.toLowerCase()];"number"==typeof f&&(f?g.length>=f&&(f={action:a,args:g.slice(0,g.length-g.length%f)},this.segments.push(f),this._updateWithSegment(f)):(f={action:a,args:[]},this.segments.push(f),this._updateWithSegment(f)))},
_collectArgs:function(a,g){for(var f=0;f<g.length;++f){var d=g[f];"boolean"==typeof d?a.push(d?1:0):"number"==typeof d?a.push(d):d instanceof Array?this._collectArgs(a,d):"x"in d&&"y"in d&&a.push(d.x,d.y)}},moveTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"M":"m",a);return this},lineTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"L":"l",a);return this},hLineTo:function(){this._confirmSegmented();
var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"H":"h",a);return this},vLineTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"V":"v",a);return this},curveTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"C":"c",a);return this},smoothCurveTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"S":
"s",a);return this},qCurveTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"Q":"q",a);return this},qSmoothCurveTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"T":"t",a);return this},arcTo:function(){this._confirmSegmented();var a=[];this._collectArgs(a,arguments);this._pushSegment(this.absolute?"A":"a",a);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",
[]);return this},_confirmSegmented:function(){if(!this.segmented){var a=this.shape.path;this.shape.path=[];this._setPath(a);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(a){a=n.isArray(a)?a:a.match(l.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(a){for(var g="",f=[],d=a.length,c=0;c<d;++c){var e=a[c],b=parseFloat(e);isNaN(b)?(g&&this._pushSegment(g,f),f=[],g=e):f.push(b)}this._pushSegment(g,f)}},setShape:function(a){this.inherited(arguments,
["string"==typeof a?{path:a}:a]);this.segmented=!1;this.segments=[];l.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*Math.PI});a=a("dojox.gfx.path.TextPath",q,{constructor:function(a){"text"in this||(this.text=n.clone(l.defaultTextPath));"fontStyle"in this||(this.fontStyle=n.clone(l.defaultFont))},getText:function(){return this.text},setText:function(a){this.text=l.makeParameters(this.text,"string"==typeof a?{text:a}:a);this._setText();return this},getFont:function(){return this.fontStyle},
setFont:function(a){this.fontStyle="string"==typeof a?l.splitFontString(a):l.makeParameters(l.defaultFont,a);this._setFont();return this}});return l.path={Path:q,TextPath:a}})},"dojox/gfx/shape":function(){define("./_base dojo/_base/lang dojo/_base/declare dojo/_base/kernel dojo/_base/sniff dojo/on dojo/_base/array dojo/dom-construct dojo/_base/Color ./matrix".split(" "),function(l,n,a,g,q,h,m,f,d,c){var e=l.shape={};e.Shape=a("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=
this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null;if(q("gfxRegistry")){var a=e.register(this);this.getUID=function(){return a}}},destroy:function(){q("gfxRegistry")&&e.dispose(this);this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},
getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var a=this.getBoundingBox();if(!a)return null;var d=this._getRealMatrix();return[c.multiplyPoint(d,a.x,a.y),c.multiplyPoint(d,a.x+a.width,a.y),c.multiplyPoint(d,a.x+a.width,a.y+a.height),c.multiplyPoint(d,a.x,a.y+a.height)]},getEventSource:function(){return this.rawNode},setClip:function(a){this.clip=a},getClip:function(){return this.clip},setShape:function(a){this.shape=l.makeParameters(this.shape,
a);this.bbox=null;return this},setFill:function(a){if(!a)return this.fillStyle=null,this;var c=null;if("object"==typeof a&&"type"in a)switch(a.type){case "linear":c=l.makeParameters(l.defaultLinearGradient,a);break;case "radial":c=l.makeParameters(l.defaultRadialGradient,a);break;case "pattern":c=l.makeParameters(l.defaultPattern,a)}else c=l.normalizeColor(a);this.fillStyle=c;return this},setStroke:function(a){if(!a)return this.strokeStyle=null,this;if("string"==typeof a||n.isArray(a)||a instanceof
d)a={color:a};a=this.strokeStyle=l.makeParameters(l.defaultStroke,a);a.color=l.normalizeColor(a.color);return this},setTransform:function(a){this.matrix=c.clone(a?c.normalize(a):c.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var a=this.getParent();a&&(a._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var a=this.getParent();a&&(a._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},
_moveToBack:function(){},applyRightTransform:function(a){return a?this.setTransform([this.matrix,a]):this},applyLeftTransform:function(a){return a?this.setTransform([a,this.matrix]):this},applyTransform:function(a){return a?this.setTransform([this.matrix,a]):this},removeShape:function(a){this.parent&&this.parent.remove(this,a);return this},_setParent:function(a,c){this.parent=a;return this._updateParentMatrix(c)},_updateParentMatrix:function(a){this.parentMatrix=a?c.clone(a):null;return this._applyTransform()},
_getRealMatrix:function(){for(var a=this.matrix,d=this.parent;d;)d.matrix&&(a=c.multiply(d.matrix,a)),d=d.parent;return a}});e._eventsProcessing={on:function(a,c){return h(this.getEventSource(),a,e.fixCallback(this,l.fixTarget,c))},connect:function(a,c,d){"on"==a.substring(0,2)&&(a=a.substring(2));return this.on(a,d?n.hitch(c,d):c)},disconnect:function(a){return a.remove()}};e.fixCallback=function(a,c,d,e){e||(e=d,d=null);if(n.isString(e)){d=d||g.global;if(!d[e])throw['dojox.gfx.shape.fixCallback: scope["',
e,'"] is null (scope\x3d"',d,'")'].join("");return function(f){return c(f,a)?d[e].apply(d,arguments||[]):void 0}}return!d?function(f){return c(f,a)?e.apply(d,arguments):void 0}:function(f){return c(f,a)?e.apply(d,arguments||[]):void 0}};n.extend(e.Shape,e._eventsProcessing);e.Container={_init:function(){this.children=[];this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(a){var c=a.getParent();c&&c.remove(a,!0);this.children.push(a);return a._setParent(this,
this._getRealMatrix())},remove:function(a,c){for(var d=0;d<this.children.length;++d)if(this.children[d]==a){c||(a.parent=null,a.parentMatrix=null);this.children.splice(d,1);break}return this},clear:function(a){for(var c,d=0;d<this.children.length;++d)c=this.children[d],c.parent=null,c.parentMatrix=null,a&&c.destroy();this.children=[];return this},getBoundingBox:function(){if(this.children){var a=null;m.forEach(this.children,function(d){var e=d.getBoundingBox();e&&((d=d.getTransform())&&(e=c.multiplyRectangle(d,
e)),a?(a.x=Math.min(a.x,e.x),a.y=Math.min(a.y,e.y),a.endX=Math.max(a.endX,e.x+e.width),a.endY=Math.max(a.endY,e.y+e.height)):a={x:e.x,y:e.y,endX:e.x+e.width,endY:e.y+e.height})});a&&(a.width=a.endX-a.x,a.height=a.endY-a.y);return a}return null},_moveChildToFront:function(a){for(var c=0;c<this.children.length;++c)if(this.children[c]==a){this.children.splice(c,1);this.children.push(a);break}return this},_moveChildToBack:function(a){for(var c=0;c<this.children.length;++c)if(this.children[c]==a){this.children.splice(c,
1);this.children.unshift(a);break}return this}};e.Surface=a("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){m.forEach(this._nodes,f.destroy);this._nodes=[];m.forEach(this._events,function(a){a&&a.remove()});this._events=[];this.rawNode=null;if(q("ie"))for(;this._parent.lastChild;)f.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},
_getRealMatrix:function(){return null},isLoaded:!0,onLoad:function(a){},whenLoaded:function(a,c){var d=n.hitch(a,c);if(this.isLoaded)d(this);else h.once(this,"load",function(a){d(a)})}});n.extend(e.Surface,e._eventsProcessing);e.Rect=a("dojox.gfx.shape.Rect",e.Shape,{constructor:function(a){this.shape=l.getDefault("Rect");this.rawNode=a},getBoundingBox:function(){return this.shape}});e.Ellipse=a("dojox.gfx.shape.Ellipse",e.Shape,{constructor:function(a){this.shape=l.getDefault("Ellipse");this.rawNode=
a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.rx,y:a.cy-a.ry,width:2*a.rx,height:2*a.ry}}return this.bbox}});e.Circle=a("dojox.gfx.shape.Circle",e.Shape,{constructor:function(a){this.shape=l.getDefault("Circle");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.r,y:a.cy-a.r,width:2*a.r,height:2*a.r}}return this.bbox}});e.Line=a("dojox.gfx.shape.Line",e.Shape,{constructor:function(a){this.shape=l.getDefault("Line");this.rawNode=
a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:Math.min(a.x1,a.x2),y:Math.min(a.y1,a.y2),width:Math.abs(a.x2-a.x1),height:Math.abs(a.y2-a.y1)}}return this.bbox}});e.Polyline=a("dojox.gfx.shape.Polyline",e.Shape,{constructor:function(a){this.shape=l.getDefault("Polyline");this.rawNode=a},setShape:function(a,c){a&&a instanceof Array?(this.inherited(arguments,[{points:a}]),c&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[a]);
return this},_normalizePoints:function(){var a=this.shape.points,c=a&&a.length;if(c&&"number"==typeof a[0]){for(var d=[],e=0;e<c;e+=2)d.push({x:a[e],y:a[e+1]});this.shape.points=d}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var a=this.shape.points,c=a.length,d=a[0],e=d.x,f=d.y,g=d.x,h=d.y,l=1;l<c;++l)d=a[l],e>d.x&&(e=d.x),g<d.x&&(g=d.x),f>d.y&&(f=d.y),h<d.y&&(h=d.y);this.bbox={x:e,y:f,width:g-e,height:h-f}}return this.bbox}});e.Image=a("dojox.gfx.shape.Image",e.Shape,
{constructor:function(a){this.shape=l.getDefault("Image");this.rawNode=a},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});e.Text=a(e.Shape,{constructor:function(a){this.fontStyle=null;this.shape=l.getDefault("Text");this.rawNode=a},getFont:function(){return this.fontStyle},setFont:function(a){this.fontStyle="string"==typeof a?l.splitFontString(a):l.makeParameters(l.defaultFont,a);this._setFont();return this},getBoundingBox:function(){var a=
null;this.getShape().text&&(a=l._base._computeTextBoundingBox(this));return a}});e.Creator={createShape:function(a){switch(a.type){case l.defaultPath.type:return this.createPath(a);case l.defaultRect.type:return this.createRect(a);case l.defaultCircle.type:return this.createCircle(a);case l.defaultEllipse.type:return this.createEllipse(a);case l.defaultLine.type:return this.createLine(a);case l.defaultPolyline.type:return this.createPolyline(a);case l.defaultImage.type:return this.createImage(a);
case l.defaultText.type:return this.createText(a);case l.defaultTextPath.type:return this.createTextPath(a)}return null},createGroup:function(){return this.createObject(l.Group)},createRect:function(a){return this.createObject(l.Rect,a)},createEllipse:function(a){return this.createObject(l.Ellipse,a)},createCircle:function(a){return this.createObject(l.Circle,a)},createLine:function(a){return this.createObject(l.Line,a)},createPolyline:function(a){return this.createObject(l.Polyline,a)},createImage:function(a){return this.createObject(l.Image,
a)},createText:function(a){return this.createObject(l.Text,a)},createPath:function(a){return this.createObject(l.Path,a)},createTextPath:function(a){return this.createObject(l.TextPath,{}).setText(a)},createObject:function(a,c){return null}};return e})},"dojox/gfx/svg":function(){define("dojo/_base/lang dojo/_base/sniff dojo/_base/window dojo/dom dojo/_base/declare dojo/_base/array dojo/dom-geometry dojo/dom-attr dojo/_base/Color ./_base ./shape ./path".split(" "),function(l,n,a,g,q,h,m,f,d,c,e,b){function k(b,
c){return a.doc.createElementNS?a.doc.createElementNS(b,c):a.doc.createElement(c)}function s(b){return p.useSvgWeb?a.doc.createTextNode(b,!0):a.doc.createTextNode(b)}var p=c.svg={};p.useSvgWeb="undefined"!=typeof window.svgweb;var r=navigator.userAgent,t=n("ios"),x=n("android"),y=n("chrome")||x&&4<=x?"auto":"optimizeLegibility";p.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};p.getRef=function(a){return!a||"none"==a?null:a.match(/^url\(#.+\)$/)?g.byId(a.slice(5,-1)):
a.match(/^#dojoUnique\d+$/)?g.byId(a.slice(1)):null};p.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};var u=0;p.Shape=q("dojox.gfx.svg.Shape",e.Shape,{destroy:function(){if(this.fillStyle&&"type"in this.fillStyle){var a=this.rawNode.getAttribute("fill");(a=p.getRef(a))&&a.parentNode.removeChild(a)}if(this.clip&&(a=this.rawNode.getAttribute("clip-path")))(a=
g.byId(a.match(/gfx_clip[\d]+/)[0]))&&a.parentNode.removeChild(a);e.Shape.prototype.destroy.apply(this,arguments)},setFill:function(a){if(!a)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var b,d=function(a){this.setAttribute(a,b[a].toFixed(8))};if("object"==typeof a&&"type"in a){switch(a.type){case "linear":b=c.makeParameters(c.defaultLinearGradient,a);a=this._setFillObject(b,"linearGradient");h.forEach(["x1","y1","x2","y2"],d,
a);break;case "radial":b=c.makeParameters(c.defaultRadialGradient,a);a=this._setFillObject(b,"radialGradient");h.forEach(["cx","cy","r"],d,a);break;case "pattern":b=c.makeParameters(c.defaultPattern,a),a=this._setFillObject(b,"pattern"),h.forEach(["x","y","width","height"],d,a)}this.fillStyle=b;return this}this.fillStyle=b=c.normalizeColor(a);this.rawNode.setAttribute("fill",b.toCss());this.rawNode.setAttribute("fill-opacity",b.a);this.rawNode.setAttribute("fill-rule","evenodd");return this},setStroke:function(a){var b=
this.rawNode;if(!a)return this.strokeStyle=null,b.setAttribute("stroke","none"),b.setAttribute("stroke-opacity",0),this;if("string"==typeof a||l.isArray(a)||a instanceof d)a={color:a};a=this.strokeStyle=c.makeParameters(c.defaultStroke,a);a.color=c.normalizeColor(a.color);if(a){var e=0>a.width?0:a.width;b.setAttribute("stroke",a.color.toCss());b.setAttribute("stroke-opacity",a.color.a);b.setAttribute("stroke-width",e);b.setAttribute("stroke-linecap",a.cap);"number"==typeof a.join?(b.setAttribute("stroke-linejoin",
"miter"),b.setAttribute("stroke-miterlimit",a.join)):b.setAttribute("stroke-linejoin",a.join);var f=a.style.toLowerCase();f in p.dasharray&&(f=p.dasharray[f]);if(f instanceof Array){var f=l._toArray(f),g;for(g=0;g<f.length;++g)f[g]*=e;if("butt"!=a.cap){for(g=0;g<f.length;g+=2)f[g]-=e,1>f[g]&&(f[g]=1);for(g=1;g<f.length;g+=2)f[g]+=e}f=f.join(",")}b.setAttribute("stroke-dasharray",f);b.setAttribute("dojoGfxStrokeStyle",a.style)}return this},_getParentSurface:function(){for(var a=this.parent;a&&!(a instanceof
c.Surface);a=a.parent);return a},_setFillObject:function(a,b){var d=p.xmlns.svg;this.fillStyle=a;var e=this._getParentSurface().defNode,f=this.rawNode.getAttribute("fill");if(f=p.getRef(f))if(f.tagName.toLowerCase()!=b.toLowerCase()){var g=f.id;f.parentNode.removeChild(f);f=k(d,b);f.setAttribute("id",g);e.appendChild(f)}else for(;f.childNodes.length;)f.removeChild(f.lastChild);else f=k(d,b),f.setAttribute("id",c._base._getUniqueId()),e.appendChild(f);if("pattern"==b)f.setAttribute("patternUnits",
"userSpaceOnUse"),d=k(d,"image"),d.setAttribute("x",0),d.setAttribute("y",0),d.setAttribute("width",(0>a.width?0:a.width).toFixed(8)),d.setAttribute("height",(0>a.height?0:a.height).toFixed(8)),d.setAttributeNS?d.setAttributeNS(p.xmlns.xlink,"xlink:href",a.src):d.setAttribute("xlink:href",a.src),f.appendChild(d);else{f.setAttribute("gradientUnits","userSpaceOnUse");for(e=0;e<a.colors.length;++e){var g=a.colors[e],h=k(d,"stop"),l=g.color=c.normalizeColor(g.color);h.setAttribute("offset",g.offset.toFixed(8));
h.setAttribute("stop-color",l.toCss());h.setAttribute("stop-opacity",l.a);f.appendChild(h)}}this.rawNode.setAttribute("fill","url(#"+f.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return f},_applyTransform:function(){if(this.matrix){var a=this.matrix;this.rawNode.setAttribute("transform","matrix("+a.xx.toFixed(8)+","+a.yx.toFixed(8)+","+a.xy.toFixed(8)+","+a.yy.toFixed(8)+","+a.dx.toFixed(8)+","+a.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");
return this},setRawNode:function(a){a=this.rawNode=a;"image"!=this.shape.type&&a.setAttribute("fill","none");a.setAttribute("fill-opacity",0);a.setAttribute("stroke","none");a.setAttribute("stroke-opacity",0);a.setAttribute("stroke-width",1);a.setAttribute("stroke-linecap","butt");a.setAttribute("stroke-linejoin","miter");a.setAttribute("stroke-miterlimit",4);a.__gfxObject__=this},setShape:function(a){this.shape=c.makeParameters(this.shape,a);for(var b in this.shape)if("type"!=b){a=this.shape[b];
if("width"===b||"height"===b)a=0>a?0:a;this.rawNode.setAttribute(b,a)}this.bbox=null;return this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);return this},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this},setClip:function(a){this.inherited(arguments);var b=a?"width"in a?"rect":"cx"in a?"ellipse":"points"in a?"polyline":"d"in a?"path":null:null;if(a&&!b)return this;"polyline"===b&&(a=l.clone(a),a.points=
a.points.join(","));var c,d=f.get(this.rawNode,"clip-path");d&&(c=g.byId(d.match(/gfx_clip[\d]+/)[0]))&&c.removeChild(c.childNodes[0]);a?(c?(b=k(p.xmlns.svg,b),c.appendChild(b)):(d="gfx_clip"+ ++u,this.rawNode.setAttribute("clip-path","url(#"+d+")"),c=k(p.xmlns.svg,"clipPath"),b=k(p.xmlns.svg,b),c.appendChild(b),this.rawNode.parentNode.insertBefore(c,this.rawNode),f.set(c,"id",d)),f.set(b,a)):(this.rawNode.removeAttribute("clip-path"),c&&c.parentNode.removeChild(c));return this},_removeClipNode:function(){var a,
b=f.get(this.rawNode,"clip-path");b&&(a=g.byId(b.match(/gfx_clip[\d]+/)[0]))&&a.parentNode.removeChild(a);return a}});p.Group=q("dojox.gfx.svg.Group",p.Shape,{constructor:function(){e.Container._init.call(this)},setRawNode:function(a){this.rawNode=a;this.rawNode.__gfxObject__=this},destroy:function(){this.clear(!0);p.Shape.prototype.destroy.apply(this,arguments)}});p.Group.nodeType="g";p.Rect=q("dojox.gfx.svg.Rect",[p.Shape,e.Rect],{setShape:function(a){this.shape=c.makeParameters(this.shape,a);this.bbox=
null;for(var b in this.shape)if("type"!=b&&"r"!=b){a=this.shape[b];if("width"===b||"height"===b)a=0>a?0:a;this.rawNode.setAttribute(b,a)}null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),this.rawNode.setAttribute("rx",this.shape.r));return this}});p.Rect.nodeType="rect";p.Ellipse=q("dojox.gfx.svg.Ellipse",[p.Shape,e.Ellipse],{});p.Ellipse.nodeType="ellipse";p.Circle=q("dojox.gfx.svg.Circle",[p.Shape,e.Circle],{});p.Circle.nodeType="circle";p.Line=q("dojox.gfx.svg.Line",[p.Shape,e.Line],
{});p.Line.nodeType="line";p.Polyline=q("dojox.gfx.svg.Polyline",[p.Shape,e.Polyline],{setShape:function(a,b){a&&a instanceof Array?(this.shape=c.makeParameters(this.shape,{points:a}),b&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.shape=c.makeParameters(this.shape,a);this.bbox=null;this._normalizePoints();for(var d=[],e=this.shape.points,f=0;f<e.length;++f)d.push(e[f].x.toFixed(8),e[f].y.toFixed(8));this.rawNode.setAttribute("points",d.join(" "));return this}});p.Polyline.nodeType=
"polyline";p.Image=q("dojox.gfx.svg.Image",[p.Shape,e.Image],{setShape:function(a){this.shape=c.makeParameters(this.shape,a);this.bbox=null;a=this.rawNode;for(var b in this.shape)if("type"!=b&&"src"!=b){var d=this.shape[b];if("width"===b||"height"===b)d=0>d?0:d;a.setAttribute(b,d)}a.setAttribute("preserveAspectRatio","none");a.setAttributeNS?a.setAttributeNS(p.xmlns.xlink,"xlink:href",this.shape.src):a.setAttribute("xlink:href",this.shape.src);a.__gfxObject__=this;return this}});p.Image.nodeType=
"image";p.Text=q("dojox.gfx.svg.Text",[p.Shape,e.Text],{setShape:function(a){this.shape=c.makeParameters(this.shape,a);this.bbox=null;a=this.rawNode;var b=this.shape;a.setAttribute("x",b.x);a.setAttribute("y",b.y);a.setAttribute("text-anchor",b.align);a.setAttribute("text-decoration",b.decoration);a.setAttribute("rotate",b.rotated?90:0);a.setAttribute("kerning",b.kerning?"auto":0);a.setAttribute("text-rendering",y);a.firstChild?a.firstChild.nodeValue=b.text:a.appendChild(s(b.text));return this},getTextWidth:function(){var a=
this.rawNode,b=a.parentNode,a=a.cloneNode(!0);a.style.visibility="hidden";var c=0,d=a.firstChild.nodeValue;b.appendChild(a);if(""!=d)for(;!c;)c=a.getBBox?parseInt(a.getBBox().width):68;b.removeChild(a);return c},getBoundingBox:function(){var a=null;if(this.getShape().text)try{a=this.rawNode.getBBox()}catch(b){a={x:0,y:0,width:0,height:0}}return a}});p.Text.nodeType="text";p.Path=q("dojox.gfx.svg.Path",[p.Shape,b.Path],{_updateWithSegment:function(a){this.inherited(arguments);"string"==typeof this.shape.path&&
this.rawNode.setAttribute("d",this.shape.path)},setShape:function(a){this.inherited(arguments);this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this}});p.Path.nodeType="path";p.TextPath=q("dojox.gfx.svg.TextPath",[p.Shape,b.TextPath],{_updateWithSegment:function(a){this.inherited(arguments);this._setTextPath()},setShape:function(a){this.inherited(arguments);this._setTextPath();return this},_setTextPath:function(){if("string"==typeof this.shape.path){var a=
this.rawNode;if(!a.firstChild){var b=k(p.xmlns.svg,"textPath"),d=s("");b.appendChild(d);a.appendChild(b)}b=(b=a.firstChild.getAttributeNS(p.xmlns.xlink,"href"))&&p.getRef(b);if(!b&&(d=this._getParentSurface())){var d=d.defNode,b=k(p.xmlns.svg,"path"),e=c._base._getUniqueId();b.setAttribute("id",e);d.appendChild(b);a.firstChild.setAttributeNS?a.firstChild.setAttributeNS(p.xmlns.xlink,"xlink:href","#"+e):a.firstChild.setAttribute("xlink:href","#"+e)}b&&b.setAttribute("d",this.shape.path)}},_setText:function(){var a=
this.rawNode;if(!a.firstChild){var b=k(p.xmlns.svg,"textPath"),c=s("");b.appendChild(c);a.appendChild(b)}a=a.firstChild;b=this.text;a.setAttribute("alignment-baseline","middle");switch(b.align){case "middle":a.setAttribute("text-anchor","middle");a.setAttribute("startOffset","50%");break;case "end":a.setAttribute("text-anchor","end");a.setAttribute("startOffset","100%");break;default:a.setAttribute("text-anchor","start"),a.setAttribute("startOffset","0%")}a.setAttribute("baseline-shift","0.5ex");
a.setAttribute("text-decoration",b.decoration);a.setAttribute("rotate",b.rotated?90:0);a.setAttribute("kerning",b.kerning?"auto":0);a.firstChild.data=b.text}});p.TextPath.nodeType="text";var z=534<function(){var a=/WebKit\/(\d*)/.exec(r);return a?a[1]:0}();p.Surface=q("dojox.gfx.svg.Surface",e.Surface,{constructor:function(){e.Container._init.call(this)},destroy:function(){e.Container.clear.call(this,!0);this.defNode=null;this.inherited(arguments)},setDimensions:function(a,b){if(!this.rawNode)return this;
var c=0>a?0:a,d=0>b?0:b;this.rawNode.setAttribute("width",c);this.rawNode.setAttribute("height",d);z&&(this.rawNode.style.width=c,this.rawNode.style.height=d);return this},getDimensions:function(){return this.rawNode?{width:c.normalizedLength(this.rawNode.getAttribute("width")),height:c.normalizedLength(this.rawNode.getAttribute("height"))}:null}});p.createSurface=function(a,b,d){var e=new p.Surface;e.rawNode=k(p.xmlns.svg,"svg");e.rawNode.setAttribute("overflow","hidden");b&&e.rawNode.setAttribute("width",
0>b?0:b);d&&e.rawNode.setAttribute("height",0>d?0:d);b=k(p.xmlns.svg,"defs");e.rawNode.appendChild(b);e.defNode=b;e._parent=g.byId(a);e._parent.appendChild(e.rawNode);c._base._fixMsTouchAction(e);return e};n={_setFont:function(){var a=this.fontStyle;this.rawNode.setAttribute("font-style",a.style);this.rawNode.setAttribute("font-variant",a.variant);this.rawNode.setAttribute("font-weight",a.weight);this.rawNode.setAttribute("font-size",a.size);this.rawNode.setAttribute("font-family",a.family)}};var v=
e.Container;q=p.Container={openBatch:function(){if(!this._batch){var b;b=p.useSvgWeb?a.doc.createDocumentFragment(!0):a.doc.createDocumentFragment();this.fragment=b}++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),delete this.fragment);return this},add:function(a){this!=a.getParent()&&(this.fragment?this.fragment.appendChild(a.rawNode):this.rawNode.appendChild(a.rawNode),v.add.apply(this,
arguments),a.setClip(a.clip));return this},remove:function(a,b){this==a.getParent()&&(this.rawNode==a.rawNode.parentNode&&this.rawNode.removeChild(a.rawNode),this.fragment&&this.fragment==a.rawNode.parentNode&&this.fragment.removeChild(a.rawNode),a._removeClipNode(),v.remove.apply(this,arguments));return this},clear:function(){for(var a=this.rawNode;a.lastChild;)a.removeChild(a.lastChild);var b=this.defNode;if(b){for(;b.lastChild;)b.removeChild(b.lastChild);a.appendChild(b)}return v.clear.apply(this,
arguments)},getBoundingBox:v.getBoundingBox,_moveChildToFront:v._moveChildToFront,_moveChildToBack:v._moveChildToBack};b=p.Creator={createObject:function(a,b){if(!this.rawNode)return null;var c=new a,d=k(p.xmlns.svg,a.nodeType);c.setRawNode(d);c.setShape(b);this.add(c);return c}};l.extend(p.Text,n);l.extend(p.TextPath,n);l.extend(p.Group,q);l.extend(p.Group,e.Creator);l.extend(p.Group,b);l.extend(p.Surface,q);l.extend(p.Surface,e.Creator);l.extend(p.Surface,b);p.fixTarget=function(a,b){a.gfxTarget||
(a.gfxTarget=t&&a.target.wholeText?a.target.parentElement.__gfxObject__:a.target.__gfxObject__);return!0};p.useSvgWeb&&(p.createSurface=function(a,b,d){var e=new p.Surface;b=0>b?0:b;d=0>d?0:d;if(!b||!d){var f=m.position(a);b=b||f.w;d=d||f.h}a=g.byId(a);var f=a.id?a.id+"_svgweb":c._base._getUniqueId(),h=k(p.xmlns.svg,"svg");h.id=f;h.setAttribute("width",b);h.setAttribute("height",d);svgweb.appendChild(h,a);h.addEventListener("SVGLoad",function(){e.rawNode=this;e.isLoaded=!0;var a=k(p.xmlns.svg,"defs");
e.rawNode.appendChild(a);e.defNode=a;if(e.onLoad)e.onLoad(e)},!1);e.isLoaded=!1;return e},p.Surface.extend({destroy:function(){var a=this.rawNode;svgweb.removeChild(a,a.parentNode)}}),n={connect:function(a,b,c){"on"===a.substring(0,2)&&(a=a.substring(2));c=2==arguments.length?b:l.hitch(b,c);this.getEventSource().addEventListener(a,c,!1);return[this,a,c]},disconnect:function(a){this.getEventSource().removeEventListener(a[1],a[2],!1);delete a[0]}},l.extend(p.Shape,n),l.extend(p.Surface,n));return p})},
"dojox/xml/parser":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(l){l.getObject("xml.parser",!0,dojox);dojox.xml.parser.parse=function(n,a){var g=l.doc,q;a=a||"text/xml";if(n&&l.trim(n)&&"DOMParser"in l.global){q=(new DOMParser).parseFromString(n,a);g=q.documentElement;if("parsererror"==g.nodeName&&"http://www.mozilla.org/newlayout/xml/parsererror.xml"==g.namespaceURI){var h=g.getElementsByTagNameNS("http://www.mozilla.org/newlayout/xml/parsererror.xml",
"sourcetext")[0];h&&(h=h.firstChild.data);throw Error("Error parsing text "+g.firstChild.data+" \n"+h);}return q}if("ActiveXObject"in l.global){g=function(a){return"MSXML"+a+".DOMDocument"};g=["Microsoft.XMLDOM",g(6),g(4),g(3),g(2)];l.some(g,function(a){try{q=new ActiveXObject(a)}catch(d){return!1}return!0});if(n&&q&&(q.async=!1,q.loadXML(n),g=q.parseError,0!==g.errorCode))throw Error("Line: "+g.line+"\nCol: "+g.linepos+"\nReason: "+g.reason+"\nError Code: "+g.errorCode+"\nSource: "+g.srcText);if(q)return q}else if(g.implementation&&
g.implementation.createDocument){if(n&&l.trim(n)&&g.createElement){h=g.createElement("xml");h.innerHTML=n;var m=g.implementation.createDocument("foo","",null);l.forEach(h.childNodes,function(a){m.importNode(a,!0)});return m}return g.implementation.createDocument("","",null)}return null};dojox.xml.parser.textContent=function(n,a){if(1<arguments.length)return dojox.xml.parser.replaceChildren(n,(n.ownerDocument||l.doc).createTextNode(a)),a;if(void 0!==n.textContent)return n.textContent;var g="";n&&l.forEach(n.childNodes,
function(a){switch(a.nodeType){case 1:case 5:g+=dojox.xml.parser.textContent(a);break;case 3:case 2:case 4:g+=a.nodeValue}});return g};dojox.xml.parser.replaceChildren=function(n,a){var g=[];l.isIE&&l.forEach(n.childNodes,function(a){g.push(a)});dojox.xml.parser.removeChildren(n);l.forEach(g,l.destroy);l.isArray(a)?l.forEach(a,function(a){n.appendChild(a)}):n.appendChild(a)};dojox.xml.parser.removeChildren=function(l){for(var a=l.childNodes.length;l.hasChildNodes();)l.removeChild(l.firstChild);return a};
dojox.xml.parser.innerXML=function(l){return l.innerXML?l.innerXML:l.xml?l.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(l):null};return dojox.xml.parser})},"esri/dijit/Attribution":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/kernel dojo/has dojo/query dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom-class dojo/dom-geometry ../kernel ../lang ../SpatialReference ../geometry/webMercatorUtils ../geometry/Extent".split(" "),
function(l,n,a,g,q,h,m,f,d,c,e,b,k,s,p,r,t,x){return l(null,{declaredClass:"esri.dijit.Attribution",itemDelimiter:" | ",listClass:"esriAttributionList",itemClass:"esriAttributionItem",lastItemClass:"esriAttributionLastItem",delimiterClass:"esriAttributionDelim",constructor:function(a,b){try{n.mixin(this,a);this._attributions={};this._pendingDfds={};this._activeLayers=[];this._sharedLayers=[];var c=this.domNode=f.byId(b),e=this.map,k="\x3cspan class\x3d'"+this.listClass+"'\x3e\x3c/span\x3e";c&&(d.set(c,
"innerHTML",k),this.listNode=q.query(".esriAttributionList",c)[0],this.itemNodes={});this._eventConnections=[g.connect(e,"onLayerAdd",this,this._onLayerAdd),g.connect(e,"onLayerRemove",this,this._onLayerRemove),g.connect(e,"onLayerSuspend",this,this._onLayerSuspend),g.connect(e,"onLayerResume",this,this._onLayerResume),g.connect(e,"onExtentChange",this,this._onExtentChange)];if(e.loaded){var h=e.layerIds.concat(e.graphicsLayerIds),l,p,m=h.length;for(p=0;p<m;p++)l=e.getLayer(h[p]),l.loaded&&this._onLayerAdd(l)}}catch(r){}},
startup:function(){},destroy:function(){a.forEach(this._eventConnections,g.disconnect);c.destroy(this.listNode);this.map=this.domNode=this._eventConnections=this.listNode=this._attributions=this._pendingDfds=this.itemNodes=this._activeLayers=this._lastItem=this._sharedLayers=null},_onLayerAdd:function(a){try{var b=this._attributions,c=a.id;if(!p.isDefined(b[c])&&a.showAttribution)if(a.hasAttributionData){var d=a.getAttributionData();this._pendingDfds[c]=1;b[c]=d;d.addBoth(n.partial(this._onAttributionLoad,
this,a))}else b[c]=a.copyright||a.copyrightText||"",b[c]?(a.suspended||this._activeLayers.push(c),this._createNode(c)):this._onLayerRemove(a)}catch(e){}},_onAttributionLoad:function(a,b,c){var d=a._attributions,e=a._pendingDfds,f=b.id;if(e&&e[f]){delete e[f];if(!c||c instanceof Error)c="";d[f]=c?a._createIndexByLevel(c,-1!==b.declaredClass.toLowerCase().indexOf("vetiledlayer")):b.copyright||b.copyrightText||"";d[f]?(b.suspended||a._activeLayers.push(f),a._createNode(f)):a._onLayerRemove(b)}},_onLayerRemove:function(b){try{var d=
b.id,e=this.itemNodes,f,g=-1;this._onLayerSuspend(b);delete this._attributions[d];delete this._pendingDfds[d];f=this._getGroupIndex(d);-1!==f&&(g=a.indexOf(this._sharedLayers[f],d),-1!==g&&(this._sharedLayers[f].splice(g,1),1>=this._sharedLayers[f].length&&this._sharedLayers.splice(f,1)));e[d]&&-1===g&&c.destroy(e[d]);delete e[d];this._updateLastItem()}catch(k){}},_onLayerSuspend:function(b){try{var c=b.id;if(this._attributions[c]){var d=a.indexOf(this._activeLayers,c),e=this.itemNodes[c];-1!==d&&
this._activeLayers.splice(d,1);e&&this._toggleItem(e,!1,this._getGroupIndex(c))}}catch(f){}},_onLayerResume:function(b){try{var c=b.id,e=this._attributions[c],f=this.itemNodes[c];if(e&&(-1===a.indexOf(this._activeLayers,c)&&this._activeLayers.push(c),f)){var g=n.isString(e)?e:this._getContributorsList(e,this.map.extent,this.map.getLevel());n.isString(e)||d.set(f,"innerHTML",g?g+this._getDelimiter():"");g&&this._toggleItem(f,!0,this._getGroupIndex(c))}}catch(k){}},_onExtentChange:function(a,b,c,e){try{var f=
this._activeLayers,g=this._attributions,k=this.itemNodes,h,l,p,m,q=f.length||0;for(m=0;m<q;m++)if(l=f[m],p=g[l],(h=k[l])&&!n.isString(p)){var r=this._getContributorsList(p,a,e?e.level:-1);d.set(h,"innerHTML",r?r+this._getDelimiter():"");this._toggleItem(h,!!r,-1)}}catch(t){}this._adjustCursorStyle()},_createNode:function(a){if(this.domNode){var b=this._checkShareInfo(a),d=b&&b.sharedWith,d=d&&this.itemNodes[d],e=this.map,f=this._attributions[a],f=n.isString(f)?f:this._getContributorsList(f,e.extent,
e.getLevel()),e=!!f&&!e.getLayer(a).suspended;d?(this.itemNodes[a]=d,this._toggleItem(d,e,b.index)):(a=this.itemNodes[a]=c.create("span",{"class":this.itemClass,innerHTML:f?f+this._getDelimiter():"",style:{display:e?"inline":"none"}},this.listNode),e&&this._setLastItem(a));this._adjustCursorStyle()}},_checkShareInfo:function(b){var c=this._attributions,d,e,f=-1,g=c[b],k;if(g&&n.isString(g)){for(e in c)if(d=c[e],e!==b&&d&&n.isString(d)&&d.length===g.length&&d.toLowerCase()===g.toLowerCase()){k=e;break}c=
this._sharedLayers;d=c.length;if(k){for(e=0;e<d;e++)if(g=c[e],-1!==a.indexOf(g,k)){f=e;g.push(b);break}-1===f&&(f=c.push([k,b])-1)}}return-1<f?{index:f,sharedWith:k}:null},_getGroupIndex:function(b){var c=this._sharedLayers,d,e=c.length,f=-1;for(d=0;d<e;d++)if(-1!==a.indexOf(c[d],b)){f=d;break}return f},_getDelimiter:function(){var a=this.itemDelimiter;return a?"\x3cspan class\x3d'"+this.delimiterClass+"'\x3e"+a+"\x3c/span\x3e":""},_toggleItem:function(b,c,d){if(-1<d&&!c){d=this._sharedLayers[d];
var f,g=d.length,k=this._activeLayers;for(f=0;f<g;f++)if(-1!==a.indexOf(k,d[f]))return}e.set(b,"display",c?"inline":"none");this._updateLastItem()},_updateLastItem:function(){var a=this.listNode.childNodes,b;b=a.length;var c;if(b)for(b-=1;0<=b;b--)if(c=a[b],"none"!==e.get(c,"display")){this._setLastItem(c);break}this._adjustCursorStyle()},_setLastItem:function(a){var c=this.itemClass,d=this.lastItemClass;this._lastItem&&b.replace(this._lastItem,c,d);a&&(b.replace(a,d,c),this._lastItem=a)},_createIndexByLevel:function(a,
b){var c=a.contributors,d,e,f,g,k=c?c.length:0,h,l,m=new r(4326),n={},q;for(g=0;g<k;g++){d=c[g];l=(e=d.coverageAreas)?e.length:0;for(h=0;h<l;h++){f=e[h];q=f.bbox;q={extent:t.geographicToWebMercator(new x(q[1],q[0],q[3],q[2],m)),attribution:d.attribution||"",zoomMin:f.zoomMin-(b&&f.zoomMin?1:0),zoomMax:f.zoomMax-(b&&f.zoomMax?1:0),score:p.isDefined(f.score)?f.score:100,objectId:g};for(f=q.zoomMin;f<=q.zoomMax;f++)n[f]=n[f]||[],n[f].push(q)}}return n},_getContributorsList:function(a,b,c){var d="";if(b&&
p.isDefined(c)&&-1<c){a=a[c];c=b.getCenter().normalize();for(var e=a?a.length:0,f=[],g={},d=0;d<e;d++)b=a[d],!g[b.objectId]&&b.extent.contains(c)&&(g[b.objectId]=1,f.push(b));f.sort(function(a,b){return b.score-a.score||a.objectId-b.objectId});e=f.length;for(d=0;d<e;d++)f[d]=f[d].attribution;d=f.join(", ")}return d},_adjustCursorStyle:function(){var a=k.position(this.listNode.parentNode,!0).h;b.contains(this.listNode.parentNode,"esriAttributionOpen")?(b.remove(this.listNode.parentNode,"esriAttributionOpen"),
a>k.position(this.listNode.parentNode,!0).h?(e.set(this.listNode.parentNode,"cursor","pointer"),b.add(this.listNode.parentNode,"esriAttributionOpen")):e.set(this.listNode.parentNode,"cursor","default")):(b.add(this.listNode.parentNode,"esriAttributionOpen"),a<k.position(this.listNode.parentNode,!0).h?e.set(this.listNode.parentNode,"cursor","pointer"):e.set(this.listNode.parentNode,"cursor","default"),b.remove(this.listNode.parentNode,"esriAttributionOpen"))}})})},"esri/dijit/Search":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Evented dojo/Deferred dojo/keys dojo/on dojo/query dojo/uacss dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-style dojo/dom-construct dojo/i18n!../nls/jsapi dojo/text!./Search/templates/Search.html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_FocusMixin dijit/a11yclick dijit/focus ../lang ../InfoTemplate ../kernel ../SpatialReference ../graphic ../promiseList ../symbols/PictureMarkerSymbol ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/TextSymbol ../symbols/Font ../geometry/Point ../geometry/Extent ../geometry/scaleUtils ../tasks/locator ../tasks/query ../Color ../styles/basic".split(" "),
function(l,n,a,g,q,h,m,f,d,c,e,b,k,s,p,r,t,x,y,u,z,v,w,A,B,D,E,C,F,K,I,G,J,H,N,Q,L,Y,X,W,U){return n([x,y,u,q],{declaredClass:"esri.dijit.Search",templateString:t,reHostedFS:/https?:\/\/services.*\.arcgis\.com/i,constructor:function(b,c){this.css={searchGroup:"searchGroup",searchInput:"searchInput",searchInputGroup:"searchInputGroup",searchBtn:"searchBtn",searchSubmit:"searchSubmit",searchIcon:"searchIcon esri-icon-search",searchButtonText:"searchButtonText",searchToggle:"searchToggle",searchToggleIcon:"searchIcon esri-icon-down-arrow",
searchMenu:"searchMenu",searchMenuHeader:"menuHeader",searchClear:"searchClear",searchClearIcon:"searchIcon esri-icon-close searchClose",searchSpinner:"searchIcon esri-icon-loading-indicator searchSpinner",searchSourceName:"sourceName",suggestionsMenu:"suggestionsMenu",sourcesMenu:"sourcesMenu",activeSource:"active",hasValue:"hasValue",hasButtonMode:"hasButtonMode",hasMultipleSources:"hasMultipleSources",showSuggestions:"showSuggestions",showSources:"showSources",showNoResults:"showNoResults",searchLoading:"searchLoading",
latLonHeader:"searchLatLongHeader",searchMoreResults:"moreResults",searchMoreResultsList:"resultsList",searchMoreResultsHeader:"moreHeader",searchMoreResultsItem:"moreItem",searchMoreResultsListHeader:"popupHeader",searchShowMoreResults:"showMoreResults",searchNoResultsMenu:"noResultsMenu",searchNoResultsBody:"noResultsBody",searchNoResultsHeader:"noResultsHeader",searchNoValueIcon:"noValueIcon esri-icon-notice-triangle",searchNoValueText:"noValueText",searchNoResultsText:"noResultsText",searchExpandContainer:"searchExpandContainer",
searchAnimateContainer:"searchAnimate",searchExpanded:"searchExpanded",searchCollapsed:"searchCollapsed",searchClearFloat:"searchClearFloat"};this._allIndex="all";this._objectIdIdentifier="_objectId";this._deferreds=[];this.defaultSource={locator:new Y("//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer"),singleLineFieldName:"SingleLine",outFields:["Addr_type","Match_addr","StAddr","City"],name:r.widgets.Search.main.esriLocatorName,localSearchOptions:{minScale:3E5,distance:5E4},placeholder:r.widgets.Search.main.placeholder,
highlightSymbol:(new F(l.toUrl("./Search/images/search-pointer.png"),36,36)).setOffset(9,18)};this.options={map:null,theme:"arcgisSearch",visible:!0,value:"",allPlaceholder:"",sources:[this.defaultSource],activeSourceIndex:0,suggestionDelay:150,enableSourcesMenu:!0,enableSuggestionsMenu:!0,enableInfoWindow:!0,showInfoWindowOnSelect:!0,enableSuggestions:!0,enableButtonMode:!1,autoNavigate:!0,autoSelect:!0,addLayersFromMap:!1,zoomScale:1E3,graphicsLayer:null,enableHighlight:!0,highlightGraphic:null,
enableLabel:!1,labelSymbol:(new J).setColor(new W([181,56,46,0.9])).setFont(new H("14px",H.STYLE_NORMAL,H.VARIANT_NORMAL,H.WEIGHT_BOLD,"Arial")),labelGraphic:null,infoTemplate:new A(r.widgets.Search.main.searchResult,'\x3cdiv class\x3d"${searchTheme}"\x3e\x3cdiv id\x3d"${searchMoreResultsId}" class\x3d"${searchMoreResults}"\x3e\x3cdiv class\x3d"${searchMoreResultsItem}"\x3e${searchResult}\x3c/div\x3e\x3cdiv\x3e${searchMoreResultsHtml}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),searchResults:null,suggestResults:null,
expanded:!1,maxLength:128,maxResults:6,maxSuggestions:6,locationToAddressDistance:1500,minCharacters:1};var d=a.mixin({},this.options,b);this.set(d);this._updateActiveSource();this._i18n=r;this._defaultSR=new D(4326);this.domNode=c},startup:function(){this.inherited(arguments);this.sources||(this.sources=[]);if(this.map)if(this.map.loaded)this._init();else f.once(this.map,"load",a.hitch(this,function(){this._init()}));else this._init()},postCreate:function(){var b=this;this.inherited(arguments);this._moreResultsId=
this.id+"_more_results";this.own(f(this.submitNode,z,a.hitch(this,this._searchButton)));this.own(f(this.sourcesBtnNode,z,a.hitch(this,this._toggleSourcesMenu)));this.own(f(this.inputNode,z,a.hitch(this,this._inputClick)));this.own(f(this.clearNode,z,a.hitch(this,this._clearButton)));this.own(f(this.formNode,"submit",a.hitch(this,function(a){a.preventDefault();this._cancelSuggest();this.search()})));this.own(f(this.inputNode,"keyup",a.hitch(this,function(a){this._inputKey(a)})));this.own(f(this.sourcesBtnNode,
"keyup",a.hitch(this,function(a){this._sourceBtnKey(a)})));this.own(f(this.suggestionsNode,"li:click, li:keyup",function(a){b._suggestionsEvent(a,this)}));this.own(f(this.sourcesNode,"li:click, li:keyup",function(a){b._sourcesEvent(a,this)}));this.own(f(this.inputNode,"input, paste",a.hitch(this,function(){this._suggestDelay()})));this.map&&this.map.infoWindow&&(this.map.infoWindow.domNode&&this.enableInfoWindow)&&(this.own(f(this.map.infoWindow.domNode,"#"+this._moreResultsId+"_show:click",a.hitch(this,
function(a){this._showMoreResultsClick(a)}))),this.own(f(this.map.infoWindow.domNode,"#"+this._moreResultsId+"_list li a:click",a.hitch(this,function(a){this._moreResultsClick(a)}))),this.own(f(this.map.infoWindow.domNode,"#"+this._moreResultsId+" [data-switch-coordinates]:click",a.hitch(this,function(a){this._switchCoordinatesClick(a)}))));this.value&&this._checkStatus();this._hideMenus();this._updateVisible();this._insertSources(this.sources);this._setPlaceholder(this.activeSourceIndex);this._updateButtonMode(this.enableButtonMode);
this.toggle(this.expanded)},destroy:function(){p.empty(this.domNode);this.inherited(arguments)},clear:function(){this.clearGraphics();b.get(this.inputNode,"value")&&b.set(this.inputNode,"value","");this._changeAttrValue("value","");this.set("searchResults",null);this.set("suggestResults",null);k.remove(this.containerNode,this.css.hasValue);b.set(this.clearNode,"title","");this._hideMenus();this._closePopup();this._hideLoading();this.emit("clear-search",{})},show:function(){s.set(this.domNode,"display",
"block")},hide:function(){s.set(this.domNode,"display","none")},expand:function(){this.enableButtonMode&&(k.add(this.containerNode,this.css.searchExpanded),k.remove(this.containerNode,this.css.searchCollapsed),this._hideMenus(),this.set("expanded",!0))},collapse:function(){this.enableButtonMode&&(k.remove(this.containerNode,this.css.searchExpanded),k.add(this.containerNode,this.css.searchCollapsed),this._hideMenus(),this.set("expanded",!1))},toggle:function(a){this.enableButtonMode&&("undefined"===
typeof a&&(a=!this.expanded),a?this.expand():this.collapse())},search:function(b){var c=new h;this._searchDeferred(b).then(a.hitch(this,function(a){var b=a.results;this.set("searchResults",b);0===a.numResults&&(this._noResults(a.value),this._showNoResultsMenu());this._hideLoading();this.emit("search-results",a);this._selectFirstResult(b,a.activeSourceIndex);c.resolve(b)}),a.hitch(this,function(a){c.reject(a)}));return c.promise},suggest:function(b){var c=new h;this._suggestDeferred(b).then(a.hitch(this,
function(a){if(a){var b=a.results;this.set("suggestResults",b);this._insertSuggestions(b,a.value);this.emit("suggest-results",a);c.resolve(b)}}),a.hitch(this,function(a){c.reject(a)}));return c.promise},select:function(b){var c=this._getDefaultSymbol(b),d=this.labelSymbol,e,f=this.sources,g=this.activeSourceIndex,k=this.enableHighlight,h=this.enableLabel,l=this.autoNavigate,p=this.showInfoWindowOnSelect,m=this.enableInfoWindow,n=this.infoTemplate,q=new E(b.feature.toJson());if(g===this._allIndex){var r=
this._getSourceIndexOfResult(b);null!==r&&(e=f[r],g=r)}else e=f[g];e&&(e.hasOwnProperty("highlightSymbol")&&(c=e.highlightSymbol),e.hasOwnProperty("labelSymbol")&&(d=e.labelSymbol),e.hasOwnProperty("enableHighlight")&&(k=e.enableHighlight),e.hasOwnProperty("enableLabel")&&(h=e.enableLabel),e.hasOwnProperty("autoNavigate")&&(l=e.autoNavigate),e.hasOwnProperty("showInfoWindowOnSelect")&&(p=e.showInfoWindowOnSelect),e.hasOwnProperty("enableInfoWindow")&&(m=e.enableInfoWindow),e.hasOwnProperty("infoTemplate")?
n=e.infoTemplate:e.featureLayer&&e.featureLayer.infoTemplate&&(n=e.featureLayer.infoTemplate));this._hideMenus();this._hideLoading();if(q){var f=this.highlightGraphic,t=this.graphicsLayer,r=this.labelGraphic,s=a.mixin({},q.attributes,{searchTheme:this.theme,searchResult:this._searchResultHTML(b),searchMoreResults:this.css.searchMoreResults,searchMoreResultsItem:this.css.searchMoreResultsItem,searchMoreResultsId:this._moreResultsId,searchMoreResultsHtml:this._moreResultsHTML(b)}),u=null;m&&(u=n);r?
(r.setGeometry(q.geometry),r.setAttributes(s),r.setSymbol(d)):(r=new E(q.geometry,d,s),h&&(t?t.add(r):this.map&&this.map.graphics&&this.map.graphics.add(r)));r&&r.symbol&&"textsymbol"===r.symbol.type&&r.symbol.setText(b.name);f?(f.setGeometry(q.geometry),f.setAttributes(s),f.setInfoTemplate(u),f.setSymbol(c)):(f=new E(q.geometry,c,s,u),k&&(t?t.add(f):this.map&&this.map.graphics&&this.map.graphics.add(f)));f&&f.symbol&&"textsymbol"===f.symbol.type&&f.symbol.setText(b.name);this.map&&this.map.infoWindow&&
(m&&p)&&(this.map.infoWindow.setFeatures([f]),c=this._getPointFromGeometry(f.geometry),this.map.infoWindow.show(c));this.map&&l&&b&&b.hasOwnProperty("extent")&&"function"===typeof this.map.setExtent&&this.map.setExtent(b.extent);this.set("highlightGraphic",f);this.set("labelGraphic",r)}this.emit("select-result",{result:b,source:e,sourceIndex:g})},focus:function(){v.focus(this.inputNode)},blur:function(){v.curNode&&v.curNode.blur()},clearGraphics:function(){var a=this.highlightGraphic,b=this.graphicsLayer,
c=this.labelGraphic;a&&(b?b.remove(a):this.map&&this.map.graphics&&this.map.graphics.remove(a));c&&(b?b.remove(c):this.map&&this.map.graphics&&this.map.graphics.remove(c));this.set("labelGraphic",null);this.set("highlightGraphic",null)},_init:function(){this._getMapLayers().then(a.hitch(this,function(){this.set("loaded",!0);this.emit("load",{})}))},_clearButton:function(){this.clear();v.focus(this.inputNode)},_error:function(a){return Error(this.declaredClass+" "+a)},_searchDeferred:function(b){var c=
new h,d=this.value,e=this.activeSourceIndex;b&&b.hasOwnProperty("index")&&(e=b.index);this._showLoading();this._hideMenus();this._closePopup();this.clearGraphics();(b?"string"===typeof b?this._searchQueries({text:b}):"object"===typeof b&&b.hasOwnProperty("magicKey")?this._searchQueries(b):"object"===typeof b&&b.hasOwnProperty("geometry")?this._searchQueries({geometry:b}):"object"===typeof b&&b.hasOwnProperty(this._objectIdIdentifier)?this._searchQueries(b):"object"===typeof b&&"point"===b.type?this._searchQueries({point:b}):
b instanceof Array&&2===b.length?this._searchQueries({latlon:b}):this._searchQueries({text:d}):this._searchQueries({text:d})).always(a.hitch(this,function(a){a=this._formatResults(a,e,d);c.resolve(a)}));return c.promise},_suggestDeferred:function(b){var c=new h;this._deferreds.push(c);b||(b=this.value);var d=this.activeSourceIndex;this._suggestQueries({text:b}).always(a.hitch(this,function(a){var e;if(a)for(var f=0;f<a.length;f++)a[f]&&(e=!0);e?(a=this._formatResults(a,d,b),c.resolve(a)):c.resolve()}));
return c.promise},_getDefaultSymbol:function(a){var b,c,d,e;this.map&&(e=this.map.getBasemap());e||(e="topo");a&&a.feature&&a.feature.geometry&&(d=a.feature.geometry.type);if(d){if(a=U.getSchemes({theme:"default",basemap:e,geometryType:d}))c=a.primaryScheme;if(c){c.color&&c.hasOwnProperty("opacity")&&(c.color.a=c.opacity);b=c;a=c.color;c=c.size;var f;switch(d){case "point":f=new K;f.setColor(a);f.setSize(null!==c?c:b.size);d=new I;d.setColor(b.outline.color);d.setWidth(b.outline.width);f.setOutline(d);
break;case "line":f=new I;f.setColor(a);f.setWidth(null!==c?c:b.width);break;case "polygon":f=new G,f.setColor(a),d=new I,d.setColor(b.outline.color),d.setWidth(b.outline.width),f.setOutline(d)}b=f}}return b},_selectFirstResult:function(a,b){if(this.autoSelect&&a){var c;b===this._allIndex?c=this._getFirstResult(a):a[b]&&a[b][0]&&(c=a[b][0]);c&&this.select(c)}},_getSourceIndexOfResult:function(a){var b=this.searchResults;if(b)for(var c in b)if(b[c]&&b[c].length)for(var d=0;d<b[c].length;d++)if(b[c][d]===
a)return parseInt(c,10);return null},_getFirstResult:function(a){if(a)for(var b in a)if(a[b]&&a[b][0])return a[b][0];return!1},_onFocus:function(){this.map&&"function"===typeof this.map.disableKeyboardNavigation&&this.map.disableKeyboardNavigation();this.emit("focus",{});this.inherited(arguments)},_onBlur:function(){this._hideMenus();this.map&&"function"===typeof this.map.enableKeyboardNavigation&&this.map.enableKeyboardNavigation();this.enableButtonMode&&this.loaded&&this.collapse();this.emit("blur",
{});this.inherited(arguments)},_getMapLayers:function(){var b=new h;if(this.addLayersFromMap&&this.map){var c=[],d=this.map.graphicsLayerIds;if(d&&d.length){for(var e=0;e<d.length;e++){var f=this.map.getLayer(d[e]);f&&c.push(this._featureLayerLoaded(f))}C(c).always(a.hitch(this,function(a){for(var c,d=this.sources,e=0;e<a.length;e++)a[e]&&a[e].loaded&&"Feature Layer"===a[e].type&&(d.push({featureLayer:a[e],enableSuggestions:!0}),c=!0);c&&this.set("sources",d);b.resolve()}))}else b.resolve()}else b.resolve();
return b.promise},_switchCoordinatesClick:function(a){a.preventDefault();if(a=b.get(a.target,"data-switch-coordinates"))this._cancelSuggest(),this.set("value",a),this.search()},_moreResultsClick:function(a){a.preventDefault();var c=a.target;a=parseInt(b.get(c,"data-source-index"),10);var c=parseInt(b.get(c,"data-index"),10),d=this.searchResults;d&&d[a]&&(a=d[a][c])&&this.select(a)},_showMoreResultsClick:function(a){a.preventDefault();if(a=e.byId(this._moreResultsId)){k.toggle(a,this.css.searchShowMoreResults);
var c=e.byId(this._moreResultsId+"_show");c&&(k.contains(a,this.css.searchShowMoreResults)?b.set(c,"textContent",r.widgets.Search.main.hideMoreResults):b.set(c,"textContent",r.widgets.Search.main.showMoreResults))}},_featureLayerLoaded:function(b){var c=new h;if(b.loaded)c.resolve(b);else if(b.loadError)c.reject(this._error("Layer failed to load."));else{var d,e;d=f.once(b,"load",a.hitch(this,function(){e.remove();c.resolve(b)}));e=f.once(b,"error",a.hitch(this,function(){d.remove();c.reject(this._error("Layer could not be loaded."))}))}return c.promise},
_getObjectSize:function(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b},_sourcesEvent:function(a,c){var e=b.get(c,"data-index"),f=d("li",this.sourcesNode),k=g.indexOf(f,c);e!==this._allIndex&&(e=parseInt(e,10));"click"===a.type||a.keyCode===m.ENTER?(this.set("activeSourceIndex",e),v.focus(this.inputNode),this._hideSourcesMenu()):a.keyCode===m.UP_ARROW?(a.stopPropagation(),a.preventDefault(),e=k-1,0>e?v.focus(this.sourcesBtnNode):v.focus(f[e])):a.keyCode===m.DOWN_ARROW?(a.stopPropagation(),
a.preventDefault(),e=k+1,e>=f.length?v.focus(this.sourcesBtnNode):v.focus(f[e])):a.keyCode===m.ESCAPE&&(this._hideSourcesMenu(),v.focus(this.inputNode))},_suggestionsEvent:function(a,c){var e=b.get(c,"data-source-index"),f=parseInt(b.get(c,"data-index"),10),k=d("li",this.suggestionsNode),h=this.sources,l=g.indexOf(k,c);e!==this._allIndex&&(e=parseInt(e,10));var p;this._clearQueryTimeout();"click"===a.type||a.keyCode===m.ENTER?((k=this.suggestResults)&&k[e]&&k[e][f]&&(p=k[e][f]),p&&(p.index=e,h[e].featureLayer?
(p[this._objectIdIdentifier]=p.feature.attributes[h[e].featureLayer.objectIdField],e=this._getDisplayField(h[e]),e=p.feature.attributes[e]):e=p.text,e=e?e.toString():"",this.set("value",e),this.search(p),v.focus(this.inputNode))):a.keyCode===m.BACKSPACE||a.keyCode===m.DELETE?v.focus(this.inputNode):a.keyCode===m.UP_ARROW?(a.stopPropagation(),a.preventDefault(),p=l-1,0>p?v.focus(this.inputNode):v.focus(k[p])):a.keyCode===m.DOWN_ARROW?(a.stopPropagation(),a.preventDefault(),p=l+1,p>=k.length?v.focus(this.inputNode):
v.focus(k[p])):a.keyCode===m.ESCAPE&&(this._hideMenus(),v.focus(this.inputNode))},_getResultName:function(a){var b;a.hasOwnProperty("name")&&(b=a.name.toString());b||(b=r.widgets.Search.main.untitledResult);return b},_getSuggestionName:function(a){var b;a.hasOwnProperty("name")&&(b=a.name.toString());(a=a.text||b)||(a=r.widgets.Search.main.untitledResult);return a},_searchResultHTML:function(a){var b="";if(a.feature&&a.feature.attributes&&a.feature.attributes.Addr_type&&"LatLong"===a.feature.attributes.Addr_type){var c=
a.name.split(" "),d,e;2===c.length&&(d=c[0],e=c[1]);if(e&&d){if(a=parseFloat(d),e=parseFloat(e),c=e+", "+a,b+='\x3cdiv class\x3d"'+this.css.searchMoreResultsItem+'"\x3e',b+='\x3cdiv class\x3d"'+this.css.latLonHeader+'"\x3e'+r.widgets.Search.main.lonlat+"\x3c/div\x3e",b+=a+", "+e,b=b+"\x3c/div\x3e"+('\x3cdiv class\x3d"'+this.css.searchMoreResultsItem+'"\x3e'),a!==e&&!(90<a||-90>a||180<e||-180>e))b+='\x3cdiv class\x3d"'+this.css.latLonHeader+'"\x3e'+r.widgets.Search.main.reverseLonLatHeader+"\x3c/div\x3e",
b=b+('\x3ca data-switch-coordinates\x3d"'+c+'" tabindex\x3d"0" href\x3d"#"\x3e'+c+"\x3c/a\x3e")+"\x3c/div\x3e"}else b=a.name}else b=a.name;return b},_moreResultsHTML:function(a){var b="",c="",d=this.searchResults,e=this.sources,f=0;if(d){var c=c+('\x3cdiv class\x3d"'+this.css.searchMoreResultsItem+'"\x3e'),c=c+('\x3ca href\x3d"#" id\x3d"'+this._moreResultsId+'_show"\x3e'+r.widgets.Search.main.showMoreResults+"\x3c/a\x3e"),c=c+"\x3c/div\x3e"+('\x3cdiv class\x3d"'+this.css.searchMoreResultsList+'"\x3e'),
c=c+('\x3cdiv id\x3d"'+this._moreResultsId+'_list"\x3e'),g;for(g in d)if(d[g]){var k=d[g].length;if(k){var h=1===k&&d[g][0]===a;if(1<this._getObjectSize(d)&&!h)var l=this._getSourceName(g),c=c+('\x3cdiv class\x3d"'+this.css.searchMoreResultsListHeader+'"\x3e'+l+"\x3c/div\x3e");if(k&&!h){c+="\x3cul\x3e";l=e[g].maxResults||this.maxResults;for(h=0;h<k&&h<l;++h)if(d[g][h]!==a){var p=this._getResultName(d[g][h]),c=c+('\x3cli\x3e\x3ca tabindex\x3d"0" data-index\x3d"'+h+'" data-source-index\x3d"'+g+'" href\x3d"#"\x3e'+
p+"\x3c/a\x3e\x3c/li\x3e");f++}c+="\x3c/ul\x3e"}}}c+="\x3c/div\x3e\x3c/div\x3e"}f&&(b+=c);return b},_validField:function(a,b){return a.getField(b)},_validFields:function(a,b){if(a&&b&&b.length){for(var c=0;c<b.length;c++)if(!this._validField(a,b[c]))return!1;return!0}return!1},_getCodedName:function(a,b){if(a&&a.length)for(var c=0,d=a.length;c<d;c++){var e=a[c];if(e.code===b)return e.name}},_getCodedValue:function(a,b,c){if(a&&a.length)for(var d=0,e=a.length;d<e;d++){var f=a[d],g=f.name,k=b;c||(g=
g.toLowerCase(),k=k.toLowerCase());if(g===k)return f.code}return!1},_whereClause:function(a,b,c,d){var e=null;if(a){var f="";this.reHostedFS.test(b.url)&&this._containsNonLatinCharacter(a)&&(f="N");if(c&&c.length)for(var g=0,k=c.length;g<k;g++){var h="",l=a,h=c[g],p=b.getField(h),m=b.getDomain(h);m&&"codedValue"===m.type&&(l=this._getCodedValue(m.codedValues,l,d));l&&(p=p.type,"esriFieldTypeString"===p||"esriFieldTypeDate"===p?h=d?h+" \x3d "+f+"'"+l+"'":"UPPER("+h+") LIKE "+f+"'%"+l.toUpperCase()+
"%'":"esriFieldTypeSmallInteger"===p||"esriFieldTypeInteger"===p||"esriFieldTypeSingle"===p||"esriFieldTypeDouble"===p?(l=parseFloat(l),h=isNaN(l)?!1:h+" \x3d "+l):h=h+" \x3d "+l,h&&(e=e?e+" or ":"",e+=h))}}return e},_suggest:function(b){b||(b={index:this.activeSourceIndex,text:this.value});var c=new h,d=b.index,e=this.sources[d],f=this.enableSuggestions;e.hasOwnProperty("enableSuggestions")&&(f=e.enableSuggestions);var k=0,l;b.hasOwnProperty("text")&&b.text&&(l=a.trim(b.text),k=b.text.length);b=
e.minCharacters||this.minCharacters;if(f&&l&&k>=b&&this._supportsPagination(e)){var p="";e.prefix&&(p+=e.prefix);p+=l;e.suffix&&(p+=e.suffix);var m=this._defaultSR;this.map&&(m=this.map.spatialReference);f={};if(e.locator){e.categories&&(f.categories=e.categories);e.locator.outSpatialReference=m;if(this.map&&e.localSearchOptions&&(e.localSearchOptions.hasOwnProperty("distance")&&e.localSearchOptions.hasOwnProperty("minScale"))&&(k=this._getScale(),!e.localSearchOptions.minScale||k&&k<=parseFloat(e.localSearchOptions.minScale)))f.location=
this.map.extent.getCenter(),f.distance=e.localSearchOptions.distance;f.text=p;e.searchExtent&&(f.searchExtent=e.searchExtent);f.maxSuggestions=e.maxSuggestions||this.maxSuggestions;e.sourceCountry&&(f.countryCode=e.sourceCountry);e.countryCode&&(f.countryCode=e.countryCode);e.locator.suggestLocations(f).then(a.hitch(this,function(a){c.resolve(a)}),a.hitch(this,function(a){a||(a=this._error("Locator suggestLocations could not be performed."));c.reject(a)}))}else e.featureLayer?this._featureLayerLoaded(e.featureLayer).then(a.hitch(this,
function(){var b=this._getDisplayField(e),f=e.searchFields||[b],k=[];e.suggestionTemplate?(e.suggestionTemplate.replace(/(?:\$\{([^}]+)\})/g,function(a,b){k.push(b)}),-1===g.indexOf(k,e.featureLayer.objectIdField)&&k.push(e.featureLayer.objectIdField)):k=[b,e.featureLayer.objectIdField];var b=this._validField(e.featureLayer,b),h=this._validFields(e.featureLayer,k),l=this._validFields(e.featureLayer,f);if(!b||!h||!l)c.reject(this._error("Invalid FeatureLayer field"));else{b=new X;b.outSpatialReference=
m;b.returnGeometry=!1;b.num=e.maxSuggestions||this.maxSuggestions;b.outFields=k;e.searchExtent&&(b.geometry=e.searchExtent);var n;if(f=this._whereClause(p,e.featureLayer,f,!1))b.where=f,n=!0;n?e.featureLayer.queryFeatures(b,a.hitch(this,function(a){var b;(a=a.features)&&(b=this._hydrateResults(a,d,!0));c.resolve(b)}),a.hitch(this,function(a){a||(a=this._error("FeatureLayer queryFeatures errored with suggestions"));c.reject(a)})):c.resolve()}})):c.reject(this._error("Invalid source"))}else c.resolve();
return c.promise},_supportsPagination:function(a){var b;a.locator?b=!0:a.featureLayer&&a.featureLayer.advancedQueryCapabilities&&a.featureLayer.advancedQueryCapabilities.supportsPagination&&(b=!0);return b},_suggestQueries:function(a){var b=this.sources,c=this.activeSourceIndex,d=[],e;if(c===this._allIndex)for(c=0;c<b.length;c++)e=a,e.index=c,e=this._suggest(e),d.push(e);else a.index=c,e=this._suggest(a),d.push(e);return C(d)},_getPointFromGeometry:function(a){var b;switch(a.type){case "extent":b=
a.getCenter();break;case "multipoint":b=a.getExtent().getCenter();break;case "point":b=a;break;case "polygon":b=a.getExtent().getCenter();break;case "polyline":b=a.getExtent().getCenter()}return b},_searchQueries:function(a){a.hasOwnProperty("index")||(a.index=this.activeSourceIndex);var b=[],c;if(a.index===this._allIndex)for(var d=this.sources,e=0;e<d.length;e++)c=a,c.index=e,c=this._search(c),b.push(c);else a=this._search(a),b.push(a);return C(b)},_searchButton:function(){this.enableButtonMode&&
!this.expanded?(this.expand(),v.focus(this.inputNode)):(this._cancelSuggest(),this.search())},_search:function(b){b||(b={text:this.value,magicKey:null,geometry:null,point:null,index:this.activeSourceIndex,latlon:null});var c,d=new h,e=b.index,f=this.sources[e],g;b.hasOwnProperty("text")&&b.text&&(g=a.trim(b.text));if(f){var k="";f.prefix&&(k+=f.prefix);k+=g;f.suffix&&(k+=f.suffix);var l=this._defaultSR;this.map&&(l=this.map.spatialReference);if(f.locator)if(b.hasOwnProperty("text")&&g){var p={};f.categories&&
(p.categories=f.categories);l&&(f.locator.outSpatialReference=l);if(this.map&&f.localSearchOptions&&f.localSearchOptions.hasOwnProperty("distance")&&f.localSearchOptions.hasOwnProperty("minScale")){var m=this._getScale();if(!f.localSearchOptions.minScale||m&&m<=parseFloat(f.localSearchOptions.minScale))p.location=this.map.extent.getCenter(),p.distance=f.localSearchOptions.distance}p.address={};p.maxLocations=f.maxResults||this.maxResults;f.searchExtent&&(p.searchExtent=f.searchExtent);f.sourceCountry&&
(p.countryCode=f.sourceCountry);f.countryCode&&(p.countryCode=f.countryCode);b.magicKey&&(p.magicKey=b.magicKey);f.singleLineFieldName?p.address[f.singleLineFieldName]=k:p.address["Single Line Input"]=k;f.outFields&&(p.outFields=f.outFields);f.locator.addressToLocations(p).then(a.hitch(this,function(a){a=this._hydrateResults(a,e,!1);d.resolve(a)}),a.hitch(this,function(a){a||(a=this._error("Locator addressToLocations could not be performed"));d.reject(a)}))}else b.geometry?(c=this._getPointFromGeometry(b.geometry.geometry))?
this._reverseGeocodePoint(e,c).then(function(a){d.resolve(a)},function(a){d.reject(a)}):d.reject(this._error("Invalid point to reverse geocode")):b.point?this._reverseGeocodePoint(e,b.point).then(function(a){d.resolve(a)},function(a){d.reject(a)}):b.latlon?(p=new N(b.latlon,this._defaultSR),this._reverseGeocodePoint(e,p).then(function(a){d.resolve(a)},function(a){d.reject(a)})):b.hasOwnProperty("text")&&!g?d.resolve([]):d.reject(this._error("Invalid query type for Locator"));else f.featureLayer?this._featureLayerLoaded(f.featureLayer).then(a.hitch(this,
function(){var h=this._getDisplayField(f),p=f.searchFields||[h],h=this._validField(f.featureLayer,h),m=this._validFields(f.featureLayer,p);if(!h||!m)d.reject(this._error("Invalid FeatureLayer field"));else{h=new X;if(l&&(h.outSpatialReference=l,m=L.getUnitValueForSR(l)))h.maxAllowableOffset=m;h.returnGeometry=!0;f.outFields&&(h.outFields=f.outFields);var n;b.hasOwnProperty(this._objectIdIdentifier)||(this._supportsPagination(f)&&(h.num=f.maxResults||this.maxResults),f.searchExtent&&(h.geometry=f.searchExtent),
n=f.exactMatch);b.hasOwnProperty("text")&&g?(p=this._whereClause(k,f.featureLayer,p,n))?(h.where=p,p=!0):p=!1:b.hasOwnProperty(this._objectIdIdentifier)?(h.objectIds=[b[this._objectIdIdentifier]],p=!0):b.geometry?(h.geometry=b.geometry,p=!0):b.point?(h.geometry=b.point,p=!0):b.latlon?(c=new N(b.latlon,this._defaultSR),h.geometry=c,p=!0):(b.hasOwnProperty("text")&&!g?d.resolve([]):d.reject(this._error("Invalid query type for FeatureLayer")),p=!1);p?f.featureLayer.queryFeatures(h,a.hitch(this,function(a){a=
a.features;var b;a&&(b=this._hydrateResults(a,e,!1));d.resolve(b)}),a.hitch(this,function(a){a||(a=this._error("FeatureLayer queryFeatures could not be performed"));d.reject(a)})):d.resolve()}})):d.reject(this._error("Invalid source"))}else d.reject(this._error("Source is undefined"));return d.promise},_clearQueryTimeout:function(){this._queryTimer&&clearTimeout(this._queryTimer)},_formatResults:function(a,b,c){c={activeSourceIndex:b,value:c,numResults:0,numErrors:0,errors:null,results:null};var d=
{},e={};if(a)if(b===this._allIndex)for(b=0;b<a.length;b++)a[b]&&(a[b]instanceof Error?(d[b]=a[b],c.numErrors++):(e[b]=a[b],c.numResults+=a[b].length));else a[0]&&(a[0]instanceof Error?(d[b]=a[0],c.numErrors++):(e[b]=a[0],c.numResults+=a[0].length));c.numErrors&&(c.errors=d);c.numResults&&(c.results=e);return c},_reverseGeocodePoint:function(b,c){var d=new h,e=this.sources[b];if(c&&e){var f=e.locationToAddressDistance||this.locationToAddressDistance;e.locator.outSpatialReference=this._defaultSR;this.map&&
(e.locator.outSpatialReference=this.map.spatialReference);e.locator.locationToAddress(c,f,a.hitch(this,function(a){a=this._hydrateResults([a],b,!1);d.resolve(a)}),a.hitch(this,function(a){a||(a=this._error("Locator locationToAddress could not be performed"));d.reject(a)}))}else d.reject(this._error("No point or source defined for reverse geocoding"));return d.promise},_cancelDeferreds:function(){if(this._deferreds&&this._deferreds.length)for(var a=0;a<this._deferreds.length;a++)this._deferreds[a].cancel(this.declaredClass+
" cancelling request");this._deferreds=[]},_sourceBtnKey:function(a){if(a){var b=d("li",this.sourcesNode);a.keyCode===m.UP_ARROW?(a.stopPropagation(),a.preventDefault(),this._showSourcesMenu(),(a=b.length)&&v.focus(b[a-1])):a.keyCode===m.DOWN_ARROW&&(a.stopPropagation(),a.preventDefault(),this._showSourcesMenu(),b[0]&&v.focus(b[0]))}},_inputKey:function(a){if(a){var b=d("li",this.suggestionsNode),c=this.suggestResults;if(a.keyCode===m.TAB||a.keyCode===m.ESCAPE)this._cancelSuggest(),this._hideMenus();
else if(a.keyCode===m.UP_ARROW)a.stopPropagation(),a.preventDefault(),this._cancelSuggest(),c&&this._showSuggestionsMenu(),(a=b.length)&&v.focus(b[a-1]);else if(a.keyCode===m.DOWN_ARROW)a.stopPropagation(),a.preventDefault(),this._cancelSuggest(),c&&this._showSuggestionsMenu(),b[0]&&v.focus(b[0]);else{if(a.ctrlKey||a.metaKey||a.keyCode===m.copyKey||a.keyCode===m.LEFT_ARROW||a.keyCode===m.RIGHT_ARROW||a.keyCode===m.ENTER)return a;this._suggestDelay()}}},_cancelSuggest:function(){this._cancelDeferreds();
this._clearQueryTimeout()},_suggestDelay:function(){this._cancelSuggest();this._changeValue();this._queryTimer=setTimeout(a.hitch(this,function(){this.suggest()}),this.suggestionDelay)},_changeValue:function(){this._changeAttrValue("value",this.inputNode.value);this._checkStatus()},_inputClick:function(){this._hideSourcesMenu();this._hideNoResultsMenu()},_getSourceName:function(a){var b=this.sources,c=b[a].name;!c&&b[a].featureLayer&&(c=b[a].featureLayer.name);c||(c=r.widgets.Search.main.untitledSource);
return c},_insertSuggestions:function(a,b){if(this.enableSuggestionsMenu&&this.suggestionsNode){this._hideSourcesMenu();this._hideNoResultsMenu();var c,d=this.sources;if(a){c=p.create("div");for(var e in a)if(a[e]&&a[e].length){var f=this._getSourceName(e);1<d.length&&this.activeSourceIndex===this._allIndex&&p.create("div",{className:this.css.searchMenuHeader,textContent:f},c);for(var f=p.create("ul",{},c),g=d[e].maxSuggestions||this.maxSuggestions,k=0;k<a[e].length&&k<g;++k)for(var h=p.create("li",
{"data-index":k,"data-source-index":e,role:"menuitem",tabindex:0},f),l=RegExp("("+b+")","gi"),l=this._getSuggestionName(a[e][k]).replace(l,"|$1|").split("|"),m=l.length,n=0;n<m;n++){var q=l[n];q.toLowerCase()===b.toLowerCase()?p.create("strong",{textContent:q},h):(q=document.createTextNode(q),p.place(q,h))}}}c?(p.place(c,this.suggestionsNode,"only"),this._showSuggestionsMenu()):(p.empty(this.suggestionsNode),this._hideSuggestionsMenu())}},_insertSources:function(a){if(this.enableSourcesMenu&&a&&1<
a.length){var b,c,d=this.activeSourceIndex;b="";d===this._allIndex&&(b="active");var e=p.create("ul");p.create("li",{"data-index":this._allIndex,role:"menuitem",className:b,tabIndex:0,textContent:r.widgets.Search.main.all},e);for(c=0;c<a.length;c++){b="";c===d&&(b=this.css.activeSource);var f=this._getSourceName(c);p.create("li",{"data-index":c,role:"menuitem",className:b,tabIndex:0,textContent:f},e)}k.add(this.containerNode,this.css.hasMultipleSources);p.place(e,this.sourcesNode,"only")}else k.remove(this.containerNode,
this.css.hasMultipleSources),p.empty(this.sourcesNode)},_showLoading:function(){k.add(this.containerNode,this.css.searchLoading)},_hideLoading:function(){k.remove(this.containerNode,this.css.searchLoading)},_checkStatus:function(){this.value?(k.add(this.containerNode,this.css.hasValue),b.set(this.clearNode,"title",r.widgets.Search.main.clearButtonTitle)):this.clear()},_closePopup:function(){this.enableInfoWindow&&this.map&&this.map.infoWindow&&this.map.infoWindow.hide()},_noResults:function(b){var c;
b&&(c=a.trim(b));var d=p.create("div",{className:this.css.searchNoResultsBody});b&&c?(p.create("div",{className:this.css.searchNoResultsHeader,textContent:r.widgets.Search.main.noResults},d),p.create("div",{className:this.css.searchNoResultsText,textContent:w.substitute({value:'"'+b+'"'},r.widgets.Search.main.noResultsFound)},d)):(b=p.create("div",{},d),p.create("span",{"aria-hidden":"true",className:this.css.searchNoValueIcon},b),p.create("span",{className:this.css.searchNoValueText,textContent:r.widgets.Search.main.emptyValue},
b));p.place(d,this.noResultsMenuNode,"only")},_hideMenus:function(){this._hideSourcesMenu();this._hideSuggestionsMenu();this._hideNoResultsMenu()},_hideNoResultsMenu:function(){k.remove(this.containerNode,this.css.showNoResults)},_showNoResultsMenu:function(){this._hideSourcesMenu();this._hideSuggestionsMenu();k.add(this.containerNode,this.css.showNoResults)},_hideSourcesMenu:function(){k.remove(this.containerNode,this.css.showSources)},_hideSuggestionsMenu:function(){k.remove(this.containerNode,
this.css.showSuggestions)},_showSourcesMenu:function(){this._hideSuggestionsMenu();this._hideNoResultsMenu();k.add(this.containerNode,this.css.showSources)},_showSuggestionsMenu:function(){this._hideSourcesMenu();this._hideNoResultsMenu();k.add(this.containerNode,this.css.showSuggestions)},_toggleSourcesMenu:function(){this._hideSuggestionsMenu();this._hideNoResultsMenu();k.toggle(this.containerNode,this.css.showSources)},_getFirstStringField:function(a){if(a&&(a=a.fields)&&a.length)for(var b=0;b<
a.length;b++){var c=a[b];if("esriFieldTypeString"===c.type)return c.name}return""},_getDisplayField:function(a){return a.displayField||a.featureLayer.displayField||this._getFirstStringField(a.featureLayer)},_validExtent:function(a){return a&&a.xmin&&"NaN"!==a.xmin&&a.ymin&&"NaN"!==a.ymin&&a.xmax&&"NaN"!==a.xmax&&a.ymax&&"NaN"!==a.ymax?!0:!1},_hydrateResult:function(a,b,c){var d={},e=this._defaultSR,f;b=this.sources[b];this.map&&(e=this.map.spatialReference);if(a.hasOwnProperty("text")&&a.hasOwnProperty("magicKey"))return a;
if(a.hasOwnProperty("geometry"))f=new E(a.toJson()),d.feature=f,(f=d.feature.geometry)&&f.setSpatialReference(e);else if(a.hasOwnProperty("location")){var g=new N(a.location.x,a.location.y,e);f={};a.hasOwnProperty("attributes")&&(f=a.attributes);a.hasOwnProperty("score")&&(f.score=a.score);d.feature=new E(g,null,f,null)}else d.feature=null;if(a.hasOwnProperty("extent")&&this._validExtent(a.extent))d.extent=new Q(a.extent),d.extent.setSpatialReference(e);else if(d.feature&&d.feature.geometry)switch(d.feature.geometry.type){case "extent":d.extent=
d.feature.geometry;break;case "multipoint":d.extent=d.feature.geometry.getExtent();break;case "polygon":d.extent=d.feature.geometry.getExtent();break;case "polyline":d.extent=d.feature.geometry.getExtent();break;case "point":this.map?this._getScale()>this.zoomScale?d.extent=L.getExtentForScale(this.map,this.zoomScale).centerAt(d.feature.geometry):d.extent=this.map.extent.centerAt(d.feature.geometry):d.extent=new Q({xmin:d.feature.geometry.x-0.25,ymin:d.feature.geometry.y-0.25,xmax:d.feature.geometry.x+
0.25,ymax:d.feature.geometry.y+0.25,spatialReference:this._defaultSR})}else d.extent=null;d.name="";b.featureLayer?b.suggestionTemplate&&c?d.name=w.substitute(a.attributes,b.suggestionTemplate):(c=this._getDisplayField(b),e=b.featureLayer.getDomain(c),c&&a.hasOwnProperty("attributes")&&a.attributes.hasOwnProperty(c)&&(a=a.attributes[c],d.name=e&&"codedValue"===e.type?this._getCodedName(e.codedValues,a):a)):a.hasOwnProperty("name")?d.name=a.name:a.hasOwnProperty("attributes")&&"object"===typeof a.attributes&&
a.attributes.Match_addr?(d.name=a.attributes.Match_addr,a.attributes.Addr_type&&"POI"===a.attributes.Addr_type&&(a.attributes.StAddr&&a.attributes.City)&&(d.name+=" - "+a.attributes.StAddr+", "+a.attributes.City)):a.hasOwnProperty("address")&&"string"===typeof a.address?d.name=a.address:a.hasOwnProperty("address")&&"object"===typeof a.address&&a.address.hasOwnProperty("Address")?d.name=a.address.Address:d.feature&&d.feature.geometry&&(d.name=d.feature.geometry.x+","+d.feature.geometry.y);return d},
_getScale:function(){var a;this.map&&"function"===typeof this.map.getScale&&(a=this.map.getScale());return a},_hydrateResults:function(a,b,c){var d=[],e=0;if(a&&a.length)for(e;e<a.length;e++){var f=this._hydrateResult(a[e],b,c);d.push(f)}return d},_containsNonLatinCharacter:function(a){for(var b=0;b<a.length;b++)if(255<a.charCodeAt(b))return!0;return!1},_setPlaceholder:function(a){var c="",d=this.sources[a];a===this._allIndex?c=this.allPlaceholder||r.widgets.Search.main.allPlaceholder:d&&d.placeholder&&
(c=d.placeholder);var e=r.widgets.Search.main.all;d&&(e=this._getSourceName(a));b.set(this.sourceNameNode,"textContent",e);b.set(this.inputNode,"placeholder",c);b.set(this.inputNode,"title",c)},_updateActiveSource:function(){var a=this.sources,b=this.activeSourceIndex,c;a&&a[b]&&(c=a[b]);c?this.set("activeSource",c):this.set("activeSource",null)},_updateVisible:function(){this.visible?this.show():this.hide()},_updateButtonMode:function(a){a?(k.toggle(this.containerNode,this.css.searchExpanded,this.expanded),
k.toggle(this.containerNode,this.css.searchCollapsed,!this.expanded),k.add(this.containerNode,this.css.hasButtonMode)):(k.remove(this.containerNode,this.css.searchExpanded),k.remove(this.containerNode,this.css.searchCollapsed),k.remove(this.containerNode,this.css.hasButtonMode))},_setDefaultActiveSourceIndex:function(){var a=this.sources;a&&1===a.length?this.set("activeSourceIndex",0):this.set("activeSourceIndex",this._allIndex)},_setSourcesAttr:function(a){this._set("sources",a);this._created&&(this._setDefaultActiveSourceIndex(),
this._hideMenus(),this._insertSources(a))},_setAllPlaceholderAttr:function(a){this._set("allPlaceholder",a);this._created&&this._setPlaceholder(this.activeSourceIndex)},_setActiveSourceIndexAttr:function(a){this._set("activeSourceIndex",a);this._updateActiveSource();this._created&&(this._setPlaceholder(a),this._hideMenus(),this._insertSources(this.sources))},_setMaxLengthAttr:function(a){this._set("maxLength",a);this._created&&b.set(this.inputNode,"maxLength",a)},_setValueAttr:function(a){this._set("value",
a);this._created&&(b.set(this.inputNode,"value",a),this._checkStatus())},_setVisibleAttr:function(a){this._set("visible",a);this._created&&this._updateVisible()},_setEnableButtonModeAttr:function(a){this._set("enableButtonMode",a);this._created&&this._updateButtonMode(a)},_setThemeAttr:function(a){this._created&&(k.remove(this.domNode,this.theme),k.add(this.domNode,a));this._set("theme",a)}})})},"esri/promiseList":function(){define(["dojo/_base/array","dojo/Deferred","dojo/when"],function(l,n,a){var g=
l.forEach;return function(l){function h(a,c){d[c]=a;b.progress([a,c]);0===--k&&b.resolve(d)}var m,f;l instanceof Array?f=l:l&&"object"===typeof l&&(m=l);var d,c=[];if(m){f=[];for(var e in m)Object.hasOwnProperty.call(m,e)&&(c.push(e),f.push(m[e]));d={}}else f&&(d=[]);if(!f||!f.length)return(new n).resolve(d);var b=new n;b.promise.always(function(){d=c=null});var k=f.length;g(f,function(b,d){m||c.push(d);a(b,function(a){h(a,c[d])},function(a){h(a,c[d])})});return b.promise}})},"esri/tasks/locator":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has ../kernel ../request ../deferredUtils ./Task ./AddressCandidate".split(" "),
function(l,n,a,g,q,h,m,f,d,c,e){return l(c,{declaredClass:"esri.tasks.Locator",_eventMap:{"address-to-locations-complete":["addresses"],"addresses-to-locations-complete":["addresses"],"location-to-address-complete":["address"],"suggest-locations-complete":["suggestions"]},constructor:function(a){this._geocodeHandler=n.hitch(this,this._geocodeHandler);this._geocodeAddressesHandler=n.hitch(this,this._geocodeAddressesHandler);this._reverseGeocodeHandler=n.hitch(this,this._reverseGeocodeHandler);this.registerConnectEvents()},
outSpatialReference:null,setOutSpatialReference:function(a){this.outSpatialReference=a},_geocodeHandler:function(a,c,d,f,g){try{var h=a.candidates,l;c=[];var m,n=h.length,q=a.spatialReference,v;for(m=0;m<n;m++){l=h[m];if(v=l.location)v.spatialReference=q;c[m]=new e(l)}this._successHandler([c],"onAddressToLocationsComplete",d,g)}catch(w){this._errorHandler(w,f,g)}},_geocodeAddressesHandler:function(a,c,d,f,g){try{var h=a.locations;c=[];var l,m=h.length,n=a.spatialReference,q;for(l=0;l<m;l++){if(q=
h[l].location)q.spatialReference=n;c[l]=new e(h[l])}this._successHandler([c],"onAddressesToLocationsComplete",d,g)}catch(v){this._errorHandler(v,f,g)}},addressToLocations:function(a,c,e,h,l){var m,x,y,u,z,v,w;a.address&&(h=e,e=c,c=a.outFields,l=a.searchExtent,w=a.countryCode,m=a.magicKey,x=a.distance,v=a.categories,a.location&&this.normalization&&(y=a.location.normalize()),u=a.maxLocations,z=a.forStorage,a=a.address);l&&(l=l.shiftCentralMeridian());var A=this.outSpatialReference;a=this._encode(n.mixin({},
this._url.query,a,{f:"json",outSR:A&&q.toJson(A.toJson()),outFields:c&&c.join(",")||null,searchExtent:l&&q.toJson(l.toJson()),category:v&&v.join(",")||null,countryCode:w||null,magicKey:m||null,distance:x||null,location:y||null,maxLocations:u||null,forStorage:z||null}));var B=this._geocodeHandler,D=this._errorHandler,E=new g(d._dfdCanceller);E._pendingDfd=f({url:this._url.path+"/findAddressCandidates",content:a,callbackParamName:"callback",load:function(a,b){B(a,b,e,h,E)},error:function(a){D(a,h,E)}});
return E},suggestLocations:function(a){var c;c=new g(d._dfdCanceller);a.hasOwnProperty("location")&&this.normalization&&(a.location=a.location.normalize());a.searchExtent&&(a.searchExtent=a.searchExtent.shiftCentralMeridian());a=this._encode(n.mixin({},this._url.query,{f:"json",text:a.text,maxSuggestions:a.maxSuggestions,searchExtent:a.searchExtent&&q.toJson(a.searchExtent.toJson()),category:a.categories&&a.categories.join(",")||null,countryCode:a.countryCode||null,location:a.location||null,distance:a.distance||
null},{f:"json"}));a=f({url:this._url.path+"/suggest",content:a,callbackParamName:"callback"});c._pendingDfd=a;a.then(n.hitch(this,function(a){a=a.suggestions||[];this.onSuggestLocationsComplete(a);c.resolve(a)}),n.hitch(this,function(a){this._errorHandler(a);c.reject(a)}));return c},addressesToLocations:function(b,c,e){var h=this.outSpatialReference,l=[];a.forEach(b.addresses,function(a,b){l.push({attributes:a})});b=this._encode(n.mixin({},this._url.query,{addresses:q.toJson({records:l})},{f:"json",
outSR:h&&q.toJson(h.toJson())}));var m=this._geocodeAddressesHandler,x=this._errorHandler,y=new g(d._dfdCanceller);y._pendingDfd=f({url:this._url.path+"/geocodeAddresses",content:b,callbackParamName:"callback",load:function(a,b){m(a,b,c,e,y)},error:function(a){x(a,e,y)}});return y},_reverseGeocodeHandler:function(a,c,d,f,g){try{var h=new e({address:a.address,location:a.location,score:100});this._successHandler([h],"onLocationToAddressComplete",d,g)}catch(l){this._errorHandler(l,f,g)}},locationToAddress:function(a,
c,e,h){a&&this.normalization&&(a=a.normalize());var l=this.outSpatialReference;a=this._encode(n.mixin({},this._url.query,{outSR:l&&q.toJson(l.toJson()),location:a&&q.toJson(a.toJson()),distance:c,f:"json"}));var m=this._reverseGeocodeHandler,x=this._errorHandler,y=new g(d._dfdCanceller);y._pendingDfd=f({url:this._url.path+"/reverseGeocode",content:a,callbackParamName:"callback",load:function(a,b){m(a,b,e,h,y)},error:function(a){x(a,h,y)}});return y},onSuggestLocationsComplete:function(){},onAddressToLocationsComplete:function(){},
onAddressesToLocationsComplete:function(){},onLocationToAddressComplete:function(){}})})},"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),function(l,n,a,g,q,h,m,f){return l(f,{declaredClass:"esri.tasks._Task",_eventMap:{error:["error"],complete:["result"]},constructor:function(a,c){a&&n.isString(a)&&(this._url=m.urlToObject(this.url=a));c&&c.requestOptions&&(this.requestOptions=c.requestOptions);
this.normalization=!0;this._errorHandler=n.hitch(this,this._errorHandler);this.registerConnectEvents()},_useSSL:function(){var a=this._url,c=/^http:/i;this.url&&(this.url=this.url.replace(c,"https:"));a&&a.path&&(a.path=a.path.replace(c,"https:"))},_encode:function(d,c,e){var b,f,g={},h,l;for(h in d)if("declaredClass"!==h&&(b=d[h],f=typeof b,null!==b&&void 0!==b&&"function"!==f))if(n.isArray(b)){g[h]=[];l=b.length;for(f=0;f<l;f++)g[h][f]=this._encode(b[f])}else"object"===f?b.toJson&&(f=b.toJson(e&&
e[h]),"esri.tasks.FeatureSet"===b.declaredClass&&f.spatialReference&&(f.sr=f.spatialReference,delete f.spatialReference),g[h]=c?f:a.toJson(f)):g[h]=b;return g},_successHandler:function(a,c,e,b){c&&this[c].apply(this,a);e&&e.apply(null,a);b&&h._resDfd(b,a)},_errorHandler:function(a,c,e){this.onError(a);c&&c(a);e&&e.errback(a)},setNormalization:function(a){this.normalization=a},onError:function(){}})})},"esri/tasks/AddressCandidate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has",
"../kernel","../geometry/Point"],function(l,n,a,g,q){return l(null,{declaredClass:"esri.tasks.AddressCandidate",constructor:function(a){n.mixin(this,a);this.location=new q(this.location)}})})},"esri/styles/basic":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/has","../kernel","../Color"],function(l,n,a,g,q){function h(a,d){var b;if(a)switch(b={},b.color=new q(a.color),b.opacity=a.opacity||1,d){case "point":b.outline={color:new q(a.outline.color),width:a.outline.width};b.size=a.size;
break;case "line":b.width=a.width;break;case "polygon":b.outline={color:new q(a.outline.color),width:a.outline.width}}return b}function m(a){"esriGeometryPoint"===a||"esriGeometryMultipoint"===a?a="point":"esriGeometryPolyline"===a?a="line":"esriGeometryPolygon"===a&&(a="polygon");return a}var f={"default":{name:"default",label:"Default",description:"Default theme for basic visualization of features.",basemapGroups:{light:"streets gray topo terrain national-geographic oceans osm".split(" "),dark:["satellite",
"hybrid","dark-gray"]},pointSchemes:{light:{primary:{color:[77,77,77,1],outline:{color:[255,255,255,1],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,1],width:1},size:8},{color:[255,255,255,1],outline:{color:[51,51,51,1],width:1},size:8}]},dark:{primary:{color:[255,255,255,1],outline:{color:[26,26,26,1],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,1],width:1},size:8},{color:[26,26,26,1],outline:{color:[178,178,178,1],width:1},size:8}]}},
lineSchemes:{light:{primary:{color:[77,77,77,1],width:2},secondary:[{color:[226,119,40,1],width:2},{color:[255,255,255,1],width:2}]},dark:{primary:{color:[255,255,255,1],width:2},secondary:[{color:[226,119,40,1],width:2},{color:[26,26,26,1],width:2}]}},polygonSchemes:{light:{primary:{color:[227,139,79,1],outline:{color:[255,255,255,1],width:1},opacity:0.8},secondary:[{color:[128,128,128,1],outline:{color:[255,255,255,1],width:1},opacity:0.8},{color:[255,255,255,1],outline:{color:[128,128,128,1],width:1},
opacity:0.8}]},dark:{primary:{color:[227,139,79,1],outline:{color:[51,51,51,1],width:1},opacity:0.8},secondary:[{color:[178,178,178,1],outline:{color:[51,51,51,1],width:1},opacity:0.8},{color:[26,26,26,1],outline:{color:[128,128,128,1],width:1},opacity:0.8}]}}}},d={};(function(){var a,e,b,g,h,l,m,n;for(a in f)for(g in e=f[a],b=e.basemapGroups,h=d[a]={basemaps:[].concat(b.light).concat(b.dark),point:{},line:{},polygon:{}},b){l=b[g];for(m=0;m<l.length;m++)n=l[m],e.pointSchemes&&(h.point[n]=e.pointSchemes[g]),
e.lineSchemes&&(h.line[n]=e.lineSchemes[g]),e.polygonSchemes&&(h.polygon[n]=e.polygonSchemes[g])}})();return{getAvailableThemes:function(a){var e=[],b,g,h;for(b in f)g=f[b],h=d[b],a&&-1===l.indexOf(h.basemaps,a)||e.push({name:g.name,label:g.label,description:g.description,basemaps:h.basemaps.slice(0)});return e},getSchemes:function(a){var e=a.theme,b=a.basemap,f=m(a.geometryType);a=d[e];var g;(a=(a=a&&a[f])&&a[b])&&(g={primaryScheme:h(a.primary,f),secondarySchemes:l.map(a.secondary,function(a){return h(a,
f)})});return g},cloneScheme:function(a){var d;a&&(d=n.mixin({},a),d.color&&(d.color=new q(d.color)),d.outline&&(d.outline={color:d.outline.color&&new q(d.outline.color),width:d.outline.width}));return d}}})},"esri/layers/FeatureLayer":function(){define("require module dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/date/locale dojo/sniff dojo/io-query dojo/dom-construct dojo/i18n dojo/when dojo/promise/all ../kernel ../lang ../request ../config ../deferredUtils ../SpatialReference ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/jsonUtils ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/jsonUtils ../tasks/QueryTask ../tasks/query ../tasks/FeatureSet ../tasks/StatisticDefinition ../geometry/Extent ../geometry/jsonUtils ../geometry/normalizeUtils ../geometry/scaleUtils ./GraphicsLayer ./Field ./TimeInfo ./FeatureType ./FeatureTemplate ./FeatureEditResult ./LabelClass ./SnapshotMode ./OnDemandMode ./SelectionMode ./StreamMode ./TrackManager ./HeatmapManager dojo/i18n!../nls/jsapi require".split(" "),
function(l,n,a,g,q,h,m,f,d,c,e,b,k,s,p,r,t,x,y,u,z,v,w,A,B,D,E,C,F,K,I,G,J,H,N,Q,L,Y,X,W,U,P,R,M,O,S,da,V,Z,aa){var ba=y.defaults,T=a(L,{declaredClass:"esri.layers.FeatureLayer",invalidParams:"query contains one or more unsupported parameters",reHostedFS:/https?:\/\/services.*\.arcgis\.com/i,maxPointCountForAuto:4E3,maxRecordCountForAuto:2E3,maxVertexCountForAuto:25E4,generalizeForScale:4E3,_eventMap:{"add-attachment-complete":["result"],"before-apply-edits":["adds","updates","deletes"],"delete-attachments-complete":["results"],
"edits-complete":["adds","updates","deletes"],"query-attachment-infos-complete":["results"],"query-count-complete":["count"],"query-features-complete":["featureSet"],"query-ids-complete":["objectIds"],"query-related-features-complete":["featureSets"],"selection-complete":["features","method"],"update-end":["error","info"]},constructor:function(a,b){this._preventInit||this._initFeatureLayer(a,b)},_initFeatureLayer:function(a,b){this.i18n=aa;b=b||{};this.showLabels=null!=b.showLabels?b.showLabels:!0;
this._outFields=b.outFields;this._defnExpr=b.definitionExpression;this._loadCallback=b.loadCallback;var c=b._usePatch;this._usePatch=null===c||void 0===c?!0:c;this._trackIdField=b.trackIdField;this.objectIdField=b.objectIdField;this._maxOffset=null!=b.maxAllowableOffset?b.maxAllowableOffset:this.maxAllowableOffset;this.quantize=null!=b.quantize?b.quantize:!0;this._optEditable=b.editable;this._optAutoGen=b.autoGeneralize;this.editSummaryCallback=b.editSummaryCallback;this.userId=b.userId;this.userIsAdmin=
b.userIsAdmin;this.useMapTime=b.hasOwnProperty("useMapTime")?!!b.useMapTime:!0;this.source=b.source;this.gdbVersion=b.gdbVersion;this.orderByFields=b.orderByFields;this.maxPointCountForAuto=null!=b.maxPointCountForAuto?b.maxPointCountForAuto:this.maxPointCountForAuto;this.maxRecordCountForAuto=null!=b.maxRecordCountForAuto?b.maxRecordCountForAuto:this.maxRecordCountForAuto;this.maxVertexCountForAuto=null!=b.maxVertexCountForAuto?b.maxVertexCountForAuto:this.maxVertexCountForAuto;this.generalizeForScale=
null!=b.generalizeForScale?b.generalizeForScale:this.generalizeForScale;this.queryPagination=null!=b.queryPagination?b.queryPagination:this.url?this.reHostedFS.test(this.url):!1;this.multipatchOption=b.multipatchOption;this._selectedFeatures={};this._selectedFeaturesArr=[];this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();var d=T,c=this.mode=t.isDefined(b.mode)?b.mode:d.MODE_ONDEMAND;this._isStream&&(this.mode=c=d.MODE_STREAM);switch(c){case d.MODE_SNAPSHOT:this.currentMode=
d.MODE_SNAPSHOT;this._mode=new M(this);this._isSnapshot=!0;break;case d.MODE_ONDEMAND:case d.MODE_AUTO:this.currentMode=d.MODE_ONDEMAND;this._tileWidth=b.tileWidth||512;this._tileHeight=b.tileHeight||512;this._mode=new O(this);this.latticeTiling=b.latticeTiling;break;case d.MODE_SELECTION:this.currentMode=d.MODE_SELECTION;this._mode=new S(this);this._isSelOnly=!0;break;case d.MODE_STREAM:this.currentMode=d.MODE_STREAM,this._mode=new da(this),this._isStream=!0}this._initLayer=q.hitch(this,this._initLayer);
this._selectHandler=q.hitch(this,this._selectHandler);this._editable=!1;if(q.isObject(a)&&a.layerDefinition)return this._collection=!0,this.mode=this._isStream?d.MODE_STREAM:d.MODE_SNAPSHOT,this._initLayer(a),this;this._task=new F(this.url,{source:this.source,gdbVersion:this.gdbVersion});c=this._url.path;this._fserver=!1;-1!==c.search(/\/FeatureServer\//i)&&(this._fserver=!0);this.mode===d.MODE_AUTO&&this.reHostedFS.test(this.url)&&this._queryLimit();(d=b.resourceInfo)?this._initLayer(d):(this.source&&
(d={source:this.source.toJson()},this._url.query=q.mixin(this._url.query,{layer:m.toJson(d)})),this.gdbVersion&&(this._url.query=q.mixin(this._url.query,{gdbVersion:this.gdbVersion})),x({url:c,content:q.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler}));this.registerConnectEvents()},_initLayer:function(a,b){if(a||b){this._json=a;this._findCredential();if(this.credential&&this.credential.ssl||a&&a._ssl)this._useSSL(),this._task._useSSL();
(this.version=a.currentVersion)||(this.version="capabilities"in a||"drawingInfo"in a||"hasAttachments"in a||"htmlPopupType"in a||"relationships"in a||"timeInfo"in a||"typeIdField"in a||"types"in a?10:9.3);this._collection&&(this._isStream||(this.currentMode=T.MODE_SNAPSHOT,this._mode=new M(this)),this._isSnapshot=!0,this._featureSet=a.featureSet,this._nextId=a.nextObjectId,a=a.layerDefinition);this.geometryType=a.geometryType;"string"!==typeof this.multipatchOption&&"esriGeometryMultiPatch"===this.geometryType&&
(this.multipatchOption="xyFootprint");if(a.hasOwnProperty("capabilities")){var d=this.capabilities=a.capabilities;d&&-1!==d.toLowerCase().indexOf("editing")?this._editable=!0:this._editable=!1}else this._collection||(this._editable=this._fserver);t.isDefined(this._optEditable)?(this._editable=this._optEditable,delete this._optEditable):"esriGeometryMultiPatch"===this.geometryType&&(this._editable=!1);this._json=m.toJson(this._json);if(this.isEditable())this._setMaxOffset(null);else if(this.mode!==
T.MODE_SNAPSHOT&&("esriGeometryPolyline"===this.geometryType||"esriGeometryPolygon"===this.geometryType||this.hasXYFootprint()))this._autoGeneralize=t.isDefined(this._optAutoGen)?this._optAutoGen:this.mode===T.MODE_ONDEMAND||this.mode===T.MODE_AUTO,delete this._optAutoGen;var d=a.effectiveMinScale||a.minScale,e=a.effectiveMaxScale||a.maxScale;!this._hasMin&&d&&this.setMinScale(d);!this._hasMax&&e&&this.setMaxScale(e);this.layerId=a.id;this.name=a.name;this.description=a.description;this.copyright=
a.copyrightText;this.type=a.type;this.displayField=a.displayField;this.defaultDefinitionExpression=a.definitionExpression;this.fullExtent=new J(a.extent);this.initialExtent=new J(this.fullExtent.toJson());this.fullExtent.spatialReference&&(this.spatialReference=new z(this.fullExtent.spatialReference.toJson()));this.defaultVisibility=a.defaultVisibility;if("esriGeometryPoint"===this.geometryType||"esriGeometryMultipoint"===this.geometryType)this.latticeTiling=!1;this.hasM=a.hasM||!1;this.hasZ=a.hasZ||
!1;this.indexedFields=a.indexedFields;this.maxRecordCount=a.maxRecordCount;this.canModifyLayer=a.canModifyLayer;this.supportsStatistics=a.supportsStatistics;this.supportsAdvancedQueries=this._collection?!1:a.supportsAdvancedQueries;this.supportsCalculate=a.supportsCalculate;this.supportsAttachmentsByUploadId=a.supportsAttachmentsByUploadId;this.supportsCoordinatesQuantization=a.supportsCoordinatesQuantization;this.quantize=this.quantize&&this.supportsCoordinatesQuantization;this.hasLabels=a.hasLabels;
this.canScaleSymbols=a.canScaleSymbols;this.supportsRollbackOnFailureParameter=this.supportsRollbackOnFailure=a.supportsRollbackOnFailure;this.syncCanReturnChanges=a.syncCanReturnChanges;this.isDataVersioned=a.isDataVersioned;this.editFieldsInfo=a.editFieldsInfo;this.ownershipBasedAccessControlForFeatures=a.ownershipBasedAccessControlForFeatures;this.editFieldsInfo&&this.ownershipBasedAccessControlForFeatures&&(this.creatorField=this.editFieldsInfo.creatorField);this.relationships=a.relationships;
this.allowGeometryUpdates=t.isDefined(a.allowGeometryUpdates)?a.allowGeometryUpdates:!0;this.advancedQueryCapabilities=a.advancedQueryCapabilities||{supportsStatistics:this.supportsStatistics,supportsOrderBy:this.supportsAdvancedQueries,supportsDistinct:this.supportsAdvancedQueries};this._setMaxOffset(this._maxOffset,!0);this._isTable="Table"===this.type;for(var f=this.fields=[],e=a.fields,d=0;d<e.length;d++)f.push(new Y(e[d]));if(!this.objectIdField&&(this.objectIdField=a.objectIdField,!this.objectIdField)){e=
a.fields;for(d=0;d<e.length;d++)if(f=e[d],"esriFieldTypeOID"===f.type){this.objectIdField=f.name;break}}if(!t.isDefined(this._nextId)){e=this.objectIdField;f=-1;if(this._collection&&e)for(var g=(d=this._featureSet)&&d.features,k=g?g.length:0,l,d=0;d<k;d++)l=(l=g[d].attributes)&&l[e],l>f&&(f=l);this._nextId=f+1}this.globalIdField=a.globalIdField;if(d=this.typeIdField=a.typeIdField)if(d=!this._getField(d)&&this._getField(d,!0))this.typeIdField=d.name;this.visibilityField=a.visibilityField;if(e=a.defaultSymbol)this.defaultSymbol=
B.fromJson(e);var p=this.types=[],n=a.types,r,s,f=(d=this.editFieldsInfo)&&d.creatorField,g=d&&d.editorField;l=f||g;k=[];if(n)for(d=0;d<n.length;d++)r=new W(n[d]),s=r.templates,l&&s&&s.length&&(k=k.concat(s)),p.push(r);n=a.templates;r=this.templates=[];if(n)for(d=0;d<n.length;d++)p=new U(n[d]),l&&k.push(p),r.push(p);for(d=0;d<k.length;d++)if(l=q.getObject("prototype.attributes",!1,k[d]))f&&delete l[f],g&&delete l[g];if(d=a.timeInfo)this.timeInfo=new X(d),this._startTimeField=d.startTimeField,this._endTimeField=
d.endTimeField,this._startTimeField&&this._endTimeField&&(this._twoTimeFields=!0),this._trackIdField?d.trackIdField=this._trackIdField:this._trackIdField=d.trackIdField;this.hasAttachments=!this._collection&&a.hasAttachments?!0:!1;this.htmlPopupType=a.htmlPopupType;var d=a.drawingInfo,u;if((f=d&&d.labelingInfo)&&!this.labelingInfo)this.labelingInfo=h.map(f,function(a){return new R(a)}),this._fixLabelExpr();if(!this.renderer)if(d&&d.renderer){if(u=d.renderer,this.setRenderer(C.fromJson(u)),"classBreaks"===
u.type&&this.renderer.setMaxInclusive(!0),!this._collection){var x=u.type,e=[];u=this.renderer;switch(x){case "simple":e.push(u.symbol);break;case "uniqueValue":case "classBreaks":e.push(u.defaultSymbol),e=e.concat(h.map(u.infos,function(a){return a.symbol}))}var e=h.filter(e,t.isDefined),y=this._url.path+"/images/",F=this._getToken();h.forEach(e,function(a){var b=a.url;b&&(-1===b.search(/https?\:/)&&-1===b.indexOf("data:")&&(a.url=y+b),F&&-1!==a.url.search(/https?\:/)&&(a.url+="?token\x3d"+F))})}}else if(e)n=
this.types,0<n.length?(u=new E(this.defaultSymbol,this.typeIdField),h.forEach(n,function(a){u.addValue(a.id,a.symbol)})):u=new D(this.defaultSymbol),this.setRenderer(u);else if(!this._isTable){switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":x=new v;break;case "esriGeometryPolyline":x=new w;break;case "esriGeometryPolygon":x=new A;break;default:this.hasXYFootprint()&&(x=new A)}this.setRenderer(x?new D(x):null)}x=d&&d.transparency||0;!this.hasOwnProperty("opacity")&&
0<x&&(this.opacity=1-x/100);if((c("ie")||7<=c("trident")||c("safari"))&&this.isEditable()&&10.02>this.version)this._ts=!0;this.statistics=a.statistics;this._fixRendererFields();this._checkFields();this._updateCaps();var K=function(){this.currentMode!==T.MODE_SNAPSHOT&&(this.queryPagination=!1);null!=this._maxOffset&&!this._isFractionalOffsetAllowed()&&this._setMaxOffset(this._maxOffset);this.loaded=!0;this.onLoad(this);var a=this._loadCallback;a&&(delete this._loadCallback,a(this))};this._collection?
(x=this._featureSet,this._featureSet=null,this._mode._drawFeatures(new I(x)),this._fcAdded=!0,K.call(this)):this._forceIdentity(this._limitPromise?function(){var a=this;this._limitPromise.then(function(b){a._checkMode(b)});this._limitPromise.always(function(){a._limitPromise=null;K.call(a)})}:K)}},setShowLabels:function(a){this.showLabels=a;this.onShowLabelsChange()},onShowLabelsChange:function(){},onRendererChange:function(a){this.inherited(arguments);var b=this._map;this._ager=!(!a||!a.observationAger||
!a.observationRenderer);a&&"colors"in a&&"blurRadius"in a&&"maxPixelIntensity"in a?"esriGeometryPoint"==this.geometryType&&!this._heatmapManager&&b&&(this._heatmapManager=new Z(this),this._heatmapManager.initialize(b)):this.renderer&&this.renderer.getRendererInfo?h.some(this.renderer.rendererInfos,function(a){return a.renderer&&"colors"in a.renderer&&"blurRadius"in a.renderer})||(this._heatmapManager=null):this._heatmapManager=null;if(a){var c=[],b=h.filter([a,a.observationRenderer,a.latestObservationRenderer,
a.trackRenderer],t.isDefined),d=function(a){return null!=a&&"function"!=typeof a&&a};h.forEach(b,function(a){var b=d(a.attributeField),e=d(a.attributeField2);a=d(a.attributeField3);!1!==b&&c.push(b);!1!==e&&c.push(e);!1!==a&&c.push(a)});this._rendererFields=c}else this._rendererFields=[];this.loaded&&(this._fixRendererFields(),this._checkFields(this._rendererFields),this._collection&&(this._typesDirty=!0))},redraw:function(){this.inherited(arguments);this._trackManager&&this._trackManager.container&&
this._trackManager.container.redraw()},_evalSDRenderer:function(){this.inherited(arguments);var a=this._getRenderer();this._ager=!(!a||!a.observationAger||!a.observationRenderer);this._trackManager&&this._trackManager.container&&this._trackManager.container.setRenderer(a&&a.trackRenderer)},_setMap:function(a){var b=this.inherited(arguments),c=this._mode,d=this;c&&c.initialize(a);this.geometryType&&this.attr("data-geometry-type",this.geometryType.replace(/esriGeometry/i,"").toLowerCase());this._addHandle=
this.on("graphic-node-add",function(a){a=a.graphic.attributes;(a=d._selectedFeatures[a&&a[d.objectIdField]])&&a.attr("data-selected","")});return b},_unsetMap:function(a){var b=this._mode;b&&b.suspend();this._trackManager&&(this._trackManager.destroy(),this._trackManager=null);g.disconnect(this._zoomConnect);g.disconnect(this._addHandle);this._zoomConnect=this._addHandle=null;this._toggleTime(!1);this.inherited("_unsetMap",arguments)},refresh:function(){this._needsRefresh=!1;var a=this._mode;a&&a.refresh()},
hasXYFootprint:function(){return"esriGeometryMultiPatch"===this.geometryType&&"xyFootprint"===this.multipatchOption},getOutFields:function(){return h.filter(this._getOutFields(),function(a){return"*"===a||!!this._getField(a)},this)},getField:function(a){return this._getField(a,!0)},getDomain:function(a,b){var c,d,e=b&&b.feature,f=e&&this.typeIdField&&e.attributes&&e.attributes[this.typeIdField];null!=f&&h.some(this.types,function(b){if(b.id==f){if((c=b.domains&&b.domains[a])&&"inherited"===c.type)c=
this._getLayerDomain(a),d=!0;return!0}return!1},this);!d&&!c&&(c=this._getLayerDomain(a));return c},_getLayerDomain:function(a){var b;h.some(this.fields,function(c){c.name===a&&(b=c.domain);return!!b});return b},getType:function(a){var b,c=a&&this.typeIdField&&a.attributes&&a.attributes[this.typeIdField];h.some(this.types,function(a){a.id==c&&(b=a);return!!b});return b},setEditable:function(a){if(!this._collection)return this;if(!this.loaded)return this._optEditable=a,this;var b=this._editable;this._editable=
a;this._updateCaps();if(b!==a)this.onCapabilitiesChange();return this},getEditCapabilities:function(a){var b={canCreate:!1,canUpdate:!1,canDelete:!1};if(!this.loaded||!this.isEditable())return b;var c=a&&a.feature;a=a&&a.userId;var d=h.map(this.capabilities?this.capabilities.toLowerCase().split(","):[],q.trim),e=-1<h.indexOf(d,"editing"),f=e&&-1<h.indexOf(d,"create"),b=e&&-1<h.indexOf(d,"update"),d=e&&-1<h.indexOf(d,"delete"),g=this.ownershipBasedAccessControlForFeatures,k=this.editFieldsInfo,l=k&&
k.creatorField,k=k&&k.realm,c=(c=c&&c.attributes)&&l?c[l]:void 0,p=!!this.userIsAdmin,l=!g||p||!(!g.allowOthersToUpdate&&!g.allowUpdateToOthers),g=!g||p||!(!g.allowOthersToDelete&&!g.allowDeleteToOthers);if(p||e&&!f&&!b&&!d)f=b=d=!0;e={canCreate:f,canUpdate:b,canDelete:d};null===c?(e.canUpdate=b&&l,e.canDelete=d&&g):""!==c&&c&&((a=a||this.getUserId())&&k&&(a=a+"@"+k),a.toLowerCase()!==c.toLowerCase()&&(e.canUpdate=b&&l,e.canDelete=d&&g));return e},getUserId:function(){var a;this.loaded&&(a=this.credential&&
this.credential.userId||this.userId||"");return a},setUserIsAdmin:function(a){this.userIsAdmin=a},setEditSummaryCallback:function(a){this.editSummaryCallback=a},getEditSummary:function(a,b,c){c=t.isDefined(c)?c:(new Date).getTime();var d="";c=this.getEditInfo(a,b,c);(b=b&&b.callback||this.editSummaryCallback)&&(c=b(a,c)||"");if(q.isString(c))d=c;else{if(c){a=c.action;b=c.userId;var e=c.timeValue,f=0;a&&f++;b&&f++;t.isDefined(e)&&f++;1<f&&(d=("edit"===a?"edit":"create")+(b?"User":"")+(t.isDefined(e)?
c.displayPattern:""))}d=d&&t.substitute(c,this.i18n.layers.FeatureLayer[d])}return d},getEditInfo:function(a,b,c){if(this.loaded){c=t.isDefined(c)?c:(new Date).getTime();b=b&&b.action||"last";var d=this.editFieldsInfo,e=d&&d.creatorField,f=d&&d.creationDateField,g=d&&d.editorField,d=d&&d.editDateField,g=(a=a&&a.attributes)&&g?a[g]:void 0,d=a&&d?a[d]:null,e=this._getEditData(a&&e?a[e]:void 0,a&&f?a[f]:null,c);c=this._getEditData(g,d,c);var k;switch(b){case "creation":k=e;break;case "edit":k=c;break;
case "last":k=c||e}k&&(k.action=k===c?"edit":"creation");return k}},_getEditData:function(a,b,c){var e,f,g;t.isDefined(b)&&(f=c-b,g=0>f?"Full":6E4>f?"Seconds":12E4>f?"Minute":36E5>f?"Minutes":72E5>f?"Hour":864E5>f?"Hours":6048E5>f?"WeekDay":"Full");if(void 0!==a||g)e=e||{},e.userId=a,g&&(a=d.format,c=new Date(b),e.minutes=Math.floor(f/6E4),e.hours=Math.floor(f/36E5),e.weekDay=a(c,{datePattern:"EEEE",selector:"date"}),e.formattedDate=a(c,{selector:"date"}),e.formattedTime=a(c,{selector:"time"}),e.displayPattern=
g,e.timeValue=b);return e},isEditable:function(){return!(!this._editable&&!this.userIsAdmin)},setMaxAllowableOffset:function(a){this.isEditable()||this._setMaxOffset(a,!0);return this},getMaxAllowableOffset:function(){var a=this._quantizationParameters?this._quantizationParameters.tolerance:void 0;return null!=this._maxOffset?this._maxOffset:a},_setMaxOffset:function(a,b){if(null==a)return delete this._maxOffset,delete this._quantizationParameters,this;if(this.quantize&&this.supportsCoordinatesQuantization)"esriGeometryPolyline"===
this.geometryType?this._maxOffset=a:delete this._maxOffset,this._quantizationParameters={mode:"view",originPosition:"upperLeft",tolerance:a,extent:this.fullExtent};else{if(!this._isFractionalOffsetAllowed()||!b)a=Math.floor(a);isNaN(a)||0===a?delete this._maxOffset:this._maxOffset=a;delete this._quantizationParameters}return this},_isFractionalOffsetAllowed:function(){return null==this.version||10.1<=this.version||navigator.languages&&this._isLangWithDot(navigator.languages[0])},_isLangWithDot:function(a){a=
(a=a&&a.split("-"))&&a[0]&&a[0].toLowerCase();return-1!==h.indexOf(this._langsWithDot,a)},_langsWithDot:"ar en et fr he ja ko th vi zh".split(" "),setAutoGeneralize:function(a){if(this.loaded){if(!this.isEditable()&&this.mode!==T.MODE_SNAPSHOT&&("esriGeometryPolyline"===this.geometryType||"esriGeometryPolygon"===this.geometryType||this.hasXYFootprint()))(this._autoGeneralize=a)?(this._autoSnapshot&&(this._prevScale=null),this._updateMaxOffset()):this._setMaxOffset(null)}else this._optAutoGen=a;return this},
setGDBVersion:function(a){if(!this._collection&&a!==this.gdbVersion&&(a||this.gdbVersion))this.gdbVersion=a,this._task.gdbVersion=a,this._url.query=q.mixin(this._url.query,{gdbVersion:a}),this.loaded&&(this.clearSelection(),this._map&&this.refresh()),this.onGDBVersionChange();return this},setDefinitionExpression:function(a){this._defnExpr=a;(a=this._mode)&&a.propertyChangeHandler(1);return this},getDefinitionExpression:function(){return this._defnExpr},setTimeDefinition:function(a){this._isSnapshot&&
(this._timeDefn=a,(a=this._mode)&&a.propertyChangeHandler(2));return this},getTimeDefinition:function(){return this._timeDefn},setTimeOffset:function(a,b){this._timeOffset=a;this._timeOffsetUnits=b;var c=this._mode;c&&c.propertyChangeHandler(0);return this},setUseMapTime:function(a){this.useMapTime=a;this._toggleTime(!this.suspended);(a=this._mode)&&a.propertyChangeHandler(0)},selectFeatures:function(a,b,c,d){b=b||T.SELECTION_NEW;a=this._getShallowClone(a);var e=this._map,g,k=this,h=u._fixDfd(new f(u._dfdCanceller));
a.outFields=this.getOutFields();a.returnGeometry=!0;a.multipatchOption=this.multipatchOption;e&&(a.outSpatialReference=new z(e.spatialReference.toJson()));if(!this._applyQueryFilters(a,!0))return g={features:[]},this._selectHandler(g,b,c,d,h),h;if(e=this._canDoClientSideQuery(a))h._pendingDfd=s(this._doQuery(a,e)),h._pendingDfd.then(function(a){g={features:a};k._selectHandler(g,b,c,d,h)});else{if(this._collection)return this._resolve([Error("FeatureLayer::selectFeatures - "+this.invalidParams)],null,
d,h,!0),h;var l=this;this._ts&&(a._ts=(new Date).getTime());(h._pendingDfd=this._task.execute(a)).addCallbacks(function(a){l._selectHandler(a,b,c,d,h)},function(a){l._resolve([a],null,d,h,!0)})}return h},getSelectedFeatures:function(){var a=this._selectedFeatures,b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b},clearSelection:function(a){var b=this._selectedFeatures,c=this._mode,d;for(d in b)b.hasOwnProperty(d)&&(this._unSelectFeatureIIf(d,c),c._removeFeatureIIf(d));this._selectedFeatures=
{};this._isSelOnly&&c._applyTimeFilter(!0);if(!a)this.onSelectionClear();return this},setSelectionSymbol:function(a){if(this._selectionSymbol=a){var b=this._selectedFeatures,c;for(c in b)b.hasOwnProperty(c)&&b[c].setSymbol(a)}return this},getSelectionSymbol:function(){return this._selectionSymbol},setLabelingInfo:function(a){a?(this.labelingInfo=a,this._fixLabelExpr()):delete this.labelingInfo;this._collection&&(this._typesDirty=!0);this.onLabelingInfoChange()},_fixLabelExpr:function(){var a=/\[([^\[\]]+)\]/ig,
b,c=this,d=function(a,b){var d=c._getField(b,!0);return"["+(d&&d.name||b)+"]"};h.forEach(this.labelingInfo,function(c){if(b=c.labelExpression)c.labelExpression=b.replace(a,d)})},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],e:4,f:1}],applyEdits:function(a,b,c,d,e,f){var g=f.assembly,k=f.dfd;this._applyNormalized(a,g&&g[0]);this._applyNormalized(b,g&&g[1]);this.onBeforeApplyEdits(a,b,c);var l={},p=this.objectIdField,g={f:"json"},m=!1;if(this._collection)f={},f.addResults=a?h.map(a,function(){m=!0;
return{objectId:this._nextId++,success:!0}},this):null,f.updateResults=b?h.map(b,function(a){m=!0;var b=a.attributes[p];l[b]=a;return{objectId:b,success:!0}},this):null,f.deleteResults=c?h.map(c,function(a){m=!0;return{objectId:a.attributes[p],success:!0}},this):null,m?this._editHandler(f,a,l,d,e,k):this._resolve([f.addResults,f.updateResults,f.deleteResults],null,d,k);else{a&&0<a.length&&(g.adds=this._convertFeaturesToJson(a,0,1),m=!0);if(b&&0<b.length){for(f=0;f<b.length;f++){var n=b[f];l[n.attributes[p]]=
n}g.updates=this._convertFeaturesToJson(b,0,0,1);m=!0}if(c&&0<c.length){b=[];for(f=0;f<c.length;f++)b.push(c[f].attributes[p]);g.deletes=b.join(",");m=!0}if(m){var r=this;return x({url:this._url.path+"/applyEdits",content:q.mixin(g,this._url.query),callbackParamName:"callback",load:function(b){r._editHandler(b,a,l,d,e,k)},error:function(a){r._resolve([a],null,e,k,!0)}},{usePost:!0})}this._resolve([],null,d,k)}},queryFeatures:function(a,b,c){return this._query("execute","onQueryFeaturesComplete",a,
b,c)},queryRelatedFeatures:function(a,b,c){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",a,b,c)},queryIds:function(a,b,c){return this._query("executeForIds","onQueryIdsComplete",a,b,c)},queryCount:function(a,b,c){return this._query("executeForCount","onQueryCountComplete",a,b,c)},queryExtent:function(a,b,c){return this._query("executeForExtent","onQueryExtentComplete",a,b,c)},queryAttachmentInfos:function(a,b,c){var d=this._url.path+"/"+a+"/attachments",g=new f(u._dfdCanceller),
k=this;g._pendingDfd=x({url:d,content:q.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:function(c){c=c.attachmentInfos;var f;h.forEach(c,function(b){f=e.objectToQuery({gdbVersion:k._url.query&&k._url.query.gdbVersion,layer:k._url.query&&k._url.query.layer,token:k._getToken()});b.url=d+"/"+b.id+(f?"?"+f:"");b.objectId=a});k._resolve([c],"onQueryAttachmentInfosComplete",b,g)},error:function(a){k._resolve([a],null,c,g,!0)}});return g},addAttachment:function(a,b,c,d){return this._sendAttachment("add",
a,b,c,d)},updateAttachment:function(a,c,d,e,f){d.appendChild(b.create("input",{type:"hidden",name:"attachmentId",value:c}));return this._sendAttachment("update",a,d,e,f)},deleteAttachments:function(a,b,c,d){var e=this._url.path+"/"+a+"/deleteAttachments",g=new f(u._dfdCanceller),k=this;b={f:"json",attachmentIds:b.join(",")};g._pendingDfd=x({url:e,content:q.mixin(b,this._url.query),callbackParamName:"callback",load:q.hitch(this,function(b){b=b.deleteAttachmentResults;b=h.map(b,function(b){b=new P(b);
b.attachmentId=b.objectId;b.objectId=a;return b});k._resolve([b],"onDeleteAttachmentsComplete",c,g)}),error:function(a){k._resolve([a],null,d,g,!0)}},{usePost:!0});return g},addType:function(a){var b=this.types;if(b){if(h.some(b,function(b){return b.id==a.id?!0:!1}))return!1;b.push(a)}else this.types=[a];return this._typesDirty=!0},deleteType:function(a){if(this._collection){var b=this.types;if(b){var c=-1;h.some(b,function(b,d){return b.id==a?(c=d,!0):!1});if(-1<c)return this._typesDirty=!0,b.splice(c,
1)[0]}}},toJson:function(){var a=this._json;if(a=q.isString(a)?m.fromJson(a):q.clone(a)){var a=a.layerDefinition?a:{layerDefinition:a},b=a.layerDefinition,c=this._collection;if(c&&this._typesDirty){b.types=h.map(this.types||[],function(a){return a.toJson()});var d=this.renderer,e=this.labelingInfo,f=b.drawingInfo;if((d||e)&&!f)f=b.drawingInfo={};f&&d&&-1===d.declaredClass.indexOf("TemporalRenderer")&&(f.renderer=d.toJson());e&&(f.labelingInfo=h.map(e,function(a){return a.toJson()}))}d=null;if(!c||
this._fcAdded)d={geometryType:b.geometryType,features:this._convertFeaturesToJson(this.graphics,!0)};a.featureSet=q.mixin({},a.featureSet||{},d);a.featureSet.transform&&(e=a.featureSet.transform,delete a.featureSet.transform,d=new I(a.featureSet),d.quantize(e),a.featureSet=d.toJson());c&&(a.nextObjectId=this._nextId,b.capabilities=this.capabilities);return a}},onSelectionComplete:function(){},onSelectionClear:function(){},onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},
onQueryRelatedFeaturesComplete:function(){},onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryExtentComplete:function(){},onQueryAttachmentInfosComplete:function(){},onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},onDeleteAttachmentsComplete:function(){},onCapabilitiesChange:function(){},onGDBVersionChange:function(){},onQueryLimitExceeded:function(){},onLabelingInfoChange:function(){},_forceIdentity:function(a){function b(a){var c=["allowOthersToUpdate",
"allowOthersToDelete","allowOthersToQuery"];return a&&h.some(c,function(b){return a.hasOwnProperty(b)&&!a[b]})}var c=this,d,e=this._url&&this._url.path;d=e&&e.toLowerCase().indexOf("/rest/services");(this.userIsAdmin||b(this.ownershipBasedAccessControlForFeatures))&&!this._getToken()&&-1<d&&r.id?(d=e.substring(0,d)+"/rest/info",x({url:d,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(a){if(a.owningSystemUrl)return r.id.checkSignInStatus(a.owningSystemUrl+"/sharing")}).then(function(a){if(a)return r.id.getCredential(e)}).then(function(a){a&&
c._findCredential()}).always(function(){a.call(c)})):a.call(this)},_checkMode:function(a){var b=this.geometryType,c=this.maxRecordCount;a=(a=a&&a.features&&a.features[0])&&a.attributes&&a.attributes.exceedslimit;if(this.mode===T.MODE_AUTO&&!this.isEditable()&&0===a&&(this.queryPagination||("esriGeometryPolyline"===b||"esriGeometryPolygon"===b||"esriGeometryMultipoint"===b||this.hasXYFootprint())&&c>=this.maxRecordCountForAuto||"esriGeometryPoint"===b&&c>=this.maxPointCountForAuto))this.currentMode=
T.MODE_SNAPSHOT,this._mode=new M(this),this._isSnapshot=this._autoSnapshot=!0},_queryLimit:function(){var a=this,b=new f;this._limitPromise=b.promise;setTimeout(function(){var c=new K,d=new G;d.statisticType="exceedslimit";d.maxPointCount=a.maxPointCountForAuto;d.maxRecordCount=a.maxRecordCountForAuto;d.maxVertexCount=a.maxVertexCountForAuto;d.outStatisticFieldName="exceedslimit";c.outStatistics=[d];a.queryFeatures(c).promise.then(function(a){b.resolve(a)},function(a){b.reject(a)})},0)},_updateCaps:function(){var a=
this._editable,b=q.trim(this.capabilities||""),c=h.map(b?b.split(","):[],q.trim),d=h.map(b?b.toLowerCase().split(","):[],q.trim),b=h.indexOf(d,"editing"),e,d={Create:h.indexOf(d,"create"),Update:h.indexOf(d,"update"),Delete:h.indexOf(d,"delete")};if(a&&-1===b)c.push("Editing");else if(!a&&-1<b){a=[b];for(e in d)-1<d[e]&&a.push(d[e]);a.sort();for(e=a.length-1;0<=e;e--)c.splice(a[e],1)}this.capabilities=c.join(",")},_counter:{value:0},_getUniqueId:function(){return this._counter.value++},onSuspend:function(){this.inherited(arguments);
this._toggleTime(!1);var a=this._mode;a&&a.suspend()},onResume:function(a){this.inherited(arguments);this._toggleTime(!0);var b=this._mode,c=this._map,d=this._getRenderer();if(a.firstOccurrence){this._fixRendererFields();this._checkFields();this.clearSelection();if(this.timeInfo&&!this._trackManager&&(this._trackIdField||d&&(d.latestObservationRenderer||d.trackRenderer)))this._trackManager=new V(this),this._trackManager.initialize(c);d&&"colors"in d&&"blurRadius"in d&&"maxPixelIntensity"in d&&"esriGeometryPoint"==
this.geometryType&&!this._heatmapManager&&(this._heatmapManager=new Z(this),this._heatmapManager.initialize(c));if(this._autoSnapshot&&this._autoGeneralize&&("esriGeometryPolyline"===this.geometryType||"esriGeometryPolygon"===this.geometryType||this.hasXYFootprint())&&!this.isEditable()&&null==this.getMaxAllowableOffset())d=this.generalizeForScale,this._calculatedScale=d=this.maxScale?this.maxScale:this.minScale?Math.min(d,this.minScale):Math.min(d,Q.getScale(c,this.initialExtent)),this._calcMaxOffset=
c.extent.getWidth()/c.width/c.getScale()*d;this._zoomConnect=g.connect(c,"onZoomEnd",this,this._zoomEndHandler);this._updateMaxOffset();this._needsRefresh=!1;b&&b.startup()}else this._zoomEndHandler(),b&&b.resume()},_zoomEndHandler:function(){var a=this._map;this._updateMaxOffset();this._prevScale=a.getScale();!this.suspended&&this._needsRefresh&&this.refresh()},_updateMaxOffset:function(){var a=this._map;a&&a.loaded&&this._autoGeneralize&&(this._autoSnapshot?(a=this.getMaxAllowableOffset(),this._setMaxOffset(this._getMaxOffsetForScale(),
!0),this._needsRefresh||(this._needsRefresh=a!=this.getMaxAllowableOffset())):this._setMaxOffset(a.extent.getWidth()/a.width,!a.extent.spatialReference.isWebMercator()))},_getMaxOffsetForScale:function(){if(this._map){var a=this._map.getScale(),b=this._calculatedScale,c=this._calcMaxOffset,d=this._prevScale;return a>=b&&(null==d||d<b)?c:a<b&&(null==d||d>=b)?null:this.getMaxAllowableOffset()}},_toggleTime:function(a){var b=this._map;a&&this.timeInfo&&this.useMapTime&&b?(this._mapTimeExtent=b.timeExtent,
this._timeConnect||(this._timeConnect=g.connect(b,"onTimeExtentChange",this,this._timeChangeHandler))):(this._mapTimeExtent=null,g.disconnect(this._timeConnect),this._timeConnect=null)},_timeChangeHandler:function(a){this._mapTimeExtent=a;(a=this._mode)&&a.propertyChangeHandler(0)},_getOffsettedTE:function(a){var b=this._timeOffset,c=this._timeOffsetUnits;return a&&b&&c?a.offset(-1*b,c):a},_getTimeOverlap:function(a,b){return a&&b?a.intersection(b):a||b},_getTimeFilter:function(a){var b=this.getTimeDefinition(),
c;if(b&&(c=this._getTimeOverlap(b,null),!c))return[!1];if(a){if(a=c?this._getTimeOverlap(a,c):a,!a)return[!1]}else a=c;return[!0,a]},_getAttributeFilter:function(a){var b=this.getDefinitionExpression();return a?b?"("+b+") AND ("+a+")":a:b},_applyQueryFilters:function(a,b){a.where=this._getAttributeFilter(a.where);a.maxAllowableOffset||(a.maxAllowableOffset=this._maxOffset);a.quantizationParameters=this._quantizationParameters;b&&this.supportsAdvancedQueries&&(a.orderByFields=a.orderByFields||this.getOrderByFields());
if(this.timeInfo){var c=this._getTimeFilter(a.timeExtent);if(c[0])a.timeExtent=c[1];else return!1}return!0},_add:function(a){var b=this._selectionSymbol,c=a.attributes,d=this.visibilityField;b&&this._isSelOnly&&a.setSymbol(b);if(d&&c&&c.hasOwnProperty(d))a[c[d]?"show":"hide"]();return this.add.apply(this,arguments)},_remove:function(){return this.remove.apply(this,arguments)},_canDoClientSideQuery:function(a){var b=[],c=this._map;if(!(this._isTable||!c&&!this._collection))if(!a.text&&!(a.where&&a.where!==
this.getDefinitionExpression()||a.orderByFields&&a.orderByFields.length||a.outStatistics||a.returnDistinctValues)){var d=this._isSnapshot,e=this._isSelOnly,f=a.geometry;if(f)if(!e&&a.spatialRelationship===K.SPATIAL_REL_INTERSECTS&&"extent"===f.type&&(d||c.extent.contains(f)))b.push(1);else return;if(c=a.objectIds)if(d)b.push(2);else{var f=c.length,g=this._mode,k=0,l;for(l=0;l<f;l++)g._getFeature(c[l])&&k++;if(k===f)b.push(2);else return}if(this.timeInfo)if(a=a.timeExtent,c=this._mapTimeExtent,d)a&&
b.push(3);else if(e){if(a)return}else if(c)if(-1!==h.indexOf(b,2))a&&b.push(3);else if(-1!==h.indexOf(b,1))a==c&&b.push(3);else return;else if(0<b.length)a&&b.push(3);else if(a)return;return 0<b.length?b:null}},_getAbsMid:function(a){return l.toAbsMid?l.toAbsMid(a):n.id.replace(/\/[^\/]*$/ig,"/")+a},_doQuery:function(a,b,c){var d=[],e=this.objectIdField,g=this,k=new f,l=new f,p=this.graphics;if(-1!==h.indexOf(b,1)){var m=this.spatialIndex||this._map&&this._map.spatialIndex,n,r=a.geometry._normalize(null,
!0);null==m&&ba.autoSpatialIndexing?n=(this._map||this).addPlugin(this._getAbsMid("../plugins/spatialIndex")).then(q.hitch(this,q.partial(this._getFromIndex,r,m)),function(a){l.resolve(q.hitch(this,q.partial(this._filterByExtent,p,r)))}):m&&(n=this._getFromIndex(r,m));n?n.then(function(a){for(var b=0;b<a.length;b++)a[b].results&&(d=d.concat(a[b].results));l.resolve(d)}).otherwise(function(a){l.reject(a)}):l.resolve(this._filterByExtent(p,r))}else l.resolve(p);l.then(function(f){d=f;if(-1!==h.indexOf(b,
2)){var l=a.objectIds;d=h.filter(d,function(a){return-1<h.indexOf(l,a.attributes[e])})}-1!==h.indexOf(b,3)&&g.timeInfo&&(f=a.timeExtent,d=g._filterByTime(d,f.startTime,f.endTime).match);c&&(d=h.map(d,function(a){return a.attributes[e]},this));k.resolve(d)});return k},_getFromIndex:function(a,b){b=b||this.spatialIndex||this._map.spatialIndex;a instanceof Array||(a=[a]);var c=this.id;return p(h.map(a,function(a){return b.intersects(a,c)}))},_filterByExtent:function(a,b){for(var c=[],d=0,e=a.length;d<
e;d++){var f=a[d],g=f.geometry;g&&(this.normalization&&b.length?(b[0].intersects(g)||b[1].intersects(g))&&c.push(f):b.intersects(g)&&c.push(f))}return c},_filterByTime:function(a,b,c){var d=this._startTimeField,e=this._endTimeField,f;this._twoTimeFields||(f=d||e);var g=t.isDefined,k=[],h=[],l,p=a.length,m,n;b=b?b.getTime():-Infinity;c=c?c.getTime():Infinity;if(f)for(l=0;l<p;l++)m=a[l],n=m.attributes,d=n[f],d>=b&&d<=c?k.push(m):h.push(m);else for(l=0;l<p;l++)m=a[l],n=m.attributes,f=n[d],n=n[e],f=g(f)?
f:-Infinity,n=g(n)?n:Infinity,f>=b&&f<=c||n>=b&&n<=c||b>=f&&c<=n?k.push(m):h.push(m);return{match:k,noMatch:h}},_resolve:function(a,b,c,d,e){b&&this[b].apply(this,a);c&&c.apply(null,a);d&&u._resDfd(d,a,e)},_getShallowClone:function(a){var b=new K,c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},_query:function(a,b,c,d,e){var g=this,k=this._map,h=new f(u._dfdCanceller),l=c,p;if("executeRelationshipQuery"!==a){l=this._getShallowClone(c);l.outFields||(l.outFields=this.getOutFields());l.returnGeometry=
c.hasOwnProperty("returnGeometry")?c.returnGeometry:!c.outStatistics;l.returnGeometry&&(l.multipatchOption=this.multipatchOption);var m;k&&(c=k&&k.spatialReference,(k=l.outSpatialReference)?p=!k.equals(c):l.outSpatialReference=new z(c.toJson()));if(!this._applyQueryFilters(l,"execute"===a&&!l.outStatistics)){switch(a){case "execute":m=new I({features:[]});break;case "executeForIds":m=[];break;case "executeForCount":m=0;break;case "executeForExtent":m={}}this._resolve([m],b,d,h);return h}if(c="executeForExtent"!==
a&&!p&&this._canDoClientSideQuery(l))return h._pendingDfd=s(this._doQuery(l,c,"executeForIds"===a||"executeForCount"===a)),h._pendingDfd.then(function(c){switch(a){case "execute":m=new I;m.features=c;break;case "executeForIds":m=c;break;case "executeForCount":m=c.length}g._resolve([m],b,d,h)}),h}if(this._collection)return this._resolve([Error("FeatureLayer::_query - "+this.invalidParams)],null,e,h,!0),h;this._ts&&(l._ts=(new Date).getTime());(h._pendingDfd=this._task[a](l)).addCallbacks(function(c){var e=
!!l.outStatistics||p;if("execute"===a||"executeRelationshipQuery"===a){var f,k;if("execute"===a){f=c.features;k=f.length;for(k-=1;0<=k;k--)if(f[k]._layer=g,!e&&!g._isTable){var m=g._mode._getFeature(f[k].attributes[g.objectIdField]);m&&f.splice(k,1,m)}}else for(m in c)if(c.hasOwnProperty(m)){f=c[m].features;k=f.length;for(k-=1;0<=k;k--)f[k]._layer=g}}g._resolve([c],b,d,h)},function(a){g._resolve([a],null,e,h,!0)});return h},_convertFeaturesToJson:function(a,b,c,d){var e=[],f=this._selectionSymbol,
g=this.visibilityField,k,l=this.objectIdField;if(this.loaded&&(c||d))k=h.filter(this.fields,function(a){return!1===a.editable&&(!d||a.name!==l)});for(c=0;c<a.length;c++){var p=a[c],n={},r=p.geometry,t=p.attributes,s=p.symbol;if(r&&(!d||!this.loaded||this.allowGeometryUpdates))n.geometry=r.toJson();g?(n.attributes=t=q.mixin({},t),t[g]=p.visible?1:0):t&&(n.attributes=q.mixin({},t));n.attributes&&k&&k.length&&h.forEach(k,function(a){delete n.attributes[a.name]});s&&s!==f&&(n.symbol=s.toJson());e.push(n)}return b?
e:m.toJson(e)},_selectHandler:function(a,b,c,d,e){var f;d=T;switch(b){case d.SELECTION_NEW:this.clearSelection(!0);f=!0;break;case d.SELECTION_ADD:f=!0;break;case d.SELECTION_SUBTRACT:f=!1}d=a.features;var g=this._mode,k=[],h=this.objectIdField,l,p;if(f)for(f=0;f<d.length;f++)l=d[f],p=l.attributes[h],l=g._addFeatureIIf(p,l),k.push(l),this._selectFeatureIIf(p,l,g);else for(f=0;f<d.length;f++)l=d[f],p=l.attributes[h],this._unSelectFeatureIIf(p,g),p=g._removeFeatureIIf(p),k.push(p||l);this._isSelOnly&&
g._applyTimeFilter(!0);this._resolve([k,b,a.exceededTransferLimit?{queryLimitExceeded:!0}:null],"onSelectionComplete",c,e);if(a.exceededTransferLimit)this.onQueryLimitExceeded()},_selectFeatureIIf:function(a,b,c){var d=this._selectedFeatures,e=d[a];e||(c._incRefCount(a),d[a]=b,this._isTable||(this._setSelectSymbol(b),b.attr("data-selected","")));return e||b},_unSelectFeatureIIf:function(a,b){var c=this._selectedFeatures[a];c&&(b._decRefCount(a),delete this._selectedFeatures[a],this._isTable||(this._setUnSelectSymbol(c),
c.attr("data-selected")));return c},_isSelected:function(a){},_setSelectSymbol:function(a){var b=this._selectionSymbol;b&&!this._isSelOnly&&a.setSymbol(b)},_setUnSelectSymbol:function(a){var b=this._selectionSymbol;b&&!this._isSelOnly&&b===a.symbol&&a.setSymbol(null,!0)},_getOutFields:function(){var a=[this.objectIdField,this.typeIdField,this.creatorField,this._startTimeField,this._endTimeField,this._trackIdField].concat(this._rendererFields).concat(this.dataAttributes),a=h.filter(a,function(a,b,
c){return!!a&&h.indexOf(c,a)===b}),b=q.clone(this._outFields);if(b){if(-1!==h.indexOf(b,"*"))return b;h.forEach(a,function(a){-1===h.indexOf(b,a)&&b.push(a)});return b}return a},_checkFields:function(a){var b=a||this._getOutFields();h.forEach(b,function(a){"*"!==a&&this._getField(a)},this);!a&&!this._isTable&&(!this._fserver&&!this._collection&&!this._isStream)&&h.some(this.fields,function(a){return a&&"esriFieldTypeGeometry"===a.type?!0:!1})},_fixFieldCase:function(a,b,c){var d=a&&a[b],e;if(d&&!q.isFunction(d)){if(e=
!this._getField(d)&&this._getField(d,!0))d=a[b]=e.name;c&&c.push(d)}return d},_fixRendererFields:function(){var a=this.renderer;this._orderBy=null;if(a&&0<this.fields.length){var b=[],c,a=h.filter([a,a.observationRenderer,a.latestObservationRenderer,a.trackRenderer],t.isDefined),d=[].concat(a);h.forEach(a,function(a){h.forEach(a.rendererInfos,function(a){a.renderer&&d.push(a.renderer)})});h.forEach(d,function(a){this._fixFieldCase(a,"attributeField",b);this._fixFieldCase(a,"attributeField2",b);this._fixFieldCase(a,
"attributeField3",b);this._fixFieldCase(a.rotationInfo,"field",b);if((c=this._fixFieldCase(a.sizeInfo,"field",b))&&!this._orderBy)this._orderBy=[c+" DESC"];this._fixFieldCase(a.sizeInfo,"normalizationField",b);this._fixFieldCase(a.colorInfo,"field",b);this._fixFieldCase(a.colorInfo,"normalizationField",b);this._fixFieldCase(a.field,"field",b);this._fixFieldCase(a.opacityInfo,"field",b);this._fixFieldCase(a.opacityInfo,"normalizationField",b);h.forEach(a.visualVariables,function(a){c=this._fixFieldCase(a,
"field",b);"sizeInfo"===a.type&&c&&!this._orderBy&&(this._orderBy=[c+" DESC"]);this._fixFieldCase(a,"normalizationField",b)},this);if(!this._orderBy&&a.addBreak&&!q.isFunction(a.attributeField)&&(a.backgroundFillSymbol||this._hasSizeDiff(a)))this._orderBy=[a.attributeField+" DESC"]},this);this._rendererFields=h.filter(b,t.isDefined)}},_hasSizeDiff:function(a){var b=Number.MAX_VALUE,c=-Number.MAX_VALUE,d,e;h.forEach(a.infos,function(a){if(e=a.symbol){d=0;switch(e.type){case "simplemarkersymbol":d=
e.size;break;case "picturemarkersymbol":d=(e.width+e.height)/2;break;case "simplelinesymbol":case "cartographiclinesymbol":d=e.width;break;case "simplefillsymbol":case "picturefillsymbol":d=e.outline&&e.outline.width}d&&(b=Math.min(b,d),c=Math.max(c,d))}});return b!==Number.MAX_VALUE&&c!==-Number.MAX_VALUE&&1<Math.abs(c-b)},getOrderByFields:function(){var a=this.orderByFields||this._orderBy;return this.supportsAdvancedQueries&&a?h.filter(a,function(a){a=a.split(" ")[0];return!!this._getField(a,!0)},
this):null},_getField:function(a,b){var c=this.fields;if(!c||0===c.length)return null;var d;b&&(a=a.toLowerCase());h.some(c,function(c){var e=!1;(e=b?c&&c.name.toLowerCase()===a?!0:!1:c&&c.name===a?!0:!1)&&(d=c);return e});return d},_getDateOpts:function(){this._dtOpts||(this._dtOpts={properties:h.map(h.filter(this.fields,function(a){return!!(a&&"esriFieldTypeDate"===a.type)}),function(a){return a.name})});return this._dtOpts},_applyNormalized:function(a,b){a&&b&&h.forEach(a,function(a,c){a&&b[c]&&
a.setGeometry(b[c])})},_editHandler:function(a,b,c,d,e,f){e=a.addResults;var g=a.updateResults;a=a.deleteResults;var k,l,p,m,n=this.objectIdField,r=this._mode,t=this._isTable;k=this.editFieldsInfo;var s=this.getOutFields()||[],u=k&&k.creatorField,x=k&&k.creationDateField,v=k&&k.editorField,y=k&&k.editDateField;k=k&&k.realm;-1===h.indexOf(s,"*")&&(u&&-1===h.indexOf(s,u)&&(u=null),x&&-1===h.indexOf(s,x)&&(x=null),v&&-1===h.indexOf(s,v)&&(v=null),y&&-1===h.indexOf(s,y)&&(y=null));var s=x||y?(new Date).getTime():
null,w=u||v?this.getUserId():void 0;w&&k&&(w=w+"@"+k);if(e)for(k=0;k<e.length;k++)e[k]=new P(e[k]),t||(l=e[k],l.success&&(l=l.objectId,p=b[k],(m=p._graphicsLayer)&&m!==this&&m.remove(p),m=p.attributes||{},m[n]=l,u&&(m[u]=w),v&&(m[v]=w),x&&(m[x]=s),y&&(m[y]=s),p.setAttributes(m),r._init&&r.drawFeature(p)));if(g)for(k=0;k<g.length;k++)if(g[k]=new P(g[k]),!t&&(l=g[k],l.success)){l=l.objectId;p=c[l];if(b=r._getFeature(l))b.geometry!==p.geometry&&p.geometry&&b.setGeometry(H.fromJson(p.geometry.toJson())),
b.attributes!==p.attributes&&p.attributes&&b.setAttributes(q.mixin(b.attributes,p.attributes)),this._repaint(b,l);p=b||p;m=p.attributes||{};v&&(m[v]=w);y&&(m[y]=s);p.setAttributes(m)}if(a){c=[];for(k=0;k<a.length;k++)if(a[k]=new P(a[k]),!t&&(l=a[k],l.success&&(l=l.objectId,p=r._getFeature(l))))this._unSelectFeatureIIf(l,r)&&c.push(p),p._count=0,r._removeFeatureIIf(l);if(0<c.length)this.onSelectionComplete(c,T.SELECTION_SUBTRACT)}this._resolve([e,g,a],"onEditsComplete",d,f)},_sendAttachment:function(a,
b,c,d,e){var f=this;return x({url:this._url.path+"/"+b+"/"+("add"===a?"addAttachment":"updateAttachment"),form:c,content:q.mixin(this._url.query,{f:"json",token:this._getToken()||void 0}),callbackParamName:"callback.html",handleAs:"json"}).addCallback(function(c){var e="add"===a?"onAddAttachmentComplete":"onUpdateAttachmentComplete";c=new P(c["add"===a?"addAttachmentResult":"updateAttachmentResult"]);c.attachmentId=c.objectId;c.objectId=b;f._resolve([c],e,d);return c}).addErrback(function(a){f._resolve([a],
null,e,null,!0)})},_repaint:function(a,b,c){b=t.isDefined(b)?b:a.attributes[this.objectIdField];(!(b in this._selectedFeatures)||!this._selectionSymbol)&&a.setSymbol(a.symbol,c)},_getKind:function(a){var b=this._trackManager;return b?b.isLatestObservation(a)?1:0:0}});q.mixin(T,{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,MODE_AUTO:6,MODE_STREAM:7,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});
N._createWrappers(T);return T})},"esri/renderers/jsonUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../Color ../symbols/jsonUtils ./SimpleRenderer ./UniqueValueRenderer ./ClassBreaksRenderer ./VectorFieldRenderer ./DotDensityRenderer ./ScaleDependentRenderer ./TimeClassBreaksAger ./TimeRampAger ./TemporalRenderer ./HeatmapRenderer".split(" "),function(l,n,a,g,q,h,m,f,d,c,e,b,k,s,p,r,t){return{fromJson:function(a){var b;switch(a.type||""){case "simple":b=
new f(a);break;case "uniqueValue":b=new d(a);break;case "classBreaks":b=new c(a);break;case "vectorField":b=new e(a);break;case "scaleDependent":b=this._scaleDependentFromJson(a);break;case "dotDensity":b=this._dotDensityFromJson(a);break;case "temporal":b=this._temporalFromJson(a);break;case "heatmap":b=this._heatmapFromJson(a)}return b},_scaleDependentFromJson:function(a){var b={},c=a.minScale;b.rendererInfos=l.map(a.rendererInfos,function(a){var b=a.maxScale;a={minScale:c,maxScale:b,renderer:a.renderer&&
this.fromJson(a.renderer)};c=b;return a},this);return new k(b)},_dotDensityFromJson:function(a){a.backgroundColor&&n.isArray(a.backgroundColor)&&(a.backgroundColor=h.toDojoColor(a.backgroundColor));0<a.dotSize&&(a.dotSize=g.pt2px(a.dotSize));a.fields&&l.forEach(a.fields,function(a){a&&n.isArray(a.color)&&(a.color=h.toDojoColor(a.color))});a.legendOptions&&(a.legendOptions.backgroundColor&&n.isArray(a.legendOptions.backgroundColor)&&(a.legendOptions.backgroundColor=h.toDojoColor(a.legendOptions.backgroundColor)),
a.legendOptions.outline&&(a.legendOptions.outline=m.fromJson(a.legendOptions.outline)));a.outline&&(a.outline=m.fromJson(a.outline));return new b(a)},_temporalFromJson:function(a){var b,c,d;a=a||{};b=this.fromJson(a.observationRenderer);c=a.latestObservationRenderer?this.fromJson(a.latestObservationRenderer):null;d=a.trackRenderer?this.fromJson(a.trackRenderer):null;a=this._agerFromJson(a.observationAger);return new r(b,c,d,a)},_agerFromJson:function(a){var b;a=a||{};a.colorRange||a.sizeRange||a.alphaRange?
b=this._timeRampFromJson(a):a.agerClassBreakInfos&&(b=this._timeClassBreaksFromJson(a));return b},_timeRampFromJson:function(a){var b,c,d;a.colorRange&&1<a.colorRange.length&&(b=[h.toDojoColor(a.colorRange[0]),h.toDojoColor(a.colorRange[1])]);a.sizeRange&&1<a.sizeRange.length&&(c=[a.sizeRange[0],a.sizeRange[1]]);a.alphaRange&&1<a.alphaRange.length&&(d=[a.alphaRange[0]/255,a.alphaRange[1]/255]);return new p(b,c,d)},_timeClassBreaksFromJson:function(a){var b=a.agerClassBreakInfos,c,d,e=[],f;c=s.UNIT_DAYS;
switch(a.timeUnits){case "esriTimeUnitsSeconds":c=s.UNIT_SECONDS;break;case "esriTimeUnitsMilliseconds":c=s.UNIT_MILLISECONDS;break;case "esriTimeUnitsHours":c=s.UNIT_HOURS;break;case "esriTimeUnitsMinutes":c=s.UNIT_MINUTES;break;case "esriTimeUnitsMonths":c=s.UNIT_MONTHS;break;case "esriTimeUnitsWeeks":c=s.UNIT_WEEKS;break;case "esriTimeUnitsYears":c=s.UNIT_YEARS}for(f=0;f<b.length;f+=1)a=b[f],d={minAge:0,maxAge:a.oldestAge||Infinity},a.color&&(d.color=h.toDojoColor(a.color)),a.alpha&&(d.alpha=a.alpha/
255),d.size=a.size,e[f]=d;return new s(e,c)},_heatmapFromJson:function(a){var b=a.colorStops;b&&b instanceof Array&&l.forEach(b,function(a){a.color=h.toDojoColor(a.color)});return new t(a)}}})},"esri/renderers/TimeClassBreaksAger":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has dojo/date ../kernel ../lang ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),function(l,n,a,g,q,h,m,f,d,c){var e=l(c,{declaredClass:"esri.renderer.TimeClassBreaksAger",constructor:function(a,
c){this.infos=a;this.timeUnits=c||"day";a.sort(function(a,b){return a.minAge<b.minAge?-1:a.minAge>b.minAge?1:0})},getAgedSymbol:function(a,c){var d=c.getLayer(),e=c.attributes,g=m.isDefined;a=f.fromJson(a.toJson());var h=d._map.timeExtent.endTime;if(!h)return a;var l=q.difference(new Date(e[d._startTimeField]),h,this.timeUnits);n.some(this.infos,function(c){if(l>=c.minAge&&l<=c.maxAge){var d=c.color,e=c.size;c=c.alpha;d&&a.setColor(d);g(e)&&this._setSymbolSize(a,e);g(c)&&a.color&&(a.color.a=c);return!0}},
this);return a},toJson:function(){var a={agerClassBreakInfos:[]},c,e,f;a.timeUnits=this._getRestUnits(this.timeUnits);for(c=0;c<this.infos.length;c+=1)e=this.infos[c],f={},f.oldestAge=Infinity===e.maxAge?null:e.maxAge,f.size=e.size,e.color&&(f.color=d.toJsonColor(e.color)),e.alpha&&(f.alpha=Math.round(255*e.alpha)),a.agerClassBreakInfos[c]=f;return a},_getRestUnits:function(a){var c="esriTimeUnitsDays";switch(a){case e.UNIT_SECONDS:c="esriTimeUnitsSeconds";break;case e.UNIT_MILLISECONDS:c="esriTimeUnitsMilliseconds";
break;case e.UNIT_HOURS:c="esriTimeUnitsHours";break;case e.UNIT_MINUTES:c="esriTimeUnitsMinutes";break;case e.UNIT_MONTHS:c="esriTimeUnitsMonths";break;case e.UNIT_WEEKS:c="esriTimeUnitsWeeks";break;case e.UNIT_YEARS:c="esriTimeUnitsYears"}return c}});a.mixin(e,{UNIT_DAYS:"day",UNIT_HOURS:"hour",UNIT_MILLISECONDS:"millisecond",UNIT_MINUTES:"minute",UNIT_MONTHS:"month",UNIT_SECONDS:"second",UNIT_WEEKS:"week",UNIT_YEARS:"year"});return e})},"esri/renderers/SymbolAger":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(l,n,a,g){return l(null,{declaredClass:"esri.renderer.SymbolAger",getAgedSymbol:function(a,g){},_setSymbolSize:function(a,g){switch(a.type){case "simplemarkersymbol":a.setSize(g);break;case "picturemarkersymbol":a.setWidth(g);a.setHeight(g);break;case "simplelinesymbol":case "cartographiclinesymbol":a.setWidth(g);break;case "simplefillsymbol":case "picturefillsymbol":a.outline&&a.outline.setWidth(g)}}})})},"esri/renderers/TimeRampAger":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has ../kernel ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),
function(l,n,a,g,q,h,m,f){return l(f,{declaredClass:"esri.renderer.TimeRampAger",constructor:function(a,c,e){this.colorRange=a;this.sizeRange=c;this.alphaRange=e},getAgedSymbol:function(d,c){var e=c.getLayer(),b=c.attributes;d=h.fromJson(d.toJson());var f=e._map.timeExtent,g=f.startTime,f=f.endTime;if(!g||!f)return d;g=g.getTime();f=f.getTime();e=new Date(b[e._startTimeField]);e=e.getTime();e<g&&(e=g);g=f===g?1:(e-g)/(f-g);if(e=this.sizeRange)b=e[0],f=e[1],e=Math.abs(f-b)*g,this._setSymbolSize(d,
b<f?b+e:b-e);if(e=this.colorRange){var f=e[0],l=e[1],m=Math.round,b=new a,n=f.r,q=l.r,e=Math.abs(q-n)*g;b.r=m(n<q?n+e:n-e);n=f.g;q=l.g;e=Math.abs(q-n)*g;b.g=m(n<q?n+e:n-e);n=f.b;q=l.b;e=Math.abs(q-n)*g;b.b=m(n<q?n+e:n-e);f=f.a;l=l.a;e=Math.abs(l-f)*g;b.a=f<l?f+e:f-e;d.setColor(b)}b=d.color;if((e=this.alphaRange)&&b)f=e[0],l=e[1],e=Math.abs(l-f)*g,b.a=f<l?f+e:f-e;return d},toJson:function(){var a={};this.sizeRange&&(a.sizeRange=this.sizeRange);this.colorRange&&(a.colorRange=[m.toJsonColor(this.colorRange[0]),
m.toJsonColor(this.colorRange[1])]);this.alphaRange&&(a.alphaRange=[Math.round(255*this.alphaRange[0]),Math.round(255*this.alphaRange[1])]);return a}})})},"esri/tasks/QueryTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has ../kernel ../request ../deferredUtils ../geometry/Extent ../geometry/normalizeUtils ./Task ./FeatureSet".split(" "),function(l,n,a,g,q,h,m,f,d,c,e,b,k){l=l(b,{declaredClass:"esri.tasks.QueryTask",_eventMap:{complete:["featureSet"],
"execute-for-count-complete":["count"],"execute-for-ids-complete":["objectIds"],"execute-relationship-query-complete":["featureSets"]},constructor:function(a,b){this._handler=n.hitch(this,this._handler);this._relationshipQueryHandler=n.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=n.hitch(this,this._executeForIdsHandler);this._countHandler=n.hitch(this,this._countHandler);this._extentHandler=n.hitch(this,this._extentHandler);this.source=b&&b.source;this.gdbVersion=b&&b.gdbVersion;
this.registerConnectEvents()},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForExtent",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},onExecuteForExtentComplete:function(){},execute:function(a,b,c,d,e){var g=e.assembly;a=this._encode(n.mixin({},
this._url.query,{f:"json"},a.toJson(g&&g[0])));var k=this._handler,h=this._errorHandler;this.source&&(g={source:this.source.toJson()},a.layer=q.toJson(g));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return f({url:this._url.path+"/query",content:a,callbackParamName:"callback",load:function(a,d){k(a,d,b,c,e.dfd)},error:function(a){h(a,c,e.dfd)},callbackSuffix:d},this.requestOptions)},executeRelationshipQuery:function(a,b,c){a=this._encode(n.mixin({},this._url.query,{f:"json"},a.toJson()));var e=
this._relationshipQueryHandler,k=this._errorHandler;this.gdbVersion&&(a.gdbVersion=this.gdbVersion);var h=new g(d._dfdCanceller);h._pendingDfd=f({url:this._url.path+"/queryRelatedRecords",content:a,callbackParamName:"callback",load:function(a,d){e(a,d,b,c,h)},error:function(a){k(a,c,h)}},this.requestOptions);return h},executeForIds:function(a,b,c,d){var e=d.assembly;a=this._encode(n.mixin({},this._url.query,{f:"json",returnIdsOnly:!0},a.toJson(e&&e[0])));var g=this._executeForIdsHandler,k=this._errorHandler;
this.source&&(e={source:this.source.toJson()},a.layer=q.toJson(e));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return f({url:this._url.path+"/query",content:a,callbackParamName:"callback",load:function(a,e){g(a,e,b,c,d.dfd)},error:function(a){k(a,c,d.dfd)}},this.requestOptions)},executeForCount:function(a,b,c,d){var e=d.assembly;a=this._encode(n.mixin({},this._url.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},a.toJson(e&&e[0])));var g=this._countHandler,k=this._errorHandler;this.source&&
(e={source:this.source.toJson()},a.layer=q.toJson(e));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return f({url:this._url.path+"/query",content:a,callbackParamName:"callback",load:function(a,e){g(a,e,b,c,d.dfd)},error:function(a){k(a,c,d.dfd)}},this.requestOptions)},executeForExtent:function(a,b,c,d){var e=d.assembly;a=this._encode(n.mixin({},this._url.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},a.toJson(e&&e[0])));var g=this._extentHandler,k=this._errorHandler;this.source&&(e={source:this.source.toJson()},
a.layer=q.toJson(e));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return f({url:this._url.path+"/query",content:a,callbackParamName:"callback",load:function(a,e){g(a,e,b,c,d.dfd)},error:function(a){k(a,c,d.dfd)}},this.requestOptions)},_handler:function(a,b,c,d,e){try{var f=new k(a);this._successHandler([f],"onComplete",c,e)}catch(g){this._errorHandler(g,d,e)}},_relationshipQueryHandler:function(b,c,d,e,f){try{var g=b.geometryType,h=b.spatialReference,l={};a.forEach(b.relatedRecordGroups,function(a){var b=
{};b.geometryType=g;b.spatialReference=h;b.features=a.relatedRecords;b=new k(b);if(null!=a.objectId)l[a.objectId]=b;else for(var c in a)a.hasOwnProperty(c)&&"relatedRecords"!==c&&(l[a[c]]=b)});this._successHandler([l],"onExecuteRelationshipQueryComplete",d,f)}catch(m){this._errorHandler(m,e,f)}},_executeForIdsHandler:function(a,b,c,d,e){try{this._successHandler([a.objectIds],"onExecuteForIdsComplete",c,e)}catch(f){this._errorHandler(f,d,e)}},_countHandler:function(a,b,c,d,e){try{var f,g=a.features,
k=a.objectIds;if(k)f=k.length;else{if(g)throw Error("Unable to perform query. Please check your parameters.");f=a.count}this._successHandler([f],"onExecuteForCountComplete",c,e)}catch(h){this._errorHandler(h,d,e)}},_extentHandler:function(a,b,d,e,f){try{a.extent&&(a.extent=new c(a.extent)),this._successHandler([a],"onExecuteForExtentComplete",d,f)}catch(g){this._errorHandler(g,e,f)}}});e._createWrappers(l);return l})},"esri/geometry/normalizeUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/Deferred dojo/has ../kernel ../config ../deferredUtils ./Polyline ./Polygon ./webMercatorUtils ./jsonUtils".split(" "),
function(l,n,a,g,q,h,m,f,d,c,e){function b(a,b){return Math.ceil((a-b)/(2*b))}function k(a,b){var c=a.paths||a.rings,d,e,f=c.length,g;for(d=0;d<f;d++){g=c[d].length;for(e=0;e<g;e++){var k=a.getPoint(d,e);a.setPoint(d,e,k.offset(b,0))}}return a}function s(a,b){if(!(a instanceof f||a instanceof d))throw Error("_straightLineDensify: the input geometry is neither polyline nor polygon");var c=a instanceof f,e=[],g;l.forEach(c?a.paths:a.rings,function(a){e.push(g=[]);g.push([a[0][0],a[0][1]]);var c,d,f,
k,h,l,m,p,n,q,r,t;for(h=0;h<a.length-1;h++){c=a[h][0];d=a[h][1];f=a[h+1][0];k=a[h+1][1];m=Math.sqrt((f-c)*(f-c)+(k-d)*(k-d));p=(k-d)/m;n=(f-c)/m;q=m/b;if(1<q){for(l=1;l<=q-1;l++)t=l*b,r=n*t+c,t=p*t+d,g.push([r,t]);l=(m+Math.floor(q-1)*b)/2;r=n*l+c;t=p*l+d;g.push([r,t])}g.push([f,k])}});return c?new f({paths:e,spatialReference:a.spatialReference}):new d({rings:e,spatialReference:a.spatialReference})}function p(a,b,d){b&&(a=s(a,1E6),a=c.webMercatorToGeographic(a,!0));d&&(a=k(a,d));return a}function r(a,
c,d){var e=a.x||a[0],f;e>c?(f=b(e,c),a.x?a=a.offset(-2*f*c,0):a[0]=e+-2*f*c):e<d&&(f=b(e,d),a.x?a=a.offset(-2*f*d,0):a[0]=e+-2*f*d);return a}function t(a,c){var d=-1;l.forEach(c.cutIndexes,function(e,f){var g=c.geometries[f];l.forEach(g.rings||g.paths,function(a,c){l.some(a,function(d){if(!(180>d[0])){d=0;var e,f=a.length,k;for(e=0;e<f;e++)k=a[e][0],d=k>d?k:d;d=Number(d.toFixed(9));d=-360*b(d,180);f=a.length;for(e=0;e<f;e++)k=g.getPoint(c,e),g.setPoint(c,e,k.offset(d,0))}return!0})});e===d?g.rings?
l.forEach(g.rings,function(b){a[e]=a[e].addRing(b)}):l.forEach(g.paths,function(b){a[e]=a[e].addPath(b)}):(d=e,a[e]=g)});return a}function x(g,m,n,q){var s=new a;s.addCallbacks(n,q);m=m||h.defaults.geometryService;var u=[],x=[],y,z,I,G,J,H,N,Q,L=0;l.forEach(g,function(a){if(a)if(y||(y=a.spatialReference,z=y._getInfo(),G=(I=y._isWebMercator())?2.0037508342788905E7:180,J=I?-2.0037508342788905E7:-180,H=I?102100:4326,N=new f({paths:[[[G,J],[G,G]]],spatialReference:{wkid:H}}),Q=new f({paths:[[[J,J],[J,
G]]],spatialReference:{wkid:H}})),z){var c=e.fromJson(a.toJson()),g=a.getExtent();"point"===a.type?u.push(r(c,G,J)):"multipoint"===a.type?(c.points=l.map(c.points,function(a){return r(a,G,J)}),u.push(c)):"extent"===a.type?(c=g._normalize(null,null,z),u.push(c.rings?new d(c):c)):g?(a=2*b(g.xmin,J)*G,c=0===a?c:k(c,a),g=g.offset(a,0),g.intersects(N)&&g.xmax!==G?(L=g.xmax>L?g.xmax:L,c=p(c,I),x.push(c),u.push("cut")):g.intersects(Q)&&g.xmin!==J?(L=2*g.xmax*G>L?2*g.xmax*G:L,c=p(c,I,360),x.push(c),u.push("cut")):
u.push(c)):u.push(c)}else u.push(a);else u.push(a)});n=new f;q=b(L,G);for(var Y=-90,X=q;0<q;){var W=-180+360*q;n.addPath([[W,Y],[W,-1*Y]]);Y*=-1;q--}0<x.length&&0<X?m?m.cut(x,n,function(a){x=t(x,a);var b=[];l.forEach(u,function(a,d){if("cut"===a){var e=x.shift();g[d].rings&&1<g[d].rings.length&&e.rings.length>=g[d].rings.length?(u[d]="simplify",b.push(e)):u[d]=!0===I?c.geographicToWebMercator(e):e}});0<b.length?m.simplify(b,function(a){l.forEach(u,function(b,d){"simplify"===b&&(u[d]=!0===I?c.geographicToWebMercator(a.shift()):
a.shift())});s.callback(u)},function(a){s.errback(a)}):s.callback(u)},function(a){s.errback(a)}):s.errback(Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing.")):(l.forEach(u,function(a,b){if("cut"===a){var d=x.shift();u[b]=!0===I?c.geographicToWebMercator(d):d}}),s.callback(u));return s}function y(a,b,c,d){var e=!1,f;n.isObject(a)&&a&&(n.isArray(a)?a.length&&((f=a[0]&&a[0].declaredClass)&&-1!==f.indexOf("Graphic")?(a=l.map(a,function(a){return a.geometry}),e=a.length?
!0:!1):f&&-1!==f.indexOf("esri.geometry.")&&(e=!0)):(f=a.declaredClass)&&-1!==f.indexOf("FeatureSet")?(a=l.map(a.features||[],function(a){return a.geometry}),e=a.length?!0:!1):f&&-1!==f.indexOf("esri.geometry.")&&(e=!0));e&&b.push({index:c,property:d,value:a})}function u(a,b){var c=[];l.forEach(b,function(b){var d=b.i,e=a[d];b=b.p;var f;if(n.isObject(e)&&e)if(b)if("*"===b[0])for(f in e)e.hasOwnProperty(f)&&y(e[f],c,d,f);else l.forEach(b,function(a){y(n.getObject(a,!1,e),c,d,a)});else y(e,c,d)});return c}
function z(a,b){var c=0,d={};l.forEach(b,function(b){var e=b.index,f=b.property,g=b.value,k=g.length||1,h=a.slice(c,c+k);n.isArray(g)||(h=h[0]);c+=k;delete b.value;f?(d[e]=d[e]||{},d[e][f]=h):d[e]=h});return d}return{normalizeCentralMeridian:x,_foldCutResults:t,_prepareGeometryForCut:p,_offsetMagnitude:b,_pointNormalization:r,_updatePolyGeometry:k,_straightLineDensify:s,_createWrappers:function(b){var c=n.isObject(b)?b.prototype:n.getObject(b+".prototype");l.forEach(c.__msigns,function(b){var d=c[b.n];
c[b.n]=function(){var c=this,e=[],f,g=new a(m._dfdCanceller);b.f&&m._fixDfd(g);for(f=0;f<b.c;f++)e[f]=arguments[f];var k={dfd:g};e.push(k);var h,p=[],n;c.normalization&&!c._isTable&&(h=u(e,b.a),l.forEach(h,function(a){p=p.concat(a.value)}),p.length&&(n=x(p)));n?(g._pendingDfd=n,n.addCallbacks(function(a){g.canceled||(k.assembly=z(a,h),g._pendingDfd=d.apply(c,e))},function(a){var d=c.declaredClass;d&&-1!==d.indexOf("FeatureLayer")?c._resolve([a],null,e[b.e],g,!0):c._errorHandler(a,e[b.e],g)})):g._pendingDfd=
d.apply(c,e);return g}})},_disassemble:u,_addToBucket:y,_reassemble:z}})},"esri/tasks/FeatureSet":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../graphic ../SpatialReference ../graphicsUtils ../geometry/jsonUtils ../symbols/jsonUtils".split(" "),function(l,n,a,g,q,h,m,f,d,c,e){return l(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(b){if(b){n.mixin(this,b);var d=this.features,g=b.spatialReference,h=c.getGeometryType(b.geometryType),
g=this.spatialReference=new f(g);this.geometryType=b.geometryType;b.fields&&(this.fields=b.fields);a.forEach(d,function(a,b){var c=a.geometry&&a.geometry.spatialReference;d[b]=new m(h&&a.geometry?new h(a.geometry):null,a.symbol&&e.fromJson(a.symbol),a.attributes);d[b].geometry&&!c&&d[b].geometry.setSpatialReference(g)});this._hydrate()}else this.features=[]},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(a){var e={};this.displayFieldName&&(e.displayFieldName=
this.displayFieldName);this.fields&&(e.fields=this.fields);this.spatialReference?e.spatialReference=this.spatialReference.toJson():this.features[0]&&this.features[0].geometry&&(e.spatialReference=this.features[0].geometry.spatialReference.toJson());this.features[0]&&(this.features[0].geometry&&(e.geometryType=c.getJsonType(this.features[0].geometry)),e.features=d._encodeGraphics(this.features,a));e.exceededTransferLimit=this.exceededTransferLimit;e.transform=this.transform;return h.fixJson(e)},_hydrate:function(){var a=
this.transform;if(a){var c=this.features,d,e=a.translate[0],f=a.translate[1],g=a.scale[0],h=a.scale[1],l=function(a,b,c){if("esriGeometryPoint"===a)return function(a){a.x=b(a.x);a.y=c(a.y)};if("esriGeometryPolyline"===a||"esriGeometryPolygon"===a)return function(a){a=a.rings||a.paths;var d,e,f,g,k,h,l,m;d=0;for(e=a.length;d<e;d++){k=a[d];f=0;for(g=k.length;f<g;f++)h=k[f],0<f?(l+=h[0],m+=h[1]):(l=h[0],m=h[1]),h[0]=b(l),h[1]=c(m)}};if("esriGeometryEnvelope"===a)return function(a){a.xmin=b(a.xmin);a.ymin=
c(a.ymin);a.xmax=b(a.xmax);a.ymax=c(a.ymax)};if("esriGeometryMultipoint"===a)return function(a){a=a.points;var d,e,f,g,k;d=0;for(e=a.length;d<e;d++)f=a[d],0<d?(g+=f[0],k+=f[1]):(g=f[0],k=f[1]),f[0]=b(g),f[1]=c(k)}}(this.geometryType,function(a){return a*g+e},function(a){return f-a*h}),a=0;for(d=c.length;a<d;a++)c[a].geometry&&l(c[a].geometry);this.transform=null}},quantize:function(a){var c=a.translate[0],d=a.translate[1],e=a.scale[0],f=a.scale[1],g=this.features,h=function(a,b,c){var d,e,f,g,k,h,
l=[];d=0;for(e=a.length;d<e;d++)if(f=a[d],0<d){if(h=b(f[0]),f=c(f[1]),h!==g||f!==k)l.push([h-g,f-k]),g=h,k=f}else g=b(f[0]),k=c(f[1]),l.push([g,k]);return 0<l.length?l:null},l=function(a,b,c){if("esriGeometryPoint"===a)return function(a){a.x=b(a.x);a.y=c(a.y);return a};if("esriGeometryPolyline"===a||"esriGeometryPolygon"===a)return function(a){var d,e,f,g,k;f=a.rings||a.paths;k=[];d=0;for(e=f.length;d<e;d++)g=f[d],(g=h(g,b,c))&&k.push(g);return 0<k.length?(a.rings?a.rings=k:a.paths=k,a):null};if("esriGeometryMultipoint"===
a)return function(a){var d;d=h(a.points,b,c);return 0<d.length?(a.points=d,a):null};if("esriGeometryEnvelope"===a)return function(a){return a}}(this.geometryType,function(a){return Math.round((a-c)/e)},function(a){return Math.round((d-a)/f)}),m,n;m=0;for(n=g.length;m<n;m++)l(g[m].geometry)||(g.splice(m,1),m--,n--);this.transform=a;return this}})})},"esri/graphicsUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","./kernel","./geometry/Extent"],function(l,n,a,g,q){return{graphicsExtent:function(a){var g=
a[0].geometry,f=g.getExtent(),d,c,e=a.length;null===f&&(f=new q(g.x,g.y,g.x,g.y,g.spatialReference));for(c=1;c<e;c++)d=(g=a[c].geometry).getExtent(),null===d&&(d=new q(g.x,g.y,g.x,g.y,g.spatialReference)),f=f.union(d);return 0>f.getWidth()&&0>f.getHeight()?null:f},getGeometries:function(a){return n.map(a,function(a){return a.geometry})},_encodeGraphics:function(a,g){var f=[],d,c,e;n.forEach(a,function(a,k){d=a.toJson();c={};d.geometry&&(e=g&&g[k],c.geometry=e&&e.toJson()||d.geometry);d.attributes&&
(c.attributes=d.attributes);f[k]=c});return f}}})},"esri/tasks/StatisticDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(l,n,a,g){return l(null,{declaredClass:"esri.tasks.StatisticDefinition",toJson:function(){return{statisticType:this.statisticType,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount}}})})},
"esri/layers/Field":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./RangeDomain ./CodedValueDomain".split(" "),function(l,n,a,g,q,h){return l(null,{declaredClass:"esri.layers.Field",constructor:function(a){if(a&&n.isObject(a)&&(this.name=a.name,this.type=a.type,this.alias=a.alias,this.length=a.length,this.editable=a.editable,this.nullable=a.nullable,(a=a.domain)&&n.isObject(a)))switch(a.type){case "range":this.domain=new q(a);break;case "codedValue":this.domain=new h(a)}}})})},
"esri/layers/RangeDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Domain".split(" "),function(l,n,a,g,q,h){return l([h],{declaredClass:"esri.layers.RangeDomain",constructor:function(a){a&&n.isObject(a)&&(this.minValue=a.range[0],this.maxValue=a.range[1])},toJson:function(){var a=this.inherited(arguments);a.range=[this.minValue,this.maxValue];return q.fixJson(a)}})})},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has",
"../kernel","../lang"],function(l,n,a,g,q){return l(null,{declaredClass:"esri.layers.Domain",constructor:function(a){a&&n.isObject(a)&&(this.name=a.name,this.type=a.type)},toJson:function(){return q.fixJson({name:this.name,type:this.type})}})})},"esri/layers/CodedValueDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ./Domain".split(" "),function(l,n,a,g,q,h,m){return l([m],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(a){a&&
n.isObject(a)&&(this.codedValues=a.codedValues)},getName:function(f){var d;a.some(this.codedValues,function(a){a.code==f&&(d=a.name);return!!d});return d},toJson:function(){var a=this.inherited(arguments);a.codedValues=n.clone(this.codedValues);return h.fixJson(a)}})})},"esri/layers/FeatureType":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../symbols/jsonUtils ./RangeDomain ./CodedValueDomain ./InheritedDomain ./FeatureTemplate".split(" "),function(l,
n,a,g,q,h,m,f,d,c,e){return l(null,{declaredClass:"esri.layers.FeatureType",constructor:function(a){if(a&&n.isObject(a)){this.id=a.id;this.name=a.name;var g=a.symbol;g&&(this.symbol=m.fromJson(g));var g=a.domains,h,l=this.domains={};for(h in g)if(g.hasOwnProperty(h)){var q=g[h];switch(q.type){case "range":l[h]=new f(q);break;case "codedValue":l[h]=new d(q);break;case "inherited":l[h]=new c(q)}}if(h=a.templates){g=this.templates=[];for(a=0;a<h.length;a++)g.push(new e(h[a]))}}},toJson:function(){var b=
{id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()},c,d=this.domains,e=this.templates,f=h.fixJson;if(d){var g=b.domains={};for(c in d)d.hasOwnProperty(c)&&(g[c]=d[c]&&d[c].toJson());f(g)}e&&(b.templates=a.map(e,function(a){return a.toJson()}));return f(b)}})})},"esri/layers/InheritedDomain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Domain"],function(l,n,a,g,q){return l([q],{declaredClass:"esri.layers.InheritedDomain"})})},"esri/layers/FeatureTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../graphic".split(" "),
function(l,n,a,g,q,h){l=l(null,{declaredClass:"esri.layers.FeatureTemplate",constructor:function(a){a&&n.isObject(a)&&(this.name=a.name,this.description=a.description,this.drawingTool=a.drawingTool,a=a.prototype,this.prototype=new h(a.geometry,null,a.attributes))},toJson:function(){return q.fixJson({name:this.name,description:this.description,drawingTool:this.drawingTool,prototype:this.prototype&&this.prototype.toJson()})}});n.mixin(l,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",
TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",
TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});return l})},"esri/layers/FeatureEditResult":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(l,n,a,g){return l(null,{declaredClass:"esri.layers.FeatureEditResult",constructor:function(a){a&&n.isObject(a)&&(this.objectId=a.objectId,this.success=a.success,a.success||(a=a.error,this.error=Error(),this.error.code=a.code,this.error.message=a.description))}})})},"esri/layers/LabelClass":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../symbols/TextSymbol ../symbols/ShieldLabelSymbol".split(" "),
function(l,n,a,g,q,h,m,f){return l(null,{declaredClass:"esri.layers.LabelClass",labelPlacement:null,labelExpression:null,format:null,fieldInfos:null,useCodedValues:null,symbol:null,maxScale:0,minScale:0,where:null,sizeInfo:null,_labelPlacementLookup:{"above-center":"esriServerPointLabelPlacementAboveCenter","above-left":"esriServerPointLabelPlacementAboveLeft","above-right":"esriServerPointLabelPlacementAboveRight","below-center":"esriServerPointLabelPlacementBelowCenter","below-left":"esriServerPointLabelPlacementBelowLeft",
"below-right":"esriServerPointLabelPlacementBelowRight","center-center":"esriServerPointLabelPlacementCenterCenter","center-left":"esriServerPointLabelPlacementCenterLeft","center-right":"esriServerPointLabelPlacementCenterRight","above-after":"esriServerLinePlacementAboveAfter","above-along":"esriServerLinePlacementAboveAlong","above-before":"esriServerLinePlacementAboveBefore","above-start":"esriServerLinePlacementAboveStart","above-end":"esriServerLinePlacementAboveEnd","below-after":"esriServerLinePlacementBelowAfter",
"below-along":"esriServerLinePlacementBelowAlong","below-before":"esriServerLinePlacementBelowBefore","below-start":"esriServerLinePlacementBelowStart","below-end":"esriServerLinePlacementBelowEnd","center-after":"esriServerLinePlacementCenterAfter","center-along":"esriServerLinePlacementCenterAlong","center-before":"esriServerLinePlacementCenterBefore","center-start":"esriServerLinePlacementCenterStart","center-end":"esriServerLinePlacementCenterEnd","always-horizontal":"esriServerPolygonPlacementAlwaysHorizontal"},
constructor:function(a){if(a&&(n.mixin(this,a),this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)||(this.labelPlacement=h.valueOf(this._labelPlacementLookup,a.labelPlacement)),a.format&&(this.format=a.format),a.fieldInfos&&(this.fieldInfos=a.fieldInfos),a.symbol&&(this.symbol="esriSHD"===a.symbol.type?new f(a.symbol):new m(a.symbol)),a=this.sizeInfo))a.minSize&&(a.minSize=g.pt2px(a.minSize)),a.maxSize&&(a.maxSize=g.pt2px(a.maxSize))},getSymbol:function(){return this.symbol},toJson:function(){var a=
this.sizeInfo;a&&(a=n.mixin({},a),a.minSize&&(a.minSize=g.px2pt(a.minSize)),a.maxSize&&(a.maxSize=g.px2pt(a.maxSize)));a={labelExpression:this.labelExpression,labelExpressionInfo:this.labelExpressionInfo&&n.clone(this.labelExpressionInfo),format:this.format,fieldInfos:this.fieldInfos,useCodedValues:this.useCodedValues,maxScale:this.maxScale,minScale:this.minScale,where:this.where,sizeInfo:a,labelPlacement:this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)?this._labelPlacementLookup[this.labelPlacement]:
this.labelPlacement,symbol:this.symbol&&this.symbol.toJson()};return h.fixJson(a)}})})},"esri/symbols/ShieldLabelSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol ./Font".split(" "),function(l,n,a,g,q,h,m,f,d){var c={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};l=l(f,{declaredClass:"esri.symbol.ShieldLabelSymbol",type:"shieldlabelsymbol",color:[255,255,255,1],width:32,height:32,font:g.defaultFont,constructor:function(d,
b,f,h,l){d?n.isString(d)?(this.url=d,b&&(this.color=b),f&&(this.width=f),h&&(this.height=h),void 0!==l&&(this.font=l)):(this.width=g.pt2px(d.width),this.height=g.pt2px(d.height),b=d.imageData,!(9>a("ie"))&&b&&(f=this.url,this.url="data:"+(d.contentType||"image")+";base64,"+b,this.imageData=f)):n.mixin(this,c)},getStroke:function(){return null},getFill:function(){return this.color},setWidth:function(a){this.width=a;return this},setHeight:function(a){this.height=a;return this},setUrl:function(a){a!==
this.url&&(delete this.imageData,delete this.contentType);this.url=a;return this},setFont:function(a){this.font=a;return this},setText:function(a){this.text=a;return this},getWidth:function(){return this.width},getHeight:function(){return this.height},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,stroke:null}},toJson:function(){var a=this.url,b=this.imageData;
if(0===a.indexOf("data:"))var c=a,a=b,b=c.indexOf(";base64,")+8,b=c.substr(b);var a=m.getAbsoluteUrl(a),c=g.px2pt(this.width),c=isNaN(c)?void 0:c,f=g.px2pt(this.height),f=isNaN(f)?void 0:f,a=h.fixJson(n.mixin(this.inherited("toJson",arguments),{type:"esriSHD",url:a,imageData:b,contentType:this.contentType,width:c,height:f}));this.font?(b=new d(this.font),a.font=b.toJson()):a.font=null;delete a.size;a.imageData||delete a.imageData;return a}});l.defaultProps=c;return l})},"esri/layers/SnapshotMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../SpatialReference ../tasks/query ./RenderMode".split(" "),
function(l,n,a,g,q,h,m){return l([m],{declaredClass:"esri.layers._SnapshotMode",constructor:function(a){this.featureLayer=a;this.pagination=a.queryPagination;this._featureMap={};this._drawFeatures=n.hitch(this,this._drawFeatures);this._queryErrorHandler=n.hitch(this,this._queryErrorHandler)},startup:function(){this.pagination=this.pagination&&null!=this.featureLayer.maxRecordCount;this.featureLayer._collection?this._applyTimeFilter():this._fetchAll()},propertyChangeHandler:function(a){this._init&&
(a?this.featureLayer._collection||this._fetchAll():this._applyTimeFilter())},drawFeature:function(a){var d=a.attributes[this.featureLayer.objectIdField];this._addFeatureIIf(d,a);this._incRefCount(d)},resume:function(){this.propertyChangeHandler(0)},refresh:function(){var a=this.featureLayer;a._collection?(a._fireUpdateStart(),a._refresh(!0),a._fireUpdateEnd()):this._fetchAll()},_getRequestId:function(a){return("_"+a.name+a.layerId+a._ulid).replace(/[^a-zA-Z0-9\_]+/g,"_")},_fetchAll:function(){var a=
this.featureLayer;!a._collection&&!a.suspended&&(a._fireUpdateStart(),this._clearIIf(),this._sendRequest())},_sendRequest:function(a){var d=this.map,c=this.featureLayer,e=c.getDefinitionExpression(),b=new h;b.outFields=c.getOutFields();b.where=e||"1\x3d1";b.returnGeometry=!0;b.outSpatialReference=new q(d.spatialReference.toJson());b.timeExtent=c.getTimeDefinition();b.maxAllowableOffset=c._maxOffset;b.quantizationParameters=c._quantizationParameters;c._ts&&(b._ts=(new Date).getTime());b.orderByFields=
c.supportsAdvancedQueries?c.getOrderByFields():null;b.multipatchOption=c.multipatchOption;this.pagination&&(this._start=b.start=null==a?0:a,b.num=c.maxRecordCount);var g;c._usePatch&&(g=this._getRequestId(c),this._cancelPendingRequest(null,g));c._task.execute(b,this._drawFeatures,this._queryErrorHandler,g)},_drawFeatures:function(a){this._purgeRequests();var d=a.features,c=this.featureLayer,e=c.objectIdField,b,g=d.length,h=a.exceededTransferLimit&&!c._collection,l=c._selectedFeatures,m=c.mode===c.constructor.MODE_AUTO,
n,q,y;for(b=0;b<g;b++)q=d[b],y=q.attributes[e],n=this._addFeatureIIf(y,q),this._incRefCount(y),m&&n!==q&&l[y]&&(n.setGeometry(q.geometry),n.setAttributes(q.attributes));this._applyTimeFilter(!0);if(!this.pagination||!h)c._fireUpdateEnd(null,a.exceededTransferLimit?{queryLimitExceeded:!0}:null);h&&(this.pagination&&this._sendRequest(this._start+c.maxRecordCount),c.onQueryLimitExceeded())},_queryErrorHandler:function(a){this._purgeRequests();var d=this.featureLayer;d._errorHandler(a);d._fireUpdateEnd(a)}})})},
"esri/layers/RenderMode":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/io/script ../kernel".split(" "),function(l,n,a,g,q,h,m){return n(null,{declaredClass:"esri.layers._RenderMode",constructor:function(){this._prefix="jsonp_"+(l._scopeName||"dojo")+"IoScript"},initialize:function(a){this.map=a;this._init=!0},startup:function(){},propertyChangeHandler:function(a){},destroy:function(){this._init=!1},drawFeature:function(a){},suspend:function(){},
resume:function(){},refresh:function(){},_incRefCount:function(a){(a=this._featureMap[a])&&a._count++},_decRefCount:function(a){(a=this._featureMap[a])&&a._count--},_getFeature:function(a){return this._featureMap[a]},_addFeatureIIf:function(a,d){var c=this._featureMap,e=c[a],b=this.featureLayer;e||(c[a]=d,b._add(d),d._count=0);return e||d},_removeFeatureIIf:function(a){var d=this._featureMap[a],c=this.featureLayer;if(d){if(d._count)return;delete this._featureMap[a];c._remove(d)}return d},_clearIIf:function(){var a;
a=this.featureLayer;var d=a.graphics,c=a._selectedFeatures,e=a.objectIdField;for(a=d.length-1;0<=a;a--){var b=d[a],g=b.attributes[e];g in c?b._count=1:(b._count=0,this._removeFeatureIIf(g))}},_isPending:function(a){return h[this._prefix+a]?!0:!1},_cancelPendingRequest:function(a,d){if(a=a||h[this._prefix+d])try{a.cancel(),h._validCheck(a)}catch(c){}},_purgeRequests:function(){h._validCheck(null)},_toggleVisibility:function(a){var d=this.featureLayer,c=d.graphics,e=a?"show":"hide",b,g=c.length;a=a&&
d._ager;for(b=0;b<g;b++){var h=c[b];h[e]();a&&d._repaint(h)}},_applyTimeFilter:function(a){var d=this.featureLayer;if(d.timeInfo&&!d.suspended){a||d._fireUpdateStart();var c=d._trackManager;c&&c.clearTracks();var e=d.getTimeDefinition(),b=d._getOffsettedTE(d._mapTimeExtent);b?(b=d._getTimeOverlap(e,b))?(e=d._filterByTime(d.graphics,b.startTime,b.endTime),c&&c.addFeatures(e.match),g.forEach(e.match,function(a){var b=a._shape;a.visible||(a.show(),(b=a._shape)&&b._moveToFront());d._ager&&b&&d._repaint(a)}),
g.forEach(e.noMatch,function(a){a.visible&&a.hide()})):this._toggleVisibility(!1):(c&&c.addFeatures(d.graphics),this._toggleVisibility(!0));c&&(c.moveLatestToFront(),c.drawTracks());a||d._fireUpdateEnd()}}})})},"esri/layers/OnDemandMode":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../tasks/query ./RenderMode ./GridLayout".split(" "),function(l,n,a,g,q,h,m,f,d,c){return l([d],{declaredClass:"esri.layers._OnDemandMode",
constructor:function(c){this.featureLayer=c;this._featureMap={};this._queryErrorHandler=a.hitch(this,this._queryErrorHandler)},initialize:function(a){this.inherited(arguments);var b=this.featureLayer,d=b._srInfo;this._gridLayer=new c(new m(d?d.valid[0]:a.extent.xmin,d?d.valid[1]:a.extent.ymax,a.spatialReference),{width:b._tileWidth,height:b._tileHeight},{width:a.width,height:a.height},d);this._cellMap={};this._gridLayer.setResolution(a.extent)},startup:function(){this._ioQueue=[];this.featureLayer.suspended||
(this._zoomHandler(),this._enableConnectors())},propertyChangeHandler:function(a){this._init&&2>a&&this._zoomHandler()},destroy:function(){this._disableConnectors();this.inherited(arguments)},drawFeature:function(a){var b=this._gridLayer,c=a.geometry,d=[];if(c)for(var d=b.getCellsInExtent("point"===c.type?{xmin:c.x,ymin:c.y,xmax:c.x,ymax:c.y}:c.getExtent(),!1).cells,b=this._cellMap,f,g=a.attributes[this.featureLayer.objectIdField],h,l,m,c=0;c<d.length;c++)f=d[c],h=f.latticeID,l=f.row,m=f.col,h?f=
b[h]=b[h]||f:(b[l]=b[l]||{},f=b[l][m]=b[l][m]||f),f.features=f.features||[],f.features.push(a),this._addFeatureIIf(g,a),this._incRefCount(g)},suspend:function(){this._init&&this._disableConnectors()},resume:function(){this._init&&(this._enableConnectors(),this._zoomHandler())},refresh:function(){this._zoomHandler()},_enableConnectors:function(){var a=this.map;this._zoomConnect=n.connect(a,"onZoomEnd",this,this._zoomHandler);this._panConnect=n.connect(a,"onPanEnd",this,this._panHandler);this._resizeConnect=
n.connect(a,"onResize",this,this._panHandler)},_disableConnectors:function(){n.disconnect(this._zoomConnect);n.disconnect(this._panConnect);n.disconnect(this._resizeConnect)},_zoomHandler:function(){this._processIOQueue(!0);var a=this.featureLayer,b=this.map;a.suspended||(a._fireUpdateStart(),this._clearIIf(),(a=a._trackManager)&&a.clearTracks(),this._cellMap={},this._gridLayer.setResolution(b.extent),this._sendRequest())},_panHandler:function(a){this.featureLayer._fireUpdateStart();this._sendRequest(this.featureLayer._resized&&
a)},_getRequestId:function(a,b){return("_"+a.name+a.layerId+a._ulid+"_"+b.resolution+"_"+(b.latticeID||b.row+"_"+b.col)).replace(/[^a-zA-Z0-9\_]+/g,"_")},_sendRequest:function(a){this._exceeds=!1;var b=this.featureLayer,c=this.map;a=a||c.extent;c=this._gridLayer.getCellsInExtent(a,b.latticeTiling).cells;if(!b.isEditable())var d=this._cellMap,c=g.filter(c,function(a){if(a.lattice){if(d[a.latticeID])return!1}else if(d[a.row]&&d[a.row][a.col])return!1;return!0});var h=b.getOutFields(),l=b.getDefinitionExpression(),
m=b._getOffsettedTE(b._mapTimeExtent),n=b.supportsAdvancedQueries?b.getOrderByFields():null,q=b._usePatch,u=this._ioQueue,z,v=this,w=this._drawFeatures,A,B,D;this._pending=this._pending||0;for(z=0;z<c.length;z++)if(A=c[z],B=new f,B.geometry=A.extent||A.lattice,B.outFields=h,B.where=l,b.latticeTiling&&A.extent&&(B.spatialRelationship=f.SPATIAL_REL_CONTAINS),B.returnGeometry=!0,B.timeExtent=m,b._ts&&(B._ts=(new Date).getTime()),B.orderByFields=n,B.multipatchOption=b.multipatchOption,B.maxAllowableOffset=
b._maxOffset,B.quantizationParameters=b._quantizationParameters,D=null,!q||!(D=this._getRequestId(b,A),this._isPending(D)))this._pending++,u.push(b._task.execute(B,function(){var a=A;return function(b){w.apply(v,[b,a])}}.call(this),this._queryErrorHandler,D));this._removeOldCells(a);this._endCheck()},_drawFeatures:function(a,b){this._exceeds=this._exceeds||a.exceededTransferLimit;this._finalizeIO();var c=this.map.extent,d=b.extent,f=b.row,g=b.col,h=this.featureLayer.objectIdField,l=a.features,m=this._gridLayer,
n=this._cellMap,q=b.latticeID,v=q?n[q]:n[f]&&n[f][g];if(b.resolution!=m._resolution||(q?q!==m.getLatticeID(c):!m.intersects(d,c)))v&&this._removeCell(f,g,q);else if(v)this._updateCell(v,l);else{b.features=l;q?n[q]=b:(n[f]=n[f]||{},n[f][g]=b);d=l.length;for(c=0;c<d;c++)f=l[c],g=f.attributes[h],this._addFeatureIIf(g,f),this._incRefCount(g)}this._endCheck()},_queryErrorHandler:function(a){this._finalizeIO();this.featureLayer._errorHandler(a);this._endCheck(!0)},_finalizeIO:function(){this._purgeRequests();
this._pending--},_endCheck:function(a){if(0===this._pending){this._processIOQueue();var b=this.featureLayer,c=b._trackManager;c&&(c.clearTracks(),c.addFeatures(b.graphics),b._ager&&g.forEach(b.graphics,function(a){a._shape&&b._repaint(a)}),c.moveLatestToFront(),c.drawTracks());this.featureLayer._fireUpdateEnd(a&&Error("FeatureLayer: an error occurred while updating the layer"),this._exceeds?{queryLimitExceeded:!0}:null);if(this._exceeds)b.onQueryLimitExceeded()}},_processIOQueue:function(a){this._ioQueue=
g.filter(this._ioQueue,function(a){return-1<a.fired?!1:!0});a&&g.forEach(this._ioQueue,this._cancelPendingRequest)},_removeOldCells:function(a){var b=this._cellMap,c=this._gridLayer,d,f;for(d in b)if(b[d]){var g=b[d],h=g.latticeID,l=0,m=0;if(h)l++,h!==c.getLatticeID(a)&&(this._removeCell(null,null,h),m++);else for(f in g)g[f]&&(l++,c.intersects(g[f].extent,a)||(this._removeCell(d,f),m++));m===l&&delete b[d]}},_updateCell:function(a,b){var c=this.featureLayer,d=c.objectIdField,c=c._selectedFeatures,
f,g=b.length;a.features=a.features||[];for(f=0;f<g;f++){var h=b[f],l=h.attributes[d],m=this._addFeatureIIf(l,h);m===h?(this._incRefCount(l),a.features.push(m)):l in c||(m.setGeometry(h.geometry),m.setAttributes(h.attributes))}},_removeCell:function(a,b,c){var d=this._cellMap,f=this.featureLayer,g=f.objectIdField,h=c?d[c]:d[a]&&d[a][b];if(h){c?delete d[c]:delete d[a][b];a=h.features;for(b=0;b<a.length;b++)c=a[b].attributes[g],this._decRefCount(c),c in f._selectedFeatures||this._removeFeatureIIf(c)}}})})},
"esri/layers/GridLayout":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../SpatialReference ../geometry/Extent ../geometry/Polyline".split(" "),function(l,n,a,g,q,h,m,f){return l(null,{declaredClass:"esri.layers._GridLayout",constructor:function(a,c,e,b){this.origin=a;this.cellWidth=c.width;this.cellHeight=c.height;this.mapWidth=e.width;this.mapHeight=e.height;this.srInfo=b},setResolution:function(a){this._resolution=(a.xmax-a.xmin)/this.mapWidth;this.srInfo&&
(a=Math.round(2*this.srInfo.valid[1]/this._resolution),a=Math.round(a/this.cellWidth),this._frameStats=[a,0,a-1])},getCellCoordinates:function(a){var c=this._resolution,e=this.origin;return{row:Math.floor((e.y-a.y)/(this.cellHeight*c)),col:Math.floor((a.x-e.x)/(this.cellWidth*c))}},normalize:function(a){var c=this._frameStats;if(c){var e=c[0],b=c[1],c=c[2];a<b?(a%=e,a=a<b?a+e:a):a>c&&(a%=e)}return a},intersects:function(d,c){var e=this.srInfo;return e?a.some(c._getParts(e),function(a){return d.intersects(a.extent)}):
d.intersects(c)},getCellExtent:function(a,c){var e=this._resolution,b=this.origin,f=this.cellWidth,g=this.cellHeight;return new m(c*f*e+b.x,b.y-(a+1)*g*e,(c+1)*f*e+b.x,b.y-a*g*e,new h(b.spatialReference.toJson()))},getLatticeID:function(a){var c=this.getCellCoordinates({x:a.xmin,y:a.ymax}),e=this.getCellCoordinates({x:a.xmax,y:a.ymin});a=c.row;var b=e.row,c=this.normalize(c.col),e=this.normalize(e.col);return a+"_"+b+"_"+c+"_"+e},sorter:function(a,c){return a<c?-1:1},getCellsInExtent:function(a,c){var e=
this.getCellCoordinates({x:a.xmin,y:a.ymax}),b=this.getCellCoordinates({x:a.xmax,y:a.ymin}),g=e.row,h=b.row,e=e.col,b=b.col,l=[],m,n,q,y=[],u=[],z,v,w,A=[];for(m=g;m<=h;m++)for(n=e;n<=b;n++)q=this.normalize(n),a=this.getCellExtent(m,q),l.push({row:m,col:q,extent:a,resolution:this._resolution}),c&&(y.push(a.xmin,a.xmax),u.push(a.ymin,a.ymax));e=this.normalize(e);b=this.normalize(b);y.sort(this.sorter);u.sort(this.sorter);n=y.length;for(m=n-1;0<=m;m--)m<n-1&&y[m]===y[m+1]&&y.splice(m,1);n=u.length;
for(m=n-1;0<=m;m--)m<n-1&&u[m]===u[m+1]&&u.splice(m,1);if(y.length&&u.length){q=y[0];z=y[y.length-1];v=u[0];w=u[u.length-1];n=y.length;for(m=0;m<n;m++)A.push([[y[m],w],[y[m],v]]);n=u.length;for(m=0;m<n;m++)A.push([[q,u[m]],[z,u[m]]]);m=new f({paths:A,spatialReference:this.origin.spatialReference.toJson()});l.push({latticeID:g+"_"+h+"_"+e+"_"+b,lattice:m,resolution:this._resolution})}return{minRow:g,maxRow:h,minCol:e,maxCol:b,cells:l}}})})},"esri/layers/SelectionMode":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","./RenderMode"],function(l,n,a,g,q){return l([q],{declaredClass:"esri.layers._SelectionMode",constructor:function(a){this.featureLayer=a;this._featureMap={}},propertyChangeHandler:function(a){this._init&&0===a&&this._applyTimeFilter()},resume:function(){this.propertyChangeHandler(0)}})})},"esri/layers/StreamMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../SpatialReference ../tasks/query ../tasks/QueryTask ../geometry/jsonUtils ./RenderMode".split(" "),
function(l,n,a,g,q,h,m,f,d,c){return l([c],{declaredClass:"esri.layers._StreamMode",constructor:function(a,b){this.featureLayer=a;this._featureMap={};this._setRefreshRate();this._drawBuffer={adds:[],updates:[]};this._timeoutId=null;this._flushDrawBuffer=n.hitch(this,this._flushDrawBuffer);this._featuresByTime={};this._lastEndTimeCheck=null;this._maxFeatureAge=0;a.purgeOptions&&a.purgeOptions.age&&"number"===typeof a.purgeOptions.age&&(this._maxFeatureAge=1E3*Math.ceil(60*a.purgeOptions.age));this._drawFeatures=
n.hitch(this,this._drawFeatures);this._queryErrorHandler=n.hitch(this,this._queryErrorHandler)},startup:function(){},propertyChangeHandler:function(a){this._init&&(0===a?this._applyTimeFilter():3===a&&this._redrawAllTracks())},drawFeature:function(a){var b=this.featureLayer,c=b.objectIdField;this._timeoutId||(this._timeoutId=setTimeout(this._flushDrawBuffer,this._refreshRate));b._joinField&&this._getFeature(a.attributes[c])?this._drawBuffer.updates.push({oid:a.attributes[c],updates:a}):this._drawBuffer.adds.push(a)},
resume:function(){this.propertyChangeHandler(0)},refresh:function(){var a=this.featureLayer;a&&(!a._relatedUrl&&!a._keepLatestUrl?(a._fireUpdateStart(),a.clear(),a._fireUpdateEnd()):(a._fireUpdateStart(),a._refreshing=!0,a.disconnect(),a.clear(),a._relatedQueried=!1,a._keepLatestQueried=!1,a.connect()))},_drawFeatures:function(a){this._purgeRequests();var b=this.featureLayer;b._create(a.features||[]);b._fireUpdateEnd(null,null)},_applyTimeFilter:function(a){this.inherited(arguments);this._redrawAllTracks()},
_removeFeatures:function(c){var b=this.featureLayer,d=b.objectIdField;c&&a.forEach(c,function(a){a=a.attributes[d];b._unSelectFeatureIIf(a,this);this._decRefCount(a);this._removeFeatureIIf(a)},this)},_addFeatures:function(c){var b=this.featureLayer,d=b._endTimeField,f=b._startTimeField,g,h,l,m=[],n=[],q=[];g=b._trackManager;h=b.objectIdField;if(g)for(l in c=g.addFeatures(c),c)c.hasOwnProperty(l)&&(m.push(l),c[l].adds&&(n=n.concat(c[l].adds)),c[l].deletes&&(q=q.concat(c[l].deletes)));else n=c;a.forEach(n,
function(a){var b=a.attributes[h],c;c=d&&a.attributes[d];!c&&this._maxFeatureAge&&(c=f&&a.attributes[f]?a.attributes[f]+this._maxFeatureAge:Date.now()+this._maxFeatureAge);c&&(c=1E3*Math.ceil(c/1E3),this._featuresByTime[c]?this._featuresByTime[c].push(b):this._featuresByTime[c]=[b]);this._addFeatureIIf(b,a);this._incRefCount(b)},this);q.length&&this._removeFeatures(q);g&&g.refreshTracks(m)},_updateFeatures:function(c){var b=this.featureLayer,d,f,g=[];d=b._trackManager;f=b._trackIdField;a.forEach(c,
function(a){var c=a.updates;a=this._getFeature(a.oid);var e;if(a){c.geometry&&a.setGeometry(c.geometry);c=c.attributes||{};for(e in c)c.hasOwnProperty(e)&&(a.attributes[e]=c[e]);a.visible=this._checkFeatureTimeIntersects(a);d&&a.attributes[f]?g.push(a.attributes[f]):b._repaint(a,null,!0)}},this);g.length&&d.refreshTracks(g)},_redrawAllTracks:function(){var a=this.featureLayer._trackManager,b;if(a&&(b=a.trimTracks())&&0<b.length)this._removeFeatures(b),a.refreshTracks()},_flushDrawBuffer:function(){clearTimeout(this._timeoutId);
var a=this._drawBuffer,b=a.adds.splice(0,a.adds.length),c=a.updates.splice(0,a.updates.length),a=this.featureLayer;if(!a)return!1;a.updating||a._fireUpdateStart();this._addFeatures(b);this._updateFeatures(c);if((b=this._getExpiredFeatures())&&b.length)this._removeFeatures(b),a._trackManager&&a._trackManager.removeFeatures(b);a._purge();a._fireUpdateEnd();this._timeoutId=null},_clearDrawBuffer:function(){var a=this._timeoutId,b=this._drawBuffer,c=b.adds,b=b.updates;a&&clearTimeout(a);c.splice(0,c.length);
b.splice(0,b.length);this._timeoutId=null},_clearTimeBin:function(){this._featuresByTime={};this._lastEndTimeCheck=1E3*Math.ceil(Date.now()/1E3)},_clearFeatureMap:function(){this._featureMap={}},_setRefreshRate:function(a){a=a||0===a?a:200;0>a&&(a=200);this._refreshRate=a},_checkFeatureTimeIntersects:function(a){var b=this.featureLayer,c=b.getMap().timeExtent;return!c||!b.timeInfo||!b.timeInfo.startTimeField&&!b.timeInfo.endTimeField?!0:0<b._filterByTime([a],c.startTime,c.endTime).match.length},_getRequestId:function(a){return("_"+
a.name+a.layerId+a._ulid).replace(/[^a-zA-Z0-9\_]+/g,"_")},_fetchArchive:function(a){var b=this.featureLayer,c,g,l,n,q,x;b._fireUpdateStart();if(a&&this.map)a=new f(a),c=new m,g=this.map,l=b.getFilter()||{},n=l.where||"1\x3d1",q=l.geometry?d.fromJson(l.geometry):null,l=l.outFields?l.outFields.split(","):["*"],c.geometry=q,c.where=n,c.outFields=l,c.returnGeometry=!0,c.outSpatialReference=new h(g.spatialReference.toJson()),b._usePatch&&(x=this._getRequestId(b),this._cancelPendingRequest(null,x)),a.execute(c,
this._drawFeatures,this._queryErrorHandler,x);else return this._fireUpdateEnd({error:"Archive data cannot be fetched if no feature service url is provided or if the layer is not added to a map"}),!1},_queryErrorHandler:function(a){this._purgeRequests();var b=this.featureLayer;b._errorHandler(a);b._fireUpdateEnd(a)},_getExpiredFeatures:function(){var c,b,d,f=[],g=[];if(!this.featureLayer._endTimeField&&!this._maxFeatureAge)return g;c=1E3*Math.floor(this._lastEndTimeCheck/1E3);this._lastEndTimeCheck=
b=1E3*Math.ceil(Date.now()/1E3);if(c&&c!==b)for(d=this._featuresByTime;c<=b;c+=1E3)d[c]&&(f=f.concat(d[c]),delete d[c]);a.forEach(f,function(a){(a=this._getFeature(a))&&g.push(a)},this);return g}})})},"esri/layers/TrackManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../graphic ../geometry/Polyline ./GraphicsLayer".split(" "),function(l,n,a,g,q,h,m,f){return l(null,{declaredClass:"esri.layers._TrackManager",constructor:function(a){this.layer=a;this.trackMap=
{};this.trackLineMap={}},initialize:function(a){this.map=a;var c=this.layer,e=c._getRenderer(),e=e&&e.trackRenderer;if("esriGeometryPoint"===c.geometryType){var b=this.container=new f._GraphicsLayer({id:c.id+"_tracks",_child:!0});b.loaded=!0;b.onLoad(b);b._setMap(a,c._div);b.setRenderer(e)}},addFeatures:function(d){var c=this.trackMap,e=this.layer,b=e._trackIdField,f=[];a.forEach(d,function(d){var e=d.attributes[b];(c[e]=c[e]||[]).push(d);-1===a.indexOf(f,e)&&f.push(e)});var g=e._startTimeField,h=
e.objectIdField,l=function(a,b){var c=a.attributes[g],d=b.attributes[g];return c===d?a.attributes[h]<b.attributes[h]?-1:1:c<d?-1:1};a.forEach(f,function(a){c[a].sort(l)})},trimTracks:function(d){function c(a){for(a=e[a]||[];a.length>b;)f.push(a.shift())}var e=this.trackMap,b=this.layer.maximumTrackPoints||0,f=[],g;if(!b)return f;if(d)a.forEach(d,function(a){c(a)});else for(g in e)e.hasOwnProperty(g)&&c(g);return f},drawTracks:function(d){function c(a){var c=f[a],d,n,q;n=e.trackLineMap[a];b.remove(n);
delete e.trackLineMap[a];if(!c||2>c.length)return!1;n=[];for(d=c.length-1;0<=d;d--)(q=c[d].geometry)&&n.push([q.x,q.y]);c={};c[l]=a;1<n.length&&(n=new h(new m({paths:[n],spatialReference:g}),null,c),b.add(n),e.trackLineMap[a]=n)}var e=this,b=this.container,f,g,l,n;if(b)if(f=this.trackMap,g=this.map.spatialReference,l=this.layer._trackIdField,d)a.forEach(d,function(a){c(a)});else for(n in f)f.hasOwnProperty(n)&&c(n)},refreshTracks:function(d){function c(a){var c,d;e.drawTracks([a]);if(g&&g.latestObservationRenderer){a=
b[a]||[];c=a.length;for(d=0;d<c;d++)f._repaint(a[d],null,!0)}}var e=this,b=this.trackMap,f=this.layer,g=f._getRenderer(),h;if(d)a.forEach(d,function(a){c(a)});else for(h in b)b.hasOwnProperty(h)&&c(h);this.moveLatestToFront()},moveLatestToFront:function(d){a.forEach(this.getLatestObservations(d),function(a){var d=a._shape;d&&d._moveToFront();this._repaint(a,null,!0)},this.layer)},getLatestObservations:function(d){function c(a){a=f[a];return a[a.length-1]}var e=[],b=this.layer._getRenderer(),f=this.trackMap,
g;if(!b.latestObservationRenderer)return e;if(d)a.forEach(d,function(a){e.push(c(a))});else for(g in f)f.hasOwnProperty(g)&&e.push(c(g));return e},clearTracks:function(d){var c=this.getLatestObservations(d),e=this.container,b;d?a.forEach(d,function(a){delete this.trackMap[a];e&&(b=this.trackLineMap[a],e.remove(b),delete this.trackLineMap[a])},this):(this.trackMap={},this.trackLineMap={},e&&e.clear());a.forEach(c,function(a){this._repaint(a,null,!0)},this.layer)},isLatestObservation:function(a){var c=
this.trackMap[a.attributes[this.layer._trackIdField]];return c?c[c.length-1]===a:!1},destroy:function(){var a=this.container;a&&(a.clear(),a._unsetMap(this.map,this.layer._div));this.map=this.layer=this.trackMap=this.container=null}})})},"esri/layers/HeatmapManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/_base/array require ../kernel ../sniff ../geometry/Point ../geometry/webMercatorUtils ./MapImage ../renderers/HeatmapRenderer ../tasks/query dojo/_base/fx".split(" "),
function(l,n,a,g,q,h,m,f,d,c,e,b,k){function s(){}function p(a){var b=a.layer;return{geometry:a.geometry,attributes:a.attributes,getLayer:function(){return b}}}return l(null,{declaredClass:"esri.layers.HeatmapManager",heatmapRenderer:null,sourceLayer:null,imageLayer:null,useTiles:!0,useWorker:!1,map:null,constructor:function(a){this.sourceLayer=a;this._hndls=[]},initialize:function(a){this.map=a;var b=this.sourceLayer,c=b.renderer;b.setDrawMode(!1);this.imageLayer=a._getMapImageLyr();var d=this;this.heatmapRenderer=
c instanceof e?c:(c.getRendererInfoByZoom(a.getZoom())||c.getRendererInfoByScale(a.getScale())).renderer;this._setupDraw=this._setupDraw.bind(this);this.recalculateHeatmap=this.recalculateHeatmap.bind(this);this._removeRenderer=this._removeRenderer.bind(this);this._handleRendererChange=this._handleRendererChange.bind(this);this._rendererChangeHandle=this.sourceLayer.on("renderer-change",this._handleRendererChange);this._handleOpacityChange=this._handleOpacityChange.bind(this);this._reprojectFeature=
this._reprojectFeature.bind(this);q(["../workers/heatmapCalculator"],function(a){d._calculator=new a(n.mixin({width:d.map.width,height:d.map.height},d._getOptions()));d._setupRenderer();d.heatmapRenderer.getStats=a.calculateStats;d.heatmapRenderer.getHistogramData=a.getHistogramData})},destroy:function(){this._removeHandlers();this._rendererChangeHandle&&this._rendererChangeHandle.remove();this._rendererChangeHandle=this.sourceLayer=this.imageLayer=this.map=this.heatmapRenderer=this._hndls=null},
_handleRendererChange:function(a){var b=a.renderer,c=b instanceof e;this.heatmapRenderer?c?this.heatmapRenderer=b:this._removeRenderer(a):c&&(this.heatmapRenderer=b,this.sourceLayer&&this.map&&this._setupRenderer())},_handleOpacityChange:function(a){a=a.opacity;var b=this._getImageBySourceId(this.sourceLayer.id);b&&b.setOpacity(a)},_setupRenderer:function(){var b=this._hndls,c=this.sourceLayer,d=this.map,e=this;c._originalDraw=c._draw;c._draw=s;c._div.clear();clearTimeout(this._resetTimer);this._resetTimer=
setTimeout(this._resetGraphics.bind(this),250);b.push(c.on("update-end",this._setupDraw));b.push(c.on("suspend",function(a){(a=e._getImageBySourceId(e.sourceLayer.id))&&a.hide()}));b.push(c.on("resume",function(a){(a=e._getImageBySourceId(e.sourceLayer.id))&&a.show()}));b.push(a.after(c,"redraw",this._setupDraw));b.push(d.on("layer-remove",function(a){a.layer==c&&((a=e._getImageBySourceId(e.sourceLayer.id))&&e.imageLayer.removeImage(a),e._removeRenderer({target:c}))}));c._collection&&b.push(c.on("graphic-add",
function(a){e._reprojectFeature(a.graphic);e._setupDraw()}));1!==c.mode&&(b.push(d.on("resize, pan-end",this._setupDraw)),b.push(d.on("zoom-end",this._setupDraw)));b.push(c.on("opacity-change",this._handleOpacityChange));this.imageLayer.suspended&&this.imageLayer.resume();c.graphics&&c.graphics.length&&(c.graphics[0].geometry&&!d.spatialReference.equals(c.graphics[0].geometry.spatialReference)&&g.forEach(c.graphics,function(a){this._reprojectFeature(a)}.bind(this)),this._setupDraw())},_setupDraw:function(){if(!this._drawTimer){var a=
this;this._drawTimer=setTimeout(function(){clearTimeout(a._drawTimer);a._drawTimer=null;a.sourceLayer._getRenderer().isInstanceOf(e)&&a.recalculateHeatmap()},16)}},_removeRenderer:function(a){var b=a.target;b._draw=b._originalDraw;delete b._originalDraw;b.setDrawMode(!0);this._removeHandlers();this._hndls=[];var c=this._getImageBySourceId(this.sourceLayer.id);c&&this.imageLayer.removeImage(c);clearTimeout(this._drawTimer);clearTimeout(this._resetTimer);this._drawTimer=this._resetTimer=null;b.renderer!=
a.renderer&&b.renderer.getRendererInfo?this.heatmapRenderer=null:(b.redraw(),this.destroy())},recalculateHeatmap:function(){this._calculator?this._doMainCalculation():this._calculatorClient&&this._doWorkerCalculation()},_reprojectFeature:function(a){if(a&&a.geometry){var b=a.geometry,c=this.map.spatialReference;c.equals(b.spatialReference)||(b=d.project(b,c),null==b||(a.geometry=b))}},_doWorkerCalculation:function(){},_doMainCalculation:function(){var a=this.sourceLayer,d=this.map,e=this.heatmapRenderer,
f=this.map.extent,g=this.map.width,h=this.map.height,k=this._calculator,l=this,m=function(b){b=l._getScreenPoints(b.features,d,a);b=k.calculateImageData(n.mixin({screenPoints:b,mapinfo:{extent:[f.xmin,f.ymin,f.xmax,f.ymax],resolution:d.getResolution()},width:g,height:h},l._getOptions()));b=e.getSymbol(p({geometry:d.extent,attributes:{size:[g,h],imageData:b},layer:a}));b=new c({extent:d.extent,href:b.url,opacity:0,sourceId:a.id});l._swapMapImages(b,l._getImageBySourceId(a.id));a.suspended&&b.hide()},
q={geometry:d.extent,timeExtent:a.useMapTime?d.timeExtent:void 0,spatialRelationship:b.SPATIAL_REL_INTERSECTS};null!=a._canDoClientSideQuery(q)?a.queryFeatures(q,m):m({features:a.graphics})},_getScreenPoints:function(a,b,c){var d=[],e=a.length,h=0,k=0,l,m=new f(b.extent.xmin,b.extent.ymax,b.spatialReference),n=b.toScreen(m),p=n.x,n=n.y,q=b.getResolution(),s;for((k=b.extent.getCacheValue("_parts"))&&(s=g.map(k,function(a){return c._intersects(b,a.extent)[0]}));e--;)k=a[e],k.geometry&&(l={x:Math.ceil((k.geometry.x-
m.x)/q+p),y:Math.floor((m.y-k.geometry.y)/q-n),attributes:k.attributes},s&&(k=1<s.length&&l.x<-s[0]?s[1]:s[0],l.x+=k),d[h++]=l);return d},_getImageBySourceId:function(a){var b=this.imageLayer.getImages(),b=g.filter(b,function(b){return b.sourceId==a});if(b.length)return b[b.length-1]},_swapMapImages:function(a,b){function c(){d.removeImage(b)}var d=this.imageLayer,e=this.sourceLayer.opacity||1;d.addImage(a);k.anim(a._node,{opacity:e},null,null,function(){a.opacity=e});null!=b&&k.anim(b._node,{opacity:0},
null,null,c)},_removeHandlers:function(){if(null!=this._hndls)for(var a=this._hndls.length;a--;)this._hndls[a].remove()},_getOptions:function(){var a=this.heatmapRenderer;return{blurRadius:a.blurRadius,gradient:a.gradient,maxPixelIntensity:a.maxPixelIntensity,minPixelIntensity:a.minPixelIntensity,field:a.field,fieldOffset:a.fieldOffset}},_resetGraphics:function(){clearTimeout(this._resetTimer);this._resetTimer=null;for(var a=this.sourceLayer.graphics,b=a.length,c;b--;)c=a[b],c._shape=c._offsets=void 0}})})},
"esri/layers/MapImage":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/has ../kernel ../domUtils ../geometry/Extent".split(" "),function(l,n,a,g,q,h,m){return l(null,{declaredClass:"esri.layers.MapImage",constructor:function(a){n.mixin(this,a);this.extent=new m(this.extent)},visible:!0,opacity:1,getLayer:function(){return this._layer},getNode:function(){return this._node},show:function(){if(!this.visible){this.visible=!0;var a=this._node,d=this._layer,c;if(a){if(c=d&&d._div)d.suspended||
d._setPos(a,c._left,c._top),(d._active||c).appendChild(a);h.show(a)}}},hide:function(){if(this.visible){this.visible=!1;var a=this._node;a&&(h.hide(a),a.parentNode&&a.parentNode.removeChild(a))}},setOpacity:function(f){var d=this._node;this.opacity=f;d&&a.set(d,"opacity",f)}})})},"esri/layers/ArcGISDynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/sniff dojo/io-query ../kernel ../config ../request ../urlUtils ../layerUtils ../geometry/scaleUtils ./DynamicMapServiceLayer ./ArcGISMapServiceLayer ./TimeInfo ./LayerTimeOptions ./ImageParameters ./DynamicLayerInfo ./LayerMapSource".split(" "),
function(l,n,a,g,q,h,m,f,d,c,e,b,k,s,p,r,t,x,y){return l([k,s],{declaredClass:"esri.layers.ArcGISDynamicMapServiceLayer",_eventMap:{"visible-layers-change":["visibleLayers"]},constructor:function(a,b,c){a=b&&b.imageParameters;var d=n.hitch;if(a){var e=a.layerDefinitions;e&&this.setLayerDefinitions(e);a.layerOption===t.LAYER_OPTION_SHOW&&(this.visibleLayers=[].concat(a.layerIds),this.onVisibleLayersChange(this.visibleLayers))}this._setIsPNG32=d(this,this._setIsPNG32);this.dpi=a&&a.dpi||96;this.imageFormat=
a&&a.format||"png8";this.imageTransparency=a&&!1===a.transparent?!1:!0;this._setIsPNG32();this.gdbVersion=b&&b.gdbVersion;this._params.gdbVersion=this.gdbVersion;n.mixin(this._params,this._url.query,{dpi:this.dpi,transparent:this.imageTransparency,format:this.imageFormat},a?a.toJson():{});this.getImageUrl=d(this,this.getImageUrl);this._initLayer=d(this,this._initLayer);this._load=d(this,this._load);this.useMapImage=b?b.useMapImage:!1;this._loadCallback=b&&b.loadCallback;(b=b&&b.resourceInfo)?this._initLayer(b):
(void 0===c||!1===c)&&this._load();this.registerConnectEvents()},disableClientCaching:!1,layerDefinitions:null,_initLayer:function(a,b){this.inherited(arguments);a.timeInfo&&(this.timeInfo=new p(a.timeInfo));this.loaded=!0;this.onLoad(this);var c=this._loadCallback;c&&(delete this._loadCallback,c(this))},getImageUrl:function(a,b,e,k){var l=this._url.path+"/export?",m=this._params,p=a.spatialReference.wkid||g.toJson(a.spatialReference.toJson()),q=this._errorHandler;delete m._ts;n.mixin(m,{bbox:a.xmin+
","+a.ymin+","+a.xmax+","+a.ymax,bboxSR:p,imageSR:p,size:b+","+e},this.disableClientCaching?{_ts:(new Date).getTime()}:{});m.layerDefs&&(a=m.layerDefs,delete m.layerDefs,n.mixin(m,{layerDefs:a}));var r=m.token=this._getToken();a=c.addProxy(l+h.objectToQuery(n.mixin({},m,{f:"image"})));a.length>f.defaults.io.postLength||this.useMapImage?this._jsonRequest=d({url:l,content:n.mixin(m,{f:"json"}),callbackParamName:"callback",load:function(a){a=a.href;r&&(a+=-1===a.indexOf("?")?"?token\x3d"+r:"\x26token\x3d"+
r);k(c.addProxy(a))},error:q}):k(a)},_setIsPNG32:function(){var a=this.imageFormat.toLowerCase(),b=q("ie");this.isPNG32=b&&6===b&&("png32"===a||"png24"===a)&&this.imageTransparency},_setTime:function(b){var c=this.timeInfo;b=this._params.time=b?b.toJson().join(","):null;if(10.02>this.version&&c)if(b)this._params.layerTimeOptions=e._serializeTimeOptions(this.layerTimeOptions);else{var d=this.layerInfos;if(d){var f=this.layerTimeOptions,g=f?f.slice(0):[],h=[];a.forEach(d,function(a){a.subLayerIds||
h.push(a.id)});h.length&&(a.forEach(h,function(a){if(!g[a]){var b=new r;b.useTime=!1;g[a]=b}}),this._params.layerTimeOptions=e._serializeTimeOptions(g,h))}}10.02<=this.version&&c&&!b&&!c.hasLiveData&&(this._params.time="null,null")},setDPI:function(a,b){this.dpi=this._params.dpi=a;b||this.refresh(!0)},setImageFormat:function(a,b){this.imageFormat=this._params.format=a;this._setIsPNG32();b||this.refresh(!0)},setImageTransparency:function(a,b){this.imageTransparency=this._params.transparent=a;this._setIsPNG32();
b||this.refresh(!0)},setVisibleLayers:function(a,b){this.visibleLayers=a;this._params.layers=t.LAYER_OPTION_SHOW+":"+(a.length?a.join():"-1");this._updateDynamicLayers();b||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},onVisibleLayersChange:function(){},setDefaultVisibleLayers:function(a){this.visibleLayers=this._defaultVisibleLayers;this._params.layers=null;this._updateDynamicLayers();a||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},setLayerDefinitions:function(a,
b){this.layerDefinitions=a;this._params.layerDefs=e._serializeLayerDefinitions(a);this._updateDynamicLayers();b||this.refresh(!0)},setDefaultLayerDefinitions:function(a){this.layerDefinitions=this._params.layerDefs=null;this._updateDynamicLayers();a||this.refresh(!0)},setDisableClientCaching:function(a){this.disableClientCaching=a},setLayerTimeOptions:function(a,b){this.layerTimeOptions=a;this._params.layerTimeOptions=e._serializeTimeOptions(a);this._updateDynamicLayers();b||this.refresh(!0)},refresh:function(a){if(a)this.inherited(arguments);
else{var b=this.disableClientCaching;this.disableClientCaching=!0;this.inherited(arguments);this.disableClientCaching=b}},setLayerDrawingOptions:function(a,b){this.layerDrawingOptions=a;this._updateDynamicLayers();b||this.refresh(!0)},setDynamicLayerInfos:function(a,b){a&&0<a.length?(this.dynamicLayerInfos=a,this.visibleLayers=e._getDefaultVisibleLayers(a),this.onVisibleLayersChange(this.visibleLayers)):this.dynamicLayerInfos=this.layerDrawingOptions=null;this._updateDynamicLayers();b||this.refresh(!0)},
createDynamicLayerInfosFromLayerInfos:function(){var b=[],c;a.forEach(this.layerInfos,function(a){c=new x(a.toJson());c.source=new y({mapLayerId:a.id});b.push(c)});return b},_onDynamicLayersChange:function(){},_updateDynamicLayers:function(){if(this.dynamicLayerInfos&&0<this.dynamicLayerInfos.length||this.layerDrawingOptions&&0<this.layerDrawingOptions.length){if(!this.dynamicLayerInfos||0===this.dynamicLayerInfos.length)this.dynamicLayerInfos=this.createDynamicLayerInfosFromLayerInfos();var c;c=
this.dynamicLayerInfos;var d=[],f=this._map&&b.getScale(this._map),h=this.visibleLayers,k=f?e._getLayersForScale(f,c):h;a.forEach(c,function(b){if(!b.subLayerIds){var c,e=b.id;if(-1!==a.indexOf(h,e)&&-1!==a.indexOf(k,e)){c={id:e,name:b.name};c.source=b.source&&b.source.toJson();var f;this.layerDefinitions&&this.layerDefinitions[e]&&(f=this.layerDefinitions[e]);f&&(c.definitionExpression=f);var g;this.layerDrawingOptions&&this.layerDrawingOptions[e]&&(g=this.layerDrawingOptions[e]);g&&(c.drawingInfo=
g.toJson());var l;this.layerTimeOptions&&this.layerTimeOptions[e]&&(l=this.layerTimeOptions[e]);l&&(c.layerTimeOptions=l.toJson());c.minScale=b.minScale||0;c.maxScale=b.maxScale||0;d.push(c)}}},this);c=g.toJson(d);if(!this._params.dynamicLayers||this._params.dynamicLayers.length!==c.length||this._params.dynamicLayers!==c)this._params.dynamicLayers=c,this._onDynamicLayersChange(this._params.dynamicLayers)}else this._params.dynamicLayers?(this._params.dynamicLayers=null,this._onDynamicLayersChange(null)):
this._params.dynamicLayers=null},_onExtentChangeHandler:function(a,b,c){c&&this._updateDynamicLayers();this.inherited(arguments)},_setMap:function(a,b,c){this._map=a;this._updateDynamicLayers();return this.inherited(arguments)},onGDBVersionChange:function(){},setGDBVersion:function(a,b){this.gdbVersion=a;this._params.gdbVersion=a;this.onGDBVersionChange();b||this.refresh(!0)},exportMapImage:function(a,b){var c=f.defaults.map,c=n.mixin({size:c.width+","+c.height},this._params,a?a.toJson(this.normalization):
{},{f:"json"});delete c._ts;if(c.layerDefs){var d=c.layerDefs;delete c.layerDefs;n.mixin(c,{layerDefs:d})}this._exportMapImage(this._url.path+"/export",c,b)}})})},"esri/layers/DynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/dom-construct dojo/dom-style dojox/xml/parser dojox/gfx/matrix ../kernel ../config ../sniff ../request ../domUtils ./layer ./MapImage".split(" "),function(l,n,a,g,q,h,m,f,d,c,e,b,k,s){var p=d.defaults.map.zoomDuration;return l(k,
{declaredClass:"esri.layers.DynamicMapServiceLayer",_eventMap:{"map-image-export":["mapImage"]},constructor:function(b,c){this.useMapTime=c&&c.hasOwnProperty("useMapTime")?!!c.useMapTime:!0;var d=a.hitch;this._exportMapImageHandler=d(this,this._exportMapImageHandler);this._imgSrcFunc=d(this,this._imgSrcFunc);this._divAlphaImageFunc=d(this,this._divAlphaImageFunc);this._tileLoadHandler=d(this,this._tileLoadHandler);this._tileErrorHandler=d(this,this._tileErrorHandler);this.registerConnectEvents()},
opacity:1,isPNG32:!1,_setMap:function(a,b,d){this.inherited(arguments);this._map=a;var e=this._div=g.create("div",null,b),h=f._css.names,k={position:"absolute",width:a.width+"px",height:a.height+"px",overflow:"visible",opacity:this.opacity},l=c("ie"),m=n.connect,p=a.__visibleDelta;8===l&&delete k.opacity;"css-transforms"===a.navigationMode?(k[h.transform]=f._css.translate(p.x,p.y),q.set(e,k),this._left=p.x,this._top=p.y):(k.left="0px",k.top="0px",q.set(e,k),this._left=this._top=0);q.set(e,k);this._onResizeHandler_connect=
m(a,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=m(this,"onOpacityChange",this,"_opacityChangeHandler");this._img_loading=null;this._dragOrigin={x:0,y:0};this.evaluateSuspension();if(this.suspended&&!a.loaded)var s=n.connect(a,"onLoad",this,function(){n.disconnect(s);s=null;this.evaluateSuspension()});return e},_unsetMap:function(a,b){g.destroy(this._div);this._map=this._div=null;var c=n.disconnect;c(this._onResizeHandler_connect);c(this._opacityChangeHandler_connect);this._onResizeHandler_connect=
this._opacityChangeHandler_connect=null;this._fireUpdateEnd();this._toggleTime();clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();this.inherited(arguments)},_onResizeHandler:function(a,b,c){q.set(this._div,{width:b+"px",height:c+"px"});this._onExtentChangeHandler(a)},onSuspend:function(){this.inherited(arguments);this._fireUpdateEnd();this._toggleTime();b.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors()},onResume:function(){this.inherited(arguments);
var b=this._map;this._toggleTime();"css-transforms"===b.navigationMode&&(b=b.__visibleDelta,this._left=b.x,this._top=b.y,q.set(this._div,f._css.names.transform,f._css.translate(this._left,this._top)));this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(a.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0)}),0)},_enableDrawConnectors:function(){var a=n.connect,b=this._map;b&&(this._onPanHandler_connect=a(b,"onPan",this,"_onPanHandler"),this._onExtentChangeHandler_connect=
a(b,"onExtentChange",this,"_onExtentChangeHandler"),"css-transforms"===b.navigationMode?this._onScaleHandler_connect=a(b,"onScale",this,this._onScaleHandler):this._onZoomHandler_connect=a(b,"onZoom",this,"_onZoomHandler"))},_disableDrawConnectors:function(){var a=n.disconnect;a(this._onPanHandler_connect);a(this._onExtentChangeHandler_connect);a(this._onZoomHandler_connect);a(this._onScaleHandler_connect);this._onPanHandler_connect=this._onExtentChangeHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=
null},_toggleTime:function(){var a=this._map;this.timeInfo&&this.useMapTime&&a&&!this.suspended?(this._timeConnect||(this._timeConnect=n.connect(a,"onTimeExtentChange",this,this._onTimeExtentChangeHandler)),this._setTime(a.timeExtent)):(n.disconnect(this._timeConnect),this._timeConnect=null,this._setTime(null))},_setTime:function(a){this._params&&(this._params.time=a?a.toJson().join(","):null)},_onPanHandler:function(a,b){this._panDx=b.x;this._panDy=b.y;var c=this._dragOrigin,d=this._map.__visibleDelta,
e=this._img;e&&("css-transforms"===this._map.navigationMode?(this._left=d.x+b.x,this._top=d.y+b.y,q.set(this._div,f._css.names.transform,f._css.translate(this._left,this._top))):q.set(e,{left:c.x+b.x+"px",top:c.y+b.y+"px"}))},_onExtentChangeHandler:function(a,b,d){if(!this.suspended){clearTimeout(this._wakeTimer);this._wakeTimer=null;var e=this._map,h=this._img,k=h&&h.style,l=this._dragOrigin;if(b&&!d&&h&&(b.x!==this._panDx||b.y!==this._panDy))"css-transforms"===e.navigationMode?(b=e.__visibleDelta,
this._left=b.x,this._top=b.y,q.set(this._div,f._css.names.transform,f._css.translate(this._left,this._top))):q.set(h,{left:l.x+b.x+"px",top:l.y+b.y+"px"});h?(l.x=parseInt(k.left,10),l.y=parseInt(k.top,10)):l.x=l.y=0;"css-transforms"===e.navigationMode&&d&&h&&(q.set(h,f._css.names.transition,"none"),h._multiply=h._multiply?m.multiply(h._matrix,h._multiply):h._matrix);this._fireUpdateStart();if(d=this._img_loading)if(n.disconnect(d._onload_connect),n.disconnect(d._onerror_connect),n.disconnect(d._onabort_connect),
g.destroy(d),this._img_loading=null,d=this._jsonRequest){try{d.cancel()}catch(s){}this._jsonRequest=null}10<=this.version&&e.wrapAround180&&(a=a._normalize(!0));if(this.isPNG32)h=this._img_loading=g.create("div"),h.id=e.id+"_"+this.id+"_"+(new Date).getTime(),q.set(h,{position:"absolute",left:"0px",top:"0px",width:e.width+"px",height:e.height+"px"}),h=h.appendChild(g.create("div")),q.set(h,{opacity:0,width:e.width+"px",height:e.height+"px"}),this.getImageUrl(a,e.width,e.height,this._divAlphaImageFunc);
else{d=this._img_loading=g.create("img");b=f._css.names;var A=c("ie"),B={position:"absolute",width:e.width+"px",height:e.height+"px"};8===A&&(B.opacity=this.opacity);"css-transforms"===e.navigationMode?(B[b.transform]=f._css.translate(-this._left,-this._top),d._tdx=-this._left,d._tdy=-this._top,B[b.transition]=b.transformName+" "+p+"ms ease"):(B.left="0px",B.top="0px");d.id=e.id+"_"+this.id+"_"+(new Date).getTime();q.set(d,B);d._onload_connect=n.connect(d,"onload",this,"_onLoadHandler");d._onerror_connect=
n.connect(d,"onerror",this,"_onErrorHandler");d._onabort_connect=n.connect(d,"onabort",this,"_onErrorHandler");this._startRect={left:l.x,top:l.y,width:h?parseInt(k.width,10):e.width,height:h?parseInt(k.height,10):e.height,zoom:k&&k.zoom?parseFloat(k.zoom):1};this.getImageUrl(a,e.width,e.height,this._imgSrcFunc)}}},_onTimeExtentChangeHandler:function(a){this.suspended||(this._setTime(a),this.refresh(!0))},getImageUrl:function(a,b,c,d){},_imgSrcFunc:function(a){this._img_loading.src=a},_divAlphaImageFunc:function(a){q.set(this._img_loading,
"filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+a+"', sizingMethod\x3d'scale')");this._onLoadHandler({currentTarget:this._img_loading})},_onLoadHandler:function(a){a=a.currentTarget;var c=n.disconnect,d=this._map;c(a._onload_connect);c(a._onerror_connect);c(a._onabort_connect);!d||d.__panning||d.__zooming?g.destroy(a):(h.removeChildren(this._div),this._img=a,this._startRect={left:0,top:0,width:d.width,height:d.height,zoom:1},this._div.appendChild(a),this.suspended||b.show(this._div),
a._onload_connect=a._onerror_connect=a._onabort_connect=this._img_loading=null,a=this._dragOrigin,a.x=a.y=0,this.onUpdate());this._fireUpdateEnd()},_onErrorHandler:function(a){a=a.currentTarget;var b=n.disconnect;q.set(a,"visibility","hidden");b(a._onload_connect);b(a._onerror_connect);b(a._onabort_connect);a._onload_connect=a._onerror_connect=a._onabort_connect=null;a=Error("Unable to load image: "+a.src);this.onError(a);this._fireUpdateEnd(a)},setUseMapTime:function(a,b){this.useMapTime=a;this._toggleTime();
b||this.refresh(!0)},refresh:function(){this._map&&this._onExtentChangeHandler(this._map.extent)},_onScaleHandler:function(a,b){var c={},d=f._css.names,e=this._img;if(e){q.set(e,d.transition,b?"none":d.transformName+" "+p+"ms ease");e._matrix=a;a=e._multiply?m.multiply(a,e._multiply):a;if(e._tdx||e._tdy)a=m.multiply(a,{xx:1,xy:0,yx:0,yy:1,dx:e._tdx,dy:e._tdy});c[d.transform]=f._css.matrix(a);q.set(e,c)}},_onZoomHandler:function(a,b,d){a=this._startRect;var e=a.width*b,f=a.height*b,g=this._img,h=c("ie");
g&&(h&&8>h?q.set(g,{left:a.left-(e-a.width)*(d.x-a.left)/a.width+"px",top:a.top-(f-a.height)*(d.y-a.top)/a.height+"px",zoom:b*a.zoom}):q.set(g,{left:a.left-(e-a.width)*(d.x-a.left)/a.width+"px",top:a.top-(f-a.height)*(d.y-a.top)/a.height+"px",width:e+"px",height:f+"px"}))},_exportMapImage:function(a,b,c){var f=this._exportMapImageHandler;b.token=this._getToken();e({url:a,content:b,callbackParamName:"callback",load:function(a,b){f(a,b,c)},error:d.defaults.io.errorHandler})},_exportMapImageHandler:function(a,
b,c){a=new s(a);this.onMapImageExport(a);c&&c(a)},onMapImageExport:function(){},setOpacity:function(a){if(this.opacity!=a)this.onOpacityChange(this.opacity=a)},onOpacityChange:function(){},_opacityChangeHandler:function(a){var b=8===c("ie")?this._img:this._div;q.set(b,"opacity",a)}})})},"esri/layers/ImageParameters":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../lang ../layerUtils".split(" "),function(l,n,a,g,q,h,m,f){n=n(null,{declaredClass:"esri.layers.ImageParameters",
constructor:function(){this.layerDefinitions=[]},bbox:null,extent:null,width:null,height:null,dpi:null,format:null,imageSpatialReference:null,layerOption:null,layerIds:null,transparent:null,timeExtent:null,layerTimeOptions:null,toJson:function(a){this.bbox&&l.deprecated(this.declaredClass+" : Property 'bbox' deprecated. Use property 'extent'.");var c=this.bbox||this.extent,c=c&&a&&c._normalize(!0);a=this.layerOption;var e=c?c.spatialReference.wkid||g.toJson(c.spatialReference.toJson()):null,b=this.imageSpatialReference,
c={dpi:this.dpi,format:this.format,transparent:this.transparent,size:null!==this.width&&null!==this.height?this.width+","+this.height:null,bbox:c?c.xmin+","+c.ymin+","+c.xmax+","+c.ymax:null,bboxSR:e,layers:a?a+":"+this.layerIds.join(","):null,imageSR:b?b.wkid||g.toJson(b.toJson()):e};c.layerDefs=f._serializeLayerDefinitions(this.layerDefinitions);a=this.timeExtent;c.time=a?a.toJson().join(","):null;c.layerTimeOptions=f._serializeTimeOptions(this.layerTimeOptions);return m.filter(c,function(a){if(null!==
a)return!0})}});a.mixin(n,{LAYER_OPTION_SHOW:"show",LAYER_OPTION_HIDE:"hide",LAYER_OPTION_INCLUDE:"include",LAYER_OPTION_EXCLUDE:"exclude"});return n})},"esri/layers/DynamicLayerInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerInfo ./LayerMapSource ./LayerDataSource".split(" "),function(l,n,a,g,q,h,m,f){return l(h,{declaredClass:"esri.layers.DynamicLayerInfo",defaultVisibility:!0,parentLayerId:-1,maxScale:0,minScale:0,constructor:function(a){a&&(a.source?
a="mapLayer"===a.source.type?new m(a.source):new f(a.source):(a=new m,a.mapLayerId=this.id),this.source=a)},toJson:function(){var a=this.inherited(arguments);a.source=this.source&&this.source.toJson();return q.fixJson(a)}})})},"esri/layers/LayerMapSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource".split(" "),function(l,n,a,g,q,h){return l(h,{declaredClass:"esri.layers.LayerMapSource",type:"mapLayer",toJson:function(){return q.fixJson({type:"mapLayer",
mapLayerId:this.mapLayerId,gdbVersion:this.gdbVersion})}})})},"esri/layers/LayerSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(l,n,a,g){return l(null,{declaredClass:"esri.layers.LayerSource",type:null,constructor:function(a){a&&n.mixin(this,a)},toJson:function(){}})})},"esri/layers/LayerDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource ./TableDataSource ./QueryDataSource ./JoinDataSource ./RasterDataSource".split(" "),
function(l,n,a,g,q,h,m,f,d,c){return l(h,{declaredClass:"esri.layers.LayerDataSource",type:"dataLayer",constructor:function(a){if(a&&a.dataSource){switch(a.dataSource.type){case "table":a=new m(a.dataSource);break;case "queryTable":a=new f(a.dataSource);break;case "joinTable":a=new d(a.dataSource);break;case "raster":a=new c(a.dataSource);break;default:a=a.dataSource}this.dataSource=a}},toJson:function(){var a={type:"dataLayer",dataSource:this.dataSource&&this.dataSource.toJson()};return q.fixJson(a)}})})},
"esri/layers/TableDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),function(l,n,a,g,q,h){return l(h,{declaredClass:"esri.layers.TableDataSource",toJson:function(){return q.fixJson({type:"table",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName,gdbVersion:this.gdbVersion})}})})},"esri/layers/DataSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(l,n,a,g){return l(null,
{declaredClass:"esri.layers.DataSource",constructor:function(a){a&&n.mixin(this,a)},toJson:function(){}})})},"esri/layers/QueryDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ../SpatialReference".split(" "),function(l,n,a,g,q,h,m){return l(h,{declaredClass:"esri.layers.QueryDataSource",constructor:function(a){a&&(a.oidFields&&n.isString(a.oidFields)&&(this.oidFields=a.oidFields.split(",")),a.spatialReference&&(this.spatialReference=new m(a.spatialReference)))},
toJson:function(){var a={type:"queryTable",workspaceId:this.workspaceId,query:this.query,oidFields:this.oidFields&&this.oidFields.join(),spatialReference:this.spatialReference&&this.spatialReference.toJson()};if(this.geometryType){var d;d="point"===this.geometryType.toLowerCase()?"esriGeometryPoint":"multipoint"===this.geometryType.toLowerCase()?"esriGeometryMultipoint":"polyline"===this.geometryType.toLowerCase()?"esriGeometryPolyline":"polygon"===this.geometryType.toLowerCase()?"esriGeometryPolygon":
this.geometryType;a.geometryType=d}return q.fixJson(a)}})})},"esri/layers/JoinDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ./LayerMapSource ./TableDataSource ./QueryDataSource ./RasterDataSource".split(" "),function(l,n,a,g,q,h,m,f,d,c){var e=l(h,{declaredClass:"esri.layers.JoinDataSource",constructor:function(a){a&&(a.leftTableSource&&(this.leftTableSource=this._createLayerSource(a.leftTableSource)),a.rightTableSource&&(this.rightTableSource=
this._createLayerSource(a.rightTableSource)))},_createLayerSource:function(a){var g;if("mapLayer"===a.type)g=new m(a);else{g={type:"dataLayer"};var h;switch(a.dataSource.type){case "table":h=new f(a.dataSource);break;case "queryTable":h=new d(a.dataSource);break;case "joinTable":h=new e(a.dataSource);break;case "raster":h=new c(a.dataSource);break;default:h=a.dataSource}g.dataSource=h;g.toJson=function(){var a={type:"dataLayer",dataSource:h.toJson()};return q.fixJson(a)}}return g},toJson:function(){var a=
{type:"joinTable",leftTableSource:this.leftTableSource&&this.leftTableSource.toJson(),rightTableSource:this.rightTableSource&&this.rightTableSource.toJson(),leftTableKey:this.leftTableKey,rightTableKey:this.rightTableKey},c;c="left-outer-join"===this.joinType.toLowerCase()?"esriLeftOuterJoin":"left-inner-join"===this.joinType.toLowerCase()?"esriLeftInnerJoin":this.joinType;a.joinType=c;return q.fixJson(a)}});return e})},"esri/layers/RasterDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),
function(l,n,a,g,q,h){return l(h,{declaredClass:"esri.layers.RasterDataSource",toJson:function(){return q.fixJson({type:"raster",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName})}})})},"esri/layers/LayerDrawingOptions":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../renderers/jsonUtils ./LabelClass".split(" "),function(l,n,a,g,q,h,m,f){return l(null,{declaredClass:"esri.layers.LayerDrawingOptions",constructor:function(d){if(d&&(n.mixin(this,
d),d.renderer&&(this.renderer=m.fromJson(d.renderer)),d.labelingInfo&&0<d.labelingInfo.length)){this.labelingInfo=[];var c;a.forEach(d.labelingInfo,function(a){c=new f(a);this.labelingInfo.push(c)},this)}},toJson:function(){var d={renderer:this.renderer&&this.renderer.toJson(),transparency:this.transparency,scaleSymbols:this.scaleSymbols,showLabels:this.showLabels};this.labelingInfo&&0<this.labelingInfo.length&&(d.labelingInfo=[],a.forEach(this.labelingInfo,function(a){d.labelingInfo.push(a.toJson())}));
return h.fixJson(d)}})})},"url:app/components/legend/templates/Legend.html":'\x3cdiv\x3e\n  \x3cdiv data-dojo-attach-point\x3d"lgndContainer"\x3e\x3c/div\x3e\n\x3c/div\x3e\n',"url:app/templates/Application.html":'\x3cdiv class\x3d"app-main"\x3e\n  \x3cdiv id\x3d"map-view"\x3e\x3c/div\x3e\n  \x3cdiv id\x3d"legend-view"\x3e\x3c/div\x3e\n\x3c/div\x3e\n',"url:esri/dijit/Search/templates/Search.html":'\x3cdiv role\x3d"presentation" class\x3d"${theme}"\x3e\r\n  \x3cdiv role\x3d"presentation" class\x3d"${css.searchGroup}" data-dojo-attach-point\x3d"containerNode"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"expandNode" class\x3d"${css.searchExpandContainer}"\x3e\r\n      \x3cdiv class\x3d"${css.searchAnimateContainer}"\x3e\r\n        \x3cdiv role\x3d"button" title\x3d"${_i18n.widgets.Search.main.searchIn}" id\x3d"${id}_menu_button" class\x3d"${css.searchBtn} ${css.searchToggle}" tabindex\x3d"0" data-dojo-attach-point\x3d"sourcesBtnNode"\x3e\r\n          \x3cspan aria-hidden\x3d"true" role\x3d"presentation" class\x3d"${css.searchToggleIcon}"\x3e\x3c/span\x3e\x3cspan class\x3d"${css.searchSourceName}" data-dojo-attach-point\x3d"sourceNameNode"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"${css.searchInputGroup}"\x3e\r\n          \x3cform data-dojo-attach-point\x3d"formNode"\x3e\r\n            \x3cinput maxlength\x3d"${maxLength}" autocomplete\x3d"off" type\x3d"text" tabindex\x3d"0" class\x3d"${css.searchInput}" value\x3d"${value}" aria-haspopup\x3d"true" id\x3d"${id}_input" data-dojo-attach-point\x3d"inputNode" role\x3d"textbox"\x3e\r\n          \x3c/form\x3e\r\n          \x3cdiv role\x3d"button" class\x3d"${css.searchClear}" tabindex\x3d"0" data-dojo-attach-point\x3d"clearNode"\x3e\x3cspan aria-hidden\x3d"true" class\x3d"${css.searchClearIcon}"\x3e\x3c/span\x3e\x3cspan aria-hidden\x3d"true" class\x3d"${css.searchSpinner}"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv aria-labelledby\x3d"${id}_input" data-dojo-attach-point\x3d"suggestionsNode" class\x3d"${css.searchMenu} ${css.suggestionsMenu}" role\x3d"menu"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv role\x3d"button" title\x3d"${_i18n.widgets.Search.main.searchButtonTitle}" class\x3d"${css.searchBtn} ${css.searchSubmit}" tabindex\x3d"0" data-dojo-attach-point\x3d"submitNode"\x3e\r\n      \x3cspan aria-hidden\x3d"true" role\x3d"presentation" class\x3d"${css.searchIcon}"\x3e\x3c/span\x3e\r\n      \x3cspan class\x3d"${css.searchButtonText}"\x3e${_i18n.widgets.Search.main.searchButtonTitle}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv aria-labelledby\x3d"${id}_menu_button" data-dojo-attach-point\x3d"sourcesNode" class\x3d"${css.searchMenu} ${css.sourcesMenu}" role\x3d"menu"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"noResultsMenuNode" class\x3d"${css.searchMenu} ${css.searchNoResultsMenu}"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"${css.searchClearFloat}"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"*now":function(l){l(['dojo/i18n!*preload*dojo/nls/dojo*["ar","ca","cs","da","de","el","en-gb","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn"]'])}}});(function(){var l=this.require;l({cache:{}});!l.async&&l(["dojo"]);l.boot&&l.apply(null,l.boot)})();
//# sourceMappingURL=dojo.js.map